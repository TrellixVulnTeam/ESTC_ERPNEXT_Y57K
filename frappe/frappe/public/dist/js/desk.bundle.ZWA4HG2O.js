(()=>{var Ab=Object.create;var Dl=Object.defineProperty,$b=Object.defineProperties,Ob=Object.getOwnPropertyDescriptor,Ib=Object.getOwnPropertyDescriptors,Pb=Object.getOwnPropertyNames,Mf=Object.getOwnPropertySymbols,Rb=Object.getPrototypeOf,Df=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable;var Nf=(r,t,e)=>t in r?Dl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Vt=(r,t)=>{for(var e in t||(t={}))Df.call(t,e)&&Nf(r,e,t[e]);if(Mf)for(var e of Mf(t))Lb.call(t,e)&&Nf(r,e,t[e]);return r},Mr=(r,t)=>$b(r,Ib(t));var ia=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var xr=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var Mb=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Pb(t))!Df.call(r,i)&&i!==e&&Dl(r,i,{get:()=>t[i],enumerable:!(n=Ob(t,i))||n.enumerable});return r};var jr=(r,t,e)=>(e=r!=null?Ab(Rb(r)):{},Mb(t||!r||!r.__esModule?Dl(e,"default",{value:r,enumerable:!0}):e,r));var zf=xr((exports,module)=>{frappe.socketio={open_tasks:{},open_docs:[],emit_queue:[],init:function(port=3e3){if(!!window.io&&!frappe.boot.disable_async&&!frappe.socketio.socket){if(window.location.protocol=="https:"?frappe.socketio.socket=io.connect(frappe.socketio.get_host(port),{secure:!0}):window.location.protocol=="http:"?frappe.socketio.socket=io.connect(frappe.socketio.get_host(port)):window.location.protocol=="file:"&&(frappe.socketio.socket=io.connect(window.localStorage.server)),!frappe.socketio.socket){console.log("Unable to connect to "+frappe.socketio.get_host(port));return}frappe.socketio.socket.on("msgprint",function(r){frappe.msgprint(r)}),frappe.socketio.socket.on("eval_js",function(message){eval(message)}),frappe.socketio.socket.on("progress",function(r){r.progress&&(r.percent=flt(r.progress[0])/r.progress[1]*100),r.percent&&(r.percent==100?frappe.hide_progress():frappe.show_progress(r.title||__("Progress"),r.percent,100,r.description))}),frappe.socketio.setup_listeners(),frappe.socketio.setup_reconnect(),$(document).on("form-load form-rename",function(r,t){if(!t.is_new()){for(var e=0,n=frappe.socketio.open_docs.length;e<n;e++){var i=frappe.socketio.open_docs[e];if(t.doctype==i.doctype&&t.docname==i.name)return!1}frappe.socketio.doc_subscribe(t.doctype,t.docname)}}),$(document).on("form-refresh",function(r,t){t.is_new()||frappe.socketio.doc_open(t.doctype,t.docname)}),$(document).on("form-unload",function(r,t){t.is_new()||frappe.socketio.doc_close(t.doctype,t.docname)}),$(document).on("form-typing",function(r,t){frappe.socketio.form_typing(t.doctype,t.docname)}),$(document).on("form-stopped-typing",function(r,t){frappe.socketio.form_stopped_typing(t.doctype,t.docname)}),window.addEventListener("beforeunload",()=>{!cur_frm||cur_frm.is_new()||cur_frm.doc&&frappe.socketio.doc_close(cur_frm.doctype,cur_frm.docname)})}},get_host:function(r=3e3){var t=window.location.origin;if(window.dev_server){var e=t.split(":");r=frappe.boot.socketio_port||r.toString()||"3000",e.length>2&&(t=e[0]+":"+e[1]),t=t+":"+r}return t},subscribe:function(r,t){frappe.socketio.socket.emit("task_subscribe",r),frappe.socketio.socket.emit("progress_subscribe",r),frappe.socketio.open_tasks[r]=t},task_subscribe:function(r){frappe.socketio.socket.emit("task_subscribe",r)},task_unsubscribe:function(r){frappe.socketio.socket.emit("task_unsubscribe",r)},doc_subscribe:function(r,t){if(frappe.flags.doc_subscribe){console.log("throttled");return}frappe.flags.doc_subscribe=!0,setTimeout(function(){frappe.flags.doc_subscribe=!1},1e3),frappe.socketio.socket.emit("doc_subscribe",r,t),frappe.socketio.open_docs.push({doctype:r,docname:t})},doc_unsubscribe:function(r,t){frappe.socketio.socket.emit("doc_unsubscribe",r,t),frappe.socketio.open_docs=$.filter(frappe.socketio.open_docs,function(e){return e.doctype===r&&e.name===t?null:e})},doc_open:function(r,t){(!frappe.socketio.last_doc||frappe.socketio.last_doc[0]!=r||frappe.socketio.last_doc[1]!=t)&&(frappe.socketio.socket.emit("doc_open",r,t),frappe.socketio.last_doc&&frappe.socketio.doc_close(frappe.socketio.last_doc[0],frappe.socketio.last_doc[1])),frappe.socketio.last_doc=[r,t]},doc_close:function(r,t){frappe.socketio.socket.emit("doc_close",r,t),frappe.socketio.socket.emit("doc_typing_stopped",r,t)},form_typing:function(r,t){frappe.socketio.socket.emit("doc_typing",r,t)},form_stopped_typing:function(r,t){frappe.socketio.socket.emit("doc_typing_stopped",r,t)},setup_listeners:function(){frappe.socketio.socket.on("task_status_change",function(r){frappe.socketio.process_response(r,r.status.toLowerCase())}),frappe.socketio.socket.on("task_progress",function(r){frappe.socketio.process_response(r,"progress")})},setup_reconnect:function(){frappe.socketio.socket.on("connect",function(){setTimeout(function(){$.each(frappe.socketio.open_tasks,function(r,t){frappe.socketio.subscribe(r,t)}),$.each(frappe.socketio.open_docs,function(r){locals[r.doctype]&&locals[r.doctype][r.name]&&frappe.socketio.doc_subscribe(r.doctype,r.name)}),cur_frm&&cur_frm.doc&&frappe.socketio.doc_open(cur_frm.doc.doctype,cur_frm.doc.name)},5e3)})},process_response:function(r,t){if(!!r){var e=frappe.socketio.open_tasks[r.task_id];e[t]&&e[t](r),t==="success"&&e.callback&&e.callback(r),frappe.request.cleanup(e,r),e.always&&e.always(r),r.status_code&&r.status_code>400&&e.error&&e.error(r)}}};frappe.provide("frappe.realtime");frappe.realtime.on=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.on(r,t)};frappe.realtime.off=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.off(r,t)};frappe.realtime.publish=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.emit(r,t)}});var qf=xr((Ax,Wf)=>{"use strict";var Hf=Array.isArray,Uf=Object.keys,Bb=Object.prototype.hasOwnProperty;Wf.exports=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Hf(t),i=Hf(e),a,o,s;if(n&&i){if(o=t.length,o!=e.length)return!1;for(a=o;a--!==0;)if(!r(t[a],e[a]))return!1;return!0}if(n!=i)return!1;var u=t instanceof Date,h=e instanceof Date;if(u!=h)return!1;if(u&&h)return t.getTime()==e.getTime();var d=t instanceof RegExp,_=e instanceof RegExp;if(d!=_)return!1;if(d&&_)return t.toString()==e.toString();var g=Uf(t);if(o=g.length,o!==Uf(e).length)return!1;for(a=o;a--!==0;)if(!Bb.call(e,g[a]))return!1;for(a=o;a--!==0;)if(s=g[a],!r(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}});var Gf=xr((exports,module)=>{frappe.provide("frappe.model");$.extend(frappe.model,{no_value_type:["Section Break","Column Break","Tab Break","HTML","Table","Table MultiSelect","Button","Image","Fold","Heading"],layout_fields:["Section Break","Column Break","Tab Break","Fold"],std_fields_list:["name","owner","creation","modified","modified_by","_user_tags","_comments","_assign","_liked_by","docstatus","idx"],child_table_field_list:["parent","parenttype","parentfield"],core_doctypes_list:["DocType","DocField","DocPerm","User","Role","Has Role","Page","Module Def","Print Format","Report","Customize Form","Customize Form Field","Property Setter","Custom Field","Client Script"],std_fields:[{fieldname:"name",fieldtype:"Link",label:__("ID")},{fieldname:"owner",fieldtype:"Link",label:__("Created By"),options:"User"},{fieldname:"idx",fieldtype:"Int",label:__("Index")},{fieldname:"creation",fieldtype:"Date",label:__("Created On")},{fieldname:"modified",fieldtype:"Date",label:__("Last Updated On")},{fieldname:"modified_by",fieldtype:"Data",label:__("Last Updated By")},{fieldname:"_user_tags",fieldtype:"Data",label:__("Tags")},{fieldname:"_liked_by",fieldtype:"Data",label:__("Liked By")},{fieldname:"_comments",fieldtype:"Text",label:__("Comments")},{fieldname:"_assign",fieldtype:"Text",label:__("Assigned To")},{fieldname:"docstatus",fieldtype:"Int",label:__("Document Status")}],numeric_fieldtypes:["Int","Float","Currency","Percent","Duration"],std_fields_table:[{fieldname:"parent",fieldtype:"Data",label:__("Parent")}],table_fields:["Table","Table MultiSelect"],new_names:{},events:{},user_settings:{},init:function(){frappe.realtime.on("doc_update",function(r){frappe.views.ListView.trigger_list_update(r);var t=locals[r.doctype]&&locals[r.doctype][r.name];t&&(frappe.get_route()[0]==="Form"&&cur_frm.doc.doctype===t.doctype&&cur_frm.doc.name===t.name?!frappe.ui.form.is_saving&&r.modified!=cur_frm.doc.modified&&(t.__needs_refresh=!0,cur_frm.check_doctype_conflict()):t.__unsaved?t.__needs_refresh=!0:frappe.model.remove_from_locals(t.doctype,t.name))}),frappe.realtime.on("list_update",function(r){frappe.views.ListView.trigger_list_update(r)})},is_value_type:function(r){return typeof r=="object"&&(r=r.fieldtype),frappe.model.no_value_type.indexOf(r)===-1},is_non_std_field:function(r){return![...frappe.model.std_fields_list,...frappe.model.child_table_field_list].includes(r)},get_std_field:function(r,t=!1){var e=$.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),function(n){if(n.fieldname==r)return n});if(!e.length){if(t)return{fieldname:r};frappe.msgprint(__("Unknown Column: {0}",[r]))}return e[0]},get_from_localstorage:function(r){if(localStorage["_doctype:"+r])return JSON.parse(localStorage["_doctype:"+r])},set_in_localstorage:function(r,t){try{localStorage["_doctype:"+r]=JSON.stringify(t)}catch(e){console.warn("localStorage quota exceeded, clearing doctype cache"),frappe.model.clear_local_storage(),localStorage["_doctype:"+r]=JSON.stringify(t)}},clear_local_storage:function(){for(var r in localStorage)r.startsWith("_doctype:")&&localStorage.removeItem(r)},with_doctype:function(r,t,e){if(locals.DocType[r])return t&&t(),Promise.resolve();{let n=null,i=null,a=frappe.model.get_from_localstorage(r);return a&&(i=a.filter(o=>o.name===r)[0],i&&(n=i.modified)),frappe.call({method:"frappe.desk.form.load.getdoctype",type:"GET",args:{doctype:r,with_parent:1,cached_timestamp:n},async:e,callback:function(o){if(o.exc)throw frappe.msgprint(__("Unable to load: {0}",[__(r)])),"No doctype";o.message=="use_cache"?frappe.model.sync(i):frappe.model.set_in_localstorage(r,o.docs),frappe.model.init_doctype(r),o.user_settings&&(frappe.model.user_settings[r]=JSON.parse(o.user_settings),frappe.model.user_settings[r].updated_on=moment().toString()),t&&t(o)}})}},init_doctype:function(doctype){var meta=locals.DocType[doctype];meta.__list_js&&eval(meta.__list_js),meta.__custom_list_js&&eval(meta.__custom_list_js),meta.__calendar_js&&eval(meta.__calendar_js),meta.__map_js&&eval(meta.__map_js),meta.__tree_js&&eval(meta.__tree_js),meta.__templates&&$.extend(frappe.templates,meta.__templates)},with_doc:function(r,t,e){return new Promise(n=>{if(t||(t=r),locals[r]&&locals[r][t]&&frappe.model.get_docinfo(r,t))e&&e(t),n(frappe.get_doc(r,t));else return frappe.call({method:"frappe.desk.form.load.getdoc",type:"GET",args:{doctype:r,name:t},callback:function(i){e&&e(t,i),n(frappe.get_doc(r,t))}})})},get_docinfo:function(r,t){return frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]||null},set_docinfo:function(r,t,e,n){frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]&&(frappe.model.docinfo[r][t][e]=n)},get_shared:function(r,t){return frappe.model.get_docinfo(r,t).shared},get_server_module_name:function(r){var t=frappe.model.scrub(r),e=frappe.model.scrub(locals.DocType[r].module),n=frappe.boot.module_app[e];return n+"."+e+".doctype."+t+"."+t},scrub:function(r){return r.replace(/ /g,"_").toLowerCase()},unscrub:function(r){return __(r||"").replace(/-|_/g," ").replace(/\w*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},can_create:function(r){return frappe.boot.user.can_create.indexOf(r)!==-1},can_select:function(r){if(frappe.boot.user)return frappe.boot.user.can_select.indexOf(r)!==-1},can_read:function(r){if(frappe.boot.user)return frappe.boot.user.can_read.indexOf(r)!==-1},can_write:function(r){return frappe.boot.user.can_write.indexOf(r)!==-1},can_get_report:function(r){return frappe.boot.user.can_get_report.indexOf(r)!==-1},can_delete:function(r){return r?frappe.boot.user.can_delete.indexOf(r)!==-1:!1},can_cancel:function(r){return r?frappe.boot.user.can_cancel.indexOf(r)!==-1:!1},has_workflow:function(r){return frappe.get_list("Workflow",{document_type:r,is_active:1}).length},is_submittable:function(r){return r?locals.DocType[r]&&locals.DocType[r].is_submittable:!1},is_table:function(r){return r?locals.DocType[r]&&locals.DocType[r].istable:!1},is_single:function(r){return r?frappe.boot.single_types.indexOf(r)!=-1:!1},is_tree:function(r){return r?frappe.boot.treeviews.indexOf(r)!=-1:!1},is_fresh(r){return r&&r.__last_sync_on&&new Date-r.__last_sync_on<5e3},can_import:function(r,t,e=null){return e&&!e.allow_import?!1:frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].import===1:frappe.boot.user.can_import.indexOf(r)!==-1},can_export:function(r,t){return frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].export===1:frappe.boot.user.can_export.indexOf(r)!==-1},can_print:function(r,t){return t?t.perm[0].print===1:frappe.boot.user.can_print.indexOf(r)!==-1},can_email:function(r,t){return t?t.perm[0].email===1:frappe.boot.user.can_email.indexOf(r)!==-1},can_share:function(r,t){return t?t.perm[0].share===1:frappe.boot.user.can_share.indexOf(r)!==-1},can_set_user_permissions:function(r,t){return frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].set_user_permissions===1:frappe.boot.user.can_set_user_permissions.indexOf(r)!==-1},has_value:function(r,t,e){var n=locals[r]&&locals[r][t]&&locals[r][t][e],i=frappe.meta.get_docfield(r,e,t);if(frappe.model.table_fields.includes(i.fieldtype)){var a=!1;$.each(locals[i.options]||{},function(o,s){if(s.parent==t&&s.parenttype==r&&s.parentfield==i.fieldname)return a=!0,!1})}else var a=!is_null(n);return!!a},get_list:function(r,t){var e=locals[r]||locals[":"+r]||{};return $.isEmptyObject(e)?[]:frappe.utils.filter_dict(e,t)},get_value:function(r,t,e,n){if(n)frappe.call({method:"frappe.client.get_value",args:{doctype:r,fieldname:e,filters:t},callback:function(a){a.exc||n(a.message)}});else{if(typeof t=="string"&&locals[r]&&locals[r][t])return locals[r][t][e];var i=frappe.get_list(r,t);return i.length&&i[0]?i[0][e]:null}},set_value:function(r,t,e,n,i,a=!1){var o;$.isPlainObject(r)?(o=r,e=t,n=e):o=locals[r]&&locals[r][t];let s=e,u=[];return $.isPlainObject(s)||(s={},s[e]=n),$.each(s,(h,d)=>{o&&o[h]!==d?(o.__unedited&&!(!o[h]&&!d)&&(o.__unedited=!1),o[h]=d,u.push(()=>frappe.model.trigger(h,d,o,a))):in_list(["Link","Dynamic Link"],i)&&o&&u.push(()=>frappe.model.trigger(h,d,o,a))}),frappe.run_serially(u)},on:function(r,t,e){frappe.provide("frappe.model.events."+r),frappe.model.events[r][t]||(frappe.model.events[r][t]=[]),frappe.model.events[r][t].push(e)},trigger:function(r,t,e,n=!1){let i=[];function a(o){if(!!o)for(let s of o)!s||i.push(()=>{let u=s(r,t,e,n);return u&&u.then?u:frappe.after_server_call()})}return frappe.model.events[e.doctype]&&(a(frappe.model.events[e.doctype][r]),a(frappe.model.events[e.doctype]["*"])),frappe.run_serially(i)},get_doc:function(r,t){if(t||(t=r),$.isPlainObject(t)){var e=frappe.get_list(r,t);return e&&e.length?e[0]:null}return locals[r]?locals[r][t]:null},get_children:function(r,t,e,n){if($.isPlainObject(r))var i=r,n=e,e=t;else var i=frappe.get_doc(r,t);var a=i[e]||[];return n?frappe.utils.filter_dict(a,n):a},clear_table:function(r,t){for(var e=0,n=(r[t]||[]).length;e<n;e++){var i=r[t][e];delete locals[i.doctype][i.name]}r[t]=[]},remove_from_locals:function(r,t){this.clear_doc(r,t),frappe.views.formview[r]&&delete frappe.views.formview[r].frm.opendocs[t]},clear_doc:function(r,t){var e=locals[r]&&locals[r][t];if(!!e){var n=null;if(e.parenttype)var n=e.parent,i=e.parenttype,a=e.parentfield;if(delete locals[r][t],n){var o=locals[i][n],s=[],u=1;$.each(o[a],function(h,d){d.name!=t&&(s.push(d),d.idx=u,u++),o[a]=s})}}},get_no_copy_list:function(r){for(var t=["name","amended_from","amendment_date","cancel_reason"],e=frappe.get_doc("DocType",r).fields||[],n=0,i=e.length;n<i;n++){var a=e[n];cint(a.no_copy)&&t.push(a.fieldname)}return t},delete_doc:function(r,t,e){let n=t,i=frappe.get_meta(r).title_field;if(frappe.get_meta(r).autoname=="hash"&&i){let a=frappe.model.get_value(r,t,i);a&&(n=`${a} (${t})`)}frappe.confirm(__("Permanently delete {0}?",[n.bold()]),function(){return frappe.call({method:"frappe.client.delete",args:{doctype:r,name:t},callback:function(a,o){a.exc||(frappe.utils.play_sound("delete"),frappe.model.clear_doc(r,t),e&&e(a,o))}})})},rename_doc:function(r,t,e){let n=__("Merge with existing"),i=__("This cannot be undone"),a=n+" <b>("+i+")</b>";var o=new frappe.ui.Dialog({title:__("Rename {0}",[__(t)]),fields:[{label:__("New Name"),fieldname:"new_name",fieldtype:"Data",reqd:1,default:t},{label:a,fieldtype:"Check",fieldname:"merge"}]});o.set_primary_action(__("Rename"),function(){o.hide();var s=o.get_values();if(!!s)return frappe.call({method:"frappe.rename_doc",freeze:!0,freeze_message:"Updating related fields...",args:{doctype:r,old:t,new:s.new_name,merge:s.merge},btn:o.get_primary_btn(),callback:function(u,h){u.exc||($(document).trigger("rename",[r,t,u.message||s.new_name]),locals[r]&&locals[r][t]&&delete locals[r][t],o.hide(),e&&e(u.message))}})}),o.show()},round_floats_in:function(r,t){t||(t=frappe.meta.get_fieldnames(r.doctype,r.parent,{fieldtype:["in",["Currency","Float"]]}));for(var e=0,n=t.length;e<n;e++){var i=t[e];r[i]=flt(r[i],precision(i,r))}},validate_missing:function(r,t){r[t]||frappe.throw(__("Please specify")+": "+__(frappe.meta.get_label(r.doctype,t,r.parent||r.name)))},get_all_docs:function(r){var t=[r];for(var e in r)if($.isArray(r[e]))for(var n=r[e],i=0,a=n.length;i<a;i++)t.push(n[i]);return t},get_full_column_name:function(r,t){return r.includes("`tab")?r:"`tab"+t+"`.`"+r+"`"},is_numeric_field:function(r){if(!!r)return typeof r=="object"&&(r=r.fieldtype),frappe.model.numeric_fieldtypes.includes(r)}});frappe.get_doc=frappe.model.get_doc;frappe.get_children=frappe.model.get_children;frappe.get_list=frappe.model.get_list;var getchildren=function(r,t,e){var n=[];return $.each(locals[r]||{},function(i,a){a.parent===t&&a.parentfield===e&&n.push(a)}),n}});var Xf=xr((Bx,Yf)=>{(function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,n){return e<<n|e>>>32-n},rotr:function(e,n){return e<<32-n|e>>>n},endian:function(e){if(e.constructor==Number)return t.rotl(e,8)&16711935|t.rotl(e,24)&4278255360;for(var n=0;n<e.length;n++)e[n]=t.endian(e[n]);return e},randomBytes:function(e){for(var n=[];e>0;e--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(e){for(var n=[],i=0,a=0;i<e.length;i++,a+=8)n[a>>>5]|=e[i]<<24-a%32;return n},wordsToBytes:function(e){for(var n=[],i=0;i<e.length*32;i+=8)n.push(e[i>>>5]>>>24-i%32&255);return n},bytesToHex:function(e){for(var n=[],i=0;i<e.length;i++)n.push((e[i]>>>4).toString(16)),n.push((e[i]&15).toString(16));return n.join("")},hexToBytes:function(e){for(var n=[],i=0;i<e.length;i+=2)n.push(parseInt(e.substr(i,2),16));return n},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var a=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)i*8+o*6<=e.length*8?n.push(r.charAt(a>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],i=0,a=0;i<e.length;a=++i%4)a!=0&&n.push((r.indexOf(e.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<a*2|r.indexOf(e.charAt(i))>>>6-a*2);return n}};Yf.exports=t})()});var Fl=xr((jx,Kf)=>{var jl={utf8:{stringToBytes:function(r){return jl.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(jl.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],e=0;e<r.length;e++)t.push(r.charCodeAt(e)&255);return t},bytesToString:function(r){for(var t=[],e=0;e<r.length;e++)t.push(String.fromCharCode(r[e]));return t.join("")}}};Kf.exports=jl});var Qf=xr((Fx,Zf)=>{Zf.exports=function(r){return r!=null&&(Jf(r)||qb(r)||!!r._isBuffer)};function Jf(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function qb(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Jf(r.slice(0,0))}});var tp=xr((zx,ep)=>{(function(){var r=Xf(),t=Fl().utf8,e=Qf(),n=Fl().bin,i=function(a,o){a.constructor==String?o&&o.encoding==="binary"?a=n.stringToBytes(a):a=t.stringToBytes(a):e(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var s=r.bytesToWords(a),u=a.length*8,h=1732584193,d=-271733879,_=-1732584194,g=271733878,w=0;w<s.length;w++)s[w]=(s[w]<<8|s[w]>>>24)&16711935|(s[w]<<24|s[w]>>>8)&4278255360;s[u>>>5]|=128<<u%32,s[(u+64>>>9<<4)+14]=u;for(var C=i._ff,k=i._gg,E=i._hh,O=i._ii,w=0;w<s.length;w+=16){var N=h,m=d,y=_,b=g;h=C(h,d,_,g,s[w+0],7,-680876936),g=C(g,h,d,_,s[w+1],12,-389564586),_=C(_,g,h,d,s[w+2],17,606105819),d=C(d,_,g,h,s[w+3],22,-1044525330),h=C(h,d,_,g,s[w+4],7,-176418897),g=C(g,h,d,_,s[w+5],12,1200080426),_=C(_,g,h,d,s[w+6],17,-1473231341),d=C(d,_,g,h,s[w+7],22,-45705983),h=C(h,d,_,g,s[w+8],7,1770035416),g=C(g,h,d,_,s[w+9],12,-1958414417),_=C(_,g,h,d,s[w+10],17,-42063),d=C(d,_,g,h,s[w+11],22,-1990404162),h=C(h,d,_,g,s[w+12],7,1804603682),g=C(g,h,d,_,s[w+13],12,-40341101),_=C(_,g,h,d,s[w+14],17,-1502002290),d=C(d,_,g,h,s[w+15],22,1236535329),h=k(h,d,_,g,s[w+1],5,-165796510),g=k(g,h,d,_,s[w+6],9,-1069501632),_=k(_,g,h,d,s[w+11],14,643717713),d=k(d,_,g,h,s[w+0],20,-373897302),h=k(h,d,_,g,s[w+5],5,-701558691),g=k(g,h,d,_,s[w+10],9,38016083),_=k(_,g,h,d,s[w+15],14,-660478335),d=k(d,_,g,h,s[w+4],20,-405537848),h=k(h,d,_,g,s[w+9],5,568446438),g=k(g,h,d,_,s[w+14],9,-1019803690),_=k(_,g,h,d,s[w+3],14,-187363961),d=k(d,_,g,h,s[w+8],20,1163531501),h=k(h,d,_,g,s[w+13],5,-1444681467),g=k(g,h,d,_,s[w+2],9,-51403784),_=k(_,g,h,d,s[w+7],14,1735328473),d=k(d,_,g,h,s[w+12],20,-1926607734),h=E(h,d,_,g,s[w+5],4,-378558),g=E(g,h,d,_,s[w+8],11,-2022574463),_=E(_,g,h,d,s[w+11],16,1839030562),d=E(d,_,g,h,s[w+14],23,-35309556),h=E(h,d,_,g,s[w+1],4,-1530992060),g=E(g,h,d,_,s[w+4],11,1272893353),_=E(_,g,h,d,s[w+7],16,-155497632),d=E(d,_,g,h,s[w+10],23,-1094730640),h=E(h,d,_,g,s[w+13],4,681279174),g=E(g,h,d,_,s[w+0],11,-358537222),_=E(_,g,h,d,s[w+3],16,-722521979),d=E(d,_,g,h,s[w+6],23,76029189),h=E(h,d,_,g,s[w+9],4,-640364487),g=E(g,h,d,_,s[w+12],11,-421815835),_=E(_,g,h,d,s[w+15],16,530742520),d=E(d,_,g,h,s[w+2],23,-995338651),h=O(h,d,_,g,s[w+0],6,-198630844),g=O(g,h,d,_,s[w+7],10,1126891415),_=O(_,g,h,d,s[w+14],15,-1416354905),d=O(d,_,g,h,s[w+5],21,-57434055),h=O(h,d,_,g,s[w+12],6,1700485571),g=O(g,h,d,_,s[w+3],10,-1894986606),_=O(_,g,h,d,s[w+10],15,-1051523),d=O(d,_,g,h,s[w+1],21,-2054922799),h=O(h,d,_,g,s[w+8],6,1873313359),g=O(g,h,d,_,s[w+15],10,-30611744),_=O(_,g,h,d,s[w+6],15,-1560198380),d=O(d,_,g,h,s[w+13],21,1309151649),h=O(h,d,_,g,s[w+4],6,-145523070),g=O(g,h,d,_,s[w+11],10,-1120210379),_=O(_,g,h,d,s[w+2],15,718787259),d=O(d,_,g,h,s[w+9],21,-343485551),h=h+N>>>0,d=d+m>>>0,_=_+y>>>0,g=g+b>>>0}return r.endian([h,d,_,g])};i._ff=function(a,o,s,u,h,d,_){var g=a+(o&s|~o&u)+(h>>>0)+_;return(g<<d|g>>>32-d)+o},i._gg=function(a,o,s,u,h,d,_){var g=a+(o&u|s&~u)+(h>>>0)+_;return(g<<d|g>>>32-d)+o},i._hh=function(a,o,s,u,h,d,_){var g=a+(o^s^u)+(h>>>0)+_;return(g<<d|g>>>32-d)+o},i._ii=function(a,o,s,u,h,d,_){var g=a+(s^(o|~u))+(h>>>0)+_;return(g<<d|g>>>32-d)+o},i._blocksize=16,i._digestsize=16,ep.exports=function(a,o){if(a==null)throw new Error("Illegal argument "+a);var s=r.wordsToBytes(i(a,o));return o&&o.asBytes?s:o&&o.asString?n.bytesToString(s):r.bytesToHex(s)}})()});var np=xr((rp,oo)=>{(function(){function r(m){"use strict";var y={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,description:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,description:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},completeHTMLDocument:{defaultValue:!1,description:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,description:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,description:"Split adjacent blockquote blocks",type:"boolean"}};if(m===!1)return JSON.parse(JSON.stringify(y));var b={};for(var S in y)y.hasOwnProperty(S)&&(b[S]=y[S].defaultValue);return b}function t(){"use strict";var m=r(!0),y={};for(var b in m)m.hasOwnProperty(b)&&(y[b]=!0);return y}var e={},n={},i={},a=r(!0),o="vanilla",s={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:r(!0),allOn:t()};e.helper={},e.extensions={},e.setOption=function(m,y){"use strict";return a[m]=y,this},e.getOption=function(m){"use strict";return a[m]},e.getOptions=function(){"use strict";return a},e.resetOptions=function(){"use strict";a=r(!0)},e.setFlavor=function(m){"use strict";if(!s.hasOwnProperty(m))throw Error(m+" flavor was not found");e.resetOptions();var y=s[m];o=m;for(var b in y)y.hasOwnProperty(b)&&(a[b]=y[b])},e.getFlavor=function(){"use strict";return o},e.getFlavorOptions=function(m){"use strict";if(s.hasOwnProperty(m))return s[m]},e.getDefaultOptions=function(m){"use strict";return r(m)},e.subParser=function(m,y){"use strict";if(e.helper.isString(m))if(typeof y!="undefined")n[m]=y;else{if(n.hasOwnProperty(m))return n[m];throw Error("SubParser named "+m+" not registered!")}},e.extension=function(m,y){"use strict";if(!e.helper.isString(m))throw Error("Extension 'name' must be a string");if(m=e.helper.stdExtName(m),e.helper.isUndefined(y)){if(!i.hasOwnProperty(m))throw Error("Extension named "+m+" is not registered!");return i[m]}else{typeof y=="function"&&(y=y()),e.helper.isArray(y)||(y=[y]);var b=u(y,m);if(b.valid)i[m]=y;else throw Error(b.error)}},e.getAllExtensions=function(){"use strict";return i},e.removeExtension=function(m){"use strict";delete i[m]},e.resetExtensions=function(){"use strict";i={}};function u(m,y){"use strict";var b=y?"Error in "+y+" extension->":"Error in unnamed extension",S={valid:!0,error:""};e.helper.isArray(m)||(m=[m]);for(var A=0;A<m.length;++A){var I=b+" sub-extension "+A+": ",T=m[A];if(typeof T!="object")return S.valid=!1,S.error=I+"must be an object, but "+typeof T+" given",S;if(!e.helper.isString(T.type))return S.valid=!1,S.error=I+'property "type" must be a string, but '+typeof T.type+" given",S;var R=T.type=T.type.toLowerCase();if(R==="language"&&(R=T.type="lang"),R==="html"&&(R=T.type="output"),R!=="lang"&&R!=="output"&&R!=="listener")return S.valid=!1,S.error=I+"type "+R+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',S;if(R==="listener"){if(e.helper.isUndefined(T.listeners))return S.valid=!1,S.error=I+'. Extensions of type "listener" must have a property called "listeners"',S}else if(e.helper.isUndefined(T.filter)&&e.helper.isUndefined(T.regex))return S.valid=!1,S.error=I+R+' extensions must define either a "regex" property or a "filter" method',S;if(T.listeners){if(typeof T.listeners!="object")return S.valid=!1,S.error=I+'"listeners" property must be an object but '+typeof T.listeners+" given",S;for(var B in T.listeners)if(T.listeners.hasOwnProperty(B)&&typeof T.listeners[B]!="function")return S.valid=!1,S.error=I+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+B+" must be a function but "+typeof T.listeners[B]+" given",S}if(T.filter){if(typeof T.filter!="function")return S.valid=!1,S.error=I+'"filter" must be a function, but '+typeof T.filter+" given",S}else if(T.regex){if(e.helper.isString(T.regex)&&(T.regex=new RegExp(T.regex,"g")),!(T.regex instanceof RegExp))return S.valid=!1,S.error=I+'"regex" property must either be a string or a RegExp object, but '+typeof T.regex+" given",S;if(e.helper.isUndefined(T.replace))return S.valid=!1,S.error=I+'"regex" extensions must implement a replace string or function',S}}return S}e.validateExtension=function(m){"use strict";var y=u(m,null);return y.valid?!0:(console.warn(y.error),!1)},e.hasOwnProperty("helper")||(e.helper={}),e.helper.isString=function(m){"use strict";return typeof m=="string"||m instanceof String},e.helper.isFunction=function(m){"use strict";var y={};return m&&y.toString.call(m)==="[object Function]"},e.helper.isArray=function(m){"use strict";return Array.isArray(m)},e.helper.isUndefined=function(m){"use strict";return typeof m=="undefined"},e.helper.forEach=function(m,y){"use strict";if(e.helper.isUndefined(m))throw new Error("obj param is required");if(e.helper.isUndefined(y))throw new Error("callback param is required");if(!e.helper.isFunction(y))throw new Error("callback param must be a function/closure");if(typeof m.forEach=="function")m.forEach(y);else if(e.helper.isArray(m))for(var b=0;b<m.length;b++)y(m[b],b,m);else if(typeof m=="object")for(var S in m)m.hasOwnProperty(S)&&y(m[S],S,m);else throw new Error("obj does not seem to be an array or an iterable object")},e.helper.stdExtName=function(m){"use strict";return m.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function h(m,y){"use strict";var b=y.charCodeAt(0);return"\xA8E"+b+"E"}e.helper.escapeCharactersCallback=h,e.helper.escapeCharacters=function(m,y,b){"use strict";var S="(["+y.replace(/([\[\]\\])/g,"\\$1")+"])";b&&(S="\\\\"+S);var A=new RegExp(S,"g");return m=m.replace(A,h),m},e.helper.unescapeHTMLEntities=function(m){"use strict";return m.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var d=function(m,y,b,S){"use strict";var A=S||"",I=A.indexOf("g")>-1,T=new RegExp(y+"|"+b,"g"+A.replace(/g/g,"")),R=new RegExp(y,A.replace(/g/g,"")),B=[],F,L,j,P,z;do for(F=0;j=T.exec(m);)if(R.test(j[0]))F++||(L=T.lastIndex,P=L-j[0].length);else if(F&&!--F){z=j.index+j[0].length;var Y={left:{start:P,end:L},match:{start:L,end:j.index},right:{start:j.index,end:z},wholeMatch:{start:P,end:z}};if(B.push(Y),!I)return B}while(F&&(T.lastIndex=L));return B};e.helper.matchRecursiveRegExp=function(m,y,b,S){"use strict";for(var A=d(m,y,b,S),I=[],T=0;T<A.length;++T)I.push([m.slice(A[T].wholeMatch.start,A[T].wholeMatch.end),m.slice(A[T].match.start,A[T].match.end),m.slice(A[T].left.start,A[T].left.end),m.slice(A[T].right.start,A[T].right.end)]);return I},e.helper.replaceRecursiveRegExp=function(m,y,b,S,A){"use strict";if(!e.helper.isFunction(y)){var I=y;y=function(){return I}}var T=d(m,b,S,A),R=m,B=T.length;if(B>0){var F=[];T[0].wholeMatch.start!==0&&F.push(m.slice(0,T[0].wholeMatch.start));for(var L=0;L<B;++L)F.push(y(m.slice(T[L].wholeMatch.start,T[L].wholeMatch.end),m.slice(T[L].match.start,T[L].match.end),m.slice(T[L].left.start,T[L].left.end),m.slice(T[L].right.start,T[L].right.end))),L<B-1&&F.push(m.slice(T[L].wholeMatch.end,T[L+1].wholeMatch.start));T[B-1].wholeMatch.end<m.length&&F.push(m.slice(T[B-1].wholeMatch.end)),R=F.join("")}return R},e.helper.regexIndexOf=function(m,y,b){"use strict";if(!e.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(y instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var S=m.substring(b||0).search(y);return S>=0?S+(b||0):S},e.helper.splitAtIndex=function(m,y){"use strict";if(!e.helper.isString(m))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[m.substring(0,y),m.substring(y)]},e.helper.encodeEmailAddress=function(m){"use strict";var y=[function(b){return"&#"+b.charCodeAt(0)+";"},function(b){return"&#x"+b.charCodeAt(0).toString(16)+";"},function(b){return b}];return m=m.replace(/./g,function(b){if(b==="@")b=y[Math.floor(Math.random()*2)](b);else{var S=Math.random();b=S>.9?y[2](b):S>.45?y[1](b):y[0](b)}return b}),m},e.helper.padEnd=function(y,b,S){"use strict";return b=b>>0,S=String(S||" "),y.length>b?String(y):(b=b-y.length,b>S.length&&(S+=S.repeat(b/S.length)),String(y)+S.slice(0,b))},typeof console=="undefined"&&(console={warn:function(m){"use strict";alert(m)},log:function(m){"use strict";alert(m)},error:function(m){"use strict";throw m}}),e.helper.regexes={asteriskDashAndColon:/([*_:~])/g},e.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}","100":"\u{1F4AF}","1234":"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},e.Converter=function(m){"use strict";var y={},b=[],S=[],A={},I=o,T={parsed:{},raw:"",format:""};R();function R(){m=m||{};for(var P in a)a.hasOwnProperty(P)&&(y[P]=a[P]);if(typeof m=="object")for(var z in m)m.hasOwnProperty(z)&&(y[z]=m[z]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof m+" was passed instead.");y.extensions&&e.helper.forEach(y.extensions,B)}function B(P,z){if(z=z||null,e.helper.isString(P))if(P=e.helper.stdExtName(P),z=P,e.extensions[P]){console.warn("DEPRECATION WARNING: "+P+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),F(e.extensions[P],P);return}else if(!e.helper.isUndefined(i[P]))P=i[P];else throw Error('Extension "'+P+'" could not be loaded. It was either not found or is not a valid extension.');typeof P=="function"&&(P=P()),e.helper.isArray(P)||(P=[P]);var Y=u(P,z);if(!Y.valid)throw Error(Y.error);for(var ce=0;ce<P.length;++ce){switch(P[ce].type){case"lang":b.push(P[ce]);break;case"output":S.push(P[ce]);break}if(P[ce].hasOwnProperty("listeners"))for(var re in P[ce].listeners)P[ce].listeners.hasOwnProperty(re)&&L(re,P[ce].listeners[re])}}function F(P,z){typeof P=="function"&&(P=P(new e.Converter)),e.helper.isArray(P)||(P=[P]);var Y=u(P,z);if(!Y.valid)throw Error(Y.error);for(var ce=0;ce<P.length;++ce)switch(P[ce].type){case"lang":b.push(P[ce]);break;case"output":S.push(P[ce]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function L(P,z){if(!e.helper.isString(P))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof P+" given");if(typeof z!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof z+" given");A.hasOwnProperty(P)||(A[P]=[]),A[P].push(z)}function j(P){var z=P.match(/^\s*/)[0].length,Y=new RegExp("^\\s{0,"+z+"}","gm");return P.replace(Y,"")}this._dispatch=function(z,Y,ce,re){if(A.hasOwnProperty(z))for(var Z=0;Z<A[z].length;++Z){var me=A[z][Z](z,Y,this,ce,re);me&&typeof me!="undefined"&&(Y=me)}return Y},this.listen=function(P,z){return L(P,z),this},this.makeHtml=function(P){if(!P)return P;var z={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:b,outputModifiers:S,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return P=P.replace(/¨/g,"\xA8T"),P=P.replace(/\$/g,"\xA8D"),P=P.replace(/\r\n/g,`
`),P=P.replace(/\r/g,`
`),P=P.replace(/\u00A0/g,"&nbsp;"),y.smartIndentationFix&&(P=j(P)),P=`

`+P+`

`,P=e.subParser("detab")(P,y,z),P=P.replace(/^[ \t]+$/mg,""),e.helper.forEach(b,function(Y){P=e.subParser("runExtension")(Y,P,y,z)}),P=e.subParser("metadata")(P,y,z),P=e.subParser("hashPreCodeTags")(P,y,z),P=e.subParser("githubCodeBlocks")(P,y,z),P=e.subParser("hashHTMLBlocks")(P,y,z),P=e.subParser("hashCodeTags")(P,y,z),P=e.subParser("stripLinkDefinitions")(P,y,z),P=e.subParser("blockGamut")(P,y,z),P=e.subParser("unhashHTMLSpans")(P,y,z),P=e.subParser("unescapeSpecialChars")(P,y,z),P=P.replace(/¨D/g,"$$"),P=P.replace(/¨T/g,"\xA8"),P=e.subParser("completeHTMLDocument")(P,y,z),e.helper.forEach(S,function(Y){P=e.subParser("runExtension")(Y,P,y,z)}),T=z.metadata,P},this.makeMarkdown=this.makeMd=function(P,z){if(P=P.replace(/\r\n/g,`
`),P=P.replace(/\r/g,`
`),P=P.replace(/>[ \t]+</,">\xA8NBSP;<"),!z)if(window&&window.document)z=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var Y=z.createElement("div");Y.innerHTML=P;var ce={preList:ne(Y)};ke(Y);for(var re=Y.childNodes,Z="",me=0;me<re.length;me++)Z+=e.subParser("makeMarkdown.node")(re[me],ce);function ke(oe){for(var ge=0;ge<oe.childNodes.length;++ge){var ve=oe.childNodes[ge];ve.nodeType===3?/\S/.test(ve.nodeValue)?(ve.nodeValue=ve.nodeValue.split(`
`).join(" "),ve.nodeValue=ve.nodeValue.replace(/(\s)+/g,"$1")):(oe.removeChild(ve),--ge):ve.nodeType===1&&ke(ve)}}function ne(oe){for(var ge=oe.querySelectorAll("pre"),ve=[],pe=0;pe<ge.length;++pe)if(ge[pe].childElementCount===1&&ge[pe].firstChild.tagName.toLowerCase()==="code"){var he=ge[pe].firstChild.innerHTML.trim(),Ae=ge[pe].firstChild.getAttribute("data-language")||"";if(Ae==="")for(var Me=ge[pe].firstChild.className.split(" "),De=0;De<Me.length;++De){var Je=Me[De].match(/^language-(.+)$/);if(Je!==null){Ae=Je[1];break}}he=e.helper.unescapeHTMLEntities(he),ve.push(he),ge[pe].outerHTML='<precode language="'+Ae+'" precodenum="'+pe.toString()+'"></precode>'}else ve.push(ge[pe].innerHTML),ge[pe].innerHTML="",ge[pe].setAttribute("prenum",pe.toString());return ve}return Z},this.setOption=function(P,z){y[P]=z},this.getOption=function(P){return y[P]},this.getOptions=function(){return y},this.addExtension=function(P,z){z=z||null,B(P,z)},this.useExtension=function(P){B(P)},this.setFlavor=function(P){if(!s.hasOwnProperty(P))throw Error(P+" flavor was not found");var z=s[P];I=P;for(var Y in z)z.hasOwnProperty(Y)&&(y[Y]=z[Y])},this.getFlavor=function(){return I},this.removeExtension=function(P){e.helper.isArray(P)||(P=[P]);for(var z=0;z<P.length;++z){for(var Y=P[z],ce=0;ce<b.length;++ce)b[ce]===Y&&b[ce].splice(ce,1);for(var re=0;re<S.length;++ce)S[re]===Y&&S[re].splice(ce,1)}},this.getAllExtensions=function(){return{language:b,output:S}},this.getMetadata=function(P){return P?T.raw:T.parsed},this.getMetadataFormat=function(){return T.format},this._setMetadataPair=function(P,z){T.parsed[P]=z},this._setMetadataFormat=function(P){T.format=P},this._setMetadataRaw=function(P){T.raw=P}},e.subParser("anchors",function(m,y,b){"use strict";m=b.converter._dispatch("anchors.before",m,y,b);var S=function(A,I,T,R,B,F,L){if(e.helper.isUndefined(L)&&(L=""),T=T.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)R="";else if(!R)if(T||(T=I.toLowerCase().replace(/ ?\n/g," ")),R="#"+T,!e.helper.isUndefined(b.gUrls[T]))R=b.gUrls[T],e.helper.isUndefined(b.gTitles[T])||(L=b.gTitles[T]);else return A;R=R.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var j='<a href="'+R+'"';return L!==""&&L!==null&&(L=L.replace(/"/g,"&quot;"),L=L.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),j+=' title="'+L+'"'),y.openLinksInNewWindow&&!/^#/.test(R)&&(j+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),j+=">"+I+"</a>",j};return m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,S),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,S),m=m.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,S),m=m.replace(/\[([^\[\]]+)]()()()()()/g,S),y.ghMentions&&(m=m.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,I,T,R,B){if(T==="\\")return I+R;if(!e.helper.isString(y.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var F=y.ghMentionsLink.replace(/\{u}/g,B),L="";return y.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="\xA8E95Eblank"'),I+'<a href="'+F+'"'+L+">"+R+"</a>"})),m=b.converter._dispatch("anchors.after",m,y,b),m});var _=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,g=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,w=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,C=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,k=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,E=function(m){"use strict";return function(y,b,S,A,I,T,R){S=S.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var B=S,F="",L="",j=b||"",P=R||"";return/^www\./i.test(S)&&(S=S.replace(/^www\./i,"http://www.")),m.excludeTrailingPunctuationFromURLs&&T&&(F=T),m.openLinksInNewWindow&&(L=' rel="noopener noreferrer" target="\xA8E95Eblank"'),j+'<a href="'+S+'"'+L+">"+B+"</a>"+F+P}},O=function(m,y){"use strict";return function(b,S,A){var I="mailto:";return S=S||"",A=e.subParser("unescapeSpecialChars")(A,m,y),m.encodeEmails?(I=e.helper.encodeEmailAddress(I+A),A=e.helper.encodeEmailAddress(A)):I=I+A,S+'<a href="'+I+'">'+A+"</a>"}};e.subParser("autoLinks",function(m,y,b){"use strict";return m=b.converter._dispatch("autoLinks.before",m,y,b),m=m.replace(w,E(y)),m=m.replace(k,O(y,b)),m=b.converter._dispatch("autoLinks.after",m,y,b),m}),e.subParser("simplifiedAutoLinks",function(m,y,b){"use strict";return y.simplifiedAutoLink&&(m=b.converter._dispatch("simplifiedAutoLinks.before",m,y,b),y.excludeTrailingPunctuationFromURLs?m=m.replace(g,E(y)):m=m.replace(_,E(y)),m=m.replace(C,O(y,b)),m=b.converter._dispatch("simplifiedAutoLinks.after",m,y,b)),m}),e.subParser("blockGamut",function(m,y,b){"use strict";return m=b.converter._dispatch("blockGamut.before",m,y,b),m=e.subParser("blockQuotes")(m,y,b),m=e.subParser("headers")(m,y,b),m=e.subParser("horizontalRule")(m,y,b),m=e.subParser("lists")(m,y,b),m=e.subParser("codeBlocks")(m,y,b),m=e.subParser("tables")(m,y,b),m=e.subParser("hashHTMLBlocks")(m,y,b),m=e.subParser("paragraphs")(m,y,b),m=b.converter._dispatch("blockGamut.after",m,y,b),m}),e.subParser("blockQuotes",function(m,y,b){"use strict";m=b.converter._dispatch("blockQuotes.before",m,y,b),m=m+`

`;var S=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return y.splitAdjacentBlockquotes&&(S=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),m=m.replace(S,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/¨0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=e.subParser("githubCodeBlocks")(A,y,b),A=e.subParser("blockGamut")(A,y,b),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(I,T){var R=T;return R=R.replace(/^  /mg,"\xA80"),R=R.replace(/¨0/g,""),R}),e.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,y,b)}),m=b.converter._dispatch("blockQuotes.after",m,y,b),m}),e.subParser("codeBlocks",function(m,y,b){"use strict";m=b.converter._dispatch("codeBlocks.before",m,y,b),m+="\xA80";var S=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return m=m.replace(S,function(A,I,T){var R=I,B=T,F=`
`;return R=e.subParser("outdent")(R,y,b),R=e.subParser("encodeCode")(R,y,b),R=e.subParser("detab")(R,y,b),R=R.replace(/^\n+/g,""),R=R.replace(/\n+$/g,""),y.omitExtraWLInCodeBlocks&&(F=""),R="<pre><code>"+R+F+"</code></pre>",e.subParser("hashBlock")(R,y,b)+B}),m=m.replace(/¨0/,""),m=b.converter._dispatch("codeBlocks.after",m,y,b),m}),e.subParser("codeSpans",function(m,y,b){"use strict";return m=b.converter._dispatch("codeSpans.before",m,y,b),typeof m=="undefined"&&(m=""),m=m.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(S,A,I,T){var R=T;return R=R.replace(/^([ \t]*)/g,""),R=R.replace(/[ \t]*$/g,""),R=e.subParser("encodeCode")(R,y,b),R=A+"<code>"+R+"</code>",R=e.subParser("hashHTMLSpans")(R,y,b),R}),m=b.converter._dispatch("codeSpans.after",m,y,b),m}),e.subParser("completeHTMLDocument",function(m,y,b){"use strict";if(!y.completeHTMLDocument)return m;m=b.converter._dispatch("completeHTMLDocument.before",m,y,b);var S="html",A=`<!DOCTYPE HTML>
`,I="",T=`<meta charset="utf-8">
`,R="",B="";typeof b.metadata.parsed.doctype!="undefined"&&(A="<!DOCTYPE "+b.metadata.parsed.doctype+`>
`,S=b.metadata.parsed.doctype.toString().toLowerCase(),(S==="html"||S==="html5")&&(T='<meta charset="utf-8">'));for(var F in b.metadata.parsed)if(b.metadata.parsed.hasOwnProperty(F))switch(F.toLowerCase()){case"doctype":break;case"title":I="<title>"+b.metadata.parsed.title+`</title>
`;break;case"charset":S==="html"||S==="html5"?T='<meta charset="'+b.metadata.parsed.charset+`">
`:T='<meta name="charset" content="'+b.metadata.parsed.charset+`">
`;break;case"language":case"lang":R=' lang="'+b.metadata.parsed[F]+'"',B+='<meta name="'+F+'" content="'+b.metadata.parsed[F]+`">
`;break;default:B+='<meta name="'+F+'" content="'+b.metadata.parsed[F]+`">
`}return m=A+"<html"+R+`>
<head>
`+I+T+B+`</head>
<body>
`+m.trim()+`
</body>
</html>`,m=b.converter._dispatch("completeHTMLDocument.after",m,y,b),m}),e.subParser("detab",function(m,y,b){"use strict";return m=b.converter._dispatch("detab.before",m,y,b),m=m.replace(/\t(?=\t)/g,"    "),m=m.replace(/\t/g,"\xA8A\xA8B"),m=m.replace(/¨B(.+?)¨A/g,function(S,A){for(var I=A,T=4-I.length%4,R=0;R<T;R++)I+=" ";return I}),m=m.replace(/¨A/g,"    "),m=m.replace(/¨B/g,""),m=b.converter._dispatch("detab.after",m,y,b),m}),e.subParser("ellipsis",function(m,y,b){"use strict";return m=b.converter._dispatch("ellipsis.before",m,y,b),m=m.replace(/\.\.\./g,"\u2026"),m=b.converter._dispatch("ellipsis.after",m,y,b),m}),e.subParser("emoji",function(m,y,b){"use strict";if(!y.emoji)return m;m=b.converter._dispatch("emoji.before",m,y,b);var S=/:([\S]+?):/g;return m=m.replace(S,function(A,I){return e.helper.emojis.hasOwnProperty(I)?e.helper.emojis[I]:A}),m=b.converter._dispatch("emoji.after",m,y,b),m}),e.subParser("encodeAmpsAndAngles",function(m,y,b){"use strict";return m=b.converter._dispatch("encodeAmpsAndAngles.before",m,y,b),m=m.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),m=m.replace(/<(?![a-z\/?$!])/gi,"&lt;"),m=m.replace(/</g,"&lt;"),m=m.replace(/>/g,"&gt;"),m=b.converter._dispatch("encodeAmpsAndAngles.after",m,y,b),m}),e.subParser("encodeBackslashEscapes",function(m,y,b){"use strict";return m=b.converter._dispatch("encodeBackslashEscapes.before",m,y,b),m=m.replace(/\\(\\)/g,e.helper.escapeCharactersCallback),m=m.replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,e.helper.escapeCharactersCallback),m=b.converter._dispatch("encodeBackslashEscapes.after",m,y,b),m}),e.subParser("encodeCode",function(m,y,b){"use strict";return m=b.converter._dispatch("encodeCode.before",m,y,b),m=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,e.helper.escapeCharactersCallback),m=b.converter._dispatch("encodeCode.after",m,y,b),m}),e.subParser("escapeSpecialCharsWithinTagAttributes",function(m,y,b){"use strict";m=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",m,y,b);var S=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return m=m.replace(S,function(I){return I.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),m=m.replace(A,function(I){return I.replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),m=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",m,y,b),m}),e.subParser("githubCodeBlocks",function(m,y,b){"use strict";return y.ghCodeBlocks?(m=b.converter._dispatch("githubCodeBlocks.before",m,y,b),m+="\xA80",m=m.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(S,A,I,T){var R=y.omitExtraWLInCodeBlocks?"":`
`;return T=e.subParser("encodeCode")(T,y,b),T=e.subParser("detab")(T,y,b),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),T="<pre><code"+(I?' class="'+I+" language-"+I+'"':"")+">"+T+R+"</code></pre>",T=e.subParser("hashBlock")(T,y,b),`

\xA8G`+(b.ghCodeBlocks.push({text:S,codeblock:T})-1)+`G

`}),m=m.replace(/¨0/,""),b.converter._dispatch("githubCodeBlocks.after",m,y,b)):m}),e.subParser("hashBlock",function(m,y,b){"use strict";return m=b.converter._dispatch("hashBlock.before",m,y,b),m=m.replace(/(^\n+|\n+$)/g,""),m=`

\xA8K`+(b.gHtmlBlocks.push(m)-1)+`K

`,m=b.converter._dispatch("hashBlock.after",m,y,b),m}),e.subParser("hashCodeTags",function(m,y,b){"use strict";m=b.converter._dispatch("hashCodeTags.before",m,y,b);var S=function(A,I,T,R){var B=T+e.subParser("encodeCode")(I,y,b)+R;return"\xA8C"+(b.gHtmlSpans.push(B)-1)+"C"};return m=e.helper.replaceRecursiveRegExp(m,S,"<code\\b[^>]*>","</code>","gim"),m=b.converter._dispatch("hashCodeTags.after",m,y,b),m}),e.subParser("hashElement",function(m,y,b){"use strict";return function(S,A){var I=A;return I=I.replace(/\n\n/g,`
`),I=I.replace(/^\n/,""),I=I.replace(/\n+$/g,""),I=`

\xA8K`+(b.gHtmlBlocks.push(I)-1)+`K

`,I}}),e.subParser("hashHTMLBlocks",function(m,y,b){"use strict";m=b.converter._dispatch("hashHTMLBlocks.before",m,y,b);var S=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(P,z,Y,ce){var re=P;return Y.search(/\bmarkdown\b/)!==-1&&(re=Y+b.converter.makeHtml(z)+ce),`

\xA8K`+(b.gHtmlBlocks.push(re)-1)+`K

`};y.backslashEscapesHTMLTags&&(m=m.replace(/\\<(\/?[^>]+?)>/g,function(P,z){return"&lt;"+z+"&gt;"}));for(var I=0;I<S.length;++I)for(var T,R=new RegExp("^ {0,3}(<"+S[I]+"\\b[^>]*>)","im"),B="<"+S[I]+"\\b[^>]*>",F="</"+S[I]+">";(T=e.helper.regexIndexOf(m,R))!==-1;){var L=e.helper.splitAtIndex(m,T),j=e.helper.replaceRecursiveRegExp(L[1],A,B,F,"im");if(j===L[1])break;m=L[0].concat(j)}return m=m.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(m,y,b)),m=e.helper.replaceRecursiveRegExp(m,function(P){return`

\xA8K`+(b.gHtmlBlocks.push(P)-1)+`K

`},"^ {0,3}<!--","-->","gm"),m=m.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(m,y,b)),m=b.converter._dispatch("hashHTMLBlocks.after",m,y,b),m}),e.subParser("hashHTMLSpans",function(m,y,b){"use strict";m=b.converter._dispatch("hashHTMLSpans.before",m,y,b);function S(A){return"\xA8C"+(b.gHtmlSpans.push(A)-1)+"C"}return m=m.replace(/<[^>]+?\/>/gi,function(A){return S(A)}),m=m.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return S(A)}),m=m.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return S(A)}),m=m.replace(/<[^>]+?>/gi,function(A){return S(A)}),m=b.converter._dispatch("hashHTMLSpans.after",m,y,b),m}),e.subParser("unhashHTMLSpans",function(m,y,b){"use strict";m=b.converter._dispatch("unhashHTMLSpans.before",m,y,b);for(var S=0;S<b.gHtmlSpans.length;++S){for(var A=b.gHtmlSpans[S],I=0;/¨C(\d+)C/.test(A);){var T=RegExp.$1;if(A=A.replace("\xA8C"+T+"C",b.gHtmlSpans[T]),I===10){console.error("maximum nesting of 10 spans reached!!!");break}++I}m=m.replace("\xA8C"+S+"C",A)}return m=b.converter._dispatch("unhashHTMLSpans.after",m,y,b),m}),e.subParser("hashPreCodeTags",function(m,y,b){"use strict";m=b.converter._dispatch("hashPreCodeTags.before",m,y,b);var S=function(A,I,T,R){var B=T+e.subParser("encodeCode")(I,y,b)+R;return`

\xA8G`+(b.ghCodeBlocks.push({text:A,codeblock:B})-1)+`G

`};return m=e.helper.replaceRecursiveRegExp(m,S,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),m=b.converter._dispatch("hashPreCodeTags.after",m,y,b),m}),e.subParser("headers",function(m,y,b){"use strict";m=b.converter._dispatch("headers.before",m,y,b);var S=isNaN(parseInt(y.headerLevelStart))?1:parseInt(y.headerLevelStart),A=y.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,I=y.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;m=m.replace(A,function(B,F){var L=e.subParser("spanGamut")(F,y,b),j=y.noHeaderId?"":' id="'+R(F)+'"',P=S,z="<h"+P+j+">"+L+"</h"+P+">";return e.subParser("hashBlock")(z,y,b)}),m=m.replace(I,function(B,F){var L=e.subParser("spanGamut")(F,y,b),j=y.noHeaderId?"":' id="'+R(F)+'"',P=S+1,z="<h"+P+j+">"+L+"</h"+P+">";return e.subParser("hashBlock")(z,y,b)});var T=y.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;m=m.replace(T,function(B,F,L){var j=L;y.customizedHeaderId&&(j=L.replace(/\s?\{([^{]+?)}\s*$/,""));var P=e.subParser("spanGamut")(j,y,b),z=y.noHeaderId?"":' id="'+R(L)+'"',Y=S-1+F.length,ce="<h"+Y+z+">"+P+"</h"+Y+">";return e.subParser("hashBlock")(ce,y,b)});function R(B){var F,L;if(y.customizedHeaderId){var j=B.match(/\{([^{]+?)}\s*$/);j&&j[1]&&(B=j[1])}return F=B,e.helper.isString(y.prefixHeaderId)?L=y.prefixHeaderId:y.prefixHeaderId===!0?L="section-":L="",y.rawPrefixHeaderId||(F=L+F),y.ghCompatibleHeaderId?F=F.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():y.rawHeaderId?F=F.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"\xA8").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():F=F.replace(/[^\w]/g,"").toLowerCase(),y.rawPrefixHeaderId&&(F=L+F),b.hashLinkCounts[F]?F=F+"-"+b.hashLinkCounts[F]++:b.hashLinkCounts[F]=1,F}return m=b.converter._dispatch("headers.after",m,y,b),m}),e.subParser("horizontalRule",function(m,y,b){"use strict";m=b.converter._dispatch("horizontalRule.before",m,y,b);var S=e.subParser("hashBlock")("<hr />",y,b);return m=m.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,S),m=m.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,S),m=m.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,S),m=b.converter._dispatch("horizontalRule.after",m,y,b),m}),e.subParser("images",function(m,y,b){"use strict";m=b.converter._dispatch("images.before",m,y,b);var S=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,I=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,R=/!\[([^\[\]]+)]()()()()()/g;function B(L,j,P,z,Y,ce,re,Z){return z=z.replace(/\s/g,""),F(L,j,P,z,Y,ce,re,Z)}function F(L,j,P,z,Y,ce,re,Z){var me=b.gUrls,ke=b.gTitles,ne=b.gDimensions;if(P=P.toLowerCase(),Z||(Z=""),L.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)z="";else if(z===""||z===null)if((P===""||P===null)&&(P=j.toLowerCase().replace(/ ?\n/g," ")),z="#"+P,!e.helper.isUndefined(me[P]))z=me[P],e.helper.isUndefined(ke[P])||(Z=ke[P]),e.helper.isUndefined(ne[P])||(Y=ne[P].width,ce=ne[P].height);else return L;j=j.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),z=z.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var oe='<img src="'+z+'" alt="'+j+'"';return Z&&e.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),oe+=' title="'+Z+'"'),Y&&ce&&(Y=Y==="*"?"auto":Y,ce=ce==="*"?"auto":ce,oe+=' width="'+Y+'"',oe+=' height="'+ce+'"'),oe+=" />",oe}return m=m.replace(T,F),m=m.replace(I,B),m=m.replace(A,F),m=m.replace(S,F),m=m.replace(R,F),m=b.converter._dispatch("images.after",m,y,b),m}),e.subParser("italicsAndBold",function(m,y,b){"use strict";m=b.converter._dispatch("italicsAndBold.before",m,y,b);function S(A,I,T){return I+A+T}return y.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,I){return S(I,"<strong><em>","</em></strong>")}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,I){return S(I,"<strong>","</strong>")}),m=m.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,I){return S(I,"<em>","</em>")})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(A,I){return/\S$/.test(I)?S(I,"<strong><em>","</em></strong>"):A}),m=m.replace(/__(\S[\s\S]*?)__/g,function(A,I){return/\S$/.test(I)?S(I,"<strong>","</strong>"):A}),m=m.replace(/_([^\s_][\s\S]*?)_/g,function(A,I){return/\S$/.test(I)?S(I,"<em>","</em>"):A})),y.literalMidWordAsterisks?(m=m.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,I,T){return S(T,I+"<strong><em>","</em></strong>")}),m=m.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,I,T){return S(T,I+"<strong>","</strong>")}),m=m.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,I,T){return S(T,I+"<em>","</em>")})):(m=m.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,I){return/\S$/.test(I)?S(I,"<strong><em>","</em></strong>"):A}),m=m.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,I){return/\S$/.test(I)?S(I,"<strong>","</strong>"):A}),m=m.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,I){return/\S$/.test(I)?S(I,"<em>","</em>"):A})),m=b.converter._dispatch("italicsAndBold.after",m,y,b),m}),e.subParser("lists",function(m,y,b){"use strict";function S(T,R){b.gListLevel++,T=T.replace(/\n{2,}$/,`
`),T+="\xA80";var B=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,F=/\n[ \t]*\n(?!¨0)/.test(T);return y.disableForced4SpacesIndentedSublists&&(B=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),T=T.replace(B,function(L,j,P,z,Y,ce,re){re=re&&re.trim()!=="";var Z=e.subParser("outdent")(Y,y,b),me="";return ce&&y.tasklists&&(me=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var ke='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return re&&(ke+=" checked"),ke+=">",ke})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(ke){return"\xA8A"+ke}),j||Z.search(/\n{2,}/)>-1?(Z=e.subParser("githubCodeBlocks")(Z,y,b),Z=e.subParser("blockGamut")(Z,y,b)):(Z=e.subParser("lists")(Z,y,b),Z=Z.replace(/\n$/,""),Z=e.subParser("hashHTMLBlocks")(Z,y,b),Z=Z.replace(/\n\n+/g,`

`),F?Z=e.subParser("paragraphs")(Z,y,b):Z=e.subParser("spanGamut")(Z,y,b)),Z=Z.replace("\xA8A",""),Z="<li"+me+">"+Z+`</li>
`,Z}),T=T.replace(/¨0/g,""),b.gListLevel--,R&&(T=T.replace(/\s+$/,"")),T}function A(T,R){if(R==="ol"){var B=T.match(/^ *(\d+)\./);if(B&&B[1]!=="1")return' start="'+B[1]+'"'}return""}function I(T,R,B){var F=y.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,L=y.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,j=R==="ul"?F:L,P="";if(T.search(j)!==-1)(function Y(ce){var re=ce.search(j),Z=A(T,R);re!==-1?(P+=`

<`+R+Z+`>
`+S(ce.slice(0,re),!!B)+"</"+R+`>
`,R=R==="ul"?"ol":"ul",j=R==="ul"?F:L,Y(ce.slice(re))):P+=`

<`+R+Z+`>
`+S(ce,!!B)+"</"+R+`>
`})(T);else{var z=A(T,R);P=`

<`+R+z+`>
`+S(T,!!B)+"</"+R+`>
`}return P}return m=b.converter._dispatch("lists.before",m,y,b),m+="\xA80",b.gListLevel?m=m.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,R,B){var F=B.search(/[*+-]/g)>-1?"ul":"ol";return I(R,F,!0)}):m=m.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,R,B,F){var L=F.search(/[*+-]/g)>-1?"ul":"ol";return I(B,L,!1)}),m=m.replace(/¨0/,""),m=b.converter._dispatch("lists.after",m,y,b),m}),e.subParser("metadata",function(m,y,b){"use strict";if(!y.metadata)return m;m=b.converter._dispatch("metadata.before",m,y,b);function S(A){b.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(I,T,R){return b.metadata.parsed[T]=R,""})}return m=m.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(A,I,T){return S(T),"\xA8M"}),m=m.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,I,T){return I&&(b.metadata.format=I),S(T),"\xA8M"}),m=m.replace(/¨M/g,""),m=b.converter._dispatch("metadata.after",m,y,b),m}),e.subParser("outdent",function(m,y,b){"use strict";return m=b.converter._dispatch("outdent.before",m,y,b),m=m.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),m=m.replace(/¨0/g,""),m=b.converter._dispatch("outdent.after",m,y,b),m}),e.subParser("paragraphs",function(m,y,b){"use strict";m=b.converter._dispatch("paragraphs.before",m,y,b),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,"");for(var S=m.split(/\n{2,}/g),A=[],I=S.length,T=0;T<I;T++){var R=S[T];R.search(/¨(K|G)(\d+)\1/g)>=0?A.push(R):R.search(/\S/)>=0&&(R=e.subParser("spanGamut")(R,y,b),R=R.replace(/^([ \t]*)/g,"<p>"),R+="</p>",A.push(R))}for(I=A.length,T=0;T<I;T++){for(var B="",F=A[T],L=!1;/¨(K|G)(\d+)\1/.test(F);){var j=RegExp.$1,P=RegExp.$2;j==="K"?B=b.gHtmlBlocks[P]:L?B=e.subParser("encodeCode")(b.ghCodeBlocks[P].text,y,b):B=b.ghCodeBlocks[P].codeblock,B=B.replace(/\$/g,"$$$$"),F=F.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,B),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(F)&&(L=!0)}A[T]=F}return m=A.join(`
`),m=m.replace(/^\n+/g,""),m=m.replace(/\n+$/g,""),b.converter._dispatch("paragraphs.after",m,y,b)}),e.subParser("runExtension",function(m,y,b,S){"use strict";if(m.filter)y=m.filter(y,S.converter,b);else if(m.regex){var A=m.regex;A instanceof RegExp||(A=new RegExp(A,"g")),y=y.replace(A,m.replace)}return y}),e.subParser("spanGamut",function(m,y,b){"use strict";return m=b.converter._dispatch("spanGamut.before",m,y,b),m=e.subParser("codeSpans")(m,y,b),m=e.subParser("escapeSpecialCharsWithinTagAttributes")(m,y,b),m=e.subParser("encodeBackslashEscapes")(m,y,b),m=e.subParser("images")(m,y,b),m=e.subParser("anchors")(m,y,b),m=e.subParser("autoLinks")(m,y,b),m=e.subParser("simplifiedAutoLinks")(m,y,b),m=e.subParser("emoji")(m,y,b),m=e.subParser("underline")(m,y,b),m=e.subParser("italicsAndBold")(m,y,b),m=e.subParser("strikethrough")(m,y,b),m=e.subParser("ellipsis")(m,y,b),m=e.subParser("hashHTMLSpans")(m,y,b),m=e.subParser("encodeAmpsAndAngles")(m,y,b),y.simpleLineBreaks?/\n\n¨K/.test(m)||(m=m.replace(/\n+/g,`<br />
`)):m=m.replace(/  +\n/g,`<br />
`),m=b.converter._dispatch("spanGamut.after",m,y,b),m}),e.subParser("strikethrough",function(m,y,b){"use strict";function S(A){return y.simplifiedAutoLink&&(A=e.subParser("simplifiedAutoLinks")(A,y,b)),"<del>"+A+"</del>"}return y.strikethrough&&(m=b.converter._dispatch("strikethrough.before",m,y,b),m=m.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,I){return S(I)}),m=b.converter._dispatch("strikethrough.after",m,y,b)),m}),e.subParser("stripLinkDefinitions",function(m,y,b){"use strict";var S=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,A=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;m+="\xA80";var I=function(T,R,B,F,L,j,P){return R=R.toLowerCase(),B.match(/^data:.+?\/.+?;base64,/)?b.gUrls[R]=B.replace(/\s/g,""):b.gUrls[R]=e.subParser("encodeAmpsAndAngles")(B,y,b),j?j+P:(P&&(b.gTitles[R]=P.replace(/"|'/g,"&quot;")),y.parseImgDimensions&&F&&L&&(b.gDimensions[R]={width:F,height:L}),"")};return m=m.replace(A,I),m=m.replace(S,I),m=m.replace(/¨0/,""),m}),e.subParser("tables",function(m,y,b){"use strict";if(!y.tables)return m;var S=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function I(L){return/^:[ \t]*--*$/.test(L)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(L)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(L)?' style="text-align:center;"':""}function T(L,j){var P="";return L=L.trim(),(y.tablesHeaderId||y.tableHeaderId)&&(P=' id="'+L.replace(/ /g,"_").toLowerCase()+'"'),L=e.subParser("spanGamut")(L,y,b),"<th"+P+j+">"+L+`</th>
`}function R(L,j){var P=e.subParser("spanGamut")(L,y,b);return"<td"+j+">"+P+`</td>
`}function B(L,j){for(var P=`<table>
<thead>
<tr>
`,z=L.length,Y=0;Y<z;++Y)P+=L[Y];for(P+=`</tr>
</thead>
<tbody>
`,Y=0;Y<j.length;++Y){P+=`<tr>
`;for(var ce=0;ce<z;++ce)P+=j[Y][ce];P+=`</tr>
`}return P+=`</tbody>
</table>
`,P}function F(L){var j,P=L.split(`
`);for(j=0;j<P.length;++j)/^ {0,3}\|/.test(P[j])&&(P[j]=P[j].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(P[j])&&(P[j]=P[j].replace(/\|[ \t]*$/,"")),P[j]=e.subParser("codeSpans")(P[j],y,b);var z=P[0].split("|").map(function(oe){return oe.trim()}),Y=P[1].split("|").map(function(oe){return oe.trim()}),ce=[],re=[],Z=[],me=[];for(P.shift(),P.shift(),j=0;j<P.length;++j)P[j].trim()!==""&&ce.push(P[j].split("|").map(function(oe){return oe.trim()}));if(z.length<Y.length)return L;for(j=0;j<Y.length;++j)Z.push(I(Y[j]));for(j=0;j<z.length;++j)e.helper.isUndefined(Z[j])&&(Z[j]=""),re.push(T(z[j],Z[j]));for(j=0;j<ce.length;++j){for(var ke=[],ne=0;ne<re.length;++ne)e.helper.isUndefined(ce[j][ne]),ke.push(R(ce[j][ne],Z[ne]));me.push(ke)}return B(re,me)}return m=b.converter._dispatch("tables.before",m,y,b),m=m.replace(/\\(\|)/g,e.helper.escapeCharactersCallback),m=m.replace(S,F),m=m.replace(A,F),m=b.converter._dispatch("tables.after",m,y,b),m}),e.subParser("underline",function(m,y,b){"use strict";return y.underline&&(m=b.converter._dispatch("underline.before",m,y,b),y.literalMidWordUnderscores?(m=m.replace(/\b___(\S[\s\S]*?)___\b/g,function(S,A){return"<u>"+A+"</u>"}),m=m.replace(/\b__(\S[\s\S]*?)__\b/g,function(S,A){return"<u>"+A+"</u>"})):(m=m.replace(/___(\S[\s\S]*?)___/g,function(S,A){return/\S$/.test(A)?"<u>"+A+"</u>":S}),m=m.replace(/__(\S[\s\S]*?)__/g,function(S,A){return/\S$/.test(A)?"<u>"+A+"</u>":S})),m=m.replace(/(_)/g,e.helper.escapeCharactersCallback),m=b.converter._dispatch("underline.after",m,y,b)),m}),e.subParser("unescapeSpecialChars",function(m,y,b){"use strict";return m=b.converter._dispatch("unescapeSpecialChars.before",m,y,b),m=m.replace(/¨E(\d+)E/g,function(S,A){var I=parseInt(A);return String.fromCharCode(I)}),m=b.converter._dispatch("unescapeSpecialChars.after",m,y,b),m}),e.subParser("makeMarkdown.blockquote",function(m,y){"use strict";var b="";if(m.hasChildNodes())for(var S=m.childNodes,A=S.length,I=0;I<A;++I){var T=e.subParser("makeMarkdown.node")(S[I],y);T!==""&&(b+=T)}return b=b.trim(),b="> "+b.split(`
`).join(`
> `),b}),e.subParser("makeMarkdown.codeBlock",function(m,y){"use strict";var b=m.getAttribute("language"),S=m.getAttribute("precodenum");return"```"+b+`
`+y.preList[S]+"\n```"}),e.subParser("makeMarkdown.codeSpan",function(m){"use strict";return"`"+m.innerHTML+"`"}),e.subParser("makeMarkdown.emphasis",function(m,y){"use strict";var b="";if(m.hasChildNodes()){b+="*";for(var S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);b+="*"}return b}),e.subParser("makeMarkdown.header",function(m,y,b){"use strict";var S=new Array(b+1).join("#"),A="";if(m.hasChildNodes()){A=S+" ";for(var I=m.childNodes,T=I.length,R=0;R<T;++R)A+=e.subParser("makeMarkdown.node")(I[R],y)}return A}),e.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),e.subParser("makeMarkdown.image",function(m){"use strict";var y="";return m.hasAttribute("src")&&(y+="!["+m.getAttribute("alt")+"](",y+="<"+m.getAttribute("src")+">",m.hasAttribute("width")&&m.hasAttribute("height")&&(y+=" ="+m.getAttribute("width")+"x"+m.getAttribute("height")),m.hasAttribute("title")&&(y+=' "'+m.getAttribute("title")+'"'),y+=")"),y}),e.subParser("makeMarkdown.links",function(m,y){"use strict";var b="";if(m.hasChildNodes()&&m.hasAttribute("href")){var S=m.childNodes,A=S.length;b="[";for(var I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);b+="](",b+="<"+m.getAttribute("href")+">",m.hasAttribute("title")&&(b+=' "'+m.getAttribute("title")+'"'),b+=")"}return b}),e.subParser("makeMarkdown.list",function(m,y,b){"use strict";var S="";if(!m.hasChildNodes())return"";for(var A=m.childNodes,I=A.length,T=m.getAttribute("start")||1,R=0;R<I;++R)if(!(typeof A[R].tagName=="undefined"||A[R].tagName.toLowerCase()!=="li")){var B="";b==="ol"?B=T.toString()+". ":B="- ",S+=B+e.subParser("makeMarkdown.listItem")(A[R],y),++T}return S+=`
<!-- -->
`,S.trim()}),e.subParser("makeMarkdown.listItem",function(m,y){"use strict";for(var b="",S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);return/\n$/.test(b)?b=b.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):b+=`
`,b}),e.subParser("makeMarkdown.node",function(m,y,b){"use strict";b=b||!1;var S="";if(m.nodeType===3)return e.subParser("makeMarkdown.txt")(m,y);if(m.nodeType===8)return"<!--"+m.data+`-->

`;if(m.nodeType!==1)return"";var A=m.tagName.toLowerCase();switch(A){case"h1":b||(S=e.subParser("makeMarkdown.header")(m,y,1)+`

`);break;case"h2":b||(S=e.subParser("makeMarkdown.header")(m,y,2)+`

`);break;case"h3":b||(S=e.subParser("makeMarkdown.header")(m,y,3)+`

`);break;case"h4":b||(S=e.subParser("makeMarkdown.header")(m,y,4)+`

`);break;case"h5":b||(S=e.subParser("makeMarkdown.header")(m,y,5)+`

`);break;case"h6":b||(S=e.subParser("makeMarkdown.header")(m,y,6)+`

`);break;case"p":b||(S=e.subParser("makeMarkdown.paragraph")(m,y)+`

`);break;case"blockquote":b||(S=e.subParser("makeMarkdown.blockquote")(m,y)+`

`);break;case"hr":b||(S=e.subParser("makeMarkdown.hr")(m,y)+`

`);break;case"ol":b||(S=e.subParser("makeMarkdown.list")(m,y,"ol")+`

`);break;case"ul":b||(S=e.subParser("makeMarkdown.list")(m,y,"ul")+`

`);break;case"precode":b||(S=e.subParser("makeMarkdown.codeBlock")(m,y)+`

`);break;case"pre":b||(S=e.subParser("makeMarkdown.pre")(m,y)+`

`);break;case"table":b||(S=e.subParser("makeMarkdown.table")(m,y)+`

`);break;case"code":S=e.subParser("makeMarkdown.codeSpan")(m,y);break;case"em":case"i":S=e.subParser("makeMarkdown.emphasis")(m,y);break;case"strong":case"b":S=e.subParser("makeMarkdown.strong")(m,y);break;case"del":S=e.subParser("makeMarkdown.strikethrough")(m,y);break;case"a":S=e.subParser("makeMarkdown.links")(m,y);break;case"img":S=e.subParser("makeMarkdown.image")(m,y);break;default:S=m.outerHTML+`

`}return S}),e.subParser("makeMarkdown.paragraph",function(m,y){"use strict";var b="";if(m.hasChildNodes())for(var S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);return b=b.trim(),b}),e.subParser("makeMarkdown.pre",function(m,y){"use strict";var b=m.getAttribute("prenum");return"<pre>"+y.preList[b]+"</pre>"}),e.subParser("makeMarkdown.strikethrough",function(m,y){"use strict";var b="";if(m.hasChildNodes()){b+="~~";for(var S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);b+="~~"}return b}),e.subParser("makeMarkdown.strong",function(m,y){"use strict";var b="";if(m.hasChildNodes()){b+="**";for(var S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y);b+="**"}return b}),e.subParser("makeMarkdown.table",function(m,y){"use strict";var b="",S=[[],[]],A=m.querySelectorAll("thead>tr>th"),I=m.querySelectorAll("tbody>tr"),T,R;for(T=0;T<A.length;++T){var B=e.subParser("makeMarkdown.tableCell")(A[T],y),F="---";if(A[T].hasAttribute("style")){var L=A[T].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(L){case"text-align:left;":F=":---";break;case"text-align:right;":F="---:";break;case"text-align:center;":F=":---:";break}}S[0][T]=B.trim(),S[1][T]=F}for(T=0;T<I.length;++T){var j=S.push([])-1,P=I[T].getElementsByTagName("td");for(R=0;R<A.length;++R){var z=" ";typeof P[R]!="undefined"&&(z=e.subParser("makeMarkdown.tableCell")(P[R],y)),S[j].push(z)}}var Y=3;for(T=0;T<S.length;++T)for(R=0;R<S[T].length;++R){var ce=S[T][R].length;ce>Y&&(Y=ce)}for(T=0;T<S.length;++T){for(R=0;R<S[T].length;++R)T===1?S[T][R].slice(-1)===":"?S[T][R]=e.helper.padEnd(S[T][R].slice(-1),Y-1,"-")+":":S[T][R]=e.helper.padEnd(S[T][R],Y,"-"):S[T][R]=e.helper.padEnd(S[T][R],Y);b+="| "+S[T].join(" | ")+` |
`}return b.trim()}),e.subParser("makeMarkdown.tableCell",function(m,y){"use strict";var b="";if(!m.hasChildNodes())return"";for(var S=m.childNodes,A=S.length,I=0;I<A;++I)b+=e.subParser("makeMarkdown.node")(S[I],y,!0);return b.trim()}),e.subParser("makeMarkdown.txt",function(m){"use strict";var y=m.nodeValue;return y=y.replace(/ +/g," "),y=y.replace(/¨NBSP;/g," "),y=e.helper.unescapeHTMLEntities(y),y=y.replace(/([*_~|`])/g,"\\$1"),y=y.replace(/^(\s*)>/g,"\\$1>"),y=y.replace(/^#/gm,"\\#"),y=y.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),y=y.replace(/^( {0,3}\d+)\./gm,"$1\\."),y=y.replace(/^( {0,3})([+-])/gm,"$1\\$2"),y=y.replace(/]([\s]*)\(/g,"\\]$1\\("),y=y.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),y});var N=this;typeof define=="function"&&define.amd?define(function(){"use strict";return e}):typeof oo!="undefined"&&oo.exports?oo.exports=e:N.showdown=e}).call(rp)});var bp=xr((Xl,Kl)=>{(function(r,t){typeof Xl=="object"&&typeof Kl!="undefined"?Kl.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis!="undefined"?globalThis:r||self,r.Cropper=t())})(Xl,function(){"use strict";function r(q,D){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(q);D&&(W=W.filter(function(le){return Object.getOwnPropertyDescriptor(q,le).enumerable})),V.push.apply(V,W)}return V}function t(q){for(var D=1;D<arguments.length;D++){var V=arguments[D]!=null?arguments[D]:{};D%2?r(Object(V),!0).forEach(function(W){o(q,W,V[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):r(Object(V)).forEach(function(W){Object.defineProperty(q,W,Object.getOwnPropertyDescriptor(V,W))})}return q}function e(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(D){return typeof D}:e=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},e(q)}function n(q,D){if(!(q instanceof D))throw new TypeError("Cannot call a class as a function")}function i(q,D){for(var V=0;V<D.length;V++){var W=D[V];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(q,W.key,W)}}function a(q,D,V){return D&&i(q.prototype,D),V&&i(q,V),q}function o(q,D,V){return D in q?Object.defineProperty(q,D,{value:V,enumerable:!0,configurable:!0,writable:!0}):q[D]=V,q}function s(q){return u(q)||h(q)||d(q)||g()}function u(q){if(Array.isArray(q))return _(q)}function h(q){if(typeof Symbol!="undefined"&&q[Symbol.iterator]!=null||q["@@iterator"]!=null)return Array.from(q)}function d(q,D){if(!!q){if(typeof q=="string")return _(q,D);var V=Object.prototype.toString.call(q).slice(8,-1);if(V==="Object"&&q.constructor&&(V=q.constructor.name),V==="Map"||V==="Set")return Array.from(q);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return _(q,D)}}function _(q,D){(D==null||D>q.length)&&(D=q.length);for(var V=0,W=new Array(D);V<D;V++)W[V]=q[V];return W}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=typeof window!="undefined"&&typeof window.document!="undefined",C=w?window:{},k=w&&C.document.documentElement?"ontouchstart"in C.document.documentElement:!1,E=w?"PointerEvent"in C:!1,O="cropper",N="all",m="crop",y="move",b="zoom",S="e",A="w",I="s",T="n",R="ne",B="nw",F="se",L="sw",j="".concat(O,"-crop"),P="".concat(O,"-disabled"),z="".concat(O,"-hidden"),Y="".concat(O,"-hide"),ce="".concat(O,"-invisible"),re="".concat(O,"-modal"),Z="".concat(O,"-move"),me="".concat(O,"Action"),ke="".concat(O,"Preview"),ne="crop",oe="move",ge="none",ve="crop",pe="cropend",he="cropmove",Ae="cropstart",Me="dblclick",De=k?"touchstart":"mousedown",Je=k?"touchmove":"mousemove",Se=k?"touchend touchcancel":"mouseup",ze=E?"pointerdown":De,at=E?"pointermove":Je,Qe=E?"pointerup pointercancel":Se,lt="ready",At="resize",It="wheel",bt="zoom",Et="image/jpeg",Rt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Lt=/^data:/,Ce=/^data:image\/jpeg;base64,/,Ie=/^img|canvas$/i,Ve=200,ct=100,Pt={viewMode:0,dragMode:ne,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ve,minContainerHeight:ct,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Mt='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Zt=Number.isNaN||C.isNaN;function nt(q){return typeof q=="number"&&!Zt(q)}var Nt=function(D){return D>0&&D<1/0};function Ir(q){return typeof q=="undefined"}function Gt(q){return e(q)==="object"&&q!==null}var xt=Object.prototype.hasOwnProperty;function Ct(q){if(!Gt(q))return!1;try{var D=q.constructor,V=D.prototype;return D&&V&&xt.call(V,"isPrototypeOf")}catch(W){return!1}}function St(q){return typeof q=="function"}var ht=Array.prototype.slice;function Pr(q){return Array.from?Array.from(q):ht.call(q)}function Wt(q,D){return q&&St(D)&&(Array.isArray(q)||nt(q.length)?Pr(q).forEach(function(V,W){D.call(q,V,W,q)}):Gt(q)&&Object.keys(q).forEach(function(V){D.call(q,q[V],V,q)})),q}var ut=Object.assign||function(D){for(var V=arguments.length,W=new Array(V>1?V-1:0),le=1;le<V;le++)W[le-1]=arguments[le];return Gt(D)&&W.length>0&&W.forEach(function(Q){Gt(Q)&&Object.keys(Q).forEach(function(ue){D[ue]=Q[ue]})}),D},Tr=/\.\d*(?:0|9){12}\d*$/;function $t(q){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Tr.test(q)?Math.round(q*D)/D:q}var Hr=/^width|height|left|top|marginLeft|marginTop$/;function rr(q,D){var V=q.style;Wt(D,function(W,le){Hr.test(le)&&nt(W)&&(W="".concat(W,"px")),V[le]=W})}function Gr(q,D){return q.classList?q.classList.contains(D):q.className.indexOf(D)>-1}function Dt(q,D){if(!!D){if(nt(q.length)){Wt(q,function(W){Dt(W,D)});return}if(q.classList){q.classList.add(D);return}var V=q.className.trim();V?V.indexOf(D)<0&&(q.className="".concat(V," ").concat(D)):q.className=D}}function lr(q,D){if(!!D){if(nt(q.length)){Wt(q,function(V){lr(V,D)});return}if(q.classList){q.classList.remove(D);return}q.className.indexOf(D)>=0&&(q.className=q.className.replace(D,""))}}function Rr(q,D,V){if(!!D){if(nt(q.length)){Wt(q,function(W){Rr(W,D,V)});return}V?Dt(q,D):lr(q,D)}}var fn=/([a-z\d])([A-Z])/g;function ar(q){return q.replace(fn,"$1-$2").toLowerCase()}function Ur(q,D){return Gt(q[D])?q[D]:q.dataset?q.dataset[D]:q.getAttribute("data-".concat(ar(D)))}function hr(q,D,V){Gt(V)?q[D]=V:q.dataset?q.dataset[D]=V:q.setAttribute("data-".concat(ar(D)),V)}function Jr(q,D){if(Gt(q[D]))try{delete q[D]}catch(V){q[D]=void 0}else if(q.dataset)try{delete q.dataset[D]}catch(V){q.dataset[D]=void 0}else q.removeAttribute("data-".concat(ar(D)))}var Nr=/\s\s*/,mr=function(){var q=!1;if(w){var D=!1,V=function(){},W=Object.defineProperty({},"once",{get:function(){return q=!0,D},set:function(Q){D=Q}});C.addEventListener("test",V,W),C.removeEventListener("test",V,W)}return q}();function cr(q,D,V){var W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},le=V;D.trim().split(Nr).forEach(function(Q){if(!mr){var ue=q.listeners;ue&&ue[Q]&&ue[Q][V]&&(le=ue[Q][V],delete ue[Q][V],Object.keys(ue[Q]).length===0&&delete ue[Q],Object.keys(ue).length===0&&delete q.listeners)}q.removeEventListener(Q,le,W)})}function tt(q,D,V){var W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},le=V;D.trim().split(Nr).forEach(function(Q){if(W.once&&!mr){var ue=q.listeners,ye=ue===void 0?{}:ue;le=function(){delete ye[Q][V],q.removeEventListener(Q,le,W);for(var Pe=arguments.length,$e=new Array(Pe),Re=0;Re<Pe;Re++)$e[Re]=arguments[Re];V.apply(q,$e)},ye[Q]||(ye[Q]={}),ye[Q][V]&&q.removeEventListener(Q,ye[Q][V],W),ye[Q][V]=le,q.listeners=ye}q.addEventListener(Q,le,W)})}function Bt(q,D,V){var W;return St(Event)&&St(CustomEvent)?W=new CustomEvent(D,{detail:V,bubbles:!0,cancelable:!0}):(W=document.createEvent("CustomEvent"),W.initCustomEvent(D,!0,!0,V)),q.dispatchEvent(W)}function Ge(q){var D=q.getBoundingClientRect();return{left:D.left+(window.pageXOffset-document.documentElement.clientLeft),top:D.top+(window.pageYOffset-document.documentElement.clientTop)}}var We=C.location,ot=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function X(q){var D=q.match(ot);return D!==null&&(D[1]!==We.protocol||D[2]!==We.hostname||D[3]!==We.port)}function se(q){var D="timestamp=".concat(new Date().getTime());return q+(q.indexOf("?")===-1?"?":"&")+D}function de(q){var D=q.rotate,V=q.scaleX,W=q.scaleY,le=q.translateX,Q=q.translateY,ue=[];nt(le)&&le!==0&&ue.push("translateX(".concat(le,"px)")),nt(Q)&&Q!==0&&ue.push("translateY(".concat(Q,"px)")),nt(D)&&D!==0&&ue.push("rotate(".concat(D,"deg)")),nt(V)&&V!==1&&ue.push("scaleX(".concat(V,")")),nt(W)&&W!==1&&ue.push("scaleY(".concat(W,")"));var ye=ue.length?ue.join(" "):"none";return{WebkitTransform:ye,msTransform:ye,transform:ye}}function Te(q){var D=t({},q),V=0;return Wt(q,function(W,le){delete D[le],Wt(D,function(Q){var ue=Math.abs(W.startX-Q.startX),ye=Math.abs(W.startY-Q.startY),Le=Math.abs(W.endX-Q.endX),Pe=Math.abs(W.endY-Q.endY),$e=Math.sqrt(ue*ue+ye*ye),Re=Math.sqrt(Le*Le+Pe*Pe),je=(Re-$e)/$e;Math.abs(je)>Math.abs(V)&&(V=je)})}),V}function xe(q,D){var V=q.pageX,W=q.pageY,le={endX:V,endY:W};return D?le:t({startX:V,startY:W},le)}function Fe(q){var D=0,V=0,W=0;return Wt(q,function(le){var Q=le.startX,ue=le.startY;D+=Q,V+=ue,W+=1}),D/=W,V/=W,{pageX:D,pageY:V}}function Ue(q){var D=q.aspectRatio,V=q.height,W=q.width,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",Q=Nt(W),ue=Nt(V);if(Q&&ue){var ye=V*D;le==="contain"&&ye>W||le==="cover"&&ye<W?V=W/D:W=V*D}else Q?V=W/D:ue&&(W=V*D);return{width:W,height:V}}function Ke(q){var D=q.width,V=q.height,W=q.degree;if(W=Math.abs(W)%180,W===90)return{width:V,height:D};var le=W%90*Math.PI/180,Q=Math.sin(le),ue=Math.cos(le),ye=D*ue+V*Q,Le=D*Q+V*ue;return W>90?{width:Le,height:ye}:{width:ye,height:Le}}function Ye(q,D,V,W){var le=D.aspectRatio,Q=D.naturalWidth,ue=D.naturalHeight,ye=D.rotate,Le=ye===void 0?0:ye,Pe=D.scaleX,$e=Pe===void 0?1:Pe,Re=D.scaleY,je=Re===void 0?1:Re,st=V.aspectRatio,ft=V.naturalWidth,jt=V.naturalHeight,_t=W.fillColor,Kt=_t===void 0?"transparent":_t,Yt=W.imageSmoothingEnabled,Qt=Yt===void 0?!0:Yt,Wr=W.imageSmoothingQuality,fr=Wr===void 0?"low":Wr,qe=W.maxWidth,wt=qe===void 0?1/0:qe,er=W.maxHeight,Lr=er===void 0?1/0:er,gr=W.minWidth,rn=gr===void 0?0:gr,pn=W.minHeight,_r=pn===void 0?0:pn,Er=document.createElement("canvas"),vr=Er.getContext("2d"),Zr=Ue({aspectRatio:st,width:wt,height:Lr}),Kn=Ue({aspectRatio:st,width:rn,height:_r},"cover"),An=Math.min(Zr.width,Math.max(Kn.width,ft)),$n=Math.min(Zr.height,Math.max(Kn.height,jt)),Jn=Ue({aspectRatio:le,width:wt,height:Lr}),Zn=Ue({aspectRatio:le,width:rn,height:_r},"cover"),Qn=Math.min(Jn.width,Math.max(Zn.width,Q)),On=Math.min(Jn.height,Math.max(Zn.height,ue)),ga=[-Qn/2,-On/2,Qn,On];return Er.width=$t(An),Er.height=$t($n),vr.fillStyle=Kt,vr.fillRect(0,0,An,$n),vr.save(),vr.translate(An/2,$n/2),vr.rotate(Le*Math.PI/180),vr.scale($e,je),vr.imageSmoothingEnabled=Qt,vr.imageSmoothingQuality=fr,vr.drawImage.apply(vr,[q].concat(s(ga.map(function(qo){return Math.floor($t(qo))})))),vr.restore(),Er}var Xe=String.fromCharCode;function kt(q,D,V){var W="";V+=D;for(var le=D;le<V;le+=1)W+=Xe(q.getUint8(le));return W}var pt=/^data:.*,/;function Ot(q){var D=q.replace(pt,""),V=atob(D),W=new ArrayBuffer(V.length),le=new Uint8Array(W);return Wt(le,function(Q,ue){le[ue]=V.charCodeAt(ue)}),W}function qt(q,D){for(var V=[],W=8192,le=new Uint8Array(q);le.length>0;)V.push(Xe.apply(null,Pr(le.subarray(0,W)))),le=le.subarray(W);return"data:".concat(D,";base64,").concat(btoa(V.join("")))}function mt(q){var D=new DataView(q),V;try{var W,le,Q;if(D.getUint8(0)===255&&D.getUint8(1)===216)for(var ue=D.byteLength,ye=2;ye+1<ue;){if(D.getUint8(ye)===255&&D.getUint8(ye+1)===225){le=ye;break}ye+=1}if(le){var Le=le+4,Pe=le+10;if(kt(D,Le,4)==="Exif"){var $e=D.getUint16(Pe);if(W=$e===18761,(W||$e===19789)&&D.getUint16(Pe+2,W)===42){var Re=D.getUint32(Pe+4,W);Re>=8&&(Q=Pe+Re)}}}if(Q){var je=D.getUint16(Q,W),st,ft;for(ft=0;ft<je;ft+=1)if(st=Q+ft*12+2,D.getUint16(st,W)===274){st+=8,V=D.getUint16(st,W),D.setUint16(st,1,W);break}}}catch(jt){V=1}return V}function yt(q){var D=0,V=1,W=1;switch(q){case 2:V=-1;break;case 3:D=-180;break;case 4:W=-1;break;case 5:D=90,W=-1;break;case 6:D=90;break;case 7:D=90,V=-1;break;case 8:D=-90;break}return{rotate:D,scaleX:V,scaleY:W}}var ur={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var D=this.element,V=this.options,W=this.container,le=this.cropper,Q=Number(V.minContainerWidth),ue=Number(V.minContainerHeight);Dt(le,z),lr(D,z);var ye={width:Math.max(W.offsetWidth,Q>=0?Q:Ve),height:Math.max(W.offsetHeight,ue>=0?ue:ct)};this.containerData=ye,rr(le,{width:ye.width,height:ye.height}),Dt(D,z),lr(le,z)},initCanvas:function(){var D=this.containerData,V=this.imageData,W=this.options.viewMode,le=Math.abs(V.rotate)%180===90,Q=le?V.naturalHeight:V.naturalWidth,ue=le?V.naturalWidth:V.naturalHeight,ye=Q/ue,Le=D.width,Pe=D.height;D.height*ye>D.width?W===3?Le=D.height*ye:Pe=D.width/ye:W===3?Pe=D.width/ye:Le=D.height*ye;var $e={aspectRatio:ye,naturalWidth:Q,naturalHeight:ue,width:Le,height:Pe};this.canvasData=$e,this.limited=W===1||W===2,this.limitCanvas(!0,!0),$e.width=Math.min(Math.max($e.width,$e.minWidth),$e.maxWidth),$e.height=Math.min(Math.max($e.height,$e.minHeight),$e.maxHeight),$e.left=(D.width-$e.width)/2,$e.top=(D.height-$e.height)/2,$e.oldLeft=$e.left,$e.oldTop=$e.top,this.initialCanvasData=ut({},$e)},limitCanvas:function(D,V){var W=this.options,le=this.containerData,Q=this.canvasData,ue=this.cropBoxData,ye=W.viewMode,Le=Q.aspectRatio,Pe=this.cropped&&ue;if(D){var $e=Number(W.minCanvasWidth)||0,Re=Number(W.minCanvasHeight)||0;ye>1?($e=Math.max($e,le.width),Re=Math.max(Re,le.height),ye===3&&(Re*Le>$e?$e=Re*Le:Re=$e/Le)):ye>0&&($e?$e=Math.max($e,Pe?ue.width:0):Re?Re=Math.max(Re,Pe?ue.height:0):Pe&&($e=ue.width,Re=ue.height,Re*Le>$e?$e=Re*Le:Re=$e/Le));var je=Ue({aspectRatio:Le,width:$e,height:Re});$e=je.width,Re=je.height,Q.minWidth=$e,Q.minHeight=Re,Q.maxWidth=1/0,Q.maxHeight=1/0}if(V)if(ye>(Pe?0:1)){var st=le.width-Q.width,ft=le.height-Q.height;Q.minLeft=Math.min(0,st),Q.minTop=Math.min(0,ft),Q.maxLeft=Math.max(0,st),Q.maxTop=Math.max(0,ft),Pe&&this.limited&&(Q.minLeft=Math.min(ue.left,ue.left+(ue.width-Q.width)),Q.minTop=Math.min(ue.top,ue.top+(ue.height-Q.height)),Q.maxLeft=ue.left,Q.maxTop=ue.top,ye===2&&(Q.width>=le.width&&(Q.minLeft=Math.min(0,st),Q.maxLeft=Math.max(0,st)),Q.height>=le.height&&(Q.minTop=Math.min(0,ft),Q.maxTop=Math.max(0,ft))))}else Q.minLeft=-Q.width,Q.minTop=-Q.height,Q.maxLeft=le.width,Q.maxTop=le.height},renderCanvas:function(D,V){var W=this.canvasData,le=this.imageData;if(V){var Q=Ke({width:le.naturalWidth*Math.abs(le.scaleX||1),height:le.naturalHeight*Math.abs(le.scaleY||1),degree:le.rotate||0}),ue=Q.width,ye=Q.height,Le=W.width*(ue/W.naturalWidth),Pe=W.height*(ye/W.naturalHeight);W.left-=(Le-W.width)/2,W.top-=(Pe-W.height)/2,W.width=Le,W.height=Pe,W.aspectRatio=ue/ye,W.naturalWidth=ue,W.naturalHeight=ye,this.limitCanvas(!0,!1)}(W.width>W.maxWidth||W.width<W.minWidth)&&(W.left=W.oldLeft),(W.height>W.maxHeight||W.height<W.minHeight)&&(W.top=W.oldTop),W.width=Math.min(Math.max(W.width,W.minWidth),W.maxWidth),W.height=Math.min(Math.max(W.height,W.minHeight),W.maxHeight),this.limitCanvas(!1,!0),W.left=Math.min(Math.max(W.left,W.minLeft),W.maxLeft),W.top=Math.min(Math.max(W.top,W.minTop),W.maxTop),W.oldLeft=W.left,W.oldTop=W.top,rr(this.canvas,ut({width:W.width,height:W.height},de({translateX:W.left,translateY:W.top}))),this.renderImage(D),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(D){var V=this.canvasData,W=this.imageData,le=W.naturalWidth*(V.width/V.naturalWidth),Q=W.naturalHeight*(V.height/V.naturalHeight);ut(W,{width:le,height:Q,left:(V.width-le)/2,top:(V.height-Q)/2}),rr(this.image,ut({width:W.width,height:W.height},de(ut({translateX:W.left,translateY:W.top},W)))),D&&this.output()},initCropBox:function(){var D=this.options,V=this.canvasData,W=D.aspectRatio||D.initialAspectRatio,le=Number(D.autoCropArea)||.8,Q={width:V.width,height:V.height};W&&(V.height*W>V.width?Q.height=Q.width/W:Q.width=Q.height*W),this.cropBoxData=Q,this.limitCropBox(!0,!0),Q.width=Math.min(Math.max(Q.width,Q.minWidth),Q.maxWidth),Q.height=Math.min(Math.max(Q.height,Q.minHeight),Q.maxHeight),Q.width=Math.max(Q.minWidth,Q.width*le),Q.height=Math.max(Q.minHeight,Q.height*le),Q.left=V.left+(V.width-Q.width)/2,Q.top=V.top+(V.height-Q.height)/2,Q.oldLeft=Q.left,Q.oldTop=Q.top,this.initialCropBoxData=ut({},Q)},limitCropBox:function(D,V){var W=this.options,le=this.containerData,Q=this.canvasData,ue=this.cropBoxData,ye=this.limited,Le=W.aspectRatio;if(D){var Pe=Number(W.minCropBoxWidth)||0,$e=Number(W.minCropBoxHeight)||0,Re=ye?Math.min(le.width,Q.width,Q.width+Q.left,le.width-Q.left):le.width,je=ye?Math.min(le.height,Q.height,Q.height+Q.top,le.height-Q.top):le.height;Pe=Math.min(Pe,le.width),$e=Math.min($e,le.height),Le&&(Pe&&$e?$e*Le>Pe?$e=Pe/Le:Pe=$e*Le:Pe?$e=Pe/Le:$e&&(Pe=$e*Le),je*Le>Re?je=Re/Le:Re=je*Le),ue.minWidth=Math.min(Pe,Re),ue.minHeight=Math.min($e,je),ue.maxWidth=Re,ue.maxHeight=je}V&&(ye?(ue.minLeft=Math.max(0,Q.left),ue.minTop=Math.max(0,Q.top),ue.maxLeft=Math.min(le.width,Q.left+Q.width)-ue.width,ue.maxTop=Math.min(le.height,Q.top+Q.height)-ue.height):(ue.minLeft=0,ue.minTop=0,ue.maxLeft=le.width-ue.width,ue.maxTop=le.height-ue.height))},renderCropBox:function(){var D=this.options,V=this.containerData,W=this.cropBoxData;(W.width>W.maxWidth||W.width<W.minWidth)&&(W.left=W.oldLeft),(W.height>W.maxHeight||W.height<W.minHeight)&&(W.top=W.oldTop),W.width=Math.min(Math.max(W.width,W.minWidth),W.maxWidth),W.height=Math.min(Math.max(W.height,W.minHeight),W.maxHeight),this.limitCropBox(!1,!0),W.left=Math.min(Math.max(W.left,W.minLeft),W.maxLeft),W.top=Math.min(Math.max(W.top,W.minTop),W.maxTop),W.oldLeft=W.left,W.oldTop=W.top,D.movable&&D.cropBoxMovable&&hr(this.face,me,W.width>=V.width&&W.height>=V.height?y:N),rr(this.cropBox,ut({width:W.width,height:W.height},de({translateX:W.left,translateY:W.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Bt(this.element,ve,this.getData())}},or={initPreview:function(){var D=this.element,V=this.crossOrigin,W=this.options.preview,le=V?this.crossOriginUrl:this.url,Q=D.alt||"The image to preview",ue=document.createElement("img");if(V&&(ue.crossOrigin=V),ue.src=le,ue.alt=Q,this.viewBox.appendChild(ue),this.viewBoxImage=ue,!!W){var ye=W;typeof W=="string"?ye=D.ownerDocument.querySelectorAll(W):W.querySelector&&(ye=[W]),this.previews=ye,Wt(ye,function(Le){var Pe=document.createElement("img");hr(Le,ke,{width:Le.offsetWidth,height:Le.offsetHeight,html:Le.innerHTML}),V&&(Pe.crossOrigin=V),Pe.src=le,Pe.alt=Q,Pe.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',Le.innerHTML="",Le.appendChild(Pe)})}},resetPreview:function(){Wt(this.previews,function(D){var V=Ur(D,ke);rr(D,{width:V.width,height:V.height}),D.innerHTML=V.html,Jr(D,ke)})},preview:function(){var D=this.imageData,V=this.canvasData,W=this.cropBoxData,le=W.width,Q=W.height,ue=D.width,ye=D.height,Le=W.left-V.left-D.left,Pe=W.top-V.top-D.top;!this.cropped||this.disabled||(rr(this.viewBoxImage,ut({width:ue,height:ye},de(ut({translateX:-Le,translateY:-Pe},D)))),Wt(this.previews,function($e){var Re=Ur($e,ke),je=Re.width,st=Re.height,ft=je,jt=st,_t=1;le&&(_t=je/le,jt=Q*_t),Q&&jt>st&&(_t=st/Q,ft=le*_t,jt=st),rr($e,{width:ft,height:jt}),rr($e.getElementsByTagName("img")[0],ut({width:ue*_t,height:ye*_t},de(ut({translateX:-Le*_t,translateY:-Pe*_t},D))))}))}},tr={bind:function(){var D=this.element,V=this.options,W=this.cropper;St(V.cropstart)&&tt(D,Ae,V.cropstart),St(V.cropmove)&&tt(D,he,V.cropmove),St(V.cropend)&&tt(D,pe,V.cropend),St(V.crop)&&tt(D,ve,V.crop),St(V.zoom)&&tt(D,bt,V.zoom),tt(W,ze,this.onCropStart=this.cropStart.bind(this)),V.zoomable&&V.zoomOnWheel&&tt(W,It,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),V.toggleDragModeOnDblclick&&tt(W,Me,this.onDblclick=this.dblclick.bind(this)),tt(D.ownerDocument,at,this.onCropMove=this.cropMove.bind(this)),tt(D.ownerDocument,Qe,this.onCropEnd=this.cropEnd.bind(this)),V.responsive&&tt(window,At,this.onResize=this.resize.bind(this))},unbind:function(){var D=this.element,V=this.options,W=this.cropper;St(V.cropstart)&&cr(D,Ae,V.cropstart),St(V.cropmove)&&cr(D,he,V.cropmove),St(V.cropend)&&cr(D,pe,V.cropend),St(V.crop)&&cr(D,ve,V.crop),St(V.zoom)&&cr(D,bt,V.zoom),cr(W,ze,this.onCropStart),V.zoomable&&V.zoomOnWheel&&cr(W,It,this.onWheel,{passive:!1,capture:!0}),V.toggleDragModeOnDblclick&&cr(W,Me,this.onDblclick),cr(D.ownerDocument,at,this.onCropMove),cr(D.ownerDocument,Qe,this.onCropEnd),V.responsive&&cr(window,At,this.onResize)}},nr={resize:function(){if(!this.disabled){var D=this.options,V=this.container,W=this.containerData,le=V.offsetWidth/W.width,Q=V.offsetHeight/W.height,ue=Math.abs(le-1)>Math.abs(Q-1)?le:Q;if(ue!==1){var ye,Le;D.restore&&(ye=this.getCanvasData(),Le=this.getCropBoxData()),this.render(),D.restore&&(this.setCanvasData(Wt(ye,function(Pe,$e){ye[$e]=Pe*ue})),this.setCropBoxData(Wt(Le,function(Pe,$e){Le[$e]=Pe*ue})))}}},dblclick:function(){this.disabled||this.options.dragMode===ge||this.setDragMode(Gr(this.dragBox,j)?oe:ne)},wheel:function(D){var V=this,W=Number(this.options.wheelZoomRatio)||.1,le=1;this.disabled||(D.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){V.wheeling=!1},50),D.deltaY?le=D.deltaY>0?1:-1:D.wheelDelta?le=-D.wheelDelta/120:D.detail&&(le=D.detail>0?1:-1),this.zoom(-le*W,D)))},cropStart:function(D){var V=D.buttons,W=D.button;if(!(this.disabled||(D.type==="mousedown"||D.type==="pointerdown"&&D.pointerType==="mouse")&&(nt(V)&&V!==1||nt(W)&&W!==0||D.ctrlKey))){var le=this.options,Q=this.pointers,ue;D.changedTouches?Wt(D.changedTouches,function(ye){Q[ye.identifier]=xe(ye)}):Q[D.pointerId||0]=xe(D),Object.keys(Q).length>1&&le.zoomable&&le.zoomOnTouch?ue=b:ue=Ur(D.target,me),!!Rt.test(ue)&&Bt(this.element,Ae,{originalEvent:D,action:ue})!==!1&&(D.preventDefault(),this.action=ue,this.cropping=!1,ue===m&&(this.cropping=!0,Dt(this.dragBox,re)))}},cropMove:function(D){var V=this.action;if(!(this.disabled||!V)){var W=this.pointers;D.preventDefault(),Bt(this.element,he,{originalEvent:D,action:V})!==!1&&(D.changedTouches?Wt(D.changedTouches,function(le){ut(W[le.identifier]||{},xe(le,!0))}):ut(W[D.pointerId||0]||{},xe(D,!0)),this.change(D))}},cropEnd:function(D){if(!this.disabled){var V=this.action,W=this.pointers;D.changedTouches?Wt(D.changedTouches,function(le){delete W[le.identifier]}):delete W[D.pointerId||0],V&&(D.preventDefault(),Object.keys(W).length||(this.action=""),this.cropping&&(this.cropping=!1,Rr(this.dragBox,re,this.cropped&&this.options.modal)),Bt(this.element,pe,{originalEvent:D,action:V}))}}},K={change:function(D){var V=this.options,W=this.canvasData,le=this.containerData,Q=this.cropBoxData,ue=this.pointers,ye=this.action,Le=V.aspectRatio,Pe=Q.left,$e=Q.top,Re=Q.width,je=Q.height,st=Pe+Re,ft=$e+je,jt=0,_t=0,Kt=le.width,Yt=le.height,Qt=!0,Wr;!Le&&D.shiftKey&&(Le=Re&&je?Re/je:1),this.limited&&(jt=Q.minLeft,_t=Q.minTop,Kt=jt+Math.min(le.width,W.width,W.left+W.width),Yt=_t+Math.min(le.height,W.height,W.top+W.height));var fr=ue[Object.keys(ue)[0]],qe={x:fr.endX-fr.startX,y:fr.endY-fr.startY},wt=function(Lr){switch(Lr){case S:st+qe.x>Kt&&(qe.x=Kt-st);break;case A:Pe+qe.x<jt&&(qe.x=jt-Pe);break;case T:$e+qe.y<_t&&(qe.y=_t-$e);break;case I:ft+qe.y>Yt&&(qe.y=Yt-ft);break}};switch(ye){case N:Pe+=qe.x,$e+=qe.y;break;case S:if(qe.x>=0&&(st>=Kt||Le&&($e<=_t||ft>=Yt))){Qt=!1;break}wt(S),Re+=qe.x,Re<0&&(ye=A,Re=-Re,Pe-=Re),Le&&(je=Re/Le,$e+=(Q.height-je)/2);break;case T:if(qe.y<=0&&($e<=_t||Le&&(Pe<=jt||st>=Kt))){Qt=!1;break}wt(T),je-=qe.y,$e+=qe.y,je<0&&(ye=I,je=-je,$e-=je),Le&&(Re=je*Le,Pe+=(Q.width-Re)/2);break;case A:if(qe.x<=0&&(Pe<=jt||Le&&($e<=_t||ft>=Yt))){Qt=!1;break}wt(A),Re-=qe.x,Pe+=qe.x,Re<0&&(ye=S,Re=-Re,Pe-=Re),Le&&(je=Re/Le,$e+=(Q.height-je)/2);break;case I:if(qe.y>=0&&(ft>=Yt||Le&&(Pe<=jt||st>=Kt))){Qt=!1;break}wt(I),je+=qe.y,je<0&&(ye=T,je=-je,$e-=je),Le&&(Re=je*Le,Pe+=(Q.width-Re)/2);break;case R:if(Le){if(qe.y<=0&&($e<=_t||st>=Kt)){Qt=!1;break}wt(T),je-=qe.y,$e+=qe.y,Re=je*Le}else wt(T),wt(S),qe.x>=0?st<Kt?Re+=qe.x:qe.y<=0&&$e<=_t&&(Qt=!1):Re+=qe.x,qe.y<=0?$e>_t&&(je-=qe.y,$e+=qe.y):(je-=qe.y,$e+=qe.y);Re<0&&je<0?(ye=L,je=-je,Re=-Re,$e-=je,Pe-=Re):Re<0?(ye=B,Re=-Re,Pe-=Re):je<0&&(ye=F,je=-je,$e-=je);break;case B:if(Le){if(qe.y<=0&&($e<=_t||Pe<=jt)){Qt=!1;break}wt(T),je-=qe.y,$e+=qe.y,Re=je*Le,Pe+=Q.width-Re}else wt(T),wt(A),qe.x<=0?Pe>jt?(Re-=qe.x,Pe+=qe.x):qe.y<=0&&$e<=_t&&(Qt=!1):(Re-=qe.x,Pe+=qe.x),qe.y<=0?$e>_t&&(je-=qe.y,$e+=qe.y):(je-=qe.y,$e+=qe.y);Re<0&&je<0?(ye=F,je=-je,Re=-Re,$e-=je,Pe-=Re):Re<0?(ye=R,Re=-Re,Pe-=Re):je<0&&(ye=L,je=-je,$e-=je);break;case L:if(Le){if(qe.x<=0&&(Pe<=jt||ft>=Yt)){Qt=!1;break}wt(A),Re-=qe.x,Pe+=qe.x,je=Re/Le}else wt(I),wt(A),qe.x<=0?Pe>jt?(Re-=qe.x,Pe+=qe.x):qe.y>=0&&ft>=Yt&&(Qt=!1):(Re-=qe.x,Pe+=qe.x),qe.y>=0?ft<Yt&&(je+=qe.y):je+=qe.y;Re<0&&je<0?(ye=R,je=-je,Re=-Re,$e-=je,Pe-=Re):Re<0?(ye=F,Re=-Re,Pe-=Re):je<0&&(ye=B,je=-je,$e-=je);break;case F:if(Le){if(qe.x>=0&&(st>=Kt||ft>=Yt)){Qt=!1;break}wt(S),Re+=qe.x,je=Re/Le}else wt(I),wt(S),qe.x>=0?st<Kt?Re+=qe.x:qe.y>=0&&ft>=Yt&&(Qt=!1):Re+=qe.x,qe.y>=0?ft<Yt&&(je+=qe.y):je+=qe.y;Re<0&&je<0?(ye=B,je=-je,Re=-Re,$e-=je,Pe-=Re):Re<0?(ye=L,Re=-Re,Pe-=Re):je<0&&(ye=R,je=-je,$e-=je);break;case y:this.move(qe.x,qe.y),Qt=!1;break;case b:this.zoom(Te(ue),D),Qt=!1;break;case m:if(!qe.x||!qe.y){Qt=!1;break}Wr=Ge(this.cropper),Pe=fr.startX-Wr.left,$e=fr.startY-Wr.top,Re=Q.minWidth,je=Q.minHeight,qe.x>0?ye=qe.y>0?F:R:qe.x<0&&(Pe-=Re,ye=qe.y>0?L:B),qe.y<0&&($e-=je),this.cropped||(lr(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Qt&&(Q.width=Re,Q.height=je,Q.left=Pe,Q.top=$e,this.action=ye,this.renderCropBox()),Wt(ue,function(er){er.startX=er.endX,er.startY=er.endY})}},_e={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Dt(this.dragBox,re),lr(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ut({},this.initialImageData),this.canvasData=ut({},this.initialCanvasData),this.cropBoxData=ut({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ut(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),lr(this.dragBox,re),Dt(this.cropBox,z)),this},replace:function(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&D&&(this.isImg&&(this.element.src=D),V?(this.url=D,this.image.src=D,this.ready&&(this.viewBoxImage.src=D,Wt(this.previews,function(W){W.getElementsByTagName("img")[0].src=D}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(D))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,lr(this.cropper,P)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Dt(this.cropper,P)),this},destroy:function(){var D=this.element;return D[O]?(D[O]=void 0,this.isImg&&this.replaced&&(D.src=this.originalUrl),this.uncreate(),this):this},move:function(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,W=this.canvasData,le=W.left,Q=W.top;return this.moveTo(Ir(D)?D:le+Number(D),Ir(V)?V:Q+Number(V))},moveTo:function(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,W=this.canvasData,le=!1;return D=Number(D),V=Number(V),this.ready&&!this.disabled&&this.options.movable&&(nt(D)&&(W.left=D,le=!0),nt(V)&&(W.top=V,le=!0),le&&this.renderCanvas(!0)),this},zoom:function(D,V){var W=this.canvasData;return D=Number(D),D<0?D=1/(1-D):D=1+D,this.zoomTo(W.width*D/W.naturalWidth,null,V)},zoomTo:function(D,V,W){var le=this.options,Q=this.canvasData,ue=Q.width,ye=Q.height,Le=Q.naturalWidth,Pe=Q.naturalHeight;if(D=Number(D),D>=0&&this.ready&&!this.disabled&&le.zoomable){var $e=Le*D,Re=Pe*D;if(Bt(this.element,bt,{ratio:D,oldRatio:ue/Le,originalEvent:W})===!1)return this;if(W){var je=this.pointers,st=Ge(this.cropper),ft=je&&Object.keys(je).length?Fe(je):{pageX:W.pageX,pageY:W.pageY};Q.left-=($e-ue)*((ft.pageX-st.left-Q.left)/ue),Q.top-=(Re-ye)*((ft.pageY-st.top-Q.top)/ye)}else Ct(V)&&nt(V.x)&&nt(V.y)?(Q.left-=($e-ue)*((V.x-Q.left)/ue),Q.top-=(Re-ye)*((V.y-Q.top)/ye)):(Q.left-=($e-ue)/2,Q.top-=(Re-ye)/2);Q.width=$e,Q.height=Re,this.renderCanvas(!0)}return this},rotate:function(D){return this.rotateTo((this.imageData.rotate||0)+Number(D))},rotateTo:function(D){return D=Number(D),nt(D)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=D%360,this.renderCanvas(!0,!0)),this},scaleX:function(D){var V=this.imageData.scaleY;return this.scale(D,nt(V)?V:1)},scaleY:function(D){var V=this.imageData.scaleX;return this.scale(nt(V)?V:1,D)},scale:function(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D,W=this.imageData,le=!1;return D=Number(D),V=Number(V),this.ready&&!this.disabled&&this.options.scalable&&(nt(D)&&(W.scaleX=D,le=!0),nt(V)&&(W.scaleY=V,le=!0),le&&this.renderCanvas(!0,!0)),this},getData:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,V=this.options,W=this.imageData,le=this.canvasData,Q=this.cropBoxData,ue;if(this.ready&&this.cropped){ue={x:Q.left-le.left,y:Q.top-le.top,width:Q.width,height:Q.height};var ye=W.width/W.naturalWidth;if(Wt(ue,function($e,Re){ue[Re]=$e/ye}),D){var Le=Math.round(ue.y+ue.height),Pe=Math.round(ue.x+ue.width);ue.x=Math.round(ue.x),ue.y=Math.round(ue.y),ue.width=Pe-ue.x,ue.height=Le-ue.y}}else ue={x:0,y:0,width:0,height:0};return V.rotatable&&(ue.rotate=W.rotate||0),V.scalable&&(ue.scaleX=W.scaleX||1,ue.scaleY=W.scaleY||1),ue},setData:function(D){var V=this.options,W=this.imageData,le=this.canvasData,Q={};if(this.ready&&!this.disabled&&Ct(D)){var ue=!1;V.rotatable&&nt(D.rotate)&&D.rotate!==W.rotate&&(W.rotate=D.rotate,ue=!0),V.scalable&&(nt(D.scaleX)&&D.scaleX!==W.scaleX&&(W.scaleX=D.scaleX,ue=!0),nt(D.scaleY)&&D.scaleY!==W.scaleY&&(W.scaleY=D.scaleY,ue=!0)),ue&&this.renderCanvas(!0,!0);var ye=W.width/W.naturalWidth;nt(D.x)&&(Q.left=D.x*ye+le.left),nt(D.y)&&(Q.top=D.y*ye+le.top),nt(D.width)&&(Q.width=D.width*ye),nt(D.height)&&(Q.height=D.height*ye),this.setCropBoxData(Q)}return this},getContainerData:function(){return this.ready?ut({},this.containerData):{}},getImageData:function(){return this.sized?ut({},this.imageData):{}},getCanvasData:function(){var D=this.canvasData,V={};return this.ready&&Wt(["left","top","width","height","naturalWidth","naturalHeight"],function(W){V[W]=D[W]}),V},setCanvasData:function(D){var V=this.canvasData,W=V.aspectRatio;return this.ready&&!this.disabled&&Ct(D)&&(nt(D.left)&&(V.left=D.left),nt(D.top)&&(V.top=D.top),nt(D.width)?(V.width=D.width,V.height=D.width/W):nt(D.height)&&(V.height=D.height,V.width=D.height*W),this.renderCanvas(!0)),this},getCropBoxData:function(){var D=this.cropBoxData,V;return this.ready&&this.cropped&&(V={left:D.left,top:D.top,width:D.width,height:D.height}),V||{}},setCropBoxData:function(D){var V=this.cropBoxData,W=this.options.aspectRatio,le,Q;return this.ready&&this.cropped&&!this.disabled&&Ct(D)&&(nt(D.left)&&(V.left=D.left),nt(D.top)&&(V.top=D.top),nt(D.width)&&D.width!==V.width&&(le=!0,V.width=D.width),nt(D.height)&&D.height!==V.height&&(Q=!0,V.height=D.height),W&&(le?V.height=V.width/W:Q&&(V.width=V.height*W)),this.renderCropBox()),this},getCroppedCanvas:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var V=this.canvasData,W=Ye(this.image,this.imageData,V,D);if(!this.cropped)return W;var le=this.getData(),Q=le.x,ue=le.y,ye=le.width,Le=le.height,Pe=W.width/Math.floor(V.naturalWidth);Pe!==1&&(Q*=Pe,ue*=Pe,ye*=Pe,Le*=Pe);var $e=ye/Le,Re=Ue({aspectRatio:$e,width:D.maxWidth||1/0,height:D.maxHeight||1/0}),je=Ue({aspectRatio:$e,width:D.minWidth||0,height:D.minHeight||0},"cover"),st=Ue({aspectRatio:$e,width:D.width||(Pe!==1?W.width:ye),height:D.height||(Pe!==1?W.height:Le)}),ft=st.width,jt=st.height;ft=Math.min(Re.width,Math.max(je.width,ft)),jt=Math.min(Re.height,Math.max(je.height,jt));var _t=document.createElement("canvas"),Kt=_t.getContext("2d");_t.width=$t(ft),_t.height=$t(jt),Kt.fillStyle=D.fillColor||"transparent",Kt.fillRect(0,0,ft,jt);var Yt=D.imageSmoothingEnabled,Qt=Yt===void 0?!0:Yt,Wr=D.imageSmoothingQuality;Kt.imageSmoothingEnabled=Qt,Wr&&(Kt.imageSmoothingQuality=Wr);var fr=W.width,qe=W.height,wt=Q,er=ue,Lr,gr,rn,pn,_r,Er;wt<=-ye||wt>fr?(wt=0,Lr=0,rn=0,_r=0):wt<=0?(rn=-wt,wt=0,Lr=Math.min(fr,ye+wt),_r=Lr):wt<=fr&&(rn=0,Lr=Math.min(ye,fr-wt),_r=Lr),Lr<=0||er<=-Le||er>qe?(er=0,gr=0,pn=0,Er=0):er<=0?(pn=-er,er=0,gr=Math.min(qe,Le+er),Er=gr):er<=qe&&(pn=0,gr=Math.min(Le,qe-er),Er=gr);var vr=[wt,er,Lr,gr];if(_r>0&&Er>0){var Zr=ft/ye;vr.push(rn*Zr,pn*Zr,_r*Zr,Er*Zr)}return Kt.drawImage.apply(Kt,[W].concat(s(vr.map(function(Kn){return Math.floor($t(Kn))})))),_t},setAspectRatio:function(D){var V=this.options;return!this.disabled&&!Ir(D)&&(V.aspectRatio=Math.max(0,D)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(D){var V=this.options,W=this.dragBox,le=this.face;if(this.ready&&!this.disabled){var Q=D===ne,ue=V.movable&&D===oe;D=Q||ue?D:ge,V.dragMode=D,hr(W,me,D),Rr(W,j,Q),Rr(W,Z,ue),V.cropBoxMovable||(hr(le,me,D),Rr(le,j,Q),Rr(le,Z,ue))}return this}},ae=C.Cropper,we=function(){function q(D){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n(this,q),!D||!Ie.test(D.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=D,this.options=ut({},Pt,Ct(V)&&V),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return a(q,[{key:"init",value:function(){var V=this.element,W=V.tagName.toLowerCase(),le;if(!V[O]){if(V[O]=this,W==="img"){if(this.isImg=!0,le=V.getAttribute("src")||"",this.originalUrl=le,!le)return;le=V.src}else W==="canvas"&&window.HTMLCanvasElement&&(le=V.toDataURL());this.load(le)}}},{key:"load",value:function(V){var W=this;if(!!V){this.url=V,this.imageData={};var le=this.element,Q=this.options;if(!Q.rotatable&&!Q.scalable&&(Q.checkOrientation=!1),!Q.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Lt.test(V)){Ce.test(V)?this.read(Ot(V)):this.clone();return}var ue=new XMLHttpRequest,ye=this.clone.bind(this);this.reloading=!0,this.xhr=ue,ue.onabort=ye,ue.onerror=ye,ue.ontimeout=ye,ue.onprogress=function(){ue.getResponseHeader("content-type")!==Et&&ue.abort()},ue.onload=function(){W.read(ue.response)},ue.onloadend=function(){W.reloading=!1,W.xhr=null},Q.checkCrossOrigin&&X(V)&&le.crossOrigin&&(V=se(V)),ue.open("GET",V,!0),ue.responseType="arraybuffer",ue.withCredentials=le.crossOrigin==="use-credentials",ue.send()}}},{key:"read",value:function(V){var W=this.options,le=this.imageData,Q=mt(V),ue=0,ye=1,Le=1;if(Q>1){this.url=qt(V,Et);var Pe=yt(Q);ue=Pe.rotate,ye=Pe.scaleX,Le=Pe.scaleY}W.rotatable&&(le.rotate=ue),W.scalable&&(le.scaleX=ye,le.scaleY=Le),this.clone()}},{key:"clone",value:function(){var V=this.element,W=this.url,le=V.crossOrigin,Q=W;this.options.checkCrossOrigin&&X(W)&&(le||(le="anonymous"),Q=se(W)),this.crossOrigin=le,this.crossOriginUrl=Q;var ue=document.createElement("img");le&&(ue.crossOrigin=le),ue.src=Q||W,ue.alt=V.alt||"The image to crop",this.image=ue,ue.onload=this.start.bind(this),ue.onerror=this.stop.bind(this),Dt(ue,Y),V.parentNode.insertBefore(ue,V.nextSibling)}},{key:"start",value:function(){var V=this,W=this.image;W.onload=null,W.onerror=null,this.sizing=!0;var le=C.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(C.navigator.userAgent),Q=function(Pe,$e){ut(V.imageData,{naturalWidth:Pe,naturalHeight:$e,aspectRatio:Pe/$e}),V.initialImageData=ut({},V.imageData),V.sizing=!1,V.sized=!0,V.build()};if(W.naturalWidth&&!le){Q(W.naturalWidth,W.naturalHeight);return}var ue=document.createElement("img"),ye=document.body||document.documentElement;this.sizingImage=ue,ue.onload=function(){Q(ue.width,ue.height),le||ye.removeChild(ue)},ue.src=W.src,le||(ue.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",ye.appendChild(ue))}},{key:"stop",value:function(){var V=this.image;V.onload=null,V.onerror=null,V.parentNode.removeChild(V),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var V=this.element,W=this.options,le=this.image,Q=V.parentNode,ue=document.createElement("div");ue.innerHTML=Mt;var ye=ue.querySelector(".".concat(O,"-container")),Le=ye.querySelector(".".concat(O,"-canvas")),Pe=ye.querySelector(".".concat(O,"-drag-box")),$e=ye.querySelector(".".concat(O,"-crop-box")),Re=$e.querySelector(".".concat(O,"-face"));this.container=Q,this.cropper=ye,this.canvas=Le,this.dragBox=Pe,this.cropBox=$e,this.viewBox=ye.querySelector(".".concat(O,"-view-box")),this.face=Re,Le.appendChild(le),Dt(V,z),Q.insertBefore(ye,V.nextSibling),this.isImg||lr(le,Y),this.initPreview(),this.bind(),W.initialAspectRatio=Math.max(0,W.initialAspectRatio)||NaN,W.aspectRatio=Math.max(0,W.aspectRatio)||NaN,W.viewMode=Math.max(0,Math.min(3,Math.round(W.viewMode)))||0,Dt($e,z),W.guides||Dt($e.getElementsByClassName("".concat(O,"-dashed")),z),W.center||Dt($e.getElementsByClassName("".concat(O,"-center")),z),W.background&&Dt(ye,"".concat(O,"-bg")),W.highlight||Dt(Re,ce),W.cropBoxMovable&&(Dt(Re,Z),hr(Re,me,N)),W.cropBoxResizable||(Dt($e.getElementsByClassName("".concat(O,"-line")),z),Dt($e.getElementsByClassName("".concat(O,"-point")),z)),this.render(),this.ready=!0,this.setDragMode(W.dragMode),W.autoCrop&&this.crop(),this.setData(W.data),St(W.ready)&&tt(V,lt,W.ready,{once:!0}),Bt(V,lt)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),lr(this.element,z))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ae,q}},{key:"setDefaults",value:function(V){ut(Pt,Ct(V)&&V)}}]),q}();return ut(we.prototype,ur,or,tr,nr,K,_e),we})});var Sp=xr((exports,module)=>{frappe.provide("frappe.search");frappe.provide("frappe.tags");frappe.search.AwesomeBar=class{setup(r){var t=this;$(".search-bar").removeClass("hidden");var e=$(r),n=e.get(0);this.options=[],this.global_results=[];var i=new Awesomplete(n,{minChars:0,maxItems:99,autoFirst:!0,list:[],filter:function(o,s){return!0},data:function(o,s){return{label:o.index||"",value:o.value}},item:function(o,s){var u=this.get_item(o.value),h=__(u.label||u.value),d="<span>"+h+"</span>";return u.description&&u.value!==u.description&&(d+='<br><span class="text-muted ellipsis">'+__(u.description)+"</span>"),$("<li></li>").data("item.autocomplete",u).html(`<a style="font-weight:normal">${d}</a>`).get(0)},sort:function(o,s){return s.label-o.label}});n.awesomplete=i,this.awesomplete=i,e.on("input",frappe.utils.debounce(function(o){var s=o.target.value,u=s.trim().replace(/\s\s+/g," "),h=u.lastIndexOf(" ");t.global_results=[],t.options=[],u&&u.length>1?(h!==-1&&t.set_specifics(u.slice(0,h),u.slice(h+1)),t.add_defaults(u),t.options=t.options.concat(t.build_options(u)),t.options=t.options.concat(t.global_results)):(t.options=t.options.concat(t.deduplicate(frappe.search.utils.get_recent_pages(u||""))),t.options=t.options.concat(frappe.search.utils.get_frequent_links())),t.add_help(),i.list=t.deduplicate(t.options)},100));var a=function(){this.autocomplete_open||$(this).trigger("input")};e.on("focus",a),e.on("awesomplete-open",function(o){t.autocomplete_open=o.target}),e.on("awesomplete-close",function(o){t.autocomplete_open=!1}),e.on("awesomplete-select",function(o){var s=o.originalEvent,u=s.text.value,h=i.get_item(u);h.route_options&&(frappe.route_options=h.route_options),h.onclick?h.onclick(h.match):frappe.set_route(h.route),e.val("")}),e.on("awesomplete-selectcomplete",function(o){e.val("")}),e.on("keydown",o=>{o.key=="Escape"&&e.trigger("blur")}),frappe.search.utils.setup_recent(),frappe.tags.utils.fetch_tags()}add_help(){this.options.push({value:__("Help on Search"),index:-10,default:"Help",onclick:function(){var r='<table class="table table-bordered">					<tr><td style="width: 50%">'+__("Create a new record")+"</td><td>"+__("new type of document")+"</td></tr>					<tr><td>"+__("List a document type")+"</td><td>"+__("document type..., e.g. customer")+"</td></tr>					<tr><td>"+__("Search in a document type")+"</td><td>"+__("text in document type")+"</td></tr>					<tr><td>"+__("Tags")+"</td><td>"+__("tag name..., e.g. #tag")+"</td></tr>					<tr><td>"+__("Open a module or tool")+"</td><td>"+__("module name...")+"</td></tr>					<tr><td>"+__("Calculate")+"</td><td>"+__("e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...")+"</td></tr>				</table>";frappe.msgprint(r,__("Search Help"))}})}set_specifics(r,t){var e=this,n=this.build_options(r);n.forEach(function(i){i.type&&i.type.toLowerCase().indexOf(t.toLowerCase())===0&&e.options.push(i)})}add_defaults(r){this.make_global_search(r),this.make_search_in_current(r),this.make_calculator(r),this.make_random(r)}build_options(r){var t=frappe.search.utils.get_creatables(r).concat(frappe.search.utils.get_search_in_list(r),frappe.search.utils.get_doctypes(r),frappe.search.utils.get_reports(r),frappe.search.utils.get_pages(r),frappe.search.utils.get_workspaces(r),frappe.search.utils.get_dashboards(r),frappe.search.utils.get_recent_pages(r||""),frappe.search.utils.get_executables(r));r.charAt(0)==="#"&&(t=frappe.tags.utils.get_tags(r));var e=this.deduplicate(t);return e.sort(function(n,i){return i.index-n.index})}deduplicate(r){var t=[],e=[];return r.forEach(function(n){if(n.route){n.route[0]==="List"&&n.route[2]!=="Report"&&n.route[2]!=="Inbox"&&n.route.splice(2);var i=typeof n.route=="string"?n.route:n.route.join("/");if(e.indexOf(i)===-1)t.push(n),e.push(i);else{var a=e.indexOf(i);t[a].index<n.index&&!n.recent&&(t[a]=n)}}else t.push(n),e.push("")}),t}set_global_results(r,t){this.global_results=this.global_results.concat(r)}make_global_search(r){r.charAt(0)!=="#"&&this.options.push({label:`
				<span class="flex justify-between text-medium">
					<span class="ellipsis">${__("Search for {0}",[frappe.utils.xss_sanitise(r).bold()])}</span>
					<kbd>\u21B5</kbd>
				</span>
			`,value:__("Search for {0}",[r]),match:r,index:100,default:"Search",onclick:function(){frappe.searchdialog.search.init_search(r,"global_search")}})}make_search_in_current(r){var t=frappe.get_route();if(t[0]==="List"&&r.indexOf(" in")===-1){var e=frappe.get_meta(frappe.container.page.list_view.doctype),n=e.title_field||"name",i={};i[n]=["like","%"+r+"%"],this.options.push({label:__("Find {0} in {1}",[r.bold(),__(t[1]).bold()]),value:__("Find {0} in {1}",[r,__(t[1])]),route_options:i,onclick:function(){cur_list.show()},index:90,default:"Current",match:r})}}make_calculator(txt){var first=txt.substr(0,1);if(first==parseInt(first)||first==="("||first==="="){first==="="&&(txt=txt.substr(1));try{var val=eval(txt),formatted_value=__("{0} = {1}",[txt,(val+"").bold()]);this.options.push({label:formatted_value,value:__("{0} = {1}",[txt,val]),match:val,index:80,default:"Calculator",onclick:function(){frappe.msgprint(formatted_value,__("Result"))}})}catch(r){}}}make_random(r){r.toLowerCase().includes("random")&&this.options.push({label:__("Generate Random Password"),value:frappe.utils.get_random(16),onclick:function(){frappe.msgprint(frappe.utils.get_random(16),__("Result"))}})}}});var $p=xr((Ap,ec)=>{(function(r){if(typeof Ap=="object"&&typeof ec!="undefined")ec.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=r()}})(function(){var r,t,e;return function n(i,a,o){function s(d,_){if(!a[d]){if(!i[d]){var g=typeof ia=="function"&&ia;if(!_&&g)return g(d,!0);if(u)return u(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var C=a[d]={exports:{}};i[d][0].call(C.exports,function(k){var E=i[d][1][k];return s(E||k)},C,C.exports,n,i,a,o)}return a[d].exports}for(var u=typeof ia=="function"&&ia,h=0;h<o.length;h++)s(o[h]);return s}({1:[function(n,i,a){(function(o){"use strict";var s=o.MutationObserver||o.WebKitMutationObserver,u;if(s){var h=0,d=new s(k),_=o.document.createTextNode("");d.observe(_,{characterData:!0}),u=function(){_.data=h=++h%2}}else if(!o.setImmediate&&typeof o.MessageChannel!="undefined"){var g=new o.MessageChannel;g.port1.onmessage=k,u=function(){g.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?u=function(){var O=o.document.createElement("script");O.onreadystatechange=function(){k(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},o.document.documentElement.appendChild(O)}:u=function(){setTimeout(k,0)};var w,C=[];function k(){w=!0;for(var O,N,m=C.length;m;){for(N=C,C=[],O=-1;++O<m;)N[O]();m=C.length}w=!1}i.exports=E;function E(O){C.push(O)===1&&!w&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,i,a){"use strict";var o=n(1);function s(){}var u={},h=["REJECTED"],d=["FULFILLED"],_=["PENDING"];i.exports=g;function g(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,S!==s&&E(this,S)}g.prototype.catch=function(S){return this.then(null,S)},g.prototype.then=function(S,A){if(typeof S!="function"&&this.state===d||typeof A!="function"&&this.state===h)return this;var I=new this.constructor(s);if(this.state!==_){var T=this.state===d?S:A;C(I,T,this.outcome)}else this.queue.push(new w(I,S,A));return I};function w(S,A,I){this.promise=S,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(S){u.resolve(this.promise,S)},w.prototype.otherCallFulfilled=function(S){C(this.promise,this.onFulfilled,S)},w.prototype.callRejected=function(S){u.reject(this.promise,S)},w.prototype.otherCallRejected=function(S){C(this.promise,this.onRejected,S)};function C(S,A,I){o(function(){var T;try{T=A(I)}catch(R){return u.reject(S,R)}T===S?u.reject(S,new TypeError("Cannot resolve promise with itself")):u.resolve(S,T)})}u.resolve=function(S,A){var I=O(k,A);if(I.status==="error")return u.reject(S,I.value);var T=I.value;if(T)E(S,T);else{S.state=d,S.outcome=A;for(var R=-1,B=S.queue.length;++R<B;)S.queue[R].callFulfilled(A)}return S},u.reject=function(S,A){S.state=h,S.outcome=A;for(var I=-1,T=S.queue.length;++I<T;)S.queue[I].callRejected(A);return S};function k(S){var A=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof A=="function")return function(){A.apply(S,arguments)}}function E(S,A){var I=!1;function T(L){I||(I=!0,u.reject(S,L))}function R(L){I||(I=!0,u.resolve(S,L))}function B(){A(R,T)}var F=O(B);F.status==="error"&&T(F.value)}function O(S,A){var I={};try{I.value=S(A),I.status="success"}catch(T){I.status="error",I.value=T}return I}g.resolve=N;function N(S){return S instanceof this?S:u.resolve(new this(s),S)}g.reject=m;function m(S){var A=new this(s);return u.reject(A,S)}g.all=y;function y(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=S.length,T=!1;if(!I)return this.resolve([]);for(var R=new Array(I),B=0,F=-1,L=new this(s);++F<I;)j(S[F],F);return L;function j(P,z){A.resolve(P).then(Y,function(ce){T||(T=!0,u.reject(L,ce))});function Y(ce){R[z]=ce,++B===I&&!T&&(T=!0,u.resolve(L,R))}}}g.race=b;function b(S){var A=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=S.length,T=!1;if(!I)return this.resolve([]);for(var R=-1,B=new this(s);++R<I;)F(S[R]);return B;function F(L){A.resolve(L).then(function(j){T||(T=!0,u.resolve(B,j))},function(j){T||(T=!0,u.reject(B,j))})}}},{"1":1}],3:[function(n,i,a){(function(o){"use strict";typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(n,i,a){"use strict";var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function s(K,_e){if(!(K instanceof _e))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(K){return}}var h=u();function d(){try{if(!h||!h.open)return!1;var K=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),_e=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||_e)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(ae){return!1}}function _(K,_e){K=K||[],_e=_e||{};try{return new Blob(K,_e)}catch(D){if(D.name!=="TypeError")throw D;for(var ae=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,we=new ae,q=0;q<K.length;q+=1)we.append(K[q]);return we.getBlob(_e.type)}}typeof Promise=="undefined"&&n(3);var g=Promise;function w(K,_e){_e&&K.then(function(ae){_e(null,ae)},function(ae){_e(ae)})}function C(K,_e,ae){typeof _e=="function"&&K.then(_e),typeof ae=="function"&&K.catch(ae)}function k(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",N=void 0,m={},y=Object.prototype.toString,b="readonly",S="readwrite";function A(K){for(var _e=K.length,ae=new ArrayBuffer(_e),we=new Uint8Array(ae),q=0;q<_e;q++)we[q]=K.charCodeAt(q);return ae}function I(K){return new g(function(_e){var ae=K.transaction(O,S),we=_([""]);ae.objectStore(O).put(we,"key"),ae.onabort=function(q){q.preventDefault(),q.stopPropagation(),_e(!1)},ae.oncomplete=function(){var q=navigator.userAgent.match(/Chrome\/(\d+)/),D=navigator.userAgent.match(/Edge\//);_e(D||!q||parseInt(q[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof N=="boolean"?g.resolve(N):I(K).then(function(_e){return N=_e,N})}function R(K){var _e=m[K.name],ae={};ae.promise=new g(function(we,q){ae.resolve=we,ae.reject=q}),_e.deferredOperations.push(ae),_e.dbReady?_e.dbReady=_e.dbReady.then(function(){return ae.promise}):_e.dbReady=ae.promise}function B(K){var _e=m[K.name],ae=_e.deferredOperations.pop();if(ae)return ae.resolve(),ae.promise}function F(K,_e){var ae=m[K.name],we=ae.deferredOperations.pop();if(we)return we.reject(_e),we.promise}function L(K,_e){return new g(function(ae,we){if(m[K.name]=m[K.name]||ne(),K.db)if(_e)R(K),K.db.close();else return ae(K.db);var q=[K.name];_e&&q.push(K.version);var D=h.open.apply(h,q);_e&&(D.onupgradeneeded=function(V){var W=D.result;try{W.createObjectStore(K.storeName),V.oldVersion<=1&&W.createObjectStore(O)}catch(le){if(le.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+V.oldVersion+" to version "+V.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw le}}),D.onerror=function(V){V.preventDefault(),we(D.error)},D.onsuccess=function(){ae(D.result),B(K)}})}function j(K){return L(K,!1)}function P(K){return L(K,!0)}function z(K,_e){if(!K.db)return!0;var ae=!K.db.objectStoreNames.contains(K.storeName),we=K.version<K.db.version,q=K.version>K.db.version;if(we&&(K.version!==_e&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),q||ae){if(ae){var D=K.db.version+1;D>K.version&&(K.version=D)}return!0}return!1}function Y(K){return new g(function(_e,ae){var we=new FileReader;we.onerror=ae,we.onloadend=function(q){var D=btoa(q.target.result||"");_e({__local_forage_encoded_blob:!0,data:D,type:K.type})},we.readAsBinaryString(K)})}function ce(K){var _e=A(atob(K.data));return _([_e],{type:K.type})}function re(K){return K&&K.__local_forage_encoded_blob}function Z(K){var _e=this,ae=_e._initReady().then(function(){var we=m[_e._dbInfo.name];if(we&&we.dbReady)return we.dbReady});return C(ae,K,K),ae}function me(K){R(K);for(var _e=m[K.name],ae=_e.forages,we=0;we<ae.length;we++){var q=ae[we];q._dbInfo.db&&(q._dbInfo.db.close(),q._dbInfo.db=null)}return K.db=null,j(K).then(function(D){return K.db=D,z(K)?P(K):D}).then(function(D){K.db=_e.db=D;for(var V=0;V<ae.length;V++)ae[V]._dbInfo.db=D}).catch(function(D){throw F(K,D),D})}function ke(K,_e,ae,we){we===void 0&&(we=1);try{var q=K.db.transaction(K.storeName,_e);ae(null,q)}catch(D){if(we>0&&(!K.db||D.name==="InvalidStateError"||D.name==="NotFoundError"))return g.resolve().then(function(){if(!K.db||D.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),P(K)}).then(function(){return me(K).then(function(){ke(K,_e,ae,we-1)})}).catch(ae);ae(D)}}function ne(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function oe(K){var _e=this,ae={db:null};if(K)for(var we in K)ae[we]=K[we];var q=m[ae.name];q||(q=ne(),m[ae.name]=q),q.forages.push(_e),_e._initReady||(_e._initReady=_e.ready,_e.ready=Z);var D=[];function V(){return g.resolve()}for(var W=0;W<q.forages.length;W++){var le=q.forages[W];le!==_e&&D.push(le._initReady().catch(V))}var Q=q.forages.slice(0);return g.all(D).then(function(){return ae.db=q.db,j(ae)}).then(function(ue){return ae.db=ue,z(ae,_e._defaultConfig.version)?P(ae):ue}).then(function(ue){ae.db=q.db=ue,_e._dbInfo=ae;for(var ye=0;ye<Q.length;ye++){var Le=Q[ye];Le!==_e&&(Le._dbInfo.db=ae.db,Le._dbInfo.version=ae.version)}})}function ge(K,_e){var ae=this;K=k(K);var we=new g(function(q,D){ae.ready().then(function(){ke(ae._dbInfo,b,function(V,W){if(V)return D(V);try{var le=W.objectStore(ae._dbInfo.storeName),Q=le.get(K);Q.onsuccess=function(){var ue=Q.result;ue===void 0&&(ue=null),re(ue)&&(ue=ce(ue)),q(ue)},Q.onerror=function(){D(Q.error)}}catch(ue){D(ue)}})}).catch(D)});return w(we,_e),we}function ve(K,_e){var ae=this,we=new g(function(q,D){ae.ready().then(function(){ke(ae._dbInfo,b,function(V,W){if(V)return D(V);try{var le=W.objectStore(ae._dbInfo.storeName),Q=le.openCursor(),ue=1;Q.onsuccess=function(){var ye=Q.result;if(ye){var Le=ye.value;re(Le)&&(Le=ce(Le));var Pe=K(Le,ye.key,ue++);Pe!==void 0?q(Pe):ye.continue()}else q()},Q.onerror=function(){D(Q.error)}}catch(ye){D(ye)}})}).catch(D)});return w(we,_e),we}function pe(K,_e,ae){var we=this;K=k(K);var q=new g(function(D,V){var W;we.ready().then(function(){return W=we._dbInfo,y.call(_e)==="[object Blob]"?T(W.db).then(function(le){return le?_e:Y(_e)}):_e}).then(function(le){ke(we._dbInfo,S,function(Q,ue){if(Q)return V(Q);try{var ye=ue.objectStore(we._dbInfo.storeName);le===null&&(le=void 0);var Le=ye.put(le,K);ue.oncomplete=function(){le===void 0&&(le=null),D(le)},ue.onabort=ue.onerror=function(){var Pe=Le.error?Le.error:Le.transaction.error;V(Pe)}}catch(Pe){V(Pe)}})}).catch(V)});return w(q,ae),q}function he(K,_e){var ae=this;K=k(K);var we=new g(function(q,D){ae.ready().then(function(){ke(ae._dbInfo,S,function(V,W){if(V)return D(V);try{var le=W.objectStore(ae._dbInfo.storeName),Q=le.delete(K);W.oncomplete=function(){q()},W.onerror=function(){D(Q.error)},W.onabort=function(){var ue=Q.error?Q.error:Q.transaction.error;D(ue)}}catch(ue){D(ue)}})}).catch(D)});return w(we,_e),we}function Ae(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){ke(_e._dbInfo,S,function(D,V){if(D)return q(D);try{var W=V.objectStore(_e._dbInfo.storeName),le=W.clear();V.oncomplete=function(){we()},V.onabort=V.onerror=function(){var Q=le.error?le.error:le.transaction.error;q(Q)}}catch(Q){q(Q)}})}).catch(q)});return w(ae,K),ae}function Me(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){ke(_e._dbInfo,b,function(D,V){if(D)return q(D);try{var W=V.objectStore(_e._dbInfo.storeName),le=W.count();le.onsuccess=function(){we(le.result)},le.onerror=function(){q(le.error)}}catch(Q){q(Q)}})}).catch(q)});return w(ae,K),ae}function De(K,_e){var ae=this,we=new g(function(q,D){if(K<0){q(null);return}ae.ready().then(function(){ke(ae._dbInfo,b,function(V,W){if(V)return D(V);try{var le=W.objectStore(ae._dbInfo.storeName),Q=!1,ue=le.openKeyCursor();ue.onsuccess=function(){var ye=ue.result;if(!ye){q(null);return}K===0||Q?q(ye.key):(Q=!0,ye.advance(K))},ue.onerror=function(){D(ue.error)}}catch(ye){D(ye)}})}).catch(D)});return w(we,_e),we}function Je(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){ke(_e._dbInfo,b,function(D,V){if(D)return q(D);try{var W=V.objectStore(_e._dbInfo.storeName),le=W.openKeyCursor(),Q=[];le.onsuccess=function(){var ue=le.result;if(!ue){we(Q);return}Q.push(ue.key),ue.continue()},le.onerror=function(){q(le.error)}}catch(ue){q(ue)}})}).catch(q)});return w(ae,K),ae}function Se(K,_e){_e=E.apply(this,arguments);var ae=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ae.name,K.storeName=K.storeName||ae.storeName);var we=this,q;if(!K.name)q=g.reject("Invalid arguments");else{var D=K.name===ae.name&&we._dbInfo.db,V=D?g.resolve(we._dbInfo.db):j(K).then(function(W){var le=m[K.name],Q=le.forages;le.db=W;for(var ue=0;ue<Q.length;ue++)Q[ue]._dbInfo.db=W;return W});K.storeName?q=V.then(function(W){if(!!W.objectStoreNames.contains(K.storeName)){var le=W.version+1;R(K);var Q=m[K.name],ue=Q.forages;W.close();for(var ye=0;ye<ue.length;ye++){var Le=ue[ye];Le._dbInfo.db=null,Le._dbInfo.version=le}var Pe=new g(function($e,Re){var je=h.open(K.name,le);je.onerror=function(st){var ft=je.result;ft.close(),Re(st)},je.onupgradeneeded=function(){var st=je.result;st.deleteObjectStore(K.storeName)},je.onsuccess=function(){var st=je.result;st.close(),$e(st)}});return Pe.then(function($e){Q.db=$e;for(var Re=0;Re<ue.length;Re++){var je=ue[Re];je._dbInfo.db=$e,B(je._dbInfo)}}).catch(function($e){throw(F(K,$e)||g.resolve()).catch(function(){}),$e})}}):q=V.then(function(W){R(K);var le=m[K.name],Q=le.forages;W.close();for(var ue=0;ue<Q.length;ue++){var ye=Q[ue];ye._dbInfo.db=null}var Le=new g(function(Pe,$e){var Re=h.deleteDatabase(K.name);Re.onerror=Re.onblocked=function(je){var st=Re.result;st&&st.close(),$e(je)},Re.onsuccess=function(){var je=Re.result;je&&je.close(),Pe(je)}});return Le.then(function(Pe){le.db=Pe;for(var $e=0;$e<Q.length;$e++){var Re=Q[$e];B(Re._dbInfo)}}).catch(function(Pe){throw(F(K,Pe)||g.resolve()).catch(function(){}),Pe})})}return w(q,_e),q}var ze={_driver:"asyncStorage",_initStorage:oe,_support:d(),iterate:ve,getItem:ge,setItem:pe,removeItem:he,clear:Ae,length:Me,key:De,keys:Je,dropInstance:Se};function at(){return typeof openDatabase=="function"}var Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt="~~local_forage_type~",At=/^~~local_forage_type~([^~]+)~/,It="__lfsc__:",bt=It.length,Et="arbf",Rt="blob",Lt="si08",Ce="ui08",Ie="uic8",Ve="si16",ct="si32",Pt="ur16",Mt="ui32",Zt="fl32",nt="fl64",Nt=bt+Et.length,Ir=Object.prototype.toString;function Gt(K){var _e=K.length*.75,ae=K.length,we,q=0,D,V,W,le;K[K.length-1]==="="&&(_e--,K[K.length-2]==="="&&_e--);var Q=new ArrayBuffer(_e),ue=new Uint8Array(Q);for(we=0;we<ae;we+=4)D=Qe.indexOf(K[we]),V=Qe.indexOf(K[we+1]),W=Qe.indexOf(K[we+2]),le=Qe.indexOf(K[we+3]),ue[q++]=D<<2|V>>4,ue[q++]=(V&15)<<4|W>>2,ue[q++]=(W&3)<<6|le&63;return Q}function xt(K){var _e=new Uint8Array(K),ae="",we;for(we=0;we<_e.length;we+=3)ae+=Qe[_e[we]>>2],ae+=Qe[(_e[we]&3)<<4|_e[we+1]>>4],ae+=Qe[(_e[we+1]&15)<<2|_e[we+2]>>6],ae+=Qe[_e[we+2]&63];return _e.length%3===2?ae=ae.substring(0,ae.length-1)+"=":_e.length%3===1&&(ae=ae.substring(0,ae.length-2)+"=="),ae}function Ct(K,_e){var ae="";if(K&&(ae=Ir.call(K)),K&&(ae==="[object ArrayBuffer]"||K.buffer&&Ir.call(K.buffer)==="[object ArrayBuffer]")){var we,q=It;K instanceof ArrayBuffer?(we=K,q+=Et):(we=K.buffer,ae==="[object Int8Array]"?q+=Lt:ae==="[object Uint8Array]"?q+=Ce:ae==="[object Uint8ClampedArray]"?q+=Ie:ae==="[object Int16Array]"?q+=Ve:ae==="[object Uint16Array]"?q+=Pt:ae==="[object Int32Array]"?q+=ct:ae==="[object Uint32Array]"?q+=Mt:ae==="[object Float32Array]"?q+=Zt:ae==="[object Float64Array]"?q+=nt:_e(new Error("Failed to get type for BinaryArray"))),_e(q+xt(we))}else if(ae==="[object Blob]"){var D=new FileReader;D.onload=function(){var V=lt+K.type+"~"+xt(this.result);_e(It+Rt+V)},D.readAsArrayBuffer(K)}else try{_e(JSON.stringify(K))}catch(V){console.error("Couldn't convert value into a JSON string: ",K),_e(null,V)}}function St(K){if(K.substring(0,bt)!==It)return JSON.parse(K);var _e=K.substring(Nt),ae=K.substring(bt,Nt),we;if(ae===Rt&&At.test(_e)){var q=_e.match(At);we=q[1],_e=_e.substring(q[0].length)}var D=Gt(_e);switch(ae){case Et:return D;case Rt:return _([D],{type:we});case Lt:return new Int8Array(D);case Ce:return new Uint8Array(D);case Ie:return new Uint8ClampedArray(D);case Ve:return new Int16Array(D);case Pt:return new Uint16Array(D);case ct:return new Int32Array(D);case Mt:return new Uint32Array(D);case Zt:return new Float32Array(D);case nt:return new Float64Array(D);default:throw new Error("Unkown type: "+ae)}}var ht={serialize:Ct,deserialize:St,stringToBuffer:Gt,bufferToString:xt};function Pr(K,_e,ae,we){K.executeSql("CREATE TABLE IF NOT EXISTS "+_e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ae,we)}function Wt(K){var _e=this,ae={db:null};if(K)for(var we in K)ae[we]=typeof K[we]!="string"?K[we].toString():K[we];var q=new g(function(D,V){try{ae.db=openDatabase(ae.name,String(ae.version),ae.description,ae.size)}catch(W){return V(W)}ae.db.transaction(function(W){Pr(W,ae,function(){_e._dbInfo=ae,D()},function(le,Q){V(Q)})},V)});return ae.serializer=ht,q}function ut(K,_e,ae,we,q,D){K.executeSql(ae,we,q,function(V,W){W.code===W.SYNTAX_ERR?V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[_e.storeName],function(le,Q){Q.rows.length?D(le,W):Pr(le,_e,function(){le.executeSql(ae,we,q,D)},D)},D):D(V,W)},D)}function Tr(K,_e){var ae=this;K=k(K);var we=new g(function(q,D){ae.ready().then(function(){var V=ae._dbInfo;V.db.transaction(function(W){ut(W,V,"SELECT * FROM "+V.storeName+" WHERE key = ? LIMIT 1",[K],function(le,Q){var ue=Q.rows.length?Q.rows.item(0).value:null;ue&&(ue=V.serializer.deserialize(ue)),q(ue)},function(le,Q){D(Q)})})}).catch(D)});return w(we,_e),we}function $t(K,_e){var ae=this,we=new g(function(q,D){ae.ready().then(function(){var V=ae._dbInfo;V.db.transaction(function(W){ut(W,V,"SELECT * FROM "+V.storeName,[],function(le,Q){for(var ue=Q.rows,ye=ue.length,Le=0;Le<ye;Le++){var Pe=ue.item(Le),$e=Pe.value;if($e&&($e=V.serializer.deserialize($e)),$e=K($e,Pe.key,Le+1),$e!==void 0){q($e);return}}q()},function(le,Q){D(Q)})})}).catch(D)});return w(we,_e),we}function Hr(K,_e,ae,we){var q=this;K=k(K);var D=new g(function(V,W){q.ready().then(function(){_e===void 0&&(_e=null);var le=_e,Q=q._dbInfo;Q.serializer.serialize(_e,function(ue,ye){ye?W(ye):Q.db.transaction(function(Le){ut(Le,Q,"INSERT OR REPLACE INTO "+Q.storeName+" (key, value) VALUES (?, ?)",[K,ue],function(){V(le)},function(Pe,$e){W($e)})},function(Le){if(Le.code===Le.QUOTA_ERR){if(we>0){V(Hr.apply(q,[K,le,ae,we-1]));return}W(Le)}})})}).catch(W)});return w(D,ae),D}function rr(K,_e,ae){return Hr.apply(this,[K,_e,ae,1])}function Gr(K,_e){var ae=this;K=k(K);var we=new g(function(q,D){ae.ready().then(function(){var V=ae._dbInfo;V.db.transaction(function(W){ut(W,V,"DELETE FROM "+V.storeName+" WHERE key = ?",[K],function(){q()},function(le,Q){D(Q)})})}).catch(D)});return w(we,_e),we}function Dt(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){var D=_e._dbInfo;D.db.transaction(function(V){ut(V,D,"DELETE FROM "+D.storeName,[],function(){we()},function(W,le){q(le)})})}).catch(q)});return w(ae,K),ae}function lr(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){var D=_e._dbInfo;D.db.transaction(function(V){ut(V,D,"SELECT COUNT(key) as c FROM "+D.storeName,[],function(W,le){var Q=le.rows.item(0).c;we(Q)},function(W,le){q(le)})})}).catch(q)});return w(ae,K),ae}function Rr(K,_e){var ae=this,we=new g(function(q,D){ae.ready().then(function(){var V=ae._dbInfo;V.db.transaction(function(W){ut(W,V,"SELECT key FROM "+V.storeName+" WHERE id = ? LIMIT 1",[K+1],function(le,Q){var ue=Q.rows.length?Q.rows.item(0).key:null;q(ue)},function(le,Q){D(Q)})})}).catch(D)});return w(we,_e),we}function fn(K){var _e=this,ae=new g(function(we,q){_e.ready().then(function(){var D=_e._dbInfo;D.db.transaction(function(V){ut(V,D,"SELECT key FROM "+D.storeName,[],function(W,le){for(var Q=[],ue=0;ue<le.rows.length;ue++)Q.push(le.rows.item(ue).key);we(Q)},function(W,le){q(le)})})}).catch(q)});return w(ae,K),ae}function ar(K){return new g(function(_e,ae){K.transaction(function(we){we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(q,D){for(var V=[],W=0;W<D.rows.length;W++)V.push(D.rows.item(W).name);_e({db:K,storeNames:V})},function(q,D){ae(D)})},function(we){ae(we)})})}function Ur(K,_e){_e=E.apply(this,arguments);var ae=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ae.name,K.storeName=K.storeName||ae.storeName);var we=this,q;return K.name?q=new g(function(D){var V;K.name===ae.name?V=we._dbInfo.db:V=openDatabase(K.name,"","",0),K.storeName?D({db:V,storeNames:[K.storeName]}):D(ar(V))}).then(function(D){return new g(function(V,W){D.db.transaction(function(le){function Q(Pe){return new g(function($e,Re){le.executeSql("DROP TABLE IF EXISTS "+Pe,[],function(){$e()},function(je,st){Re(st)})})}for(var ue=[],ye=0,Le=D.storeNames.length;ye<Le;ye++)ue.push(Q(D.storeNames[ye]));g.all(ue).then(function(){V()}).catch(function(Pe){W(Pe)})},function(le){W(le)})})}):q=g.reject("Invalid arguments"),w(q,_e),q}var hr={_driver:"webSQLStorage",_initStorage:Wt,_support:at(),iterate:$t,getItem:Tr,setItem:rr,removeItem:Gr,clear:Dt,length:lr,key:Rr,keys:fn,dropInstance:Ur};function Jr(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(K){return!1}}function Nr(K,_e){var ae=K.name+"/";return K.storeName!==_e.storeName&&(ae+=K.storeName+"/"),ae}function mr(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch(_e){return!0}}function cr(){return!mr()||localStorage.length>0}function tt(K){var _e=this,ae={};if(K)for(var we in K)ae[we]=K[we];return ae.keyPrefix=Nr(K,_e._defaultConfig),cr()?(_e._dbInfo=ae,ae.serializer=ht,g.resolve()):g.reject()}function Bt(K){var _e=this,ae=_e.ready().then(function(){for(var we=_e._dbInfo.keyPrefix,q=localStorage.length-1;q>=0;q--){var D=localStorage.key(q);D.indexOf(we)===0&&localStorage.removeItem(D)}});return w(ae,K),ae}function Ge(K,_e){var ae=this;K=k(K);var we=ae.ready().then(function(){var q=ae._dbInfo,D=localStorage.getItem(q.keyPrefix+K);return D&&(D=q.serializer.deserialize(D)),D});return w(we,_e),we}function We(K,_e){var ae=this,we=ae.ready().then(function(){for(var q=ae._dbInfo,D=q.keyPrefix,V=D.length,W=localStorage.length,le=1,Q=0;Q<W;Q++){var ue=localStorage.key(Q);if(ue.indexOf(D)===0){var ye=localStorage.getItem(ue);if(ye&&(ye=q.serializer.deserialize(ye)),ye=K(ye,ue.substring(V),le++),ye!==void 0)return ye}}});return w(we,_e),we}function ot(K,_e){var ae=this,we=ae.ready().then(function(){var q=ae._dbInfo,D;try{D=localStorage.key(K)}catch(V){D=null}return D&&(D=D.substring(q.keyPrefix.length)),D});return w(we,_e),we}function X(K){var _e=this,ae=_e.ready().then(function(){for(var we=_e._dbInfo,q=localStorage.length,D=[],V=0;V<q;V++){var W=localStorage.key(V);W.indexOf(we.keyPrefix)===0&&D.push(W.substring(we.keyPrefix.length))}return D});return w(ae,K),ae}function se(K){var _e=this,ae=_e.keys().then(function(we){return we.length});return w(ae,K),ae}function de(K,_e){var ae=this;K=k(K);var we=ae.ready().then(function(){var q=ae._dbInfo;localStorage.removeItem(q.keyPrefix+K)});return w(we,_e),we}function Te(K,_e,ae){var we=this;K=k(K);var q=we.ready().then(function(){_e===void 0&&(_e=null);var D=_e;return new g(function(V,W){var le=we._dbInfo;le.serializer.serialize(_e,function(Q,ue){if(ue)W(ue);else try{localStorage.setItem(le.keyPrefix+K,Q),V(D)}catch(ye){(ye.name==="QuotaExceededError"||ye.name==="NS_ERROR_DOM_QUOTA_REACHED")&&W(ye),W(ye)}})})});return w(q,ae),q}function xe(K,_e){if(_e=E.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ae=this.config();K.name=K.name||ae.name,K.storeName=K.storeName||ae.storeName}var we=this,q;return K.name?q=new g(function(D){K.storeName?D(Nr(K,we._defaultConfig)):D(K.name+"/")}).then(function(D){for(var V=localStorage.length-1;V>=0;V--){var W=localStorage.key(V);W.indexOf(D)===0&&localStorage.removeItem(W)}}):q=g.reject("Invalid arguments"),w(q,_e),q}var Fe={_driver:"localStorageWrapper",_initStorage:tt,_support:Jr(),iterate:We,getItem:Ge,setItem:Te,removeItem:de,clear:Bt,length:se,key:ot,keys:X,dropInstance:xe},Ue=function(_e,ae){return _e===ae||typeof _e=="number"&&typeof ae=="number"&&isNaN(_e)&&isNaN(ae)},Ke=function(_e,ae){for(var we=_e.length,q=0;q<we;){if(Ue(_e[q],ae))return!0;q++}return!1},Ye=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},Xe={},kt={},pt={INDEXEDDB:ze,WEBSQL:hr,LOCALSTORAGE:Fe},Ot=[pt.INDEXEDDB._driver,pt.WEBSQL._driver,pt.LOCALSTORAGE._driver],qt=["dropInstance"],mt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(qt),yt={description:"",driver:Ot.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ur(K,_e){K[_e]=function(){var ae=arguments;return K.ready().then(function(){return K[_e].apply(K,ae)})}}function or(){for(var K=1;K<arguments.length;K++){var _e=arguments[K];if(_e)for(var ae in _e)_e.hasOwnProperty(ae)&&(Ye(_e[ae])?arguments[0][ae]=_e[ae].slice():arguments[0][ae]=_e[ae])}return arguments[0]}var tr=function(){function K(_e){s(this,K);for(var ae in pt)if(pt.hasOwnProperty(ae)){var we=pt[ae],q=we._driver;this[ae]=q,Xe[q]||this.defineDriver(we)}this._defaultConfig=or({},yt),this._config=or({},this._defaultConfig,_e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ae){if((typeof ae=="undefined"?"undefined":o(ae))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var we in ae){if(we==="storeName"&&(ae[we]=ae[we].replace(/\W/g,"_")),we==="version"&&typeof ae[we]!="number")return new Error("Database version must be a number.");this._config[we]=ae[we]}return"driver"in ae&&ae.driver?this.setDriver(this._config.driver):!0}else return typeof ae=="string"?this._config[ae]:this._config},K.prototype.defineDriver=function(ae,we,q){var D=new g(function(V,W){try{var le=ae._driver,Q=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ae._driver){W(Q);return}for(var ue=mt.concat("_initStorage"),ye=0,Le=ue.length;ye<Le;ye++){var Pe=ue[ye],$e=!Ke(qt,Pe);if(($e||ae[Pe])&&typeof ae[Pe]!="function"){W(Q);return}}var Re=function(){for(var ft=function(Qt){return function(){var Wr=new Error("Method "+Qt+" is not implemented by the current driver"),fr=g.reject(Wr);return w(fr,arguments[arguments.length-1]),fr}},jt=0,_t=qt.length;jt<_t;jt++){var Kt=qt[jt];ae[Kt]||(ae[Kt]=ft(Kt))}};Re();var je=function(ft){Xe[le]&&console.info("Redefining LocalForage driver: "+le),Xe[le]=ae,kt[le]=ft,V()};"_support"in ae?ae._support&&typeof ae._support=="function"?ae._support().then(je,W):je(!!ae._support):je(!0)}catch(st){W(st)}});return C(D,we,q),D},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ae,we,q){var D=Xe[ae]?g.resolve(Xe[ae]):g.reject(new Error("Driver not found."));return C(D,we,q),D},K.prototype.getSerializer=function(ae){var we=g.resolve(ht);return C(we,ae),we},K.prototype.ready=function(ae){var we=this,q=we._driverSet.then(function(){return we._ready===null&&(we._ready=we._initDriver()),we._ready});return C(q,ae,ae),q},K.prototype.setDriver=function(ae,we,q){var D=this;Ye(ae)||(ae=[ae]);var V=this._getSupportedDrivers(ae);function W(){D._config.driver=D.driver()}function le(ye){return D._extend(ye),W(),D._ready=D._initStorage(D._config),D._ready}function Q(ye){return function(){var Le=0;function Pe(){for(;Le<ye.length;){var $e=ye[Le];return Le++,D._dbInfo=null,D._ready=null,D.getDriver($e).then(le).catch(Pe)}W();var Re=new Error("No available storage method found.");return D._driverSet=g.reject(Re),D._driverSet}return Pe()}}var ue=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=ue.then(function(){var ye=V[0];return D._dbInfo=null,D._ready=null,D.getDriver(ye).then(function(Le){D._driver=Le._driver,W(),D._wrapLibraryMethodsWithReady(),D._initDriver=Q(V)})}).catch(function(){W();var ye=new Error("No available storage method found.");return D._driverSet=g.reject(ye),D._driverSet}),C(this._driverSet,we,q),this._driverSet},K.prototype.supports=function(ae){return!!kt[ae]},K.prototype._extend=function(ae){or(this,ae)},K.prototype._getSupportedDrivers=function(ae){for(var we=[],q=0,D=ae.length;q<D;q++){var V=ae[q];this.supports(V)&&we.push(V)}return we},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ae=0,we=mt.length;ae<we;ae++)ur(this,mt[ae])},K.prototype.createInstance=function(ae){return new K(ae)},K}(),nr=new tr;i.exports=nr},{"3":3}]},{},[4])(4)})});var Ip=xr((ho,tc)=>{(function(r,t){typeof ho=="object"&&typeof tc=="object"?tc.exports=t():typeof define=="function"&&define.amd?define([],t):typeof ho=="object"?ho.EditorJS=t():r.EditorJS=t()})(window,function(){return function(r){var t={};function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=r,e.c=t,e.d=function(n,i,a){e.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:a})},e.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,i){if(1&i&&(n=e(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var o in n)e.d(a,o,function(s){return n[s]}.bind(null,o));return a},e.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(i,"a",i),i},e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},e.p="",e(e.s=183)}([function(r,t,e){var n=e(10),i=e(17),a=e(27),o=e(23),s=e(31),u=function(h,d,_){var g,w,C,k,E=h&u.F,O=h&u.G,N=h&u.S,m=h&u.P,y=h&u.B,b=O?n:N?n[d]||(n[d]={}):(n[d]||{}).prototype,S=O?i:i[d]||(i[d]={}),A=S.prototype||(S.prototype={});for(g in O&&(_=d),_)C=((w=!E&&b&&b[g]!==void 0)?b:_)[g],k=y&&w?s(C,n):m&&typeof C=="function"?s(Function.call,C):C,b&&o(b,g,C,h&u.U),S[g]!=C&&a(S,g,k),m&&A[g]!=C&&(A[g]=C)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,r.exports=u},function(r,t){r.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(r,t){r.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},function(r,t){function e(n,i){for(var a=0;a<i.length;a++){var o=i[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}r.exports=function(n,i,a){return i&&e(n.prototype,i),a&&e(n,a),n}},function(r,t){function e(n){return r.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},e(n)}r.exports=e},function(r,t,e){var n=e(107);r.exports=function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),a&&n(i,a)}},function(r,t,e){var n=e(143),i=e(368);r.exports=function(a,o){return!o||n(o)!=="object"&&typeof o!="function"?i(a):o}},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(374)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);function _(C){if(typeof Symbol=="undefined"||C[Symbol.iterator]==null){if(Array.isArray(C)||(C=function(b,S){if(b){if(typeof b=="string")return g(b,S);var A=Object.prototype.toString.call(b).slice(8,-1);return A==="Object"&&b.constructor&&(A=b.constructor.name),A==="Map"||A==="Set"?Array.from(A):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?g(b,S):void 0}}(C))){var k=0,E=function(){};return{s:E,n:function(){return k>=C.length?{done:!0}:{done:!1,value:C[k++]}},e:function(b){throw b},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O,N,m=!0,y=!1;return{s:function(){O=C[Symbol.iterator]()},n:function(){var b=O.next();return m=b.done,b},e:function(b){y=!0,N=b},f:function(){try{m||O.return==null||O.return()}finally{if(y)throw N}}}}function g(C,k){(k==null||k>C.length)&&(k=C.length);for(var E=0,O=new Array(k);E<k;E++)O[E]=C[E];return O}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var w=function(){function C(k){var E=this,O=k.config,N=k.eventsDispatcher;if((0,s.default)(this,C),this.nodes={},this.listeners=new h.default,this.readOnlyMutableListeners={on:function(m,y,b){var S=arguments.length>3&&arguments[3]!==void 0&&arguments[3];E.mutableListenerIds.push(E.listeners.on(m,y,b,S))},clearAll:function(){var m,y=_(E.mutableListenerIds);try{for(y.s();!(m=y.n()).done;){var b=m.value;E.listeners.offById(b)}}catch(S){y.e(S)}finally{y.f()}E.mutableListenerIds=[]}},this.mutableListenerIds=[],(this instanceof C?this.constructor:void 0)===C)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=O,this.eventsDispatcher=N}return(0,u.default)(C,[{key:"removeAllNodes",value:function(){for(var k in this.nodes){var E=this.nodes[k];E instanceof HTMLElement&&E.remove()}}},{key:"state",set:function(k){this.Editor=k}},{key:"isRtl",get:function(){return this.config.i18n.direction==="rtl"}}]),C}();o.default=w,w.displayName="Module",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(367),e(22),e(15)],(a=typeof(n=function(o,s,u,h,d){"use strict";var _,g=e(1);function w(A,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"log",R=arguments.length>3?arguments[3]:void 0,B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"color: inherit";if("console"in window&&window.console[T]){var F=["info","log","warn","error"].includes(T),L=[];switch(w.logLevel){case _.ERROR:if(T!=="error")return;break;case _.WARN:if(!["error","warn"].includes(T))return;break;case _.INFO:if(!F||A)return}R&&L.push(R);var j="Editor.js ".concat("2.20.0"),P=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;A&&(F?(L.unshift(P,B),I="%c".concat(j,"%c ").concat(I)):I="( ".concat(j," )").concat(I));try{if(F)if(R){var z;(z=console)[T].apply(z,["".concat(I," %o")].concat(L))}else{var Y;(Y=console)[T].apply(Y,[I].concat(L))}else console[T](I)}catch(ce){}}}Object.defineProperty(o,"__esModule",{value:!0}),o.setLogLevel=function(A){w.logLevel=A},o.typeOf=E,o.isFunction=O,o.isObject=N,o.isString=function(A){return E(A)==="string"},o.isBoolean=function(A){return E(A)==="boolean"},o.isNumber=function(A){return E(A)==="number"},o.isUndefined=m,o.isClass=function(A){return O(A)&&/^\s*class\s+/.test(A.toString())},o.isEmpty=function(A){return!A||Object.keys(A).length===0&&A.constructor===Object},o.isPromise=function(A){return Promise.resolve(A)===A},o.isPrintableKey=function(A){return A>47&&A<58||A===32||A===13||A===229||A>64&&A<91||A>95&&A<112||A>185&&A<193||A>218&&A<223},o.sequence=function(A){return y.apply(this,arguments)},o.array=function(A){return Array.prototype.slice.call(A)},o.delay=function(A,I){return function(){var T=this,R=arguments;window.setTimeout(function(){return A.apply(T,R)},I)}},o.getFileExtension=function(A){return A.name.split(".").pop()},o.isValidMimeType=function(A){return/^[-\w]+\/([-+\w]+|\*)$/.test(A)},o.debounce=function(A,I,T){var R,B=arguments,F=this;return function(){var L=F,j=B,P=T&&!R;window.clearTimeout(R),R=window.setTimeout(function(){R=null,T||A.apply(L,j)},I),P&&A.apply(L,j)}},o.copyTextToClipboard=function(A){var I=d.default.make("div","codex-editor-clipboard",{innerHTML:A});document.body.appendChild(I);var T=window.getSelection(),R=document.createRange();R.selectNode(I),window.getSelection().removeAllRanges(),T.addRange(R),document.execCommand("copy"),document.body.removeChild(I)},o.getUserOS=b,o.capitalize=function(A){return A[0].toUpperCase()+A.slice(1)},o.deepMerge=function A(I){for(var T=arguments.length,R=new Array(T>1?T-1:0),B=1;B<T;B++)R[B-1]=arguments[B];if(!R.length)return I;var F=R.shift();if(N(I)&&N(F))for(var L in F)N(F[L])?(I[L]||Object.assign(I,(0,u.default)({},L,{})),A(I[L],F[L])):Object.assign(I,(0,u.default)({},L,F[L]));return A.apply(void 0,[I].concat(R))},o.beautifyShortcut=function(A){var I=b();return A=A.replace(/shift/gi,"\u21E7").replace(/backspace/gi,"\u232B").replace(/enter/gi,"\u23CE").replace(/up/gi,"\u2191").replace(/left/gi,"\u2192").replace(/down/gi,"\u2193").replace(/right/gi,"\u2190").replace(/escape/gi,"\u238B").replace(/insert/gi,"Ins").replace(/delete/gi,"\u2421").replace(/\+/gi," + "),A=I.mac?A.replace(/ctrl|cmd/gi,"\u2318").replace(/alt/gi,"\u2325"):A.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")},o.getValidUrl=function(A){try{return new URL(A).href}catch(I){}return A.substring(0,2)==="//"?window.location.protocol+A:window.location.origin+A},o.openTab=function(A){window.open(A,"_blank")},o.generateId=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"".concat(A).concat(Math.floor(1e8*Math.random()).toString(16))},o.deprecationAssert=function(A,I,T){var R="\xAB".concat(I,"\xBB is deprecated and will be removed in the next major release. Please use the \xAB").concat(T,"\xBB instead.");A&&k(R,"warn")},o.isTouchSupported=o.logLabeled=o.log=o.mouseButtons=o.keyCodes=o.LogLevels=void 0,s=g(s),u=g(u),h=g(h),d=g(d),o.LogLevels=_,function(A){A.VERBOSE="VERBOSE",A.INFO="INFO",A.WARN="WARN",A.ERROR="ERROR"}(_||(o.LogLevels=_={})),o.keyCodes={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},o.mouseButtons={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4},w.logLevel=_.VERBOSE;var C=w.bind(window,!1);o.log=C;var k=w.bind(window,!0);function E(A){return Object.prototype.toString.call(A).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function O(A){return E(A)==="function"}function N(A){return E(A)==="object"}function m(A){return E(A)==="undefined"}function y(){return(y=(0,h.default)(s.default.mark(function A(I){var T,R,B,F,L=arguments;return s.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F=function(){return(F=(0,h.default)(s.default.mark(function P(z,Y,ce){return s.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,z.function(z.data);case 3:return re.next=5,Y(m(z.data)?{}:z.data);case 5:re.next=10;break;case 7:re.prev=7,re.t0=re.catch(0),ce(m(z.data)?{}:z.data);case 10:case"end":return re.stop()}},P,null,[[0,7]])}))).apply(this,arguments)},B=function(P,z,Y){return F.apply(this,arguments)},T=L.length>1&&L[1]!==void 0?L[1]:function(){},R=L.length>2&&L[2]!==void 0?L[2]:function(){},j.abrupt("return",I.reduce(function(){var P=(0,h.default)(s.default.mark(function z(Y,ce){return s.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,Y;case 2:return re.abrupt("return",B(ce,T,R));case 3:case"end":return re.stop()}},z)}));return function(z,Y){return P.apply(this,arguments)}}(),Promise.resolve()));case 5:case"end":return j.stop()}},A)}))).apply(this,arguments)}function b(){var A={win:!1,mac:!1,x11:!1,linux:!1},I=Object.keys(A).find(function(T){return navigator.appVersion.toLowerCase().indexOf(T)!==-1});return I&&(A[I]=!0),A}o.logLabeled=k;var S="ontouchstart"in document.documentElement;o.isTouchSupported=S})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(143);function i(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return i=function(){return a},a}r.exports=function(a){if(a&&a.__esModule)return a;if(a===null||n(a)!=="object"&&typeof a!="function")return{default:a};var o=i();if(o&&o.has(a))return o.get(a);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)){var d=u?Object.getOwnPropertyDescriptor(a,h):null;d&&(d.get||d.set)?Object.defineProperty(s,h,d):s[h]=a[h]}return s.default=a,o&&o.set(a,s),s}},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){try{return!!e()}catch(n){return!0}}},function(r,t,e){var n=e(13);r.exports=function(i){if(!n(i))throw TypeError(i+" is not an object!");return i}},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var n=e(67)("wks"),i=e(44),a=e(10).Symbol,o=typeof a=="function";(r.exports=function(s){return n[s]||(n[s]=o&&a[s]||(o?a:i)("Symbol."+s))}).store=n},function(r,t,e){var n,i,a;i=[t,e(42),e(2),e(3),e(8)],(a=typeof(n=function(o,s,u,h,d){"use strict";var _=e(9),g=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=g(s),u=g(u),h=g(h),d=_(d);var w=function(){function C(){(0,u.default)(this,C)}return(0,h.default)(C,null,[{key:"isSingleTag",value:function(k){return k.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(k.tagName)}},{key:"isLineBreakTag",value:function(k){return k&&k.tagName&&["BR","WBR"].includes(k.tagName)}},{key:"make",value:function(k){var E,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=document.createElement(k);for(var y in Array.isArray(O)?(E=m.classList).add.apply(E,(0,s.default)(O)):O&&m.classList.add(O),N)Object.prototype.hasOwnProperty.call(N,y)&&(m[y]=N[y]);return m}},{key:"text",value:function(k){return document.createTextNode(k)}},{key:"svg",value:function(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:14,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:14,N=document.createElementNS("http://www.w3.org/2000/svg","svg");return N.classList.add("icon","icon--"+k),N.setAttribute("width",E+"px"),N.setAttribute("height",O+"px"),N.innerHTML='<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'.concat(k,'"></use>'),N}},{key:"append",value:function(k,E){Array.isArray(E)?E.forEach(function(O){return k.appendChild(O)}):k.appendChild(E)}},{key:"prepend",value:function(k,E){Array.isArray(E)?(E=E.reverse()).forEach(function(O){return k.prepend(O)}):k.prepend(E)}},{key:"swap",value:function(k,E){var O=document.createElement("div"),N=k.parentNode;N.insertBefore(O,k),N.insertBefore(k,E),N.insertBefore(E,O),N.removeChild(O)}},{key:"find",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,E=arguments.length>1?arguments[1]:void 0;return k.querySelector(E)}},{key:"get",value:function(k){return document.getElementById(k)}},{key:"findAll",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,E=arguments.length>1?arguments[1]:void 0;return k.querySelectorAll(E)}},{key:"findAllInputs",value:function(k){return d.array(k.querySelectorAll(C.allInputsSelector)).reduce(function(E,O){return C.isNativeInput(O)||C.containsOnlyInlineElements(O)?[].concat((0,s.default)(E),[O]):[].concat((0,s.default)(E),(0,s.default)(C.getDeepestBlockElements(O)))},[])}},{key:"getDeepestNode",value:function(k){var E=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=E?"lastChild":"firstChild",N=E?"previousSibling":"nextSibling";if(k&&k.nodeType===Node.ELEMENT_NODE&&k[O]){var m=k[O];if(C.isSingleTag(m)&&!C.isNativeInput(m)&&!C.isLineBreakTag(m))if(m[N])m=m[N];else{if(!m.parentNode[N])return m.parentNode;m=m.parentNode[N]}return this.getDeepestNode(m,E)}return k}},{key:"isElement",value:function(k){return!d.isNumber(k)&&k&&k.nodeType&&k.nodeType===Node.ELEMENT_NODE}},{key:"isFragment",value:function(k){return!d.isNumber(k)&&k&&k.nodeType&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE}},{key:"isContentEditable",value:function(k){return k.contentEditable==="true"}},{key:"isNativeInput",value:function(k){return!(!k||!k.tagName)&&["INPUT","TEXTAREA"].includes(k.tagName)}},{key:"canSetCaret",value:function(k){var E=!0;if(C.isNativeInput(k))switch(k.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":E=!1}else E=C.isContentEditable(k);return E}},{key:"isNodeEmpty",value:function(k){return!(this.isSingleTag(k)&&!this.isLineBreakTag(k))&&(this.isElement(k)&&this.isNativeInput(k)?k.value:k.textContent.replace("\u200B","")).trim().length===0}},{key:"isLeaf",value:function(k){return!!k&&k.childNodes.length===0}},{key:"isEmpty",value:function(k){k.normalize();for(var E=[k];E.length>0;)if(k=E.shift()){if(this.isLeaf(k)&&!this.isNodeEmpty(k))return!1;k.childNodes&&E.push.apply(E,(0,s.default)(Array.from(k.childNodes)))}return!0}},{key:"isHTMLString",value:function(k){var E=C.make("div");return E.innerHTML=k,E.childElementCount>0}},{key:"getContentLength",value:function(k){return C.isNativeInput(k)?k.value.length:k.nodeType===Node.TEXT_NODE?k.length:k.textContent.length}},{key:"containsOnlyInlineElements",value:function(k){var E;return d.isString(k)?(E=document.createElement("div")).innerHTML=k:E=k,Array.from(E.children).every(function O(N){return!C.blockElements.includes(N.tagName.toLowerCase())&&Array.from(N.children).every(O)})}},{key:"getDeepestBlockElements",value:function(k){return C.containsOnlyInlineElements(k)?[k]:Array.from(k.children).reduce(function(E,O){return[].concat((0,s.default)(E),(0,s.default)(C.getDeepestBlockElements(O)))},[])}},{key:"getHolder",value:function(k){return d.isString(k)?document.getElementById(k):k}},{key:"isExtensionNode",value:function(k){return k&&["GRAMMARLY-EXTENSION"].includes(k.nodeName)}},{key:"isAnchor",value:function(k){return k.tagName.toLowerCase()==="a"}},{key:"allInputsSelector",get:function(){return"[contenteditable], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(function(k){return'input[type="'.concat(k,'"]')}).join(", ")}},{key:"blockElements",get:function(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tr","tfoot","ul","video"]}}]),C}();o.default=w,w.displayName="Dom",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(33),i=Math.min;r.exports=function(a){return a>0?i(n(a),9007199254740991):0}},function(r,t){var e=r.exports={version:"2.6.11"};typeof __e=="number"&&(__e=e)},function(r,t,e){r.exports=!e(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var n=e(12),i=e(109),a=e(40),o=Object.defineProperty;t.f=e(18)?Object.defineProperty:function(s,u,h){if(n(s),u=a(u,!0),n(h),i)try{return o(s,u,h)}catch(d){}if("get"in h||"set"in h)throw TypeError("Accessors not supported!");return"value"in h&&(s[u]=h.value),s}},function(r,t,e){var n=e(38);r.exports=function(i){return Object(n(i))}},function(r,t,e){r.exports=e(140)},function(r,t){function e(n,i,a,o,s,u,h){try{var d=n[u](h),_=d.value}catch(g){return void a(g)}d.done?i(_):Promise.resolve(_).then(o,s)}r.exports=function(n){return function(){var i=this,a=arguments;return new Promise(function(o,s){var u=n.apply(i,a);function h(_){e(u,o,s,h,d,"next",_)}function d(_){e(u,o,s,h,d,"throw",_)}h(void 0)})}}},function(r,t,e){var n=e(10),i=e(27),a=e(26),o=e(44)("src"),s=e(188),u=(""+s).split("toString");e(17).inspectSource=function(h){return s.call(h)},(r.exports=function(h,d,_,g){var w=typeof _=="function";w&&(a(_,"name")||i(_,"name",d)),h[d]!==_&&(w&&(a(_,o)||i(_,o,h[d]?""+h[d]:u.join(String(d)))),h===n?h[d]=_:g?h[d]?h[d]=_:i(h,d,_):(delete h[d],i(h,d,_)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[o]||s.call(this)})},function(r,t,e){var n=e(0),i=e(11),a=e(38),o=/"/g,s=function(u,h,d,_){var g=String(a(u)),w="<"+h;return d!==""&&(w+=" "+d+'="'+String(_).replace(o,"&quot;")+'"'),w+">"+g+"</"+h+">"};r.exports=function(u,h){var d={};d[u]=h(s),n(n.P+n.F*i(function(){var _=""[u]('"');return _!==_.toLowerCase()||_.split('"').length>3}),"String",d)}},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(8),e(15)],(a=typeof(n=function(o,s,u,h,d){"use strict";var _=e(9),g=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=g(s),u=g(u),h=_(h),d=g(d);var w=function(){function C(){(0,s.default)(this,C),this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}return(0,u.default)(C,[{key:"removeFakeBackground",value:function(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}},{key:"setFakeBackground",value:function(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}},{key:"save",value:function(){this.savedSelectionRange=C.range}},{key:"restore",value:function(){if(this.savedSelectionRange){var k=window.getSelection();k.removeAllRanges(),k.addRange(this.savedSelectionRange)}}},{key:"clearSaved",value:function(){this.savedSelectionRange=null}},{key:"collapseToEnd",value:function(){var k=window.getSelection(),E=document.createRange();E.selectNodeContents(k.focusNode),E.collapse(!1),k.removeAllRanges(),k.addRange(E)}},{key:"findParentTag",value:function(k,E){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,N=window.getSelection(),m=null;if(!N||!N.anchorNode||!N.focusNode)return null;var y=[N.anchorNode,N.focusNode];return y.forEach(function(b){for(var S=O;S>0&&b.parentNode&&(b.tagName!==k||(m=b,E&&b.classList&&!b.classList.contains(E)&&(m=null),!m));)b=b.parentNode,S--}),m}},{key:"expandToTag",value:function(k){var E=window.getSelection();E.removeAllRanges();var O=document.createRange();O.selectNodeContents(k),E.addRange(O)}}],[{key:"get",value:function(){return window.getSelection()}},{key:"setCursor",value:function(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=document.createRange(),N=window.getSelection();return d.default.isNativeInput(k)?d.default.canSetCaret(k)?(k.focus(),k.selectionStart=k.selectionEnd=E,k.getBoundingClientRect()):void 0:(O.setStart(k,E),O.setEnd(k,E),N.removeAllRanges(),N.addRange(O),O.getBoundingClientRect())}},{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}},{key:"anchorNode",get:function(){var k=window.getSelection();return k?k.anchorNode:null}},{key:"anchorElement",get:function(){var k=window.getSelection();if(!k)return null;var E=k.anchorNode;return E?d.default.isElement(E)?E:E.parentElement:null}},{key:"anchorOffset",get:function(){var k=window.getSelection();return k?k.anchorOffset:null}},{key:"isCollapsed",get:function(){var k=window.getSelection();return k?k.isCollapsed:null}},{key:"isAtEditor",get:function(){var k=C.get(),E=k.anchorNode||k.focusNode;E&&E.nodeType===Node.TEXT_NODE&&(E=E.parentNode);var O=null;return E&&(O=E.closest(".".concat(C.CSS.editorZone))),O&&O.nodeType===Node.ELEMENT_NODE}},{key:"isSelectionExists",get:function(){return!!C.get().anchorNode}},{key:"range",get:function(){var k=window.getSelection();return k&&k.rangeCount?k.getRangeAt(0):null}},{key:"rect",get:function(){var k,E=document.selection,O={x:0,y:0,width:0,height:0};if(E&&E.type!=="Control")return k=(E=E).createRange(),O.x=k.boundingLeft,O.y=k.boundingTop,O.width=k.boundingWidth,O.height=k.boundingHeight,O;if(!window.getSelection)return h.log("Method window.getSelection is not supported","warn"),O;if((E=window.getSelection()).rangeCount===null||isNaN(E.rangeCount))return h.log("Method SelectionUtils.rangeCount is not supported","warn"),O;if(E.rangeCount===0)return O;if((k=E.getRangeAt(0).cloneRange()).getBoundingClientRect&&(O=k.getBoundingClientRect()),O.x===0&&O.y===0){var N=document.createElement("span");if(N.getBoundingClientRect){N.appendChild(document.createTextNode("\u200B")),k.insertNode(N),O=N.getBoundingClientRect();var m=N.parentNode;m.removeChild(N),m.normalize()}}return O}},{key:"text",get:function(){return window.getSelection?window.getSelection().toString():""}}]),C}();o.default=w,w.displayName="SelectionUtils",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t){var e={}.hasOwnProperty;r.exports=function(n,i){return e.call(n,i)}},function(r,t,e){var n=e(19),i=e(43);r.exports=e(18)?function(a,o,s){return n.f(a,o,i(1,s))}:function(a,o,s){return a[o]=s,a}},function(r,t,e){var n=e(62),i=e(38);r.exports=function(a){return n(i(a))}},function(r,t,e){var n=e(357),i=e(358),a=e(141),o=e(359);r.exports=function(s,u){return n(s)||i(s,u)||a(s,u)||o()}},function(r,t,e){"use strict";var n=e(11);r.exports=function(i,a){return!!i&&n(function(){a?i.call(null,function(){},1):i.call(null)})}},function(r,t,e){var n=e(32);r.exports=function(i,a,o){if(n(i),a===void 0)return i;switch(o){case 1:return function(s){return i.call(a,s)};case 2:return function(s,u){return i.call(a,s,u)};case 3:return function(s,u,h){return i.call(a,s,u,h)}}return function(){return i.apply(a,arguments)}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t){var e=Math.ceil,n=Math.floor;r.exports=function(i){return isNaN(i=+i)?0:(i>0?n:e)(i)}},function(r,t,e){var n=e(63),i=e(43),a=e(28),o=e(40),s=e(26),u=e(109),h=Object.getOwnPropertyDescriptor;t.f=e(18)?h:function(d,_){if(d=a(d),_=o(_,!0),u)try{return h(d,_)}catch(g){}if(s(d,_))return i(!n.f.call(d,_),d[_])}},function(r,t,e){var n=e(0),i=e(17),a=e(11);r.exports=function(o,s){var u=(i.Object||{})[o]||Object[o],h={};h[o]=s(u),n(n.S+n.F*a(function(){u(1)}),"Object",h)}},function(r,t,e){var n=e(31),i=e(62),a=e(20),o=e(16),s=e(125);r.exports=function(u,h){var d=u==1,_=u==2,g=u==3,w=u==4,C=u==6,k=u==5||C,E=h||s;return function(O,N,m){for(var y,b,S=a(O),A=i(S),I=n(N,m,3),T=o(A.length),R=0,B=d?E(O,T):_?E(O,0):void 0;T>R;R++)if((k||R in A)&&(b=I(y=A[R],R,S),u)){if(d)B[R]=b;else if(b)switch(u){case 3:return!0;case 5:return y;case 6:return R;case 2:B.push(y)}else if(w)return!1}return C?-1:g||w?w:B}}},function(r,t){var e={}.toString;r.exports=function(n){return e.call(n).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";if(e(18)){var n=e(45),i=e(10),a=e(11),o=e(0),s=e(78),u=e(106),h=e(31),d=e(57),_=e(43),g=e(27),w=e(58),C=e(33),k=e(16),E=e(136),O=e(47),N=e(40),m=e(26),y=e(64),b=e(13),S=e(20),A=e(98),I=e(48),T=e(50),R=e(49).f,B=e(100),F=e(44),L=e(14),j=e(36),P=e(68),z=e(65),Y=e(102),ce=e(55),re=e(71),Z=e(56),me=e(101),ke=e(127),ne=e(19),oe=e(34),ge=ne.f,ve=oe.f,pe=i.RangeError,he=i.TypeError,Ae=i.Uint8Array,Me=Array.prototype,De=u.ArrayBuffer,Je=u.DataView,Se=j(0),ze=j(2),at=j(3),Qe=j(4),lt=j(5),At=j(6),It=P(!0),bt=P(!1),Et=Y.values,Rt=Y.keys,Lt=Y.entries,Ce=Me.lastIndexOf,Ie=Me.reduce,Ve=Me.reduceRight,ct=Me.join,Pt=Me.sort,Mt=Me.slice,Zt=Me.toString,nt=Me.toLocaleString,Nt=L("iterator"),Ir=L("toStringTag"),Gt=F("typed_constructor"),xt=F("def_constructor"),Ct=s.CONSTR,St=s.TYPED,ht=s.VIEW,Pr=j(1,function(Ge,We){return Hr(z(Ge,Ge[xt]),We)}),Wt=a(function(){return new Ae(new Uint16Array([1]).buffer)[0]===1}),ut=!!Ae&&!!Ae.prototype.set&&a(function(){new Ae(1).set({})}),Tr=function(Ge,We){var ot=C(Ge);if(ot<0||ot%We)throw pe("Wrong offset!");return ot},$t=function(Ge){if(b(Ge)&&St in Ge)return Ge;throw he(Ge+" is not a typed array!")},Hr=function(Ge,We){if(!b(Ge)||!(Gt in Ge))throw he("It is not a typed array constructor!");return new Ge(We)},rr=function(Ge,We){return Gr(z(Ge,Ge[xt]),We)},Gr=function(Ge,We){for(var ot=0,X=We.length,se=Hr(Ge,X);X>ot;)se[ot]=We[ot++];return se},Dt=function(Ge,We,ot){ge(Ge,We,{get:function(){return this._d[ot]}})},lr=function(Ge){var We,ot,X,se,de,Te,xe=S(Ge),Fe=arguments.length,Ue=Fe>1?arguments[1]:void 0,Ke=Ue!==void 0,Ye=B(xe);if(Ye!=null&&!A(Ye)){for(Te=Ye.call(xe),X=[],We=0;!(de=Te.next()).done;We++)X.push(de.value);xe=X}for(Ke&&Fe>2&&(Ue=h(Ue,arguments[2],2)),We=0,ot=k(xe.length),se=Hr(this,ot);ot>We;We++)se[We]=Ke?Ue(xe[We],We):xe[We];return se},Rr=function(){for(var Ge=0,We=arguments.length,ot=Hr(this,We);We>Ge;)ot[Ge]=arguments[Ge++];return ot},fn=!!Ae&&a(function(){nt.call(new Ae(1))}),ar=function(){return nt.apply(fn?Mt.call($t(this)):$t(this),arguments)},Ur={copyWithin:function(Ge,We){return ke.call($t(this),Ge,We,arguments.length>2?arguments[2]:void 0)},every:function(Ge){return Qe($t(this),Ge,arguments.length>1?arguments[1]:void 0)},fill:function(Ge){return me.apply($t(this),arguments)},filter:function(Ge){return rr(this,ze($t(this),Ge,arguments.length>1?arguments[1]:void 0))},find:function(Ge){return lt($t(this),Ge,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ge){return At($t(this),Ge,arguments.length>1?arguments[1]:void 0)},forEach:function(Ge){Se($t(this),Ge,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ge){return bt($t(this),Ge,arguments.length>1?arguments[1]:void 0)},includes:function(Ge){return It($t(this),Ge,arguments.length>1?arguments[1]:void 0)},join:function(Ge){return ct.apply($t(this),arguments)},lastIndexOf:function(Ge){return Ce.apply($t(this),arguments)},map:function(Ge){return Pr($t(this),Ge,arguments.length>1?arguments[1]:void 0)},reduce:function(Ge){return Ie.apply($t(this),arguments)},reduceRight:function(Ge){return Ve.apply($t(this),arguments)},reverse:function(){for(var Ge,We=$t(this).length,ot=Math.floor(We/2),X=0;X<ot;)Ge=this[X],this[X++]=this[--We],this[We]=Ge;return this},some:function(Ge){return at($t(this),Ge,arguments.length>1?arguments[1]:void 0)},sort:function(Ge){return Pt.call($t(this),Ge)},subarray:function(Ge,We){var ot=$t(this),X=ot.length,se=O(Ge,X);return new(z(ot,ot[xt]))(ot.buffer,ot.byteOffset+se*ot.BYTES_PER_ELEMENT,k((We===void 0?X:O(We,X))-se))}},hr=function(Ge,We){return rr(this,Mt.call($t(this),Ge,We))},Jr=function(Ge){$t(this);var We=Tr(arguments[1],1),ot=this.length,X=S(Ge),se=k(X.length),de=0;if(se+We>ot)throw pe("Wrong length!");for(;de<se;)this[We+de]=X[de++]},Nr={entries:function(){return Lt.call($t(this))},keys:function(){return Rt.call($t(this))},values:function(){return Et.call($t(this))}},mr=function(Ge,We){return b(Ge)&&Ge[St]&&typeof We!="symbol"&&We in Ge&&String(+We)==String(We)},cr=function(Ge,We){return mr(Ge,We=N(We,!0))?_(2,Ge[We]):ve(Ge,We)},tt=function(Ge,We,ot){return!(mr(Ge,We=N(We,!0))&&b(ot)&&m(ot,"value"))||m(ot,"get")||m(ot,"set")||ot.configurable||m(ot,"writable")&&!ot.writable||m(ot,"enumerable")&&!ot.enumerable?ge(Ge,We,ot):(Ge[We]=ot.value,Ge)};Ct||(oe.f=cr,ne.f=tt),o(o.S+o.F*!Ct,"Object",{getOwnPropertyDescriptor:cr,defineProperty:tt}),a(function(){Zt.call({})})&&(Zt=nt=function(){return ct.call(this)});var Bt=w({},Ur);w(Bt,Nr),g(Bt,Nt,Nr.values),w(Bt,{slice:hr,set:Jr,constructor:function(){},toString:Zt,toLocaleString:ar}),Dt(Bt,"buffer","b"),Dt(Bt,"byteOffset","o"),Dt(Bt,"byteLength","l"),Dt(Bt,"length","e"),ge(Bt,Ir,{get:function(){return this[St]}}),r.exports=function(Ge,We,ot,X){var se=Ge+((X=!!X)?"Clamped":"")+"Array",de="get"+Ge,Te="set"+Ge,xe=i[se],Fe=xe||{},Ue=xe&&T(xe),Ke=!xe||!s.ABV,Ye={},Xe=xe&&xe.prototype,kt=function(mt,yt){ge(mt,yt,{get:function(){return function(ur,or){var tr=ur._d;return tr.v[de](or*We+tr.o,Wt)}(this,yt)},set:function(ur){return function(or,tr,nr){var K=or._d;X&&(nr=(nr=Math.round(nr))<0?0:nr>255?255:255&nr),K.v[Te](tr*We+K.o,nr,Wt)}(this,yt,ur)},enumerable:!0})};Ke?(xe=ot(function(mt,yt,ur,or){d(mt,xe,se,"_d");var tr,nr,K,_e,ae=0,we=0;if(b(yt)){if(!(yt instanceof De||(_e=y(yt))=="ArrayBuffer"||_e=="SharedArrayBuffer"))return St in yt?Gr(xe,yt):lr.call(xe,yt);tr=yt,we=Tr(ur,We);var q=yt.byteLength;if(or===void 0){if(q%We||(nr=q-we)<0)throw pe("Wrong length!")}else if((nr=k(or)*We)+we>q)throw pe("Wrong length!");K=nr/We}else K=E(yt),tr=new De(nr=K*We);for(g(mt,"_d",{b:tr,o:we,l:nr,e:K,v:new Je(tr)});ae<K;)kt(mt,ae++)}),Xe=xe.prototype=I(Bt),g(Xe,"constructor",xe)):a(function(){xe(1)})&&a(function(){new xe(-1)})&&re(function(mt){new xe,new xe(null),new xe(1.5),new xe(mt)},!0)||(xe=ot(function(mt,yt,ur,or){var tr;return d(mt,xe,se),b(yt)?yt instanceof De||(tr=y(yt))=="ArrayBuffer"||tr=="SharedArrayBuffer"?or!==void 0?new Fe(yt,Tr(ur,We),or):ur!==void 0?new Fe(yt,Tr(ur,We)):new Fe(yt):St in yt?Gr(xe,yt):lr.call(xe,yt):new Fe(E(yt))}),Se(Ue!==Function.prototype?R(Fe).concat(R(Ue)):R(Fe),function(mt){mt in xe||g(xe,mt,Fe[mt])}),xe.prototype=Xe,n||(Xe.constructor=xe));var pt=Xe[Nt],Ot=!!pt&&(pt.name=="values"||pt.name==null),qt=Nr.values;g(xe,Gt,!0),g(Xe,St,se),g(Xe,ht,!0),g(Xe,xt,xe),(X?new xe(1)[Ir]==se:Ir in Xe)||ge(Xe,Ir,{get:function(){return se}}),Ye[se]=xe,o(o.G+o.W+o.F*(xe!=Fe),Ye),o(o.S,se,{BYTES_PER_ELEMENT:We}),o(o.S+o.F*a(function(){Fe.of.call(xe,1)}),se,{from:lr,of:Rr}),"BYTES_PER_ELEMENT"in Xe||g(Xe,"BYTES_PER_ELEMENT",We),o(o.P,se,Ur),Z(se),o(o.P+o.F*ut,se,{set:Jr}),o(o.P+o.F*!Ot,se,Nr),n||Xe.toString==Zt||(Xe.toString=Zt),o(o.P+o.F*a(function(){new xe(1).slice()}),se,{slice:hr}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new xe([1,2]).toLocaleString()})||!a(function(){Xe.toLocaleString.call([1,2])})),se,{toLocaleString:ar}),ce[se]=Ot?pt:qt,n||Ot||g(Xe,Nt,qt)}}else r.exports=function(){}},function(r,t,e){var n=e(13);r.exports=function(i,a){if(!n(i))return i;var o,s;if(a&&typeof(o=i.toString)=="function"&&!n(s=o.call(i))||typeof(o=i.valueOf)=="function"&&!n(s=o.call(i))||!a&&typeof(o=i.toString)=="function"&&!n(s=o.call(i)))return s;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var n=e(44)("meta"),i=e(13),a=e(26),o=e(19).f,s=0,u=Object.isExtensible||function(){return!0},h=!e(11)(function(){return u(Object.preventExtensions({}))}),d=function(g){o(g,n,{value:{i:"O"+ ++s,w:{}}})},_=r.exports={KEY:n,NEED:!1,fastKey:function(g,w){if(!i(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!a(g,n)){if(!u(g))return"F";if(!w)return"E";d(g)}return g[n].i},getWeak:function(g,w){if(!a(g,n)){if(!u(g))return!0;if(!w)return!1;d(g)}return g[n].w},onFreeze:function(g){return h&&_.NEED&&u(g)&&!a(g,n)&&d(g),g}}},function(r,t,e){var n=e(364),i=e(365),a=e(141),o=e(366);r.exports=function(s){return n(s)||i(s)||a(s)||o()}},function(r,t){r.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(r,t){var e=0,n=Math.random();r.exports=function(i){return"Symbol(".concat(i===void 0?"":i,")_",(++e+n).toString(36))}},function(r,t){r.exports=!1},function(r,t,e){var n=e(111),i=e(85);r.exports=Object.keys||function(a){return n(a,i)}},function(r,t,e){var n=e(33),i=Math.max,a=Math.min;r.exports=function(o,s){return(o=n(o))<0?i(o+s,0):a(o,s)}},function(r,t,e){var n=e(12),i=e(112),a=e(85),o=e(84)("IE_PROTO"),s=function(){},u=function(){var h,d=e(82)("iframe"),_=a.length;for(d.style.display="none",e(86).appendChild(d),d.src="javascript:",(h=d.contentWindow.document).open(),h.write("<script>document.F=Object<\/script>"),h.close(),u=h.F;_--;)delete u.prototype[a[_]];return u()};r.exports=Object.create||function(h,d){var _;return h!==null?(s.prototype=n(h),_=new s,s.prototype=null,_[o]=h):_=u(),d===void 0?_:i(_,d)}},function(r,t,e){var n=e(111),i=e(85).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(a){return n(a,i)}},function(r,t,e){var n=e(26),i=e(20),a=e(84)("IE_PROTO"),o=Object.prototype;r.exports=Object.getPrototypeOf||function(s){return s=i(s),n(s,a)?s[a]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?o:null}},function(r,t,e){var n=e(14)("unscopables"),i=Array.prototype;i[n]==null&&e(27)(i,n,{}),r.exports=function(a){i[n][a]=!0}},function(r,t,e){var n=e(13);r.exports=function(i,a){if(!n(i)||i._t!==a)throw TypeError("Incompatible receiver, "+a+" required!");return i}},function(r,t,e){var n=e(19).f,i=e(26),a=e(14)("toStringTag");r.exports=function(o,s,u){o&&!i(o=u?o:o.prototype,a)&&n(o,a,{configurable:!0,value:s})}},function(r,t,e){var n=e(0),i=e(38),a=e(11),o=e(88),s="["+o+"]",u=RegExp("^"+s+s+"*"),h=RegExp(s+s+"*$"),d=function(g,w,C){var k={},E=a(function(){return!!o[g]()||"\u200B\x85"[g]()!="\u200B\x85"}),O=k[g]=E?w(_):o[g];C&&(k[C]=O),n(n.P+n.F*E,"String",k)},_=d.trim=function(g,w){return g=String(i(g)),1&w&&(g=g.replace(u,"")),2&w&&(g=g.replace(h,"")),g};r.exports=d},function(r,t){r.exports={}},function(r,t,e){"use strict";var n=e(10),i=e(19),a=e(18),o=e(14)("species");r.exports=function(s){var u=n[s];a&&u&&!u[o]&&i.f(u,o,{configurable:!0,get:function(){return this}})}},function(r,t){r.exports=function(e,n,i,a){if(!(e instanceof n)||a!==void 0&&a in e)throw TypeError(i+": incorrect invocation!");return e}},function(r,t,e){var n=e(23);r.exports=function(i,a,o){for(var s in a)n(i,s,a[s],o);return i}},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(144)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(){(0,s.default)(this,g)}return(0,u.default)(g,null,[{key:"ui",value:function(w,C){return g._t(w,C)}},{key:"t",value:function(w,C){return g._t(w,C)}},{key:"setDictionary",value:function(w){g.currentDictionary=w}},{key:"_t",value:function(w,C){var k=g.getNamespace(w);return k&&k[C]?k[C]:C}},{key:"getNamespace",value:function(w){return w.split(".").reduce(function(C,k){return C&&Object.keys(C).length?C[k]:{}},g.currentDictionary)}}]),g}();o.default=_,_.displayName="I18n",_.currentDictionary=h.default,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(375),e(8)],(a=typeof(n=function(o,s,u,h,d){"use strict";var _=e(9),g=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=g(s),u=g(u),h=g(h),d=_(d);var w=function(){function C(k){var E=this;(0,s.default)(this,C),this.iterator=null,this.activated=!1,this.allowArrows=!0,this.onKeyDown=function(O){if(E.isEventReadyForHandling(O))switch(C.usedKeys.includes(O.keyCode)&&O.preventDefault(),O.keyCode){case d.keyCodes.TAB:E.handleTabPress(O);break;case d.keyCodes.LEFT:case d.keyCodes.UP:E.flipLeft();break;case d.keyCodes.RIGHT:case d.keyCodes.DOWN:E.flipRight();break;case d.keyCodes.ENTER:E.handleEnterPress(O)}},this.allowArrows=!d.isBoolean(k.allowArrows)||k.allowArrows,this.iterator=new h.default(k.items,k.focusedItemClass),this.activateCallback=k.activateCallback}return(0,u.default)(C,[{key:"activate",value:function(k){this.activated=!0,k&&this.iterator.setItems(k),document.addEventListener("keydown",this.onKeyDown)}},{key:"deactivate",value:function(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"focusFirst",value:function(){this.dropCursor(),this.flipRight()}},{key:"flipLeft",value:function(){this.iterator.previous()}},{key:"flipRight",value:function(){this.iterator.next()}},{key:"dropCursor",value:function(){this.iterator.dropCursor()}},{key:"isEventReadyForHandling",value:function(k){var E=[d.keyCodes.TAB,d.keyCodes.ENTER],O=this.iterator.currentItem==document.activeElement;return this.allowArrows&&!O&&E.push(d.keyCodes.LEFT,d.keyCodes.RIGHT,d.keyCodes.UP,d.keyCodes.DOWN),this.activated&&E.indexOf(k.keyCode)!==-1}},{key:"handleTabPress",value:function(k){switch(k.shiftKey?h.default.directions.LEFT:h.default.directions.RIGHT){case h.default.directions.RIGHT:this.flipRight();break;case h.default.directions.LEFT:this.flipLeft()}}},{key:"handleEnterPress",value:function(k){this.activated&&(this.iterator.currentItem&&this.iterator.currentItem.click(),d.isFunction(this.activateCallback)&&this.activateCallback(this.iterator.currentItem),k.preventDefault(),k.stopPropagation())}},{key:"currentItem",get:function(){return this.iterator.currentItem}}],[{key:"usedKeys",get:function(){return[d.keyCodes.TAB,d.keyCodes.LEFT,d.keyCodes.RIGHT,d.keyCodes.ENTER,d.keyCodes.UP,d.keyCodes.DOWN]}}]),C}();o.default=w,w.displayName="Flipper",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(42),e(21),e(22),e(2),e(3),e(15),e(8),e(148),e(25)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E){"use strict";var O,N=e(9),m=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.BlockToolAPI=void 0,s=m(s),u=m(u),h=m(h),d=m(d),_=m(_),g=m(g),w=m(w),C=N(C),k=m(k),E=m(E),o.BlockToolAPI=O,function(b){b.APPEND_CALLBACK="appendCallback",b.RENDERED="rendered",b.MOVED="moved",b.UPDATED="updated",b.REMOVED="removed",b.ON_PASTE="onPaste"}(O||(o.BlockToolAPI=O={}));var y=function(){function b(T){var R=this,B=T.data,F=T.tool,L=T.api,j=T.readOnly,P=T.tunes,z=T.tunesData;(0,_.default)(this,b),this.cachedInputs=[],this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.modificationDebounceTimer=450,this.didMutated=C.debounce(function(){R.cachedInputs=[],R.updateCurrentInput(),R.call(O.UPDATED)},this.modificationDebounceTimer),this.handleFocus=function(){R.cachedInputs=[],R.updateCurrentInput()},this.name=F.name,this.settings=F.settings,this.config=F.settings.config||{},this.api=L,this.blockAPI=new k.default(this),this.mutationObserver=new MutationObserver(this.didMutated),this.tool=F,this.toolInstance=F.create(B,this.blockAPI,j),this.tunes=P,this.composeTunes(z),this.holder=this.compose()}var S,A,I;return(0,g.default)(b,[{key:"call",value:function(T,R){if(this.toolInstance[T]&&this.toolInstance[T]instanceof Function){T===O.APPEND_CALLBACK&&C.log("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[T].call(this.toolInstance,R)}catch(B){C.log("Error during '".concat(T,"' call: ").concat(B.message),"error")}}}},{key:"mergeWith",value:(I=(0,d.default)(h.default.mark(function T(R){return h.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.toolInstance.merge(R);case 2:case"end":return B.stop()}},T,this)})),function(T){return I.apply(this,arguments)})},{key:"save",value:(A=(0,d.default)(h.default.mark(function T(){var R,B,F,L,j=this;return h.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.toolInstance.save(this.pluginsContent);case 2:return R=P.sent,B=this.unavailableTunesData,[].concat((0,u.default)(this.tunesInstances.entries()),(0,u.default)(this.defaultTunesInstances.entries())).forEach(function(z){var Y=(0,s.default)(z,2),ce=Y[0],re=Y[1];if(C.isFunction(re.save))try{B[ce]=re.save()}catch(Z){C.log("Tune ".concat(re.constructor.name," save method throws an Error %o"),"warn",Z)}}),F=window.performance.now(),P.abrupt("return",Promise.resolve(R).then(function(z){return L=window.performance.now(),{tool:j.name,data:z,tunes:B,time:L-F}}).catch(function(z){C.log("Saving proccess for ".concat(j.name," tool failed due to the ").concat(z),"log","red")}));case 7:case"end":return P.stop()}},T,this)})),function(){return A.apply(this,arguments)})},{key:"validate",value:(S=(0,d.default)(h.default.mark(function T(R){var B;return h.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(B=!0,!(this.toolInstance.validate instanceof Function)){F.next=5;break}return F.next=4,this.toolInstance.validate(R);case 4:B=F.sent;case 5:return F.abrupt("return",B);case 6:case"end":return F.stop()}},T,this)})),function(T){return S.apply(this,arguments)})},{key:"renderTunes",value:function(){var T=document.createDocumentFragment(),R=document.createDocumentFragment();return this.tunesInstances.forEach(function(B){w.default.append(T,B.render())}),this.defaultTunesInstances.forEach(function(B){w.default.append(R,B.render())}),[T,R]}},{key:"updateCurrentInput",value:function(){this.currentInput=w.default.isNativeInput(document.activeElement)||!E.default.anchorNode?document.activeElement:E.default.anchorNode}},{key:"willSelect",value:function(){this.mutationObserver.observe(this.holder.firstElementChild,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.addInputEvents()}},{key:"willUnselect",value:function(){this.mutationObserver.disconnect(),this.removeInputEvents()}},{key:"destroy",value:function(){C.isFunction(this.toolInstance.destroy)&&this.toolInstance.destroy()}},{key:"renderSettings",value:function(){if(C.isFunction(this.toolInstance.renderSettings))return this.toolInstance.renderSettings()}},{key:"compose",value:function(){var T=w.default.make("div",b.CSS.wrapper),R=w.default.make("div",b.CSS.content),B=this.toolInstance.render();R.appendChild(B);var F=R;return[].concat((0,u.default)(this.tunesInstances.values()),(0,u.default)(this.defaultTunesInstances.values())).forEach(function(L){if(C.isFunction(L.wrap))try{F=L.wrap(F)}catch(j){C.log("Tune ".concat(L.constructor.name," wrap method throws an Error %o"),"warn",j)}}),T.appendChild(F),T}},{key:"composeTunes",value:function(T){var R=this;Array.from(this.tunes.values()).forEach(function(B){(B.isInternal?R.defaultTunesInstances:R.tunesInstances).set(B.name,B.create(T[B.name],R.blockAPI))}),Object.entries(T).forEach(function(B){var F=(0,s.default)(B,2),L=F[0],j=F[1];R.tunesInstances.has(L)||(R.unavailableTunesData[L]=j)})}},{key:"addInputEvents",value:function(){var T=this;this.inputs.forEach(function(R){R.addEventListener("focus",T.handleFocus)})}},{key:"removeInputEvents",value:function(){var T=this;this.inputs.forEach(function(R){R.removeEventListener("focus",T.handleFocus)})}},{key:"inputs",get:function(){if(this.cachedInputs.length!==0)return this.cachedInputs;var T=w.default.findAllInputs(this.holder);return this.inputIndex>T.length-1&&(this.inputIndex=T.length-1),this.cachedInputs=T,T}},{key:"currentInput",get:function(){return this.inputs[this.inputIndex]},set:function(T){var R=this.inputs.findIndex(function(B){return B===T||B.contains(T)});R!==-1&&(this.inputIndex=R)}},{key:"firstInput",get:function(){return this.inputs[0]}},{key:"lastInput",get:function(){var T=this.inputs;return T[T.length-1]}},{key:"nextInput",get:function(){return this.inputs[this.inputIndex+1]}},{key:"previousInput",get:function(){return this.inputs[this.inputIndex-1]}},{key:"data",get:function(){return this.save().then(function(T){return T&&!C.isEmpty(T.data)?T.data:{}})}},{key:"sanitize",get:function(){return this.tool.sanitizeConfig}},{key:"mergeable",get:function(){return C.isFunction(this.toolInstance.merge)}},{key:"isEmpty",get:function(){var T=w.default.isEmpty(this.pluginsContent),R=!this.hasMedia;return T&&R}},{key:"hasMedia",get:function(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}},{key:"focused",set:function(T){this.holder.classList.toggle(b.CSS.focused,T)},get:function(){return this.holder.classList.contains(b.CSS.focused)}},{key:"selected",set:function(T){T?this.holder.classList.add(b.CSS.selected):this.holder.classList.remove(b.CSS.selected)},get:function(){return this.holder.classList.contains(b.CSS.selected)}},{key:"stretched",set:function(T){this.holder.classList.toggle(b.CSS.wrapperStretched,T)},get:function(){return this.holder.classList.contains(b.CSS.wrapperStretched)}},{key:"dropTarget",set:function(T){this.holder.classList.toggle(b.CSS.dropTarget,T)}},{key:"pluginsContent",get:function(){var T=this.holder.querySelector(".".concat(b.CSS.content));if(T&&T.childNodes.length)for(var R=T.childNodes.length-1;R>=0;R--){var B=T.childNodes[R];if(!w.default.isExtensionNode(B))return B}return null}}],[{key:"CSS",get:function(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}}]),b}();o.default=y,y.displayName="Block"})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(37);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return n(i)=="String"?i.split(""):Object(i)}},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var n=e(37),i=e(14)("toStringTag"),a=n(function(){return arguments}())=="Arguments";r.exports=function(o){var s,u,h;return o===void 0?"Undefined":o===null?"Null":typeof(u=function(d,_){try{return d[_]}catch(g){}}(s=Object(o),i))=="string"?u:a?n(s):(h=n(s))=="Object"&&typeof s.callee=="function"?"Arguments":h}},function(r,t,e){var n=e(12),i=e(32),a=e(14)("species");r.exports=function(o,s){var u,h=n(o).constructor;return h===void 0||(u=n(h)[a])==null?s:i(u)}},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(8)],(a=typeof(n=function(o,s,u,h){"use strict";var d,_,g,w,C,k,E=e(9),O=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.InternalTuneSettings=o.InternalInlineToolSettings=o.InternalBlockToolSettings=o.CommonInternalSettings=o.UserSettings=o.ToolType=void 0,s=O(s),u=O(u),h=E(h),o.ToolType=d,function(m){m[m.Block=0]="Block",m[m.Inline=1]="Inline",m[m.Tune=2]="Tune"}(d||(o.ToolType=d={})),o.UserSettings=_,function(m){m.Shortcut="shortcut",m.Toolbox="toolbox",m.EnabledInlineTools="inlineToolbar",m.EnabledBlockTunes="tunes",m.Config="config"}(_||(o.UserSettings=_={})),o.CommonInternalSettings=g,function(m){m.Shortcut="shortcut",m.SanitizeConfig="sanitize"}(g||(o.CommonInternalSettings=g={})),o.InternalBlockToolSettings=w,function(m){m.IsEnabledLineBreaks="enableLineBreaks",m.Toolbox="toolbox",m.ConversionConfig="conversionConfig",m.IsReadOnlySupported="isReadOnlySupported",m.PasteConfig="pasteConfig"}(w||(o.InternalBlockToolSettings=w={})),o.InternalInlineToolSettings=C,function(m){m.IsInline="isInline",m.Title="title"}(C||(o.InternalInlineToolSettings=C={})),o.InternalTuneSettings=k,function(m){m.IsTune="isTune"}(k||(o.InternalTuneSettings=k={}));var N=function(){function m(y){var b=y.name,S=y.constructable,A=y.config,I=y.api,T=y.isDefault,R=y.isInternal,B=R!==void 0&&R,F=y.defaultPlaceholder;(0,s.default)(this,m),this.api=I,this.name=b,this.constructable=S,this.config=A,this.isDefault=T,this.isInternal=B,this.defaultPlaceholder=F}return(0,u.default)(m,[{key:"reset",value:function(){if(h.isFunction(this.constructable.reset))return this.constructable.reset()}},{key:"prepare",value:function(){if(h.isFunction(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}},{key:"isInline",value:function(){return this.type===d.Inline}},{key:"isBlock",value:function(){return this.type===d.Block}},{key:"isTune",value:function(){return this.type===d.Tune}},{key:"settings",get:function(){var y=this.config[_.Config]||{};return this.isDefault&&!("placeholder"in y)&&this.defaultPlaceholder&&(y.placeholder=this.defaultPlaceholder),y}},{key:"shortcut",get:function(){var y=this.constructable[g.Shortcut];return this.config[_.Shortcut]||y}},{key:"sanitizeConfig",get:function(){return this.constructable[g.SanitizeConfig]}}]),m}();o.default=N,N.displayName="BaseTool"})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(17),i=e(10),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(r.exports=function(o,s){return a[o]||(a[o]=s!==void 0?s:{})})("versions",[]).push({version:n.version,mode:e(45)?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},function(r,t,e){var n=e(28),i=e(16),a=e(47);r.exports=function(o){return function(s,u,h){var d,_=n(s),g=i(_.length),w=a(h,g);if(o&&u!=u){for(;g>w;)if((d=_[w++])!=d)return!0}else for(;g>w;w++)if((o||w in _)&&_[w]===u)return o||w||0;return!o&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var n=e(37);r.exports=Array.isArray||function(i){return n(i)=="Array"}},function(r,t,e){var n=e(14)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(o){}r.exports=function(o,s){if(!s&&!i)return!1;var u=!1;try{var h=[7],d=h[n]();d.next=function(){return{done:u=!0}},h[n]=function(){return d},o(h)}catch(_){}return u}},function(r,t,e){"use strict";var n=e(12);r.exports=function(){var i=n(this),a="";return i.global&&(a+="g"),i.ignoreCase&&(a+="i"),i.multiline&&(a+="m"),i.unicode&&(a+="u"),i.sticky&&(a+="y"),a}},function(r,t,e){"use strict";var n=e(64),i=RegExp.prototype.exec;r.exports=function(a,o){var s=a.exec;if(typeof s=="function"){var u=s.call(a,o);if(typeof u!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return u}if(n(a)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(a,o)}},function(r,t,e){"use strict";e(129);var n=e(23),i=e(27),a=e(11),o=e(38),s=e(14),u=e(103),h=s("species"),d=!a(function(){var g=/./;return g.exec=function(){var w=[];return w.groups={a:"7"},w},"".replace(g,"$<a>")!=="7"}),_=function(){var g=/(?:)/,w=g.exec;g.exec=function(){return w.apply(this,arguments)};var C="ab".split(g);return C.length===2&&C[0]==="a"&&C[1]==="b"}();r.exports=function(g,w,C){var k=s(g),E=!a(function(){var S={};return S[k]=function(){return 7},""[g](S)!=7}),O=E?!a(function(){var S=!1,A=/a/;return A.exec=function(){return S=!0,null},g==="split"&&(A.constructor={},A.constructor[h]=function(){return A}),A[k](""),!S}):void 0;if(!E||!O||g==="replace"&&!d||g==="split"&&!_){var N=/./[k],m=C(o,k,""[g],function(S,A,I,T,R){return A.exec===u?E&&!R?{done:!0,value:N.call(A,I,T)}:{done:!0,value:S.call(I,A,T)}:{done:!1}}),y=m[0],b=m[1];n(String.prototype,g,y),i(RegExp.prototype,k,w==2?function(S,A){return b.call(S,this,A)}:function(S){return b.call(S,this)})}}},function(r,t,e){var n=e(31),i=e(124),a=e(98),o=e(12),s=e(16),u=e(100),h={},d={};(t=r.exports=function(_,g,w,C,k){var E,O,N,m,y=k?function(){return _}:u(_),b=n(w,C,g?2:1),S=0;if(typeof y!="function")throw TypeError(_+" is not iterable!");if(a(y)){for(E=s(_.length);E>S;S++)if((m=g?b(o(O=_[S])[0],O[1]):b(_[S]))===h||m===d)return m}else for(N=y.call(_);!(O=N.next()).done;)if((m=i(N,b,O.value,g))===h||m===d)return m}).BREAK=h,t.RETURN=d},function(r,t,e){var n=e(10).navigator;r.exports=n&&n.userAgent||""},function(r,t,e){"use strict";var n=e(10),i=e(0),a=e(23),o=e(58),s=e(41),u=e(75),h=e(57),d=e(13),_=e(11),g=e(71),w=e(53),C=e(89);r.exports=function(k,E,O,N,m,y){var b=n[k],S=b,A=m?"set":"add",I=S&&S.prototype,T={},R=function(z){var Y=I[z];a(I,z,z=="delete"||z=="has"?function(ce){return!(y&&!d(ce))&&Y.call(this,ce===0?0:ce)}:z=="get"?function(ce){return y&&!d(ce)?void 0:Y.call(this,ce===0?0:ce)}:z=="add"?function(ce){return Y.call(this,ce===0?0:ce),this}:function(ce,re){return Y.call(this,ce===0?0:ce,re),this})};if(typeof S=="function"&&(y||I.forEach&&!_(function(){new S().entries().next()}))){var B=new S,F=B[A](y?{}:-0,1)!=B,L=_(function(){B.has(1)}),j=g(function(z){new S(z)}),P=!y&&_(function(){for(var z=new S,Y=5;Y--;)z[A](Y,Y);return!z.has(-0)});j||((S=E(function(z,Y){h(z,S,k);var ce=C(new b,z,S);return Y!=null&&u(Y,m,ce[A],ce),ce})).prototype=I,I.constructor=S),(L||P)&&(R("delete"),R("has"),m&&R("get")),(P||F)&&R(A),y&&I.clear&&delete I.clear}else S=N.getConstructor(E,k,m,A),o(S.prototype,O),s.NEED=!0;return w(S,k),T[k]=S,i(i.G+i.W+i.F*(S!=b),T),y||N.setStrong(S,k,m),S}},function(r,t,e){for(var n,i=e(10),a=e(27),o=e(44),s=o("typed_array"),u=o("view"),h=!(!i.ArrayBuffer||!i.DataView),d=h,_=0,g="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");_<9;)(n=i[g[_++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):d=!1;r.exports={ABV:h,CONSTR:d,TYPED:s,VIEW:u}},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"getMethodsForTool",value:function(y){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(y)})}},{key:"methods",get:function(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods}}}]),m}((g=w(g)).default);o.default=k,k.displayName="API",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(8),e(59),e(81)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E){"use strict";var O=e(9),N=e(1);function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=N(s),u=N(u),h=N(h),d=N(d),_=N(_),g=N(g),w=N(w),C=O(C),k=N(k);var y=function(b){(0,h.default)(I,b);var S,A=(S=I,function(){var T,R=(0,_.default)(S);if(m()){var B=(0,_.default)(this).constructor;T=Reflect.construct(R,arguments,B)}else T=R.apply(this,arguments);return(0,d.default)(this,T)});function I(){return(0,s.default)(this,I),A.apply(this,arguments)}return(0,u.default)(I,[{key:"toggleReadOnly",value:function(T){T?(this.destroy(),this.Editor.Toolbox.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):(this.drawUI(),this.enableModuleBindings())}},{key:"move",value:function(){var T=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];T&&(this.Editor.Toolbox.close(),this.Editor.BlockSettings.close());var R=this.Editor.BlockManager.currentBlock.holder;if(R){var B=this.Editor.UI.isMobile,F=R.offsetHeight,L=R.offsetTop;if(B)L+=F;else{var j=Math.floor(F/2);this.nodes.plusButton.style.transform="translate3d(0, calc(".concat(j,"px - 50%), 0)"),this.Editor.Toolbox.nodes.toolbox.style.transform="translate3d(0, calc(".concat(j,"px - 50%), 0)")}this.nodes.wrapper.style.transform="translate3D(0, ".concat(Math.floor(L),"px, 0)")}}},{key:"open",value:function(){var T=this,R=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],B=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];C.delay(function(){T.move(B),T.nodes.wrapper.classList.add(T.CSS.toolbarOpened),R?T.blockActions.show():T.blockActions.hide()},50)()}},{key:"close",value:function(){this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),this.Editor.Toolbox.close(),this.Editor.BlockSettings.close()}},{key:"make",value:function(){var T=this;this.nodes.wrapper=w.default.make("div",this.CSS.toolbar),["content","actions"].forEach(function(F){T.nodes[F]=w.default.make("div",T.CSS[F])}),w.default.append(this.nodes.wrapper,this.nodes.content),w.default.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=w.default.make("div",this.CSS.plusButton),w.default.append(this.nodes.plusButton,w.default.svg("plus",14,14)),w.default.append(this.nodes.content,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",function(){T.plusButtonClicked()},!1);var R=w.default.make("div");R.appendChild(document.createTextNode(k.default.ui(E.I18nInternalNS.ui.toolbar.toolbox,"Add"))),R.appendChild(w.default.make("div",this.CSS.plusButtonShortcut,{textContent:"\u21E5 Tab"})),this.Editor.Tooltip.onHover(this.nodes.plusButton,R),this.nodes.blockActionsButtons=w.default.make("div",this.CSS.blockActionsButtons),this.nodes.settingsToggler=w.default.make("span",this.CSS.settingsToggler);var B=w.default.svg("dots",8,8);w.default.append(this.nodes.settingsToggler,B),w.default.append(this.nodes.blockActionsButtons,this.nodes.settingsToggler),w.default.append(this.nodes.actions,this.nodes.blockActionsButtons),this.Editor.Tooltip.onHover(this.nodes.settingsToggler,k.default.ui(E.I18nInternalNS.ui.blockTunes.toggler,"Click to tune"),{placement:"top"}),w.default.append(this.nodes.content,this.Editor.Toolbox.nodes.toolbox),w.default.append(this.nodes.actions,this.Editor.BlockSettings.nodes.wrapper),w.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}},{key:"plusButtonClicked",value:function(){this.Editor.Toolbox.toggle()}},{key:"enableModuleBindings",value:function(){var T=this;this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"click",function(){T.settingsTogglerClicked()})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"settingsTogglerClicked",value:function(){this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open()}},{key:"drawUI",value:function(){this.Editor.BlockSettings.make(),this.Editor.Toolbox.make(),this.make()}},{key:"destroy",value:function(){this.removeAllNodes()}},{key:"CSS",get:function(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",plusButtonHidden:"ce-toolbar__plus--hidden",blockActionsButtons:"ce-toolbar__actions-buttons",settingsToggler:"ce-toolbar__settings-btn"}}},{key:"opened",get:function(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}},{key:"plusButton",get:function(){var T=this;return{hide:function(){return T.nodes.plusButton.classList.add(T.CSS.plusButtonHidden)},show:function(){T.Editor.Toolbox.isEmpty||T.nodes.plusButton.classList.remove(T.CSS.plusButtonHidden)}}}},{key:"blockActions",get:function(){var T=this;return{hide:function(){T.nodes.actions.classList.remove(T.CSS.actionsOpened)},show:function(){T.nodes.actions.classList.add(T.CSS.actionsOpened)}}}}]),I}(g.default);o.default=y,y.displayName="Toolbar",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(144),e(8)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.I18nInternalNS=void 0,s=d(s);var _=function g(w,C){var k={};return Object.entries(w).forEach(function(E){var O=(0,s.default)(E,2),N=O[0],m=O[1];if((0,h.isObject)(m)){var y=C?"".concat(C,".").concat(N):N,b=Object.values(m).every(function(S){return(0,h.isString)(S)});k[N]=b?y:g(m,y)}else k[N]=m}),k}((u=d(u)).default);o.I18nInternalNS=_})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(13),i=e(10).document,a=n(i)&&n(i.createElement);r.exports=function(o){return a?i.createElement(o):{}}},function(r,t,e){t.f=e(14)},function(r,t,e){var n=e(67)("keys"),i=e(44);r.exports=function(a){return n[a]||(n[a]=i(a))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t,e){var n=e(10).document;r.exports=n&&n.documentElement},function(r,t,e){var n=e(13),i=e(12),a=function(o,s){if(i(o),!n(s)&&s!==null)throw TypeError(s+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(o,s,u){try{(u=e(31)(Function.call,e(34).f(Object.prototype,"__proto__").set,2))(o,[]),s=!(o instanceof Array)}catch(h){s=!0}return function(h,d){return a(h,d),s?h.__proto__=d:u(h,d),h}}({},!1):void 0),check:a}},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){var n=e(13),i=e(87).set;r.exports=function(a,o,s){var u,h=o.constructor;return h!==s&&typeof h=="function"&&(u=h.prototype)!==s.prototype&&n(u)&&i&&i(a,u),a}},function(r,t,e){"use strict";var n=e(33),i=e(38);r.exports=function(a){var o=String(i(this)),s="",u=n(a);if(u<0||u==1/0)throw RangeError("Count can't be negative");for(;u>0;(u>>>=1)&&(o+=o))1&u&&(s+=o);return s}},function(r,t){r.exports=Math.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1}},function(r,t){var e=Math.expm1;r.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(n){return(n=+n)==0?n:n>-1e-6&&n<1e-6?n+n*n/2:Math.exp(n)-1}:e},function(r,t,e){var n=e(33),i=e(38);r.exports=function(a){return function(o,s){var u,h,d=String(i(o)),_=n(s),g=d.length;return _<0||_>=g?a?"":void 0:(u=d.charCodeAt(_))<55296||u>56319||_+1===g||(h=d.charCodeAt(_+1))<56320||h>57343?a?d.charAt(_):u:a?d.slice(_,_+2):h-56320+(u-55296<<10)+65536}}},function(r,t,e){"use strict";var n=e(45),i=e(0),a=e(23),o=e(27),s=e(55),u=e(123),h=e(53),d=e(50),_=e(14)("iterator"),g=!([].keys&&"next"in[].keys()),w=function(){return this};r.exports=function(C,k,E,O,N,m,y){u(E,k,O);var b,S,A,I=function(Y){if(!g&&Y in F)return F[Y];switch(Y){case"keys":case"values":return function(){return new E(this,Y)}}return function(){return new E(this,Y)}},T=k+" Iterator",R=N=="values",B=!1,F=C.prototype,L=F[_]||F["@@iterator"]||N&&F[N],j=L||I(N),P=N?R?I("entries"):j:void 0,z=k=="Array"&&F.entries||L;if(z&&(A=d(z.call(new C)))!==Object.prototype&&A.next&&(h(A,T,!0),n||typeof A[_]=="function"||o(A,_,w)),R&&L&&L.name!=="values"&&(B=!0,j=function(){return L.call(this)}),n&&!y||!g&&!B&&F[_]||o(F,_,j),s[k]=j,s[T]=w,N)if(b={values:R?j:I("values"),keys:m?j:I("keys"),entries:P},y)for(S in b)S in F||a(F,S,b[S]);else i(i.P+i.F*(g||B),k,b);return b}},function(r,t,e){var n=e(96),i=e(38);r.exports=function(a,o,s){if(n(o))throw TypeError("String#"+s+" doesn't accept regex!");return String(i(a))}},function(r,t,e){var n=e(13),i=e(37),a=e(14)("match");r.exports=function(o){var s;return n(o)&&((s=o[a])!==void 0?!!s:i(o)=="RegExp")}},function(r,t,e){var n=e(14)("match");r.exports=function(i){var a=/./;try{"/./"[i](a)}catch(o){try{return a[n]=!1,!"/./"[i](a)}catch(s){}}return!0}},function(r,t,e){var n=e(55),i=e(14)("iterator"),a=Array.prototype;r.exports=function(o){return o!==void 0&&(n.Array===o||a[i]===o)}},function(r,t,e){"use strict";var n=e(19),i=e(43);r.exports=function(a,o,s){o in a?n.f(a,o,i(0,s)):a[o]=s}},function(r,t,e){var n=e(64),i=e(14)("iterator"),a=e(55);r.exports=e(17).getIteratorMethod=function(o){if(o!=null)return o[i]||o["@@iterator"]||a[n(o)]}},function(r,t,e){"use strict";var n=e(20),i=e(47),a=e(16);r.exports=function(o){for(var s=n(this),u=a(s.length),h=arguments.length,d=i(h>1?arguments[1]:void 0,u),_=h>2?arguments[2]:void 0,g=_===void 0?u:i(_,u);g>d;)s[d++]=o;return s}},function(r,t,e){"use strict";var n=e(51),i=e(128),a=e(55),o=e(28);r.exports=e(94)(Array,"Array",function(s,u){this._t=o(s),this._i=0,this._k=u},function(){var s=this._t,u=this._k,h=this._i++;return!s||h>=s.length?(this._t=void 0,i(1)):i(0,u=="keys"?h:u=="values"?s[h]:[h,s[h]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(r,t,e){"use strict";var n,i,a=e(72),o=RegExp.prototype.exec,s=String.prototype.replace,u=o,h=(n=/a/,i=/b*/g,o.call(n,"a"),o.call(i,"a"),n.lastIndex!==0||i.lastIndex!==0),d=/()??/.exec("")[1]!==void 0;(h||d)&&(u=function(_){var g,w,C,k,E=this;return d&&(w=new RegExp("^"+E.source+"$(?!\\s)",a.call(E))),h&&(g=E.lastIndex),C=o.call(E,_),h&&C&&(E.lastIndex=E.global?C.index+C[0].length:g),d&&C&&C.length>1&&s.call(C[0],w,function(){for(k=1;k<arguments.length-2;k++)arguments[k]===void 0&&(C[k]=void 0)}),C}),r.exports=u},function(r,t,e){"use strict";var n=e(93)(!0);r.exports=function(i,a,o){return a+(o?n(i,a).length:1)}},function(r,t,e){var n,i,a,o=e(31),s=e(117),u=e(86),h=e(82),d=e(10),_=d.process,g=d.setImmediate,w=d.clearImmediate,C=d.MessageChannel,k=d.Dispatch,E=0,O={},N=function(){var y=+this;if(O.hasOwnProperty(y)){var b=O[y];delete O[y],b()}},m=function(y){N.call(y.data)};g&&w||(g=function(y){for(var b=[],S=1;arguments.length>S;)b.push(arguments[S++]);return O[++E]=function(){s(typeof y=="function"?y:Function(y),b)},n(E),E},w=function(y){delete O[y]},e(37)(_)=="process"?n=function(y){_.nextTick(o(N,y,1))}:k&&k.now?n=function(y){k.now(o(N,y,1))}:C?(a=(i=new C).port2,i.port1.onmessage=m,n=o(a.postMessage,a,1)):d.addEventListener&&typeof postMessage=="function"&&!d.importScripts?(n=function(y){d.postMessage(y+"","*")},d.addEventListener("message",m,!1)):n="onreadystatechange"in h("script")?function(y){u.appendChild(h("script")).onreadystatechange=function(){u.removeChild(this),N.call(y)}}:function(y){setTimeout(o(N,y,1),0)}),r.exports={set:g,clear:w}},function(r,t,e){"use strict";var n=e(10),i=e(18),a=e(45),o=e(78),s=e(27),u=e(58),h=e(11),d=e(57),_=e(33),g=e(16),w=e(136),C=e(49).f,k=e(19).f,E=e(101),O=e(53),N=n.ArrayBuffer,m=n.DataView,y=n.Math,b=n.RangeError,S=n.Infinity,A=N,I=y.abs,T=y.pow,R=y.floor,B=y.log,F=y.LN2,L=i?"_b":"buffer",j=i?"_l":"byteLength",P=i?"_o":"byteOffset";function z(Se,ze,at){var Qe,lt,At,It=new Array(at),bt=8*at-ze-1,Et=(1<<bt)-1,Rt=Et>>1,Lt=ze===23?T(2,-24)-T(2,-77):0,Ce=0,Ie=Se<0||Se===0&&1/Se<0?1:0;for((Se=I(Se))!=Se||Se===S?(lt=Se!=Se?1:0,Qe=Et):(Qe=R(B(Se)/F),Se*(At=T(2,-Qe))<1&&(Qe--,At*=2),(Se+=Qe+Rt>=1?Lt/At:Lt*T(2,1-Rt))*At>=2&&(Qe++,At/=2),Qe+Rt>=Et?(lt=0,Qe=Et):Qe+Rt>=1?(lt=(Se*At-1)*T(2,ze),Qe+=Rt):(lt=Se*T(2,Rt-1)*T(2,ze),Qe=0));ze>=8;It[Ce++]=255&lt,lt/=256,ze-=8);for(Qe=Qe<<ze|lt,bt+=ze;bt>0;It[Ce++]=255&Qe,Qe/=256,bt-=8);return It[--Ce]|=128*Ie,It}function Y(Se,ze,at){var Qe,lt=8*at-ze-1,At=(1<<lt)-1,It=At>>1,bt=lt-7,Et=at-1,Rt=Se[Et--],Lt=127&Rt;for(Rt>>=7;bt>0;Lt=256*Lt+Se[Et],Et--,bt-=8);for(Qe=Lt&(1<<-bt)-1,Lt>>=-bt,bt+=ze;bt>0;Qe=256*Qe+Se[Et],Et--,bt-=8);if(Lt===0)Lt=1-It;else{if(Lt===At)return Qe?NaN:Rt?-S:S;Qe+=T(2,ze),Lt-=It}return(Rt?-1:1)*Qe*T(2,Lt-ze)}function ce(Se){return Se[3]<<24|Se[2]<<16|Se[1]<<8|Se[0]}function re(Se){return[255&Se]}function Z(Se){return[255&Se,Se>>8&255]}function me(Se){return[255&Se,Se>>8&255,Se>>16&255,Se>>24&255]}function ke(Se){return z(Se,52,8)}function ne(Se){return z(Se,23,4)}function oe(Se,ze,at){k(Se.prototype,ze,{get:function(){return this[at]}})}function ge(Se,ze,at,Qe){var lt=w(+at);if(lt+ze>Se[j])throw b("Wrong index!");var At=Se[L]._b,It=lt+Se[P],bt=At.slice(It,It+ze);return Qe?bt:bt.reverse()}function ve(Se,ze,at,Qe,lt,At){var It=w(+at);if(It+ze>Se[j])throw b("Wrong index!");for(var bt=Se[L]._b,Et=It+Se[P],Rt=Qe(+lt),Lt=0;Lt<ze;Lt++)bt[Et+Lt]=Rt[At?Lt:ze-Lt-1]}if(o.ABV){if(!h(function(){N(1)})||!h(function(){new N(-1)})||h(function(){return new N,new N(1.5),new N(NaN),N.name!="ArrayBuffer"})){for(var pe,he=(N=function(Se){return d(this,N),new A(w(Se))}).prototype=A.prototype,Ae=C(A),Me=0;Ae.length>Me;)(pe=Ae[Me++])in N||s(N,pe,A[pe]);a||(he.constructor=N)}var De=new m(new N(2)),Je=m.prototype.setInt8;De.setInt8(0,2147483648),De.setInt8(1,2147483649),!De.getInt8(0)&&De.getInt8(1)||u(m.prototype,{setInt8:function(Se,ze){Je.call(this,Se,ze<<24>>24)},setUint8:function(Se,ze){Je.call(this,Se,ze<<24>>24)}},!0)}else N=function(Se){d(this,N,"ArrayBuffer");var ze=w(Se);this._b=E.call(new Array(ze),0),this[j]=ze},m=function(Se,ze,at){d(this,m,"DataView"),d(Se,N,"DataView");var Qe=Se[j],lt=_(ze);if(lt<0||lt>Qe)throw b("Wrong offset!");if(lt+(at=at===void 0?Qe-lt:g(at))>Qe)throw b("Wrong length!");this[L]=Se,this[P]=lt,this[j]=at},i&&(oe(N,"byteLength","_l"),oe(m,"buffer","_b"),oe(m,"byteLength","_l"),oe(m,"byteOffset","_o")),u(m.prototype,{getInt8:function(Se){return ge(this,1,Se)[0]<<24>>24},getUint8:function(Se){return ge(this,1,Se)[0]},getInt16:function(Se){var ze=ge(this,2,Se,arguments[1]);return(ze[1]<<8|ze[0])<<16>>16},getUint16:function(Se){var ze=ge(this,2,Se,arguments[1]);return ze[1]<<8|ze[0]},getInt32:function(Se){return ce(ge(this,4,Se,arguments[1]))},getUint32:function(Se){return ce(ge(this,4,Se,arguments[1]))>>>0},getFloat32:function(Se){return Y(ge(this,4,Se,arguments[1]),23,4)},getFloat64:function(Se){return Y(ge(this,8,Se,arguments[1]),52,8)},setInt8:function(Se,ze){ve(this,1,Se,re,ze)},setUint8:function(Se,ze){ve(this,1,Se,re,ze)},setInt16:function(Se,ze){ve(this,2,Se,Z,ze,arguments[2])},setUint16:function(Se,ze){ve(this,2,Se,Z,ze,arguments[2])},setInt32:function(Se,ze){ve(this,4,Se,me,ze,arguments[2])},setUint32:function(Se,ze){ve(this,4,Se,me,ze,arguments[2])},setFloat32:function(Se,ze){ve(this,4,Se,ne,ze,arguments[2])},setFloat64:function(Se,ze){ve(this,8,Se,ke,ze,arguments[2])}});O(N,"ArrayBuffer"),O(m,"DataView"),s(m.prototype,o.VIEW,!0),t.ArrayBuffer=N,t.DataView=m},function(r,t){function e(n,i){return r.exports=e=Object.setPrototypeOf||function(a,o){return a.__proto__=o,a},e(n,i)}r.exports=e},function(r,t,e){var n,i,a;i=[t,e(42),e(2),e(3),e(377)],(a=typeof(n=function(o,s,u,h,d){"use strict";var _=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=_(s),u=_(u),h=_(h),d=_(d);var g=function(){function C(){(0,u.default)(this,C),this.registeredShortcuts=new Map}return(0,h.default)(C,[{key:"add",value:function(k){if(this.findShortcut(k.on,k.name))throw Error("Shortcut ".concat(k.name," is already registered for ").concat(k.on,". Please remove it before add a new handler."));var E=new d.default({name:k.name,on:k.on,callback:k.handler}),O=this.registeredShortcuts.get(k.on)||[];this.registeredShortcuts.set(k.on,[].concat((0,s.default)(O),[E]))}},{key:"remove",value:function(k,E){var O=this.findShortcut(k,E);if(O){O.remove();var N=this.registeredShortcuts.get(k);this.registeredShortcuts.set(k,N.filter(function(m){return m!==O}))}}},{key:"findShortcut",value:function(k,E){return(this.registeredShortcuts.get(k)||[]).find(function(O){return O.name===E})}}]),C}();g.displayName="Shortcuts";var w=new g;o.default=w,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){r.exports=!e(18)&&!e(11)(function(){return Object.defineProperty(e(82)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var n=e(10),i=e(17),a=e(45),o=e(83),s=e(19).f;r.exports=function(u){var h=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});u.charAt(0)=="_"||u in h||s(h,u,{value:o.f(u)})}},function(r,t,e){var n=e(26),i=e(28),a=e(68)(!1),o=e(84)("IE_PROTO");r.exports=function(s,u){var h,d=i(s),_=0,g=[];for(h in d)h!=o&&n(d,h)&&g.push(h);for(;u.length>_;)n(d,h=u[_++])&&(~a(g,h)||g.push(h));return g}},function(r,t,e){var n=e(19),i=e(12),a=e(46);r.exports=e(18)?Object.defineProperties:function(o,s){i(o);for(var u,h=a(s),d=h.length,_=0;d>_;)n.f(o,u=h[_++],s[u]);return o}},function(r,t,e){var n=e(28),i=e(49).f,a={}.toString,o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(s){return o&&a.call(s)=="[object Window]"?function(u){try{return i(u)}catch(h){return o.slice()}}(s):i(n(s))}},function(r,t,e){"use strict";var n=e(18),i=e(46),a=e(69),o=e(63),s=e(20),u=e(62),h=Object.assign;r.exports=!h||e(11)(function(){var d={},_={},g=Symbol(),w="abcdefghijklmnopqrst";return d[g]=7,w.split("").forEach(function(C){_[C]=C}),h({},d)[g]!=7||Object.keys(h({},_)).join("")!=w})?function(d,_){for(var g=s(d),w=arguments.length,C=1,k=a.f,E=o.f;w>C;)for(var O,N=u(arguments[C++]),m=k?i(N).concat(k(N)):i(N),y=m.length,b=0;y>b;)O=m[b++],n&&!E.call(N,O)||(g[O]=N[O]);return g}:h},function(r,t){r.exports=Object.is||function(e,n){return e===n?e!==0||1/e==1/n:e!=e&&n!=n}},function(r,t,e){"use strict";var n=e(32),i=e(13),a=e(117),o=[].slice,s={},u=function(h,d,_){if(!(d in s)){for(var g=[],w=0;w<d;w++)g[w]="a["+w+"]";s[d]=Function("F,a","return new F("+g.join(",")+")")}return s[d](h,_)};r.exports=Function.bind||function(h){var d=n(this),_=o.call(arguments,1),g=function(){var w=_.concat(o.call(arguments));return this instanceof g?u(d,w.length,w):a(d,w,h)};return i(d.prototype)&&(g.prototype=d.prototype),g}},function(r,t){r.exports=function(e,n,i){var a=i===void 0;switch(n.length){case 0:return a?e():e.call(i);case 1:return a?e(n[0]):e.call(i,n[0]);case 2:return a?e(n[0],n[1]):e.call(i,n[0],n[1]);case 3:return a?e(n[0],n[1],n[2]):e.call(i,n[0],n[1],n[2]);case 4:return a?e(n[0],n[1],n[2],n[3]):e.call(i,n[0],n[1],n[2],n[3])}return e.apply(i,n)}},function(r,t,e){var n=e(10).parseInt,i=e(54).trim,a=e(88),o=/^[-+]?0[xX]/;r.exports=n(a+"08")!==8||n(a+"0x16")!==22?function(s,u){var h=i(String(s),3);return n(h,u>>>0||(o.test(h)?16:10))}:n},function(r,t,e){var n=e(10).parseFloat,i=e(54).trim;r.exports=1/n(e(88)+"-0")!=-1/0?function(a){var o=i(String(a),3),s=n(o);return s===0&&o.charAt(0)=="-"?-0:s}:n},function(r,t,e){var n=e(37);r.exports=function(i,a){if(typeof i!="number"&&n(i)!="Number")throw TypeError(a);return+i}},function(r,t,e){var n=e(13),i=Math.floor;r.exports=function(a){return!n(a)&&isFinite(a)&&i(a)===a}},function(r,t){r.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(r,t,e){"use strict";var n=e(48),i=e(43),a=e(53),o={};e(27)(o,e(14)("iterator"),function(){return this}),r.exports=function(s,u,h){s.prototype=n(o,{next:i(1,h)}),a(s,u+" Iterator")}},function(r,t,e){var n=e(12);r.exports=function(i,a,o,s){try{return s?a(n(o)[0],o[1]):a(o)}catch(h){var u=i.return;throw u!==void 0&&n(u.call(i)),h}}},function(r,t,e){var n=e(278);r.exports=function(i,a){return new(n(i))(a)}},function(r,t,e){var n=e(32),i=e(20),a=e(62),o=e(16);r.exports=function(s,u,h,d,_){n(u);var g=i(s),w=a(g),C=o(g.length),k=_?C-1:0,E=_?-1:1;if(h<2)for(;;){if(k in w){d=w[k],k+=E;break}if(k+=E,_?k<0:C<=k)throw TypeError("Reduce of empty array with no initial value")}for(;_?k>=0:C>k;k+=E)k in w&&(d=u(d,w[k],k,g));return d}},function(r,t,e){"use strict";var n=e(20),i=e(47),a=e(16);r.exports=[].copyWithin||function(o,s){var u=n(this),h=a(u.length),d=i(o,h),_=i(s,h),g=arguments.length>2?arguments[2]:void 0,w=Math.min((g===void 0?h:i(g,h))-_,h-d),C=1;for(_<d&&d<_+w&&(C=-1,_+=w-1,d+=w-1);w-- >0;)_ in u?u[d]=u[_]:delete u[d],d+=C,_+=C;return u}},function(r,t){r.exports=function(e,n){return{value:n,done:!!e}}},function(r,t,e){"use strict";var n=e(103);e(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(r,t,e){e(18)&&/./g.flags!="g"&&e(19).f(RegExp.prototype,"flags",{configurable:!0,get:e(72)})},function(r,t,e){"use strict";var n,i,a,o,s=e(45),u=e(10),h=e(31),d=e(64),_=e(0),g=e(13),w=e(32),C=e(57),k=e(75),E=e(65),O=e(105).set,N=e(298)(),m=e(132),y=e(299),b=e(76),S=e(133),A=u.TypeError,I=u.process,T=I&&I.versions,R=T&&T.v8||"",B=u.Promise,F=d(I)=="process",L=function(){},j=i=m.f,P=!!function(){try{var ne=B.resolve(1),oe=(ne.constructor={})[e(14)("species")]=function(ge){ge(L,L)};return(F||typeof PromiseRejectionEvent=="function")&&ne.then(L)instanceof oe&&R.indexOf("6.6")!==0&&b.indexOf("Chrome/66")===-1}catch(ge){}}(),z=function(ne){var oe;return!(!g(ne)||typeof(oe=ne.then)!="function")&&oe},Y=function(ne,oe){if(!ne._n){ne._n=!0;var ge=ne._c;N(function(){for(var ve=ne._v,pe=ne._s==1,he=0,Ae=function(Me){var De,Je,Se,ze=pe?Me.ok:Me.fail,at=Me.resolve,Qe=Me.reject,lt=Me.domain;try{ze?(pe||(ne._h==2&&Z(ne),ne._h=1),ze===!0?De=ve:(lt&&lt.enter(),De=ze(ve),lt&&(lt.exit(),Se=!0)),De===Me.promise?Qe(A("Promise-chain cycle")):(Je=z(De))?Je.call(De,at,Qe):at(De)):Qe(ve)}catch(At){lt&&!Se&&lt.exit(),Qe(At)}};ge.length>he;)Ae(ge[he++]);ne._c=[],ne._n=!1,oe&&!ne._h&&ce(ne)})}},ce=function(ne){O.call(u,function(){var oe,ge,ve,pe=ne._v,he=re(ne);if(he&&(oe=y(function(){F?I.emit("unhandledRejection",pe,ne):(ge=u.onunhandledrejection)?ge({promise:ne,reason:pe}):(ve=u.console)&&ve.error&&ve.error("Unhandled promise rejection",pe)}),ne._h=F||re(ne)?2:1),ne._a=void 0,he&&oe.e)throw oe.v})},re=function(ne){return ne._h!==1&&(ne._a||ne._c).length===0},Z=function(ne){O.call(u,function(){var oe;F?I.emit("rejectionHandled",ne):(oe=u.onrejectionhandled)&&oe({promise:ne,reason:ne._v})})},me=function(ne){var oe=this;oe._d||(oe._d=!0,(oe=oe._w||oe)._v=ne,oe._s=2,oe._a||(oe._a=oe._c.slice()),Y(oe,!0))},ke=function(ne){var oe,ge=this;if(!ge._d){ge._d=!0,ge=ge._w||ge;try{if(ge===ne)throw A("Promise can't be resolved itself");(oe=z(ne))?N(function(){var ve={_w:ge,_d:!1};try{oe.call(ne,h(ke,ve,1),h(me,ve,1))}catch(pe){me.call(ve,pe)}}):(ge._v=ne,ge._s=1,Y(ge,!1))}catch(ve){me.call({_w:ge,_d:!1},ve)}}};P||(B=function(ne){C(this,B,"Promise","_h"),w(ne),n.call(this);try{ne(h(ke,this,1),h(me,this,1))}catch(oe){me.call(this,oe)}},(n=function(ne){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e(58)(B.prototype,{then:function(ne,oe){var ge=j(E(this,B));return ge.ok=typeof ne!="function"||ne,ge.fail=typeof oe=="function"&&oe,ge.domain=F?I.domain:void 0,this._c.push(ge),this._a&&this._a.push(ge),this._s&&Y(this,!1),ge.promise},catch:function(ne){return this.then(void 0,ne)}}),a=function(){var ne=new n;this.promise=ne,this.resolve=h(ke,ne,1),this.reject=h(me,ne,1)},m.f=j=function(ne){return ne===B||ne===o?new a(ne):i(ne)}),_(_.G+_.W+_.F*!P,{Promise:B}),e(53)(B,"Promise"),e(56)("Promise"),o=e(17).Promise,_(_.S+_.F*!P,"Promise",{reject:function(ne){var oe=j(this);return(0,oe.reject)(ne),oe.promise}}),_(_.S+_.F*(s||!P),"Promise",{resolve:function(ne){return S(s&&this===o?B:this,ne)}}),_(_.S+_.F*!(P&&e(71)(function(ne){B.all(ne).catch(L)})),"Promise",{all:function(ne){var oe=this,ge=j(oe),ve=ge.resolve,pe=ge.reject,he=y(function(){var Ae=[],Me=0,De=1;k(ne,!1,function(Je){var Se=Me++,ze=!1;Ae.push(void 0),De++,oe.resolve(Je).then(function(at){ze||(ze=!0,Ae[Se]=at,--De||ve(Ae))},pe)}),--De||ve(Ae)});return he.e&&pe(he.v),ge.promise},race:function(ne){var oe=this,ge=j(oe),ve=ge.reject,pe=y(function(){k(ne,!1,function(he){oe.resolve(he).then(ge.resolve,ve)})});return pe.e&&ve(pe.v),ge.promise}})},function(r,t,e){"use strict";var n=e(32);function i(a){var o,s;this.promise=new a(function(u,h){if(o!==void 0||s!==void 0)throw TypeError("Bad Promise constructor");o=u,s=h}),this.resolve=n(o),this.reject=n(s)}r.exports.f=function(a){return new i(a)}},function(r,t,e){var n=e(12),i=e(13),a=e(132);r.exports=function(o,s){if(n(o),i(s)&&s.constructor===o)return s;var u=a.f(o);return(0,u.resolve)(s),u.promise}},function(r,t,e){"use strict";var n=e(19).f,i=e(48),a=e(58),o=e(31),s=e(57),u=e(75),h=e(94),d=e(128),_=e(56),g=e(18),w=e(41).fastKey,C=e(52),k=g?"_s":"size",E=function(O,N){var m,y=w(N);if(y!=="F")return O._i[y];for(m=O._f;m;m=m.n)if(m.k==N)return m};r.exports={getConstructor:function(O,N,m,y){var b=O(function(S,A){s(S,b,N,"_i"),S._t=N,S._i=i(null),S._f=void 0,S._l=void 0,S[k]=0,A!=null&&u(A,m,S[y],S)});return a(b.prototype,{clear:function(){for(var S=C(this,N),A=S._i,I=S._f;I;I=I.n)I.r=!0,I.p&&(I.p=I.p.n=void 0),delete A[I.i];S._f=S._l=void 0,S[k]=0},delete:function(S){var A=C(this,N),I=E(A,S);if(I){var T=I.n,R=I.p;delete A._i[I.i],I.r=!0,R&&(R.n=T),T&&(T.p=R),A._f==I&&(A._f=T),A._l==I&&(A._l=R),A[k]--}return!!I},forEach:function(S){C(this,N);for(var A,I=o(S,arguments.length>1?arguments[1]:void 0,3);A=A?A.n:this._f;)for(I(A.v,A.k,this);A&&A.r;)A=A.p},has:function(S){return!!E(C(this,N),S)}}),g&&n(b.prototype,"size",{get:function(){return C(this,N)[k]}}),b},def:function(O,N,m){var y,b,S=E(O,N);return S?S.v=m:(O._l=S={i:b=w(N,!0),k:N,v:m,p:y=O._l,n:void 0,r:!1},O._f||(O._f=S),y&&(y.n=S),O[k]++,b!=="F"&&(O._i[b]=S)),O},getEntry:E,setStrong:function(O,N,m){h(O,N,function(y,b){this._t=C(y,N),this._k=b,this._l=void 0},function(){for(var y=this._k,b=this._l;b&&b.r;)b=b.p;return this._t&&(this._l=b=b?b.n:this._t._f)?d(0,y=="keys"?b.k:y=="values"?b.v:[b.k,b.v]):(this._t=void 0,d(1))},m?"entries":"values",!m,!0),_(N)}}},function(r,t,e){"use strict";var n=e(58),i=e(41).getWeak,a=e(12),o=e(13),s=e(57),u=e(75),h=e(36),d=e(26),_=e(52),g=h(5),w=h(6),C=0,k=function(N){return N._l||(N._l=new E)},E=function(){this.a=[]},O=function(N,m){return g(N.a,function(y){return y[0]===m})};E.prototype={get:function(N){var m=O(this,N);if(m)return m[1]},has:function(N){return!!O(this,N)},set:function(N,m){var y=O(this,N);y?y[1]=m:this.a.push([N,m])},delete:function(N){var m=w(this.a,function(y){return y[0]===N});return~m&&this.a.splice(m,1),!!~m}},r.exports={getConstructor:function(N,m,y,b){var S=N(function(A,I){s(A,S,m,"_i"),A._t=m,A._i=C++,A._l=void 0,I!=null&&u(I,y,A[b],A)});return n(S.prototype,{delete:function(A){if(!o(A))return!1;var I=i(A);return I===!0?k(_(this,m)).delete(A):I&&d(I,this._i)&&delete I[this._i]},has:function(A){if(!o(A))return!1;var I=i(A);return I===!0?k(_(this,m)).has(A):I&&d(I,this._i)}}),S},def:function(N,m,y){var b=i(a(m),!0);return b===!0?k(N).set(m,y):b[N._i]=y,N},ufstore:k}},function(r,t,e){var n=e(33),i=e(16);r.exports=function(a){if(a===void 0)return 0;var o=n(a),s=i(o);if(o!==s)throw RangeError("Wrong length!");return s}},function(r,t,e){var n=e(49),i=e(69),a=e(12),o=e(10).Reflect;r.exports=o&&o.ownKeys||function(s){var u=n.f(a(s)),h=i.f;return h?u.concat(h(s)):u}},function(r,t,e){var n=e(16),i=e(90),a=e(38);r.exports=function(o,s,u,h){var d=String(a(o)),_=d.length,g=u===void 0?" ":String(u),w=n(s);if(w<=_||g=="")return d;var C=w-_,k=i.call(g,Math.ceil(C/g.length));return k.length>C&&(k=k.slice(0,C)),h?k+d:d+k}},function(r,t,e){var n=e(18),i=e(46),a=e(28),o=e(63).f;r.exports=function(s){return function(u){for(var h,d=a(u),_=i(d),g=_.length,w=0,C=[];g>w;)h=_[w++],n&&!o.call(d,h)||C.push(s?[h,d[h]]:d[h]);return C}}},function(r,t,e){var n=function(i){"use strict";var a=Object.prototype,o=a.hasOwnProperty,s=typeof Symbol=="function"?Symbol:{},u=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function _(L,j,P,z){var Y=j&&j.prototype instanceof C?j:C,ce=Object.create(Y.prototype),re=new R(z||[]);return ce._invoke=function(Z,me,ke){var ne="suspendedStart";return function(oe,ge){if(ne==="executing")throw new Error("Generator is already running");if(ne==="completed"){if(oe==="throw")throw ge;return F()}for(ke.method=oe,ke.arg=ge;;){var ve=ke.delegate;if(ve){var pe=A(ve,ke);if(pe){if(pe===w)continue;return pe}}if(ke.method==="next")ke.sent=ke._sent=ke.arg;else if(ke.method==="throw"){if(ne==="suspendedStart")throw ne="completed",ke.arg;ke.dispatchException(ke.arg)}else ke.method==="return"&&ke.abrupt("return",ke.arg);ne="executing";var he=g(Z,me,ke);if(he.type==="normal"){if(ne=ke.done?"completed":"suspendedYield",he.arg===w)continue;return{value:he.arg,done:ke.done}}he.type==="throw"&&(ne="completed",ke.method="throw",ke.arg=he.arg)}}}(L,P,re),ce}function g(L,j,P){try{return{type:"normal",arg:L.call(j,P)}}catch(z){return{type:"throw",arg:z}}}i.wrap=_;var w={};function C(){}function k(){}function E(){}var O={};O[u]=function(){return this};var N=Object.getPrototypeOf,m=N&&N(N(B([])));m&&m!==a&&o.call(m,u)&&(O=m);var y=E.prototype=C.prototype=Object.create(O);function b(L){["next","throw","return"].forEach(function(j){L[j]=function(P){return this._invoke(j,P)}})}function S(L,j){var P;this._invoke=function(z,Y){function ce(){return new j(function(re,Z){(function me(ke,ne,oe,ge){var ve=g(L[ke],L,ne);if(ve.type!=="throw"){var pe=ve.arg,he=pe.value;return he&&typeof he=="object"&&o.call(he,"__await")?j.resolve(he.__await).then(function(Ae){me("next",Ae,oe,ge)},function(Ae){me("throw",Ae,oe,ge)}):j.resolve(he).then(function(Ae){pe.value=Ae,oe(pe)},function(Ae){return me("throw",Ae,oe,ge)})}ge(ve.arg)})(z,Y,re,Z)})}return P=P?P.then(ce,ce):ce()}}function A(L,j){var P=L.iterator[j.method];if(P===void 0){if(j.delegate=null,j.method==="throw"){if(L.iterator.return&&(j.method="return",j.arg=void 0,A(L,j),j.method==="throw"))return w;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var z=g(P,L.iterator,j.arg);if(z.type==="throw")return j.method="throw",j.arg=z.arg,j.delegate=null,w;var Y=z.arg;return Y?Y.done?(j[L.resultName]=Y.value,j.next=L.nextLoc,j.method!=="return"&&(j.method="next",j.arg=void 0),j.delegate=null,w):Y:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,w)}function I(L){var j={tryLoc:L[0]};1 in L&&(j.catchLoc=L[1]),2 in L&&(j.finallyLoc=L[2],j.afterLoc=L[3]),this.tryEntries.push(j)}function T(L){var j=L.completion||{};j.type="normal",delete j.arg,L.completion=j}function R(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(I,this),this.reset(!0)}function B(L){if(L){var j=L[u];if(j)return j.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var P=-1,z=function Y(){for(;++P<L.length;)if(o.call(L,P))return Y.value=L[P],Y.done=!1,Y;return Y.value=void 0,Y.done=!0,Y};return z.next=z}}return{next:F}}function F(){return{value:void 0,done:!0}}return k.prototype=y.constructor=E,E.constructor=k,E[d]=k.displayName="GeneratorFunction",i.isGeneratorFunction=function(L){var j=typeof L=="function"&&L.constructor;return!!j&&(j===k||(j.displayName||j.name)==="GeneratorFunction")},i.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,E):(L.__proto__=E,d in L||(L[d]="GeneratorFunction")),L.prototype=Object.create(y),L},i.awrap=function(L){return{__await:L}},b(S.prototype),S.prototype[h]=function(){return this},i.AsyncIterator=S,i.async=function(L,j,P,z,Y){Y===void 0&&(Y=Promise);var ce=new S(_(L,j,P,z),Y);return i.isGeneratorFunction(j)?ce:ce.next().then(function(re){return re.done?re.value:ce.next()})},b(y),y[d]="Generator",y[u]=function(){return this},y.toString=function(){return"[object Generator]"},i.keys=function(L){var j=[];for(var P in L)j.push(P);return j.reverse(),function z(){for(;j.length;){var Y=j.pop();if(Y in L)return z.value=Y,z.done=!1,z}return z.done=!0,z}},i.values=B,R.prototype={constructor:R,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!L)for(var j in this)j.charAt(0)==="t"&&o.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=void 0)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var j=this;function P(me,ke){return ce.type="throw",ce.arg=L,j.next=me,ke&&(j.method="next",j.arg=void 0),!!ke}for(var z=this.tryEntries.length-1;z>=0;--z){var Y=this.tryEntries[z],ce=Y.completion;if(Y.tryLoc==="root")return P("end");if(Y.tryLoc<=this.prev){var re=o.call(Y,"catchLoc"),Z=o.call(Y,"finallyLoc");if(re&&Z){if(this.prev<Y.catchLoc)return P(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return P(Y.finallyLoc)}else if(re){if(this.prev<Y.catchLoc)return P(Y.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return P(Y.finallyLoc)}}}},abrupt:function(L,j){for(var P=this.tryEntries.length-1;P>=0;--P){var z=this.tryEntries[P];if(z.tryLoc<=this.prev&&o.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var Y=z;break}}Y&&(L==="break"||L==="continue")&&Y.tryLoc<=j&&j<=Y.finallyLoc&&(Y=null);var ce=Y?Y.completion:{};return ce.type=L,ce.arg=j,Y?(this.method="next",this.next=Y.finallyLoc,w):this.complete(ce)},complete:function(L,j){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&j&&(this.next=j),w},finish:function(L){for(var j=this.tryEntries.length-1;j>=0;--j){var P=this.tryEntries[j];if(P.finallyLoc===L)return this.complete(P.completion,P.afterLoc),T(P),w}},catch:function(L){for(var j=this.tryEntries.length-1;j>=0;--j){var P=this.tryEntries[j];if(P.tryLoc===L){var z=P.completion;if(z.type==="throw"){var Y=z.arg;T(P)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(L,j,P){return this.delegate={iterator:B(L),resultName:j,nextLoc:P},this.method==="next"&&(this.arg=void 0),w}},i}(r.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},function(r,t,e){var n=e(142);r.exports=function(i,a){if(i){if(typeof i=="string")return n(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(o):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(i,a):void 0}}},function(r,t){r.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var i=0,a=new Array(n);i<n;i++)a[i]=e[i];return a}},function(r,t){function e(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r.exports=e=function(i){return typeof i}:r.exports=e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e(n)}r.exports=e},function(r){r.exports=JSON.parse('{"ui":{"blockTunes":{"toggler":{"Click to tune":"","or drag to move":""}},"inlineToolbar":{"converter":{"Convert to":""}},"toolbar":{"toolbox":{"Add":""}}},"toolNames":{"Text":"","Link":"","Bold":"","Italic":""},"tools":{"link":{"Add a link":""},"stub":{"The block can not be displayed correctly.":""}},"blockTunes":{"delete":{"Delete":""},"moveUp":{"Move up":""},"moveDown":{"Move down":""}}}')},function(r,t,e){var n,i,a;i=[t,e(2),e(5),e(6),e(4),e(146)],(a=typeof(n=function(o,s,u,h,d,_){"use strict";var g=e(1);function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(k){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.CriticalError=void 0,s=g(s),u=g(u),h=g(h),d=g(d);var C=function(k){(0,u.default)(N,k);var E,O=(E=N,function(){var m,y=(0,d.default)(E);if(w()){var b=(0,d.default)(this).constructor;m=Reflect.construct(y,arguments,b)}else m=y.apply(this,arguments);return(0,h.default)(this,m)});function N(){return(0,s.default)(this,N),O.apply(this,arguments)}return N}((0,(_=g(_)).default)(Error));o.CriticalError=C,C.displayName="CriticalError"})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(4),i=e(107),a=e(369),o=e(370);function s(u){var h=typeof Map=="function"?new Map:void 0;return r.exports=s=function(d){if(d===null||!a(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(d))return h.get(d);h.set(d,_)}function _(){return o(d,arguments,n(this).constructor)}return _.prototype=Object.create(d.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),i(_,d)},s(u)}r.exports=s},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(8),e(148),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C){"use strict";var k=e(9),E=e(1);function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=E(s),u=E(u),h=E(h),d=E(d),_=E(_),g=k(g),w=E(w);var N=function(m){(0,h.default)(S,m);var y,b=(y=S,function(){var A,I=(0,_.default)(y);if(O()){var T=(0,_.default)(this).constructor;A=Reflect.construct(I,arguments,T)}else A=I.apply(this,arguments);return(0,d.default)(this,A)});function S(){var A;return(0,s.default)(this,S),(A=b.apply(this,arguments)).insert=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A.config.defaultBlock,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=(arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),B=arguments.length>4?arguments[4]:void 0;A.Editor.BlockManager.insert({tool:I,data:T,index:R,needToFocus:B})},A}return(0,u.default)(S,[{key:"getBlocksCount",value:function(){return this.Editor.BlockManager.blocks.length}},{key:"getCurrentBlockIndex",value:function(){return this.Editor.BlockManager.currentBlockIndex}},{key:"getBlockByIndex",value:function(A){var I=this.Editor.BlockManager.getBlockByIndex(A);if(I!==void 0)return new w.default(I);g.logLabeled("There is no block at index `"+A+"`","warn")}},{key:"swap",value:function(A,I){g.log("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(A,I),this.Editor.Toolbar.move(!1)}},{key:"move",value:function(A,I){this.Editor.BlockManager.move(A,I),this.Editor.Toolbar.move(!1)}},{key:"delete",value:function(A){try{this.Editor.BlockManager.removeBlock(A)}catch(I){return void g.logLabeled(I,"warn")}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}},{key:"clear",value:function(){this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}},{key:"render",value:function(A){return this.Editor.BlockManager.clear(),this.Editor.Renderer.render(A.blocks)}},{key:"renderFromHTML",value:function(A){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(A,!0)}},{key:"stretchBlock",value:function(A){var I=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];g.deprecationAssert(!0,"blocks.stretchBlock()","BlockAPI");var T=this.Editor.BlockManager.getBlockByIndex(A);T&&(T.stretched=I)}},{key:"insertNewBlock",value:function(){g.log("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}},{key:"methods",get:function(){var A=this;return{clear:function(){return A.clear()},render:function(I){return A.render(I)},renderFromHTML:function(I){return A.renderFromHTML(I)},delete:function(I){return A.delete(I)},swap:function(I,T){return A.swap(I,T)},move:function(I,T){return A.move(I,T)},getBlockByIndex:function(I){return A.getBlockByIndex(I)},getCurrentBlockIndex:function(){return A.getCurrentBlockIndex()},getBlocksCount:function(){return A.getBlocksCount()},stretchBlock:function(I){var T=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return A.stretchBlock(I,T)},insertNewBlock:function(){return A.insertNewBlock()},insert:this.insert}}}]),S}((C=E(C)).default);o.default=N,N.displayName="BlocksAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t],(a=typeof(n=function(o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=function(u){var h={get name(){return u.name},get config(){return u.config},get holder(){return u.holder},get isEmpty(){return u.isEmpty},get selected(){return u.selected},set stretched(d){u.stretched=d},get stretched(){return u.stretched},call:function(d,_){return u.call(d,_)},save:function(){return u.save()},validate:function(d){return u.validate(d)}};Object.setPrototypeOf(this,h)};o.default=s,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){var y;return(0,s.default)(this,m),(y=N.apply(this,arguments)).setToFirstBlock=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.Editor.Caret.positions.DEFAULT,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!y.Editor.BlockManager.firstBlock&&(y.Editor.Caret.setToBlock(y.Editor.BlockManager.firstBlock,b,S),!0)},y.setToLastBlock=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.Editor.Caret.positions.DEFAULT,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!y.Editor.BlockManager.lastBlock&&(y.Editor.Caret.setToBlock(y.Editor.BlockManager.lastBlock,b,S),!0)},y.setToPreviousBlock=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.Editor.Caret.positions.DEFAULT,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!y.Editor.BlockManager.previousBlock&&(y.Editor.Caret.setToBlock(y.Editor.BlockManager.previousBlock,b,S),!0)},y.setToNextBlock=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.Editor.Caret.positions.DEFAULT,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!y.Editor.BlockManager.nextBlock&&(y.Editor.Caret.setToBlock(y.Editor.BlockManager.nextBlock,b,S),!0)},y.setToBlock=function(b){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.Editor.Caret.positions.DEFAULT,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return!!y.Editor.BlockManager.blocks[b]&&(y.Editor.Caret.setToBlock(y.Editor.BlockManager.blocks[b],S,A),!0)},y.focus=function(){var b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return b?y.setToLastBlock(y.Editor.Caret.positions.END):y.setToFirstBlock(y.Editor.Caret.positions.START)},y}return(0,u.default)(m,[{key:"methods",get:function(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}]),m}((g=w(g)).default);o.default=k,k.displayName="CaretAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"on",value:function(y,b){this.eventsDispatcher.on(y,b)}},{key:"emit",value:function(y,b){this.eventsDispatcher.emit(y,b)}},{key:"off",value:function(y,b){this.eventsDispatcher.off(y,b)}},{key:"methods",get:function(){var y=this;return{emit:function(b,S){return y.emit(b,S)},off:function(b,S){return y.off(b,S)},on:function(b,S){return y.on(b,S)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="EventsAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(59),e(8),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C){"use strict";var k=e(1);function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=k(s),u=k(u),h=k(h),d=k(d),_=k(_),g=k(g);var O=function(N){(0,h.default)(b,N);var m,y=(m=b,function(){var S,A=(0,_.default)(m);if(E()){var I=(0,_.default)(this).constructor;S=Reflect.construct(A,arguments,I)}else S=A.apply(this,arguments);return(0,d.default)(this,S)});function b(){return(0,s.default)(this,b),y.apply(this,arguments)}return(0,u.default)(b,[{key:"getMethodsForTool",value:function(S){return Object.assign(this.methods,{t:function(A){return g.default.t(b.getNamespace(S),A)}})}},{key:"methods",get:function(){return{t:function(){(0,w.logLabeled)("I18n.t() method can be accessed only from Tools","warn")}}}}],[{key:"getNamespace",value:function(S){return S.isTune?"blockTunes.".concat(S.name):"tools.".concat(S.name)}}]),b}((C=k(C)).default);o.default=O,O.displayName="I18nAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"open",value:function(){this.Editor.InlineToolbar.tryToShow()}},{key:"close",value:function(){this.Editor.InlineToolbar.close()}},{key:"methods",get:function(){var y=this;return{close:function(){return y.close()},open:function(){return y.open()}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="InlineToolbarAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"on",value:function(y,b,S,A){this.listeners.on(y,b,S,A)}},{key:"off",value:function(y,b,S,A){this.listeners.off(y,b,S,A)}},{key:"methods",get:function(){var y=this;return{on:function(b,S,A,I){return y.on(b,S,A,I)},off:function(b,S,A,I){return y.off(b,S,A,I)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="ListenersAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"show",value:function(y){return this.Editor.Notifier.show(y)}},{key:"methods",get:function(){var y=this;return{show:function(b){return y.show(b)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="NotifierAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"toggle",value:function(y){return this.Editor.ReadOnly.toggle(y)}},{key:"methods",get:function(){var y=this;return{toggle:function(b){return y.toggle(b)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="ReadOnlyAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"clean",value:function(y,b){return this.Editor.Sanitizer.clean(y,b)}},{key:"methods",get:function(){var y=this;return{clean:function(b,S){return y.clean(b,S)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="SanitizerAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(8),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(9),k=e(1);function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=k(s),u=k(u),h=k(h),d=k(d),_=k(_),g=C(g);var O=function(N){(0,h.default)(b,N);var m,y=(m=b,function(){var S,A=(0,_.default)(m);if(E()){var I=(0,_.default)(this).constructor;S=Reflect.construct(A,arguments,I)}else S=A.apply(this,arguments);return(0,d.default)(this,S)});function b(){return(0,s.default)(this,b),y.apply(this,arguments)}return(0,u.default)(b,[{key:"save",value:function(){var S="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(g.logLabeled(S,"warn"),Promise.reject(new Error(S))):this.Editor.Saver.save()}},{key:"methods",get:function(){var S=this;return{save:function(){return S.save()}}}}]),b}((w=k(w)).default);o.default=O,O.displayName="SaverAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_),g=C(g);var E=function(O){(0,h.default)(y,O);var N,m=(N=y,function(){var b,S=(0,_.default)(N);if(k()){var A=(0,_.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,d.default)(this,b)});function y(){return(0,s.default)(this,y),m.apply(this,arguments)}return(0,u.default)(y,[{key:"findParentTag",value:function(b,S){return new g.default().findParentTag(b,S)}},{key:"expandToTag",value:function(b){new g.default().expandToTag(b)}},{key:"methods",get:function(){var b=this;return{findParentTag:function(S,A){return b.findParentTag(S,A)},expandToTag:function(S){return b.expandToTag(S)}}}}]),y}((w=C(w)).default);o.default=E,E.displayName="SelectionAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"classes",get:function(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}]),m}((g=w(g)).default);o.default=k,k.displayName="StylesAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(9),k=e(1);function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=k(s),u=k(u),h=k(h),d=k(d),_=k(_),g=k(g),w=C(w);var O=function(N){(0,h.default)(b,N);var m,y=(m=b,function(){var S,A=(0,_.default)(m);if(E()){var I=(0,_.default)(this).constructor;S=Reflect.construct(A,arguments,I)}else S=A.apply(this,arguments);return(0,d.default)(this,S)});function b(){return(0,s.default)(this,b),y.apply(this,arguments)}return(0,u.default)(b,[{key:"open",value:function(){this.Editor.Toolbar.open()}},{key:"close",value:function(){this.Editor.Toolbar.close()}},{key:"toggleBlockSettings",value:function(S){if(this.Editor.BlockManager.currentBlockIndex!==-1){var A=S!=null?S:!this.Editor.BlockSettings.opened;S!==this.Editor.BlockSettings.opened&&(A?(this.Editor.Toolbar.opened||(this.Editor.Toolbar.open(!0,!1),this.Editor.Toolbar.plusButton.hide()),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close())}else w.logLabeled("Could't toggle the Toolbar because there is no block selected ","warn")}},{key:"methods",get:function(){var S=this;return{close:function(){return S.close()},open:function(){return S.open()},toggleBlockSettings:function(A){return S.toggleBlockSettings(A)}}}}]),b}(g.default);o.default=O,O.displayName="ToolbarAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);function C(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=w(_);var k=function(E){(0,h.default)(m,E);var O,N=(O=m,function(){var y,b=(0,_.default)(O);if(C()){var S=(0,_.default)(this).constructor;y=Reflect.construct(b,arguments,S)}else y=b.apply(this,arguments);return(0,d.default)(this,y)});function m(){return(0,s.default)(this,m),N.apply(this,arguments)}return(0,u.default)(m,[{key:"show",value:function(y,b,S){this.Editor.Tooltip.show(y,b,S)}},{key:"hide",value:function(){this.Editor.Tooltip.hide()}},{key:"onHover",value:function(y,b,S){this.Editor.Tooltip.onHover(y,b,S)}},{key:"methods",get:function(){var y=this;return{show:function(b,S,A){return y.show(b,S,A)},hide:function(){return y.hide()},onHover:function(b,S,A){return y.onHover(b,S,A)}}}}]),m}((g=w(g)).default);o.default=k,k.displayName="TooltipAPI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(8),e(25),e(60)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O){"use strict";var N=e(9),m=e(1);function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(S){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=m(s),u=m(u),h=m(h),d=m(d),_=m(_),g=m(g),w=m(w),C=m(C),k=N(k),E=m(E),O=m(O);var b=function(S){(0,_.default)(R,S);var A,I,T=(A=R,function(){var B,F=(0,w.default)(A);if(y()){var L=(0,w.default)(this).constructor;B=Reflect.construct(F,arguments,L)}else B=F.apply(this,arguments);return(0,g.default)(this,B)});function R(){return(0,h.default)(this,R),T.apply(this,arguments)}return(0,d.default)(R,[{key:"keydown",value:function(B){switch(this.beforeKeydownProcessing(B),B.keyCode){case k.keyCodes.BACKSPACE:this.backspace(B);break;case k.keyCodes.ENTER:this.enter(B);break;case k.keyCodes.DOWN:case k.keyCodes.RIGHT:this.arrowRightAndDown(B);break;case k.keyCodes.UP:case k.keyCodes.LEFT:this.arrowLeftAndUp(B);break;case k.keyCodes.TAB:this.tabPressed(B)}}},{key:"beforeKeydownProcessing",value:function(B){this.needToolbarClosing(B)&&k.isPrintableKey(B.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),B.ctrlKey||B.metaKey||B.altKey||B.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(B)))}},{key:"keyup",value:function(B){B.shiftKey||this.Editor.UI.checkEmptiness()}},{key:"tabPressed",value:function(B){this.Editor.BlockSelection.clearSelection(B);var F=this.Editor,L=F.BlockManager,j=F.InlineToolbar,P=F.ConversionToolbar,z=L.currentBlock;if(z){var Y=z.tool.isDefault&&z.isEmpty,ce=!z.isEmpty&&P.opened,re=!z.isEmpty&&!E.default.isCollapsed&&j.opened;Y?this.activateToolbox():ce||re||this.activateBlockSettings()}}},{key:"dragOver",value:function(B){this.Editor.BlockManager.getBlockByChildNode(B.target).dropTarget=!0}},{key:"dragLeave",value:function(B){this.Editor.BlockManager.getBlockByChildNode(B.target).dropTarget=!1}},{key:"handleCommandC",value:function(B){var F=this.Editor.BlockSelection;if(F.anyBlockSelected)return F.copySelectedBlocks(B)}},{key:"handleCommandX",value:(I=(0,u.default)(s.default.mark(function B(F){var L,j,P,z,Y;return s.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(L=this.Editor,j=L.BlockSelection,P=L.BlockManager,z=L.Caret,j.anyBlockSelected){ce.next=3;break}return ce.abrupt("return");case 3:return ce.next=5,j.copySelectedBlocks(F);case 5:Y=P.removeSelectedBlocks(),z.setToBlock(P.insertDefaultBlockAtIndex(Y,!0),z.positions.START),j.clearSelection(F);case 8:case"end":return ce.stop()}},B,this)})),function(B){return I.apply(this,arguments)})},{key:"enter",value:function(B){var F=this.Editor,L=F.BlockManager,j=F.UI;if(!L.currentBlock.tool.isLineBreaksEnabled&&!(j.someToolbarOpened&&j.someFlipperButtonFocused||B.shiftKey)){var P=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):P=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(P),P.tool.isDefault&&P.isEmpty&&(this.Editor.Toolbar.open(!1),this.Editor.Toolbar.plusButton.show()),B.preventDefault()}}},{key:"backspace",value:function(B){var F=this.Editor,L=F.BlockManager,j=F.BlockSelection,P=F.Caret,z=L.currentBlock,Y=z.tool;if(z.selected||z.isEmpty&&z.currentInput===z.firstInput){B.preventDefault();var ce=L.currentBlockIndex;return L.previousBlock&&L.previousBlock.inputs.length===0?L.removeBlock(ce-1):L.removeBlock(),P.setToBlock(L.currentBlock,ce?P.positions.END:P.positions.START),this.Editor.Toolbar.close(),void j.clearSelection(B)}if(!Y.isLineBreaksEnabled||P.isAtStart){var re=L.currentBlockIndex===0;P.isAtStart&&E.default.isCollapsed&&z.currentInput===z.firstInput&&!re&&(B.preventDefault(),this.mergeBlocks())}}},{key:"mergeBlocks",value:function(){var B=this.Editor,F=B.BlockManager,L=B.Caret,j=B.Toolbar,P=F.previousBlock,z=F.currentBlock;if(z.name!==P.name||!P.mergeable)return P.inputs.length===0||P.isEmpty?(F.removeBlock(F.currentBlockIndex-1),L.setToBlock(F.currentBlock),void j.close()):void(L.navigatePrevious()&&j.close());L.createShadow(P.pluginsContent),F.mergeBlocks(P,z).then(function(){L.restoreCaret(P.pluginsContent),P.pluginsContent.normalize(),j.close()})}},{key:"arrowRightAndDown",value:function(B){var F=this,L=O.default.usedKeys.includes(B.keyCode)&&(!B.shiftKey||B.keyCode===k.keyCodes.TAB);if(!this.Editor.UI.someToolbarOpened||!L){this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var j=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;B.shiftKey&&B.keyCode===k.keyCodes.DOWN&&j?this.Editor.CrossBlockSelection.toggleBlockSelectedState():((B.keyCode===k.keyCodes.DOWN||B.keyCode===k.keyCodes.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?B.preventDefault():k.delay(function(){F.Editor.BlockManager.currentBlock&&F.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(B))}}},{key:"arrowLeftAndUp",value:function(B){var F=this;if(this.Editor.UI.someToolbarOpened){if(O.default.usedKeys.includes(B.keyCode)&&(!B.shiftKey||B.keyCode===k.keyCodes.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var L=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;B.shiftKey&&B.keyCode===k.keyCodes.UP&&L?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):((B.keyCode===k.keyCodes.UP||B.keyCode===k.keyCodes.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?B.preventDefault():k.delay(function(){F.Editor.BlockManager.currentBlock&&F.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(B))}},{key:"needToolbarClosing",value:function(B){var F=B.keyCode===k.keyCodes.ENTER&&this.Editor.Toolbox.opened,L=B.keyCode===k.keyCodes.ENTER&&this.Editor.BlockSettings.opened,j=B.keyCode===k.keyCodes.ENTER&&this.Editor.InlineToolbar.opened,P=B.keyCode===k.keyCodes.ENTER&&this.Editor.ConversionToolbar.opened,z=B.keyCode===k.keyCodes.TAB;return!(B.shiftKey||z||F||L||j||P)}},{key:"activateToolbox",value:function(){this.Editor.Toolbar.opened||(this.Editor.Toolbar.open(!1,!1),this.Editor.Toolbar.plusButton.show()),this.Editor.Toolbox.open()}},{key:"activateBlockSettings",value:function(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.open(!0,!1),this.Editor.Toolbar.plusButton.hide()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}]),R}(C.default);o.default=b,b.displayName="BlockEvents",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(61),e(7),e(15),e(8),e(376)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N){"use strict";var m=e(9),y=e(1);function b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=y(s),u=y(u),h=y(h),d=y(d),_=y(_),g=y(g),w=y(w),C=m(C),k=y(k),E=y(E),O=m(O),N=y(N);var S=function(A){(0,_.default)(F,A);var I,T,R,B=(I=F,function(){var L,j=(0,w.default)(I);if(b()){var P=(0,w.default)(this).constructor;L=Reflect.construct(j,arguments,P)}else L=j.apply(this,arguments);return(0,g.default)(this,L)});function F(){var L;return(0,h.default)(this,F),(L=B.apply(this,arguments))._currentBlockIndex=-1,L._blocks=null,L}return(0,d.default)(F,[{key:"prepare",value:function(){var L=this,j=new N.default(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(j,{set:N.default.set,get:N.default.get}),this.listeners.on(document,"copy",function(P){return L.Editor.BlockEvents.handleCommandC(P)})}},{key:"toggleReadOnly",value:function(L){L?this.disableModuleBindings():this.enableModuleBindings()}},{key:"composeBlock",value:function(L){var j=L.tool,P=L.data,z=P===void 0?{}:P,Y=L.tunes,ce=Y===void 0?{}:Y,re=this.Editor.ReadOnly.isEnabled,Z=this.Editor.Tools.blockTools.get(j),me=this.Editor.Tools.getTunesForTool(Z),ke=new C.default({data:z,tool:Z,api:this.Editor.API,readOnly:re,tunes:me,tunesData:ce});return re||this.bindBlockEvents(ke),ke}},{key:"insert",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=L.tool,P=j===void 0?this.config.defaultBlock:j,z=L.data,Y=z===void 0?{}:z,ce=L.index,re=L.needToFocus,Z=re===void 0||re,me=L.replace,ke=me!==void 0&&me,ne=L.tunes,oe=ne===void 0?{}:ne,ge=ce;ge===void 0&&(ge=this.currentBlockIndex+(ke?0:1));var ve=this.composeBlock({tool:P,data:Y,tunes:oe});return this._blocks.insert(ge,ve,ke),Z?this.currentBlockIndex=ge:ge<=this.currentBlockIndex&&this.currentBlockIndex++,ve}},{key:"replace",value:function(L){var j=L.tool,P=j===void 0?this.config.defaultBlock:j,z=L.data,Y=z===void 0?{}:z;return this.insert({tool:P,data:Y,index:this.currentBlockIndex,replace:!0})}},{key:"paste",value:function(L,j){var P=arguments.length>2&&arguments[2]!==void 0&&arguments[2],z=this.insert({tool:L,replace:P});try{z.call(C.BlockToolAPI.ON_PASTE,j)}catch(Y){O.log("".concat(L,": onPaste callback call is failed"),"error",Y)}return z}},{key:"insertDefaultBlockAtIndex",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0&&arguments[1],P=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[L]=P,j?this.currentBlockIndex=L:L<=this.currentBlockIndex&&this.currentBlockIndex++,P}},{key:"insertAtEnd",value:function(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}},{key:"mergeBlocks",value:(R=(0,u.default)(s.default.mark(function L(j,P){var z,Y;return s.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(z=this._blocks.indexOf(P),!P.isEmpty){ce.next=3;break}return ce.abrupt("return");case 3:return ce.next=5,P.data;case 5:if(Y=ce.sent,O.isEmpty(Y)){ce.next=9;break}return ce.next=9,j.mergeWith(Y);case 9:this.removeBlock(z),this.currentBlockIndex=this._blocks.indexOf(j);case 11:case"end":return ce.stop()}},L,this)})),function(L,j){return R.apply(this,arguments)})},{key:"removeBlock",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.currentBlockIndex;if(!this.validateIndex(L))throw new Error("Can't find a Block to remove");this._blocks.remove(L),this.currentBlockIndex>=L&&this.currentBlockIndex--,this.blocks.length?L===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,this.insert())}},{key:"removeSelectedBlocks",value:function(){for(var L,j=this.blocks.length-1;j>=0;j--)this.blocks[j].selected&&(this.removeBlock(j),L=j);return L}},{key:"removeAllBlocks",value:function(){for(var L=this.blocks.length-1;L>=0;L--)this._blocks.remove(L);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}},{key:"split",value:function(){var L=this.Editor.Caret.extractFragmentFromCaretPosition(),j=E.default.make("div");j.appendChild(L);var P={text:E.default.isEmpty(j)?"":j.innerHTML};return this.insert({data:P})}},{key:"getBlockByIndex",value:function(L){return this._blocks[L]}},{key:"getBlock",value:function(L){E.default.isElement(L)||(L=L.parentNode);var j=this._blocks.nodes,P=L.closest(".".concat(C.default.CSS.wrapper)),z=j.indexOf(P);if(z>=0)return this._blocks[z]}},{key:"highlightCurrentNode",value:function(){this.clearFocused(),this.currentBlock.focused=!0}},{key:"clearFocused",value:function(){this.blocks.forEach(function(L){L.focused=!1})}},{key:"setCurrentBlockByChildNode",value:function(L){E.default.isElement(L)||(L=L.parentNode);var j=L.closest(".".concat(C.default.CSS.wrapper));if(j){var P=j.closest(".".concat(this.Editor.UI.CSS.editorWrapper));if(P!=null&&P.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(j),this.currentBlock.updateCurrentInput(),this.currentBlock}}},{key:"getBlockByChildNode",value:function(L){E.default.isElement(L)||(L=L.parentNode);var j=L.closest(".".concat(C.default.CSS.wrapper));return this.blocks.find(function(P){return P.holder===j})}},{key:"swap",value:function(L,j){this._blocks.swap(L,j),this.currentBlockIndex=j}},{key:"move",value:function(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.currentBlockIndex;isNaN(L)||isNaN(j)?O.log("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(L)&&this.validateIndex(j)?(this._blocks.move(L,j),this.currentBlockIndex=L):O.log("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}},{key:"dropPointer",value:function(){this.currentBlockIndex=-1,this.clearFocused()}},{key:"clear",value:function(){var L=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._blocks.removeAll(),this.dropPointer(),L&&this.insert(),this.Editor.UI.checkEmptiness()}},{key:"destroy",value:(T=(0,u.default)(s.default.mark(function L(){return s.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Promise.all(this.blocks.map(function(P){return P.destroy()}));case 2:case"end":return j.stop()}},L,this)})),function(){return T.apply(this,arguments)})},{key:"bindBlockEvents",value:function(L){var j=this.Editor.BlockEvents;this.readOnlyMutableListeners.on(L.holder,"keydown",function(P){j.keydown(P)}),this.readOnlyMutableListeners.on(L.holder,"keyup",function(P){j.keyup(P)}),this.readOnlyMutableListeners.on(L.holder,"dragover",function(P){j.dragOver(P)}),this.readOnlyMutableListeners.on(L.holder,"dragleave",function(P){j.dragLeave(P)})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"enableModuleBindings",value:function(){var L=this;this.readOnlyMutableListeners.on(document,"cut",function(j){return L.Editor.BlockEvents.handleCommandX(j)}),this.blocks.forEach(function(j){L.bindBlockEvents(j)})}},{key:"validateIndex",value:function(L){return!(L<0||L>=this._blocks.length)}},{key:"currentBlockIndex",get:function(){return this._currentBlockIndex},set:function(L){this._blocks[this._currentBlockIndex]&&this._blocks[this._currentBlockIndex].willUnselect(),this._blocks[L]&&this._blocks[L].willSelect(),this._currentBlockIndex=L}},{key:"firstBlock",get:function(){return this._blocks[0]}},{key:"lastBlock",get:function(){return this._blocks[this._blocks.length-1]}},{key:"currentBlock",get:function(){return this._blocks[this.currentBlockIndex]}},{key:"nextBlock",get:function(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}},{key:"nextContentfulBlock",get:function(){return this.blocks.slice(this.currentBlockIndex+1).find(function(L){return!!L.inputs.length})}},{key:"previousContentfulBlock",get:function(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(function(L){return!!L.inputs.length})}},{key:"previousBlock",get:function(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}},{key:"blocks",get:function(){return this._blocks.array}},{key:"isEditorEmpty",get:function(){return this.blocks.every(function(L){return L.isEmpty})}}]),F}(k.default);o.default=S,S.displayName="BlockManager",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(8),e(15),e(108),e(25)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N){"use strict";var m=e(9),y=e(1);function b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=y(s),u=y(u),h=y(h),d=y(d),_=y(_),g=y(g),w=y(w),C=y(C),k=m(k),E=y(E),O=y(O),N=y(N);var S=function(A){(0,_.default)(B,A);var I,T,R=(I=B,function(){var F,L=(0,w.default)(I);if(b()){var j=(0,w.default)(this).constructor;F=Reflect.construct(L,arguments,j)}else F=L.apply(this,arguments);return(0,g.default)(this,F)});function B(){var F;return(0,h.default)(this,B),(F=R.apply(this,arguments)).anyBlockSelectedCache=null,F.needToSelectAll=!1,F.nativeInputSelected=!1,F.readyToBlockSelection=!1,F}return(0,d.default)(B,[{key:"prepare",value:function(){var F=this;this.selection=new N.default,O.default.add({name:"CMD+A",handler:function(L){var j=F.Editor,P=j.BlockManager;if(j.ReadOnly.isEnabled)return L.preventDefault(),void F.selectAllBlocks();P.currentBlock&&F.handleCommandA(L)},on:this.Editor.UI.nodes.redactor})}},{key:"toggleReadOnly",value:function(F){N.default.get().removeAllRanges(),this.allBlocksSelected=!1}},{key:"unSelectBlockByIndex",value:function(F){var L=this.Editor.BlockManager;(isNaN(F)?L.currentBlock:L.getBlockByIndex(F)).selected=!1,this.clearCache()}},{key:"clearSelection",value:function(F){var L=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.Editor,P=j.BlockManager,z=j.Caret,Y=j.RectangleSelection;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;var ce=F&&F instanceof KeyboardEvent,re=ce&&k.isPrintableKey(F.keyCode);if(this.anyBlockSelected&&ce&&re&&!N.default.isSelectionExists){var Z=P.removeSelectedBlocks();P.insertDefaultBlockAtIndex(Z,!0),z.setToBlock(P.currentBlock),k.delay(function(){var me=F.key;z.insertContentAtCaretPosition(me.length>1?"":me)},20)()}this.Editor.CrossBlockSelection.clear(F),this.anyBlockSelected&&!Y.isRectActivated()?(L&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}},{key:"copySelectedBlocks",value:(T=(0,u.default)(s.default.mark(function F(L){var j,P,z,Y,ce=this;return s.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return L.preventDefault(),j=E.default.make("div"),this.selectedBlocks.forEach(function(Z){var me=ce.Editor.Sanitizer.clean(Z.holder.innerHTML,ce.sanitizerConfig),ke=E.default.make("p");ke.innerHTML=me,j.appendChild(ke)}),re.next=5,Promise.all(this.selectedBlocks.map(function(Z){return Z.save()}));case 5:P=re.sent,z=Array.from(j.childNodes).map(function(Z){return Z.textContent}).join(`

`),Y=j.innerHTML,L.clipboardData.setData("text/plain",z),L.clipboardData.setData("text/html",Y),L.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(P));case 11:case"end":return re.stop()}},F,this)})),function(F){return T.apply(this,arguments)})},{key:"selectBlockByIndex",value:function(F){var L,j=this.Editor.BlockManager;j.clearFocused(),L=isNaN(F)?j.currentBlock:j.getBlockByIndex(F),this.selection.save(),N.default.get().removeAllRanges(),L.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}},{key:"clearCache",value:function(){this.anyBlockSelectedCache=null}},{key:"destroy",value:function(){O.default.remove(this.Editor.UI.nodes.redactor,"CMD+A")}},{key:"handleCommandA",value:function(F){if(this.Editor.RectangleSelection.clearSelection(),!E.default.isNativeInput(F.target)||this.readyToBlockSelection){var L=this.Editor.BlockManager.getBlock(F.target).inputs;L.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:L.length!==1||this.needToSelectAll?this.needToSelectAll?(F.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(F.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0):this.needToSelectAll=!0}else this.readyToBlockSelection=!0}},{key:"selectAllBlocks",value:function(){this.selection.save(),N.default.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}},{key:"sanitizerConfig",get:function(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}},{key:"allBlocksSelected",get:function(){return this.Editor.BlockManager.blocks.every(function(F){return F.selected===!0})},set:function(F){this.Editor.BlockManager.blocks.forEach(function(L){L.selected=F}),this.clearCache()}},{key:"anyBlockSelected",get:function(){var F=this.Editor.BlockManager;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=F.blocks.some(function(L){return L.selected===!0})),this.anyBlockSelectedCache}},{key:"selectedBlocks",get:function(){return this.Editor.BlockManager.blocks.filter(function(F){return F.selected})}}]),B}(C.default);o.default=S,S.displayName="BlockSelection",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(7),e(15),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(9),O=e(1);function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=O(g),w=O(w),C=O(C),k=E(k);var m=function(y){(0,h.default)(A,y);var b,S=(b=A,function(){var I,T=(0,_.default)(b);if(N()){var R=(0,_.default)(this).constructor;I=Reflect.construct(T,arguments,R)}else I=T.apply(this,arguments);return(0,d.default)(this,I)});function A(){return(0,s.default)(this,A),S.apply(this,arguments)}return(0,u.default)(A,[{key:"setToBlock",value:function(I){var T,R=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,L=this.Editor.BlockManager;switch(B){case this.positions.START:T=I.firstInput;break;case this.positions.END:T=I.lastInput;break;default:T=I.currentInput}if(T){var j=C.default.getDeepestNode(T,B===this.positions.END),P=C.default.getContentLength(j);switch(!0){case B===this.positions.START:F=0;break;case B===this.positions.END:case F>P:F=P}k.delay(function(){R.set(j,F)},20)(),L.setCurrentBlockByChildNode(I.holder),L.currentBlock.currentInput=T}}},{key:"setToInput",value:function(I){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,B=this.Editor.BlockManager.currentBlock,F=C.default.getDeepestNode(I);switch(T){case this.positions.START:this.set(F,0);break;case this.positions.END:this.set(F,C.default.getContentLength(F));break;default:R&&this.set(F,R)}B.currentInput=I}},{key:"set",value:function(I){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=g.default.setCursor(I,T),B=R.top,F=R.bottom,L=window,j=L.innerHeight;B<0&&window.scrollBy(0,B),F>j&&window.scrollBy(0,F-j)}},{key:"setToTheLastBlock",value:function(){var I=this.Editor.BlockManager.lastBlock;if(I)if(I.tool.isDefault&&I.isEmpty)this.setToBlock(I);else{var T=this.Editor.BlockManager.insertAtEnd();this.setToBlock(T)}}},{key:"extractFragmentFromCaretPosition",value:function(){var I=g.default.get();if(I.rangeCount){var T=I.getRangeAt(0),R=this.Editor.BlockManager.currentBlock.currentInput;if(T.deleteContents(),R){if(C.default.isNativeInput(R)){var B=R,F=document.createDocumentFragment(),L=B.value.substring(0,B.selectionStart),j=B.value.substring(B.selectionStart);return F.textContent=j,B.value=L,F}var P=T.cloneRange();return P.selectNodeContents(R),P.setStart(T.endContainer,T.endOffset),P.extractContents()}}}},{key:"navigateNext",value:function(){var I=this.Editor,T=I.BlockManager,R=(I.Tools,T.currentBlock),B=T.nextContentfulBlock,F=R.nextInput,L=this.isAtEnd,j=B;if(!j&&!F){if(R.tool.isDefault||!L)return!1;j=T.insertAtEnd()}return!!L&&(F?this.setToInput(F,this.positions.START):this.setToBlock(j,this.positions.START),!0)}},{key:"navigatePrevious",value:function(){var I=this.Editor.BlockManager,T=I.currentBlock,R=I.previousContentfulBlock;if(!T)return!1;var B=T.previousInput;return!(!R&&!B||!this.isAtStart||(B?this.setToInput(B,this.positions.END):this.setToBlock(R,this.positions.END),0))}},{key:"createShadow",value:function(I){var T=document.createElement("span");T.classList.add(A.CSS.shadowCaret),I.insertAdjacentElement("beforeend",T)}},{key:"restoreCaret",value:function(I){var T=I.querySelector(".".concat(A.CSS.shadowCaret));T&&(new g.default().expandToTag(T),setTimeout(function(){var R=document.createRange();R.selectNode(T),R.extractContents()},50))}},{key:"insertContentAtCaretPosition",value:function(I){var T=document.createDocumentFragment(),R=document.createElement("div"),B=g.default.get(),F=g.default.range;R.innerHTML=I,Array.from(R.childNodes).forEach(function(P){return T.appendChild(P)}),T.childNodes.length===0&&T.appendChild(new Text(""));var L=T.lastChild;F.deleteContents(),F.insertNode(T);var j=document.createRange();j.setStart(L,L.textContent.length),B.removeAllRanges(),B.addRange(j)}},{key:"getHigherLevelSiblings",value:function(I,T){for(var R=I,B=[];R.parentNode&&R.parentNode.contentEditable!=="true";)R=R.parentNode;for(var F=T==="left"?"previousSibling":"nextSibling";R[F];)R=R[F],B.push(R);return B}},{key:"positions",get:function(){return{START:"start",END:"end",DEFAULT:"default"}}},{key:"isAtStart",get:function(){var I=g.default.get(),T=C.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput),R=I.focusNode;if(C.default.isNativeInput(T))return T.selectionEnd===0;if(!I.anchorNode)return!1;var B=R.textContent.search(/\S/);B===-1&&(B=0);var F=I.focusOffset;return R.nodeType!==Node.TEXT_NODE&&R.childNodes.length&&(R.childNodes[F]?(R=R.childNodes[F],F=0):F=(R=R.childNodes[F-1]).textContent.length),!(!C.default.isLineBreakTag(T)&&!C.default.isEmpty(T)||!this.getHigherLevelSiblings(R,"left").every(function(L){var j=C.default.isLineBreakTag(L),P=L.children.length===1&&C.default.isLineBreakTag(L.children[0]),z=j||P;return C.default.isEmpty(L)&&!z})||F!==B)||T===null||R===T&&F<=B}},{key:"isAtEnd",get:function(){var I=g.default.get(),T=I.focusNode,R=C.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(C.default.isNativeInput(R))return R.selectionEnd===R.value.length;if(!I.focusNode)return!1;var B=I.focusOffset;if(T.nodeType!==Node.TEXT_NODE&&T.childNodes.length&&(T.childNodes[B-1]?B=(T=T.childNodes[B-1]).textContent.length:(T=T.childNodes[0],B=0)),C.default.isLineBreakTag(R)||C.default.isEmpty(R)){var F=this.getHigherLevelSiblings(T,"right");if(F.every(function(j,P){return P===F.length-1&&C.default.isLineBreakTag(j)||C.default.isEmpty(j)&&!C.default.isLineBreakTag(j)})&&B===T.textContent.length)return!0}var L=R.textContent.replace(/\s+$/,"");return T===R&&B>=L.length}}],[{key:"CSS",get:function(){return{shadowCaret:"cdx-shadow-caret"}}}]),A}(w.default);o.default=m,m.displayName="Caret",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(25),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E){"use strict";var O=e(9),N=e(1);function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=N(s),u=N(u),h=N(h),d=N(d),_=N(_),g=N(g),w=N(w),C=N(C),k=N(k),E=O(E);var y=function(b){(0,_.default)(T,b);var S,A,I=(S=T,function(){var R,B=(0,w.default)(S);if(m()){var F=(0,w.default)(this).constructor;R=Reflect.construct(B,arguments,F)}else R=B.apply(this,arguments);return(0,g.default)(this,R)});function T(){var R;return(0,h.default)(this,T),(R=I.apply(this,arguments)).onMouseUp=function(){R.listeners.off(document,"mouseover",R.onMouseOver),R.listeners.off(document,"mouseup",R.onMouseUp)},R.onMouseOver=function(B){var F=R.Editor,L=F.BlockManager,j=F.BlockSelection,P=L.getBlockByChildNode(B.relatedTarget)||R.lastSelectedBlock,z=L.getBlockByChildNode(B.target);if(P&&z&&z!==P){if(P===R.firstSelectedBlock)return k.default.get().removeAllRanges(),P.selected=!0,z.selected=!0,void j.clearCache();if(z===R.firstSelectedBlock)return P.selected=!1,z.selected=!1,void j.clearCache();R.Editor.InlineToolbar.close(),R.toggleBlocksSelectedState(P,z),R.lastSelectedBlock=z}},R}return(0,d.default)(T,[{key:"prepare",value:(A=(0,u.default)(s.default.mark(function R(){var B=this;return s.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:this.listeners.on(document,"mousedown",function(L){B.enableCrossBlockSelection(L)});case 1:case"end":return F.stop()}},R,this)})),function(){return A.apply(this,arguments)})},{key:"watchSelection",value:function(R){if(R.button===E.mouseButtons.LEFT){var B=this.Editor.BlockManager;this.firstSelectedBlock=B.getBlock(R.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}}},{key:"toggleBlockSelectedState",value:function(){var R=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],B=this.Editor,F=B.BlockManager,L=B.BlockSelection;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=F.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,L.clearCache(),k.default.get().removeAllRanges());var j=F.blocks.indexOf(this.lastSelectedBlock)+(R?1:-1),P=F.blocks[j];P&&(this.lastSelectedBlock.selected!==P.selected?(P.selected=!0,L.clearCache()):(this.lastSelectedBlock.selected=!1,L.clearCache()),this.lastSelectedBlock=P,this.Editor.InlineToolbar.close(),P.holder.scrollIntoView({block:"nearest"}))}},{key:"clear",value:function(R){var B=this.Editor,F=B.BlockManager,L=B.BlockSelection,j=B.Caret,P=F.blocks.indexOf(this.firstSelectedBlock),z=F.blocks.indexOf(this.lastSelectedBlock);if(L.anyBlockSelected&&P>-1&&z>-1)if(R&&R instanceof KeyboardEvent)switch(R.keyCode){case E.keyCodes.DOWN:case E.keyCodes.RIGHT:j.setToBlock(F.blocks[Math.max(P,z)],j.positions.END);break;case E.keyCodes.UP:case E.keyCodes.LEFT:j.setToBlock(F.blocks[Math.min(P,z)],j.positions.START);break;default:j.setToBlock(F.blocks[Math.max(P,z)],j.positions.END)}else j.setToBlock(F.blocks[Math.max(P,z)],j.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}},{key:"enableCrossBlockSelection",value:function(R){var B=this.Editor.UI;k.default.isCollapsed||this.Editor.BlockSelection.clearSelection(R),B.nodes.redactor.contains(R.target)?this.watchSelection(R):this.Editor.BlockSelection.clearSelection(R)}},{key:"toggleBlocksSelectedState",value:function(R,B){for(var F=this.Editor,L=F.BlockManager,j=F.BlockSelection,P=L.blocks.indexOf(R),z=L.blocks.indexOf(B),Y=R.selected!==B.selected,ce=Math.min(P,z);ce<=Math.max(P,z);ce++){var re=L.blocks[ce];re!==this.firstSelectedBlock&&re!==(Y?R:B)&&(L.blocks[ce].selected=!L.blocks[ce].selected,j.clearCache())}}},{key:"isCrossBlockSelectionStarted",get:function(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}}]),T}(C.default);o.default=y,y.displayName="CrossBlockSelection",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(25),e(7)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(1);function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=E(s),u=E(u),h=E(h),d=E(d),_=E(_),g=E(g),w=E(w),C=E(C);var N=function(m){(0,_.default)(A,m);var y,b,S=(y=A,function(){var I,T=(0,w.default)(y);if(O()){var R=(0,w.default)(this).constructor;I=Reflect.construct(T,arguments,R)}else I=T.apply(this,arguments);return(0,g.default)(this,I)});function A(){var I;return(0,h.default)(this,A),(I=S.apply(this,arguments)).isStartedAtEditor=!1,I}return(0,d.default)(A,[{key:"toggleReadOnly",value:function(I){I?this.disableModuleBindings():this.enableModuleBindings()}},{key:"enableModuleBindings",value:function(){var I=this,T=this.Editor.UI;this.readOnlyMutableListeners.on(T.nodes.holder,"drop",function(){var R=(0,u.default)(s.default.mark(function B(F){return s.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,I.processDrop(F);case 2:case"end":return L.stop()}},B)}));return function(B){return R.apply(this,arguments)}}(),!0),this.readOnlyMutableListeners.on(T.nodes.holder,"dragstart",function(){I.processDragStart()}),this.readOnlyMutableListeners.on(T.nodes.holder,"dragover",function(R){I.processDragOver(R)},!0)}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"processDrop",value:(b=(0,u.default)(s.default.mark(function I(T){var R,B,F,L,j,P;return s.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return R=this.Editor,B=R.BlockManager,F=R.Caret,L=R.Paste,T.preventDefault(),B.blocks.forEach(function(Y){Y.dropTarget=!1}),C.default.isAtEditor&&!C.default.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1,(j=B.setCurrentBlockByChildNode(T.target))?this.Editor.Caret.setToBlock(j,F.positions.END):(P=B.setCurrentBlockByChildNode(B.lastBlock.holder),this.Editor.Caret.setToBlock(P,F.positions.END)),z.next=9,L.processDataTransfer(T.dataTransfer,!0);case 9:case"end":return z.stop()}},I,this)})),function(I){return b.apply(this,arguments)})},{key:"processDragStart",value:function(){C.default.isAtEditor&&!C.default.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}},{key:"processDragOver",value:function(I){I.preventDefault()}}]),A}((k=E(k)).default);o.default=N,N.displayName="DragNDrop",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(8),e(61)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C){"use strict";var k=e(9),E=e(1);function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=E(s),u=E(u),h=E(h),d=E(d),_=E(_),g=E(g),w=k(w),C=E(C);var N=function(m){(0,h.default)(S,m);var y,b=(y=S,function(){var A,I=(0,_.default)(y);if(O()){var T=(0,_.default)(this).constructor;A=Reflect.construct(I,arguments,T)}else A=I.apply(this,arguments);return(0,d.default)(this,A)});function S(){var A;return(0,s.default)(this,S),(A=b.apply(this,arguments)).disabled=!1,A.mutationDebouncer=w.debounce(function(){A.updateNativeInputs(),w.isFunction(A.config.onChange)&&A.config.onChange(A.Editor.API.methods)},S.DebounceTimer),A.nativeInputs=[],A}return(0,u.default)(S,[{key:"destroy",value:function(){var A=this;this.mutationDebouncer=null,this.observer&&this.observer.disconnect(),this.observer=null,this.nativeInputs.forEach(function(I){return A.listeners.off(I,"input",A.mutationDebouncer)}),this.mutationDebouncer=null}},{key:"toggleReadOnly",value:function(A){A?this.disableModule():this.enableModule()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"setObserver",value:function(){var A=this,I=this.Editor.UI;this.observer=new MutationObserver(function(T,R){A.mutationHandler(T,R)}),this.observer.observe(I.nodes.redactor,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(A,I){if(!this.disabled){var T=!1;A.forEach(function(R){switch(R.type){case"childList":case"characterData":T=!0;break;case"attributes":R.target.classList.contains(C.default.CSS.wrapper)||(T=!0)}}),T&&this.mutationDebouncer()}}},{key:"updateNativeInputs",value:function(){var A=this;this.nativeInputs&&this.nativeInputs.forEach(function(I){A.listeners.off(I,"input")}),this.nativeInputs=Array.from(this.Editor.UI.nodes.redactor.querySelectorAll("textarea, input, select")),this.nativeInputs.forEach(function(I){return A.listeners.on(I,"input",A.mutationDebouncer)})}},{key:"enableModule",value:function(){var A=this;window.setTimeout(function(){A.setObserver(),A.updateNativeInputs(),A.enable()},1e3)}},{key:"disableModule",value:function(){this.disable()}}]),S}(g.default);o.default=N,N.displayName="ModificationsObserver",N.DebounceTimer=450,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(378)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_),g=C(g),w=C(w);var E=function(O){(0,h.default)(y,O);var N,m=(N=y,function(){var b,S=(0,_.default)(N);if(k()){var A=(0,_.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,d.default)(this,b)});function y(){return(0,s.default)(this,y),m.apply(this,arguments)}return(0,u.default)(y,[{key:"show",value:function(b){w.default.show(b)}}]),y}(g.default);o.default=E,E.displayName="Notifier",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(42),e(29),e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N){"use strict";var m=e(9),y=e(1);function b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=y(s),u=y(u),h=y(h),d=y(d),_=y(_),g=y(g),w=y(w),C=y(C),k=y(k),E=y(E),O=y(O),N=m(N);var S=function(A){(0,w.default)(ce,A);var I,T,R,B,F,L,j,P,z,Y=(I=ce,function(){var re,Z=(0,k.default)(I);if(b()){var me=(0,k.default)(this).constructor;re=Reflect.construct(Z,arguments,me)}else re=Z.apply(this,arguments);return(0,C.default)(this,re)});function ce(){var re;return(0,_.default)(this,ce),(re=Y.apply(this,arguments)).MIME_TYPE="application/x-editor-js",re.toolsTags={},re.tagsByTool={},re.toolsPatterns=[],re.toolsFiles={},re.exceptionList=[],re.processTool=function(Z){try{var me=Z.create({},{},!1);if(Z.pasteConfig===!1)return void re.exceptionList.push(Z.name);if(!N.isFunction(me.onPaste))return;re.getTagsConfig(Z),re.getFilesConfig(Z),re.getPatternsConfig(Z)}catch(ke){N.log("Paste handling for \xAB".concat(Z.name,"\xBB Tool hasn't been set up because of the error"),"warn",ke)}},re.handlePasteEvent=function(){var Z=(0,d.default)(h.default.mark(function me(ke){var ne,oe,ge;return h.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(ne=re.Editor,oe=ne.BlockManager,ge=ne.Toolbar,oe.currentBlock&&(!re.isNativeBehaviour(ke.target)||ke.clipboardData.types.includes("Files"))){ve.next=3;break}return ve.abrupt("return");case 3:if(!oe.currentBlock||!re.exceptionList.includes(oe.currentBlock.name)){ve.next=5;break}return ve.abrupt("return");case 5:ke.preventDefault(),re.processDataTransfer(ke.clipboardData),oe.clearFocused(),ge.close();case 9:case"end":return ve.stop()}},me)}));return function(me){return Z.apply(this,arguments)}}(),re}return(0,g.default)(ce,[{key:"prepare",value:(z=(0,d.default)(h.default.mark(function re(){return h.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:this.processTools();case 1:case"end":return Z.stop()}},re,this)})),function(){return z.apply(this,arguments)})},{key:"toggleReadOnly",value:function(re){re?this.unsetCallback():this.setCallback()}},{key:"processDataTransfer",value:(P=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe,ge,ve,pe,he,Ae,Me=arguments;return h.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(me=Me.length>1&&Me[1]!==void 0&&Me[1],ke=this.Editor.Sanitizer,!((ne=Z.types).includes?ne.includes("Files"):ne.contains("Files"))){De.next=8;break}return De.next=7,this.processFiles(Z.files);case 7:return De.abrupt("return");case 8:if(oe=Z.getData(this.MIME_TYPE),ge=Z.getData("text/plain"),ve=Z.getData("text/html"),!oe){De.next=19;break}return De.prev=12,this.insertEditorJSData(JSON.parse(oe)),De.abrupt("return");case 17:De.prev=17,De.t0=De.catch(12);case 19:if(me&&ge.trim()&&ve.trim()&&(ve="<p>"+(ve.trim()?ve:ge)+"</p>"),pe=Object.keys(this.toolsTags).reduce(function(Je,Se){return Je[Se.toLowerCase()]=!0,Je},{}),he=Object.assign({},pe,ke.getAllInlineToolsConfig(),{br:{}}),(Ae=ke.clean(ve,he)).trim()&&Ae.trim()!==ge&&O.default.isHTMLString(Ae)){De.next=28;break}return De.next=26,this.processText(ge);case 26:De.next=30;break;case 28:return De.next=30,this.processText(Ae,!0);case 30:case"end":return De.stop()}},re,this,[[12,17]])})),function(re){return P.apply(this,arguments)})},{key:"processText",value:(j=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe,ge,ve,pe,he=this,Ae=arguments;return h.default.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(me=Ae.length>1&&Ae[1]!==void 0&&Ae[1],ke=this.Editor,ne=ke.Caret,oe=ke.BlockManager,(ge=me?this.processHTML(Z):this.processPlain(Z)).length){Me.next=5;break}return Me.abrupt("return");case 5:if(ge.length!==1){Me.next=8;break}return ge[0].isBlock?this.processSingleBlock(ge.pop()):this.processInlinePaste(ge.pop()),Me.abrupt("return");case 8:ve=oe.currentBlock&&oe.currentBlock.tool.isDefault,pe=ve&&oe.currentBlock.isEmpty,ge.map(function(){var De=(0,d.default)(h.default.mark(function Je(Se,ze){return h.default.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",he.insertBlock(Se,ze===0&&pe));case 1:case"end":return at.stop()}},Je)}));return function(Je,Se){return De.apply(this,arguments)}}()),oe.currentBlock&&ne.setToBlock(oe.currentBlock,ne.positions.END);case 12:case"end":return Me.stop()}},re,this)})),function(re){return j.apply(this,arguments)})},{key:"setCallback",value:function(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"unsetCallback",value:function(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"processTools",value:function(){var re=this.Editor.Tools.blockTools;Array.from(re.values()).forEach(this.processTool)}},{key:"getTagsConfig",value:function(re){var Z=this,me=re.pasteConfig.tags||[];me.forEach(function(ke){Object.prototype.hasOwnProperty.call(Z.toolsTags,ke)?N.log("Paste handler for \xAB".concat(re.name,"\xBB Tool on \xAB").concat(ke,"\xBB tag is skipped ")+"because it is already used by \xAB".concat(Z.toolsTags[ke].tool.name,"\xBB Tool."),"warn"):Z.toolsTags[ke.toUpperCase()]={tool:re}}),this.tagsByTool[re.name]=me.map(function(ke){return ke.toUpperCase()})}},{key:"getFilesConfig",value:function(re){var Z=re.pasteConfig.files,me=Z===void 0?{}:Z,ke=me.extensions,ne=me.mimeTypes;(ke||ne)&&(ke&&!Array.isArray(ke)&&(N.log("\xABextensions\xBB property of the onDrop config for \xAB".concat(re.name,"\xBB Tool should be an array")),ke=[]),ne&&!Array.isArray(ne)&&(N.log("\xABmimeTypes\xBB property of the onDrop config for \xAB".concat(re.name,"\xBB Tool should be an array")),ne=[]),ne&&(ne=ne.filter(function(oe){return!!N.isValidMimeType(oe)||(N.log("MIME type value \xAB".concat(oe,"\xBB for the \xAB").concat(re.name,"\xBB Tool is not a valid MIME type"),"warn"),!1)})),this.toolsFiles[re.name]={extensions:ke||[],mimeTypes:ne||[]})}},{key:"getPatternsConfig",value:function(re){var Z=this;re.pasteConfig.patterns&&!N.isEmpty(re.pasteConfig.patterns)&&Object.entries(re.pasteConfig.patterns).forEach(function(me){var ke=(0,u.default)(me,2),ne=ke[0],oe=ke[1];oe instanceof RegExp||N.log("Pattern ".concat(oe," for \xAB").concat(re.name,"\xBB Tool is skipped because it should be a Regexp instance."),"warn"),Z.toolsPatterns.push({key:ne,pattern:oe,tool:re})})}},{key:"isNativeBehaviour",value:function(re){return O.default.isNativeInput(re)}},{key:"processFiles",value:(L=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe,ge=this;return h.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return me=this.Editor.BlockManager,ve.next=3,Promise.all(Array.from(Z).map(function(pe){return ge.processFile(pe)}));case 3:ke=(ke=ve.sent).filter(function(pe){return!!pe}),ne=me.currentBlock.tool.isDefault,oe=ne&&me.currentBlock.isEmpty,ke.forEach(function(pe,he){me.paste(pe.type,pe.event,he===0&&oe)});case 8:case"end":return ve.stop()}},re,this)})),function(re){return L.apply(this,arguments)})},{key:"processFile",value:(F=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe,ge;return h.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(me=N.getFileExtension(Z),ke=Object.entries(this.toolsFiles).find(function(pe){var he=(0,u.default)(pe,2),Ae=(he[0],he[1]),Me=Ae.mimeTypes,De=Ae.extensions,Je=Z.type.split("/"),Se=(0,u.default)(Je,2),ze=Se[0],at=Se[1],Qe=De.find(function(At){return At.toLowerCase()===me.toLowerCase()}),lt=Me.find(function(At){var It=At.split("/"),bt=(0,u.default)(It,2),Et=bt[0],Rt=bt[1];return Et===ze&&(Rt===at||Rt==="*")});return!!Qe||!!lt})){ve.next=4;break}return ve.abrupt("return");case 4:return ne=(0,u.default)(ke,1),oe=ne[0],ge=this.composePasteEvent("file",{file:Z}),ve.abrupt("return",{event:ge,type:oe});case 7:case"end":return ve.stop()}},re,this)})),function(re){return F.apply(this,arguments)})},{key:"processHTML",value:function(re){var Z=this,me=this.Editor,ke=me.Tools,ne=me.Sanitizer,oe=O.default.make("DIV");return oe.innerHTML=re,this.getNodes(oe).map(function(ge){var ve,pe=ke.defaultTool,he=!1;switch(ge.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:(ve=O.default.make("div")).appendChild(ge);break;case Node.ELEMENT_NODE:ve=ge,he=!0,Z.toolsTags[ve.tagName]&&(pe=Z.toolsTags[ve.tagName].tool)}var Ae=pe.pasteConfig.tags.reduce(function(Je,Se){return Je[Se.toLowerCase()]={},Je},{}),Me=Object.assign({},Ae,ne.getInlineToolsConfig(pe));ve.innerHTML=ne.clean(ve.innerHTML,Me);var De=Z.composePasteEvent("tag",{data:ve});return{content:ve,isBlock:he,tool:pe.name,event:De}}).filter(function(ge){return!O.default.isNodeEmpty(ge.content)||O.default.isSingleTag(ge.content)})}},{key:"processPlain",value:function(re){var Z=this,me=this.config.defaultBlock;if(!re)return[];var ke=me;return re.split(/\r?\n/).filter(function(ne){return ne.trim()}).map(function(ne){var oe=O.default.make("div");oe.textContent=ne;var ge=Z.composePasteEvent("tag",{data:oe});return{content:oe,tool:ke,isBlock:!1,event:ge}})}},{key:"processSingleBlock",value:(B=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe;return h.default.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(me=this.Editor,ke=me.Caret,ne=me.BlockManager,(oe=ne.currentBlock)&&Z.tool===oe.name&&O.default.containsOnlyInlineElements(Z.content.innerHTML)){ge.next=5;break}return this.insertBlock(Z,(oe==null?void 0:oe.tool.isDefault)&&oe.isEmpty),ge.abrupt("return");case 5:ke.insertContentAtCaretPosition(Z.content.innerHTML);case 6:case"end":return ge.stop()}},re,this)})),function(re){return B.apply(this,arguments)})},{key:"processInlinePaste",value:(R=(0,d.default)(h.default.mark(function re(Z){var me,ke,ne,oe,ge,ve,pe,he,Ae;return h.default.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(me=this.Editor,ke=me.BlockManager,ne=me.Caret,oe=me.Sanitizer,ge=Z.content,!(ke.currentBlock&&ke.currentBlock.tool.isDefault&&ge.textContent.length<ce.PATTERN_PROCESSING_MAX_LENGTH)){Me.next=12;break}return Me.next=6,this.processPattern(ge.textContent);case 6:if(!(ve=Me.sent)){Me.next=12;break}return pe=ke.currentBlock&&ke.currentBlock.tool.isDefault&&ke.currentBlock.isEmpty,he=ke.paste(ve.tool,ve.event,pe),ne.setToBlock(he,ne.positions.END),Me.abrupt("return");case 12:ke.currentBlock&&ke.currentBlock.currentInput?(Ae=oe.getInlineToolsConfig(ke.currentBlock.tool),document.execCommand("insertHTML",!1,oe.clean(ge.innerHTML,Ae))):this.insertBlock(Z);case 13:case"end":return Me.stop()}},re,this)})),function(re){return R.apply(this,arguments)})},{key:"processPattern",value:(T=(0,d.default)(h.default.mark(function re(Z){var me,ke;return h.default.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(me=this.toolsPatterns.find(function(oe){var ge=oe.pattern.exec(Z);return!!ge&&Z===ge.shift()})){ne.next=3;break}return ne.abrupt("return");case 3:return ke=this.composePasteEvent("pattern",{key:me.key,data:Z}),ne.abrupt("return",{event:ke,tool:me.tool.name});case 5:case"end":return ne.stop()}},re,this)})),function(re){return T.apply(this,arguments)})},{key:"insertBlock",value:function(re){var Z,me=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ke=this.Editor,ne=ke.BlockManager,oe=ke.Caret,ge=ne.currentBlock;if(me&&ge&&ge.isEmpty)return Z=ne.paste(re.tool,re.event,!0),void oe.setToBlock(Z,oe.positions.END);Z=ne.paste(re.tool,re.event),oe.setToBlock(Z,oe.positions.END)}},{key:"insertEditorJSData",value:function(re){var Z=this.Editor,me=Z.BlockManager,ke=Z.Caret;Z.Sanitizer.sanitizeBlocks(re).forEach(function(ne,oe){var ge=ne.tool,ve=ne.data,pe=!1;oe===0&&(pe=me.currentBlock&&me.currentBlock.tool.isDefault&&me.currentBlock.isEmpty);var he=me.insert({tool:ge,data:ve,replace:pe});ke.setToBlock(he,ke.positions.END)})}},{key:"processElementNode",value:function(re,Z,me){var ke=Object.keys(this.toolsTags),ne=re,oe=(this.toolsTags[ne.tagName]||{}).tool,ge=this.tagsByTool[oe==null?void 0:oe.name]||[],ve=ke.includes(ne.tagName),pe=O.default.blockElements.includes(ne.tagName.toLowerCase()),he=Array.from(ne.children).some(function(Me){var De=Me.tagName;return ke.includes(De)&&!ge.includes(De)}),Ae=Array.from(ne.children).some(function(Me){var De=Me.tagName;return O.default.blockElements.includes(De.toLowerCase())});return pe||ve||he?ve&&!he||pe&&!Ae&&!he?[].concat((0,s.default)(Z),[me,ne]):void 0:(me.appendChild(ne),[].concat((0,s.default)(Z),[me]))}},{key:"getNodes",value:function(re){var Z,me=this;return Array.from(re.childNodes).reduce(function ke(ne,oe){if(O.default.isEmpty(oe)&&!O.default.isSingleTag(oe))return ne;var ge=ne[ne.length-1],ve=new DocumentFragment;switch(ge&&O.default.isFragment(ge)&&(ve=ne.pop()),oe.nodeType){case Node.ELEMENT_NODE:if(Z=me.processElementNode(oe,ne,ve))return Z;break;case Node.TEXT_NODE:return ve.appendChild(oe),[].concat((0,s.default)(ne),[ve]);default:return[].concat((0,s.default)(ne),[ve])}return[].concat((0,s.default)(ne),(0,s.default)(Array.from(oe.childNodes).reduce(ke,[])))},[])}},{key:"composePasteEvent",value:function(re,Z){return new CustomEvent(re,{detail:Z})}}]),ce}(E.default);o.default=S,S.displayName="Paste",S.PATTERN_PROCESSING_MAX_LENGTH=450,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(29),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(145)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E){"use strict";var O=e(1);function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=O(g),w=O(w),C=O(C);var m=function(y){(0,g.default)(T,y);var b,S,A,I=(b=T,function(){var R,B=(0,C.default)(b);if(N()){var F=(0,C.default)(this).constructor;R=Reflect.construct(B,arguments,F)}else R=B.apply(this,arguments);return(0,w.default)(this,R)});function T(){var R;return(0,d.default)(this,T),(R=I.apply(this,arguments)).toolsDontSupportReadOnly=[],R.readOnlyEnabled=!1,R}return(0,_.default)(T,[{key:"prepare",value:(A=(0,h.default)(s.default.mark(function R(){var B,F,L;return s.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:B=this.Editor.Tools,F=B.blockTools,L=[],Array.from(F.entries()).forEach(function(P){var z=(0,u.default)(P,2),Y=z[0];z[1].isReadOnlySupported||L.push(Y)}),this.toolsDontSupportReadOnly=L,this.config.readOnly&&L.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly);case 7:case"end":return j.stop()}},R,this)})),function(){return A.apply(this,arguments)})},{key:"toggle",value:(S=(0,h.default)(s.default.mark(function R(){var B,F,L,j,P=arguments;return s.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:(B=P.length>0&&P[0]!==void 0?P[0]:!this.readOnlyEnabled)&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError(),F=this.readOnlyEnabled,this.readOnlyEnabled=B,z.t0=s.default.keys(this.Editor);case 5:if((z.t1=z.t0()).done){z.next=12;break}if(L=z.t1.value,this.Editor[L].toggleReadOnly){z.next=9;break}return z.abrupt("continue",5);case 9:this.Editor[L].toggleReadOnly(B),z.next=5;break;case 12:if(F!==B){z.next=14;break}return z.abrupt("return",this.readOnlyEnabled);case 14:return z.next=16,this.Editor.Saver.save();case 16:return j=z.sent,z.next=19,this.Editor.BlockManager.clear();case 19:return z.next=21,this.Editor.Renderer.render(j.blocks);case 21:return z.abrupt("return",this.readOnlyEnabled);case 22:case"end":return z.stop()}},R,this)})),function(){return S.apply(this,arguments)})},{key:"throwCriticalError",value:function(){throw new E.CriticalError("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", ")," don't support read-only mode."))}},{key:"isEnabled",get:function(){return this.readOnlyEnabled}}]),T}((k=O(k)).default);o.default=m,m.displayName="ReadOnly",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(25),e(61)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(1);function O(b){if(typeof Symbol=="undefined"||b[Symbol.iterator]==null){if(Array.isArray(b)||(b=function(F,L){if(F){if(typeof F=="string")return N(F,L);var j=Object.prototype.toString.call(F).slice(8,-1);return j==="Object"&&F.constructor&&(j=F.constructor.name),j==="Map"||j==="Set"?Array.from(j):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?N(F,L):void 0}}(b))){var S=0,A=function(){};return{s:A,n:function(){return S>=b.length?{done:!0}:{done:!1,value:b[S++]}},e:function(F){throw F},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,T,R=!0,B=!1;return{s:function(){I=b[Symbol.iterator]()},n:function(){var F=I.next();return R=F.done,F},e:function(F){B=!0,T=F},f:function(){try{R||I.return==null||I.return()}finally{if(B)throw T}}}}function N(b,S){(S==null||S>b.length)&&(S=b.length);for(var A=0,I=new Array(S);A<S;A++)I[A]=b[A];return I}function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=E(s),u=E(u),h=E(h),d=E(d),_=E(_),g=E(g),w=E(w),C=E(C),k=E(k);var y=function(b){(0,h.default)(I,b);var S,A=(S=I,function(){var T,R=(0,_.default)(S);if(m()){var B=(0,_.default)(this).constructor;T=Reflect.construct(R,arguments,B)}else T=R.apply(this,arguments);return(0,d.default)(this,T)});function I(){var T;return(0,s.default)(this,I),(T=A.apply(this,arguments)).isRectSelectionActivated=!1,T.SCROLL_SPEED=3,T.HEIGHT_OF_SCROLL_ZONE=40,T.BOTTOM_SCROLL_ZONE=1,T.TOP_SCROLL_ZONE=2,T.MAIN_MOUSE_BUTTON=0,T.mousedown=!1,T.isScrolling=!1,T.inScrollZone=null,T.startX=0,T.startY=0,T.mouseX=0,T.mouseY=0,T.stackOfSelected=[],T.listenerIds=[],T}return(0,u.default)(I,[{key:"prepare",value:function(){this.enableModuleBindings()}},{key:"startSelection",value:function(T,R){var B=document.elementFromPoint(T-window.pageXOffset,R-window.pageYOffset);B.closest(".".concat(this.Editor.Toolbar.CSS.toolbar))||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);var F=[".".concat(k.default.CSS.content),".".concat(this.Editor.Toolbar.CSS.toolbar),".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)],L=B.closest("."+this.Editor.UI.CSS.editorWrapper),j=F.some(function(P){return!!B.closest(P)});L&&!j&&(this.mousedown=!0,this.startX=T,this.startY=R)}},{key:"endSelection",value:function(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}},{key:"isRectActivated",value:function(){return this.isRectSelectionActivated}},{key:"clearSelection",value:function(){this.isRectSelectionActivated=!1}},{key:"enableModuleBindings",value:function(){var T=this,R=this.genHTML().container;this.listeners.on(R,"mousedown",function(B){T.processMouseDown(B)},!1),this.listeners.on(document.body,"mousemove",function(B){T.processMouseMove(B)},!1),this.listeners.on(document.body,"mouseleave",function(){T.processMouseLeave()}),this.listeners.on(window,"scroll",function(B){T.processScroll(B)},!1),this.listeners.on(document.body,"mouseup",function(){T.processMouseUp()},!1)}},{key:"processMouseDown",value:function(T){T.button===this.MAIN_MOUSE_BUTTON&&this.startSelection(T.pageX,T.pageY)}},{key:"processMouseMove",value:function(T){this.changingRectangle(T),this.scrollByZones(T.clientY)}},{key:"processMouseLeave",value:function(){this.clearSelection(),this.endSelection()}},{key:"processScroll",value:function(T){this.changingRectangle(T)}},{key:"processMouseUp",value:function(){this.endSelection()}},{key:"scrollByZones",value:function(T){this.inScrollZone=null,T<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-T<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}},{key:"genHTML",value:function(){var T=this.Editor.UI,R=T.nodes.holder.querySelector("."+T.CSS.editorWrapper),B=w.default.make("div",I.CSS.overlay,{}),F=w.default.make("div",I.CSS.overlayContainer,{}),L=w.default.make("div",I.CSS.rect,{});return F.appendChild(L),B.appendChild(F),R.appendChild(B),this.overlayRectangle=L,{container:R,overlay:B}}},{key:"scrollVertical",value:function(T){var R=this;if(this.inScrollZone&&this.mousedown){var B=window.pageYOffset;window.scrollBy(0,T),this.mouseY+=window.pageYOffset-B,setTimeout(function(){R.scrollVertical(T)},0)}}},{key:"changingRectangle",value:function(T){if(this.mousedown){T.pageY!==void 0&&(this.mouseX=T.pageX,this.mouseY=T.pageY);var R=this.genInfoForMouseSelection(),B=R.rightPos,F=R.leftPos,L=R.index,j=this.startX>B&&this.mouseX>B,P=this.startX<F&&this.mouseX<F;this.rectCrossesBlocks=!(j||P),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),L!==void 0&&(this.trySelectNextBlock(L),this.inverseSelection(),C.default.get().removeAllRanges(),T.preventDefault())}}},{key:"shrinkRectangleToPoint",value:function(){this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px")}},{key:"inverseSelection",value:function(){var T=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!T){var R,B=O(this.stackOfSelected);try{for(B.s();!(R=B.n()).done;){var F=R.value;this.Editor.BlockSelection.selectBlockByIndex(F)}}catch(z){B.e(z)}finally{B.f()}}if(!this.rectCrossesBlocks&&T){var L,j=O(this.stackOfSelected);try{for(j.s();!(L=j.n()).done;){var P=L.value;this.Editor.BlockSelection.unSelectBlockByIndex(P)}}catch(z){j.e(z)}finally{j.f()}}}},{key:"updateRectangleSize",value:function(){this.mouseY>=this.startY?(this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.mouseY-window.pageYOffset,"px")):(this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.top="".concat(this.mouseY-window.pageYOffset,"px")),this.mouseX>=this.startX?(this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.mouseX-window.pageXOffset,"px")):(this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.left="".concat(this.mouseX-window.pageXOffset,"px"))}},{key:"genInfoForMouseSelection",value:function(){var T,R=document.body.offsetWidth/2,B=this.mouseY-window.pageYOffset,F=document.elementFromPoint(R,B),L=this.Editor.BlockManager.getBlockByChildNode(F);L!==void 0&&(T=this.Editor.BlockManager.blocks.findIndex(function(z){return z.holder===L.holder}));var j=this.Editor.BlockManager.lastBlock.holder.querySelector("."+k.default.CSS.content),P=Number.parseInt(window.getComputedStyle(j).width,10)/2;return{index:T,leftPos:R-P,rightPos:R+P}}},{key:"addBlockInSelection",value:function(T){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(T),this.stackOfSelected.push(T)}},{key:"trySelectNextBlock",value:function(T){var R=this,B=this.stackOfSelected[this.stackOfSelected.length-1]===T,F=this.stackOfSelected.length;if(!B){var L=this.stackOfSelected[F-1]-this.stackOfSelected[F-2]>0,j=0;F>1&&(j=L?1:-1);var P=T>this.stackOfSelected[F-1]&&j===1,z=T<this.stackOfSelected[F-1]&&j===-1,Y=!(P||z||j===0);if(Y||!(T>this.stackOfSelected[F-1]||this.stackOfSelected[F-1]===void 0)){if(!Y&&T<this.stackOfSelected[F-1])for(var ce=this.stackOfSelected[F-1]-1;ce>=T;ce--)this.addBlockInSelection(ce);else if(Y){var re,Z=F-1;for(re=T>this.stackOfSelected[F-1]?function(){return T>R.stackOfSelected[Z]}:function(){return T<R.stackOfSelected[Z]};re();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[Z]),this.stackOfSelected.pop(),Z--}}else for(var me=this.stackOfSelected[F-1]+1||T;me<=T;me++)this.addBlockInSelection(me)}}}],[{key:"CSS",get:function(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}}]),I}(g.default);o.default=y,y.displayName="RectangleSelection",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(9),O=e(1);function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=O(g),w=O(w),C=O(C),k=E(k);var m=function(y){(0,_.default)(T,y);var b,S,A,I=(b=T,function(){var R,B=(0,w.default)(b);if(N()){var F=(0,w.default)(this).constructor;R=Reflect.construct(B,arguments,F)}else R=B.apply(this,arguments);return(0,g.default)(this,R)});function T(){return(0,h.default)(this,T),I.apply(this,arguments)}return(0,d.default)(T,[{key:"render",value:(A=(0,u.default)(s.default.mark(function R(B){var F,L,j=this;return s.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return F=B.map(function(z){return{function:function(){return j.insertBlock(z)}}}),P.next=3,k.sequence(F);case 3:return L=P.sent,this.Editor.UI.checkEmptiness(),P.abrupt("return",L);case 6:case"end":return P.stop()}},R,this)})),function(R){return A.apply(this,arguments)})},{key:"insertBlock",value:(S=(0,u.default)(s.default.mark(function R(B){var F,L,j,P,z,Y,ce,re;return s.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(F=this.Editor,L=F.Tools,j=F.BlockManager,P=B.type,z=B.data,Y=B.tunes,!L.available.has(P)){Z.next=13;break}Z.prev=3,j.insert({tool:P,data:z,tunes:Y}),Z.next=11;break;case 7:throw Z.prev=7,Z.t0=Z.catch(3),k.log("Block \xAB".concat(P,"\xBB skipped because of plugins error"),"warn",z),Error(Z.t0);case 11:Z.next=18;break;case 13:ce={savedData:{type:P,data:z},title:P},L.unavailable.has(P)&&(re=L.unavailable.get(P).toolbox,ce.title=(re==null?void 0:re.title)||ce.title),j.insert({tool:L.stubTool,data:ce}).stretched=!0,k.log("Tool \xAB".concat(P,"\xBB is not found. Check 'tools' property at your initial Editor.js config."),"warn");case 18:case"end":return Z.stop()}},R,this,[[3,7]])})),function(R){return S.apply(this,arguments)})}]),T}(C.default);o.default=m,m.displayName="Renderer",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(2),e(3),e(5),e(6),e(4),e(7),e(8),e(379)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(9),O=e(1);function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=O(g),w=O(w),C=E(C),k=O(k);var m=function(y){(0,d.default)(A,y);var b,S=(b=A,function(){var I,T=(0,g.default)(b);if(N()){var R=(0,g.default)(this).constructor;I=Reflect.construct(T,arguments,R)}else I=T.apply(this,arguments);return(0,_.default)(this,I)});function A(){var I;return(0,u.default)(this,A),(I=S.apply(this,arguments)).configCache={},I.inlineToolsConfigCache=null,I}return(0,h.default)(A,[{key:"sanitizeBlocks",value:function(I){var T=this;return I.map(function(R){var B=T.composeToolConfig(R.tool);return C.isEmpty(B)||(R.data=T.deepSanitize(R.data,B)),R})}},{key:"deepSanitize",value:function(I,T){return Array.isArray(I)?this.cleanArray(I,T):C.isObject(I)?this.cleanObject(I,T):C.isString(I)?this.cleanOneItem(I,T):I}},{key:"clean",value:function(I){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R={tags:T},B=this.createHTMLJanitorInstance(R);return B.clean(I)}},{key:"composeToolConfig",value:function(I){if(this.configCache[I])return this.configCache[I];var T=this.Editor.Tools.available.get(I),R=this.getInlineToolsConfig(T);if(!T.sanitizeConfig||T.sanitizeConfig&&C.isEmpty(T.sanitizeConfig))return R;var B=T.sanitizeConfig,F={};for(var L in B)if(Object.prototype.hasOwnProperty.call(B,L)){var j=B[L];C.isObject(j)?F[L]=Object.assign({},R,j):F[L]=j}return this.configCache[I]=F,F}},{key:"getInlineToolsConfig",value:function(I){var T=this.Editor.Tools,R=I.enabledInlineTools||[],B={};return C.isBoolean(R)&&R?B=this.getAllInlineToolsConfig():R.map(function(F){B=Object.assign(B,T.inlineTools.get(F).sanitizeConfig)}),B.br=!0,B.wbr=!0,B}},{key:"getAllInlineToolsConfig",value:function(){var I=this.Editor.Tools;if(this.inlineToolsConfigCache)return this.inlineToolsConfigCache;var T={};return Object.entries(I.inlineTools).forEach(function(R){var B=(0,s.default)(R,2)[1];Object.assign(T,B.sanitizeConfig)}),this.inlineToolsConfigCache=T,this.inlineToolsConfigCache}},{key:"cleanArray",value:function(I,T){var R=this;return I.map(function(B){return R.deepSanitize(B,T)})}},{key:"cleanObject",value:function(I,T){var R={};for(var B in I)if(Object.prototype.hasOwnProperty.call(I,B)){var F=I[B],L=this.isRule(T[B])?T[B]:T;R[B]=this.deepSanitize(F,L)}return R}},{key:"cleanOneItem",value:function(I,T){return C.isObject(T)?this.clean(I,T):T===!1?this.clean(I,{}):I}},{key:"isRule",value:function(I){return C.isObject(I)||C.isBoolean(I)||C.isFunction(I)}},{key:"createHTMLJanitorInstance",value:function(I){return I?new k.default(I):null}}]),A}(w.default);o.default=m,m.displayName="Sanitizer",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(7),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(9),O=e(1);function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=O(g),w=O(w),C=O(C),k=E(k);var m=function(y){(0,_.default)(T,y);var b,S,A,I=(b=T,function(){var R,B=(0,w.default)(b);if(N()){var F=(0,w.default)(this).constructor;R=Reflect.construct(B,arguments,F)}else R=B.apply(this,arguments);return(0,g.default)(this,R)});function T(){return(0,h.default)(this,T),I.apply(this,arguments)}return(0,d.default)(T,[{key:"save",value:(A=(0,u.default)(s.default.mark(function R(){var B,F,L,j,P,z,Y,ce,re=this;return s.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return B=this.Editor,F=B.BlockManager,L=B.Sanitizer,j=B.ModificationsObserver,P=F.blocks,z=[],j.disable(),Z.prev=3,P.forEach(function(me){z.push(re.getSavedData(me))}),Z.next=7,Promise.all(z);case 7:return Y=Z.sent,Z.next=10,L.sanitizeBlocks(Y);case 10:return ce=Z.sent,Z.abrupt("return",this.makeOutput(ce));case 12:return Z.prev=12,j.enable(),Z.finish(12);case 15:case"end":return Z.stop()}},R,this,[[3,,12,15]])})),function(){return A.apply(this,arguments)})},{key:"getSavedData",value:(S=(0,u.default)(s.default.mark(function R(B){var F,L;return s.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,B.save();case 2:if(F=j.sent,j.t0=F,!j.t0){j.next=8;break}return j.next=7,B.validate(F.data);case 7:j.t0=j.sent;case 8:return L=j.t0,j.abrupt("return",Object.assign(Object.assign({},F),{isValid:L}));case 10:case"end":return j.stop()}},R)})),function(R){return S.apply(this,arguments)})},{key:"makeOutput",value:function(R){var B=this,F=0,L=[];return k.log("[Editor.js saving]:","groupCollapsed"),R.forEach(function(j){var P=j.tool,z=j.data,Y=j.tunes,ce=j.time,re=j.isValid;if(F+=ce,k.log("".concat(P.charAt(0).toUpperCase()+P.slice(1)),"group"),!re)return k.log("Block \xAB".concat(P,"\xBB skipped because saved data is invalid")),void k.log(void 0,"groupEnd");if(k.log(z),k.log(void 0,"groupEnd"),P!==B.Editor.Tools.stubTool){var Z={type:P,data:z};k.isEmpty(Y)||(Z.tunes=Y),L.push(Z)}else L.push(z)}),k.log("Total","log",F),k.log(void 0,"groupEnd"),{time:+new Date,blocks:L,version:"2.20.0"}}}]),T}(C.default);o.default=m,m.displayName="Saver",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(60),e(8),e(25)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O){"use strict";var N=e(9),m=e(1);function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(S){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=m(s),u=m(u),h=m(h),d=m(d),_=m(_),g=m(g),w=m(w),C=m(C),k=m(k),E=N(E),O=m(O);var b=function(S){(0,d.default)(T,S);var A,I=(A=T,function(){var R,B=(0,g.default)(A);if(y()){var F=(0,g.default)(this).constructor;R=Reflect.construct(B,arguments,F)}else R=B.apply(this,arguments);return(0,_.default)(this,R)});function T(){var R;return(0,u.default)(this,T),(R=I.apply(this,arguments)).buttons=[],R.flipper=null,R.selection=new O.default,R}return(0,h.default)(T,[{key:"make",value:function(){this.nodes.wrapper=C.default.make("div",this.CSS.wrapper),this.nodes.toolSettings=C.default.make("div",this.CSS.toolSettings),this.nodes.defaultSettings=C.default.make("div",this.CSS.defaultSettings),C.default.append(this.nodes.wrapper,[this.nodes.toolSettings,this.nodes.defaultSettings]),this.enableFlipper()}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}},{key:"open",value:function(){this.nodes.wrapper.classList.add(this.CSS.wrapperOpened),this.selection.save(),this.Editor.BlockManager.currentBlock.selected=!0,this.Editor.BlockSelection.clearCache(),this.addToolSettings(),this.addTunes(),this.eventsDispatcher.emit(this.events.opened),this.flipper.activate(this.blockTunesButtons)}},{key:"close",value:function(){this.nodes.wrapper.classList.remove(this.CSS.wrapperOpened),O.default.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.nodes.toolSettings.innerHTML="",this.nodes.defaultSettings.innerHTML="",this.eventsDispatcher.emit(this.events.closed),this.buttons=[],this.flipper.deactivate()}},{key:"addToolSettings",value:function(){var R=this.Editor.BlockManager.currentBlock.renderSettings();R&&C.default.append(this.nodes.toolSettings,R)}},{key:"addTunes",value:function(){var R=this.Editor.BlockManager.currentBlock.renderTunes(),B=(0,s.default)(R,2),F=B[0],L=B[1];C.default.append(this.nodes.toolSettings,F),C.default.append(this.nodes.defaultSettings,L)}},{key:"enableFlipper",value:function(){var R=this;this.flipper=new k.default({focusedItemClass:this.CSS.focusedButton,activateCallback:function(B){B&&C.default.canSetCaret(B)?R.close():E.delay(function(){R.Editor.Caret.setToBlock(R.Editor.BlockManager.currentBlock)},50)()}})}},{key:"events",get:function(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}},{key:"CSS",get:function(){return{wrapper:"ce-settings",wrapperOpened:"ce-settings--opened",toolSettings:"ce-settings__plugin-zone",defaultSettings:"ce-settings__default-zone",button:"ce-settings__button",focusedButton:"ce-settings__button--focused",focusedButtonAnimated:"ce-settings__button--focused-animated"}}},{key:"opened",get:function(){return this.nodes.wrapper.classList.contains(this.CSS.wrapperOpened)}},{key:"blockTunesButtons",get:function(){var R=this,B=this.Editor.StylesAPI;if(this.buttons.length!==0)return this.buttons;var F=this.nodes.toolSettings.querySelectorAll(".".concat(B.classes.settingsButton,", ").concat(C.default.allInputsSelector)),L=this.nodes.defaultSettings.querySelectorAll(".".concat(this.CSS.button));return F.forEach(function(j){R.buttons.push(j)}),L.forEach(function(j){R.buttons.push(j)}),this.buttons}}]),T}(w.default);o.default=b,b.displayName="BlockSettings",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(21),e(22),e(42),e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(8),e(60),e(59),e(81)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N,m,y,b){"use strict";var S=e(9),A=e(1);function I(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(R){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=A(s),u=A(u),h=A(h),d=A(d),_=A(_),g=A(g),w=A(w),C=A(C),k=A(k),E=A(E),O=A(O),N=S(N),m=A(m),y=A(y);var T=function(R){(0,w.default)(j,R);var B,F,L=(B=j,function(){var P,z=(0,k.default)(B);if(I()){var Y=(0,k.default)(this).constructor;P=Reflect.construct(z,arguments,Y)}else P=z.apply(this,arguments);return(0,C.default)(this,P)});function j(){var P;return(0,_.default)(this,j),(P=L.apply(this,arguments)).opened=!1,P.tools={},P.flipper=null,P.togglingCallback=null,P}return(0,g.default)(j,[{key:"make",value:function(){this.nodes.wrapper=O.default.make("div",[j.CSS.conversionToolbarWrapper].concat((0,d.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.tools=O.default.make("div",j.CSS.conversionToolbarTools);var P=O.default.make("div",j.CSS.conversionToolbarLabel,{textContent:y.default.ui(b.I18nInternalNS.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),O.default.append(this.nodes.wrapper,P),O.default.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}},{key:"toggle",value:function(P){this.opened?this.close():this.open(),N.isFunction(P)&&(this.togglingCallback=P)}},{key:"open",value:function(){var P=this;this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(j.CSS.conversionToolbarShowed),setTimeout(function(){P.flipper.activate(Object.values(P.tools).filter(function(z){return!z.classList.contains(j.CSS.conversionToolHidden)})),P.flipper.focusFirst(),N.isFunction(P.togglingCallback)&&P.togglingCallback(!0)},50)}},{key:"close",value:function(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(j.CSS.conversionToolbarShowed),N.isFunction(this.togglingCallback)&&this.togglingCallback(!1)}},{key:"hasTools",value:function(){var P=Object.keys(this.tools);return!(P.length===1&&P.shift()===this.config.defaultBlock)}},{key:"replaceWithBlock",value:(F=(0,h.default)(u.default.mark(function P(z){var Y,ce,re,Z,me,ke,ne,oe,ge,ve,pe=this;return u.default.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return Y=this.Editor.BlockManager.currentBlock.tool,ce=this.Editor.BlockManager.currentBlock.name,he.next=4,this.Editor.BlockManager.currentBlock.save();case 4:if(re=he.sent,Z=re.data,ce===z&&(z=this.config.defaultBlock),me=this.Editor.Tools.blockTools.get(z),ke="",ne=Y.conversionConfig.export,!N.isFunction(ne)){he.next=14;break}ke=ne(Z),he.next=20;break;case 14:if(!N.isString(ne)){he.next=18;break}ke=Z[ne],he.next=20;break;case 18:return N.log("Conversion \xABexport\xBB property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),he.abrupt("return");case 20:if(oe=this.Editor.Sanitizer.clean(ke,me.sanitizeConfig),ge={},ve=me.conversionConfig.import,!N.isFunction(ve)){he.next=27;break}ge=ve(oe),he.next=33;break;case 27:if(!N.isString(ve)){he.next=31;break}ge[ve]=oe,he.next=33;break;case 31:return N.log("Conversion \xABimport\xBB property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),he.abrupt("return");case 33:this.Editor.BlockManager.replace({tool:z,data:ge}),this.Editor.BlockSelection.clearSelection(),this.close(),this.Editor.InlineToolbar.close(),N.delay(function(){pe.Editor.Caret.setToBlock(pe.Editor.BlockManager.currentBlock)},10)();case 38:case"end":return he.stop()}},P,this)})),function(P){return F.apply(this,arguments)})},{key:"addTools",value:function(){var P=this,z=this.Editor.Tools.blockTools;Array.from(z.entries()).forEach(function(Y){var ce=(0,s.default)(Y,2),re=ce[0],Z=ce[1],me=Z.toolbox,ke=Z.conversionConfig;!N.isEmpty(me)&&me.icon&&ke&&ke.import&&P.addTool(re,me.icon,me.title)})}},{key:"addTool",value:function(P,z,Y){var ce=this,re=O.default.make("div",[j.CSS.conversionTool]),Z=O.default.make("div",[j.CSS.conversionToolIcon]);re.dataset.tool=P,Z.innerHTML=z,O.default.append(re,Z),O.default.append(re,O.default.text(y.default.t(b.I18nInternalNS.toolNames,Y||N.capitalize(P)))),O.default.append(this.nodes.tools,re),this.tools[P]=re,this.listeners.on(re,"click",(0,h.default)(u.default.mark(function me(){return u.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,ce.replaceWithBlock(P);case 2:case"end":return ke.stop()}},me)})))}},{key:"filterTools",value:function(){var P=this.Editor.BlockManager.currentBlock;Object.entries(this.tools).forEach(function(z){var Y=(0,s.default)(z,2),ce=Y[0],re=Y[1];re.hidden=!1,re.classList.toggle(j.CSS.conversionToolHidden,ce===P.name)})}},{key:"enableFlipper",value:function(){this.flipper=new m.default({focusedItemClass:j.CSS.conversionToolFocused})}}],[{key:"CSS",get:function(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}}]),j}(E.default);o.default=T,T.displayName="ConversionToolbar",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(42),e(29),e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(25),e(8),e(60),e(59),e(81),e(108),e(66)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N,m,y,b,S){"use strict";var A=e(9),I=e(1);function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(B){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=I(s),u=I(u),h=I(h),d=I(d),_=I(_),g=I(g),w=I(w),C=I(C),k=I(k),E=I(E),O=A(O),N=I(N),m=I(m),b=I(b);var R=function(B){(0,_.default)(j,B);var F,L=(F=j,function(){var P,z=(0,w.default)(F);if(T()){var Y=(0,w.default)(this).constructor;P=Reflect.construct(z,arguments,Y)}else P=z.apply(this,arguments);return(0,g.default)(this,P)});function j(){var P;return(0,h.default)(this,j),(P=L.apply(this,arguments)).CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},P.opened=!1,P.toolbarVerticalMargin=5,P.buttonsList=null,P.width=0,P.flipper=null,P}return(0,d.default)(j,[{key:"toggleReadOnly",value:function(P){P?(this.destroy(),this.Editor.ConversionToolbar.destroy()):this.make()}},{key:"tryToShow",value:function(){var P=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.allowedToShow()?(this.move(),this.open(),this.Editor.Toolbar.close()):P&&this.close()}},{key:"move",value:function(){var P=E.default.rect,z=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),Y={x:P.x-z.left,y:P.y+P.height-z.top+this.toolbarVerticalMargin};P.width&&(Y.x+=Math.floor(P.width/2));var ce=Y.x-this.width/2,re=Y.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,ce<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,re>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(Y.x)+"px",this.nodes.wrapper.style.top=Math.floor(Y.y)+"px"}},{key:"close",value:function(){var P=this;this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(function(z){var Y=(0,u.default)(z,2),ce=Y[0],re=Y[1],Z=P.getToolShortcut(ce);Z&&b.default.remove(P.Editor.UI.nodes.redactor,Z),O.isFunction(re.clear)&&re.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}},{key:"open",value:function(){if(!this.opened){this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)),this.opened=!0,this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;var P=Array.from(this.buttonsList);P.unshift(this.nodes.conversionToggler),P=P.filter(function(z){return!z.hidden}),this.flipper.activate(P)}}},{key:"containsNode",value:function(P){return this.nodes.wrapper.contains(P)}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}},{key:"getInlineToolbarSettings",value:function(P){var z=P.enabledInlineTools;if(z!==!0&&!Array.isArray(z))return!1;if(Array.isArray(z))return z;var Y=this.config.inlineToolbar;return Array.isArray(Y)?Y:Y===!0&&Array.from(this.Editor.Tools.inlineTools.keys())}},{key:"make",value:function(){var P=this;this.nodes.wrapper=k.default.make("div",[this.CSS.inlineToolbar].concat((0,s.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.togglerAndButtonsWrapper=k.default.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=k.default.make("div",this.CSS.buttonsWrapper),this.nodes.actions=k.default.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",function(z){z.target.closest(".".concat(P.CSS.actionsWrapper))||z.preventDefault()}),k.default.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),k.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),k.default.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),this.recalculateWidth(),this.enableFlipper()}},{key:"allowedToShow",value:function(){var P=E.default.get(),z=E.default.text;if(!P||!P.anchorNode||P.isCollapsed||z.length<1)return!1;var Y=k.default.isElement(P.anchorNode)?P.anchorNode:P.anchorNode.parentElement;if(P&&["IMG","INPUT"].includes(Y.tagName)||Y.closest('[contenteditable="true"]')===null)return!1;var ce=this.Editor.BlockManager.getBlock(P.anchorNode);return!!ce&&this.getInlineToolbarSettings(ce.tool)!==!1}},{key:"recalculateWidth",value:function(){this.width=this.nodes.wrapper.offsetWidth}},{key:"addConversionToggler",value:function(){var P=this;this.nodes.conversionToggler=k.default.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=k.default.make("div",this.CSS.conversionTogglerContent);var z=k.default.svg("toggler-down",13,13);this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(z),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",function(){P.Editor.ConversionToolbar.toggle(function(Y){!Y&&P.opened?P.flipper.activate():P.opened&&P.flipper.deactivate()})}),this.Editor.Tooltip.onHover(this.nodes.conversionToggler,m.default.ui(y.I18nInternalNS.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}},{key:"setConversionTogglerContent",value:function(){var P=this.Editor.BlockManager.currentBlock,z=P.name,Y=P.tool.conversionConfig,ce=Y&&Y.export;this.nodes.conversionToggler.hidden=!ce,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!ce);var re=P.tool.toolbox||{};this.nodes.conversionTogglerContent.innerHTML=re.icon||re.title||O.capitalize(z)}},{key:"prepareConversionToolbar",value:function(){var P=this.Editor.ConversionToolbar.make();k.default.append(this.nodes.wrapper,P)}},{key:"addToolsFiltered",value:function(){var P=this,z=E.default.get(),Y=this.Editor.BlockManager.getBlock(z.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,this.getInlineToolbarSettings(Y.tool).forEach(function(ce){var re=P.Editor.Tools.inlineTools.get(ce);P.addTool(re)}),this.recalculateWidth()}},{key:"addTool",value:function(P){var z=this,Y=this.Editor.Tooltip,ce=P.create(),re=ce.render();if(re){if(re.dataset.tool=P.name,this.nodes.buttons.appendChild(re),this.toolsInstances.set(P.name,ce),O.isFunction(ce.renderActions)){var Z=ce.renderActions();this.nodes.actions.appendChild(Z)}this.listeners.on(re,"click",function(oe){z.toolClicked(ce),oe.preventDefault()});var me=this.getToolShortcut(P.name);if(me)try{this.enableShortcuts(ce,me)}catch(oe){}var ke=k.default.make("div"),ne=m.default.t(y.I18nInternalNS.toolNames,P.title||O.capitalize(P.name));ke.appendChild(k.default.text(ne)),me&&ke.appendChild(k.default.make("div",this.CSS.inlineToolbarShortcut,{textContent:O.beautifyShortcut(me)})),Y.onHover(re,ke,{placement:"top",hidingDelay:100}),ce.checkState(E.default.get())}else O.log("Render method must return an instance of Node","warn",P.name)}},{key:"getToolShortcut",value:function(P){var z=this.Editor.Tools,Y=z.inlineTools.get(P),ce=z.internal.inlineTools;return Array.from(ce.keys()).includes(P)?this.inlineTools[P][S.CommonInternalSettings.Shortcut]:Y.shortcut}},{key:"enableShortcuts",value:function(P,z){var Y=this;b.default.add({name:z,handler:function(ce){var re=Y.Editor.BlockManager.currentBlock;re&&re.tool.enabledInlineTools&&(ce.preventDefault(),Y.toolClicked(P))},on:this.Editor.UI.nodes.redactor})}},{key:"toolClicked",value:function(P){var z=E.default.range;P.surround(z),this.checkToolsState()}},{key:"checkToolsState",value:function(){this.toolsInstances.forEach(function(P){P.checkState(E.default.get())})}},{key:"enableFlipper",value:function(){this.flipper=new N.default({focusedItemClass:this.CSS.focusedButton,allowArrows:!1})}},{key:"inlineTools",get:function(){var P={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(function(z){var Y=(0,u.default)(z,2),ce=Y[0],re=Y[1];P[ce]=re.create()}),P}}]),j}(C.default);o.default=R,R.displayName="InlineToolbar",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(15),e(8),e(60),e(61),e(59),e(81),e(108)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N,m){"use strict";var y=e(9),b=e(1);function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(I){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=b(s),u=b(u),h=b(h),d=b(d),_=b(_),g=b(g),w=b(w),C=y(C),k=b(k),O=b(O),m=b(m);var A=function(I){(0,h.default)(B,I);var T,R=(T=B,function(){var F,L=(0,_.default)(T);if(S()){var j=(0,_.default)(this).constructor;F=Reflect.construct(L,arguments,j)}else F=L.apply(this,arguments);return(0,d.default)(this,F)});function B(){var F;return(0,s.default)(this,B),(F=R.apply(this,arguments)).nodes={toolbox:null,buttons:[]},F.opened=!1,F.displayedToolsCount=0,F.flipper=null,F}return(0,u.default)(B,[{key:"make",value:function(){this.nodes.toolbox=w.default.make("div",this.CSS.toolbox),this.addTools(),this.enableFlipper()}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.removeAllShortcuts()}},{key:"toolButtonActivate",value:function(F,L){this.insertNewBlock(L)}},{key:"open",value:function(){this.isEmpty||(this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolbarHolderModifier),this.nodes.toolbox.classList.add(this.CSS.toolboxOpened),this.opened=!0,this.flipper.activate())}},{key:"close",value:function(){this.nodes.toolbox.classList.remove(this.CSS.toolboxOpened),this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolbarHolderModifier),this.opened=!1,this.flipper.deactivate()}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"addTools",value:function(){var F=this,L=this.Editor.Tools.blockTools;Array.from(L.values()).forEach(function(j){return F.addTool(j)})}},{key:"addTool",value:function(F){var L=this,j=F.toolbox;if(j)if(!j||j.icon){var P=w.default.make("li",[this.CSS.toolboxButton]);P.dataset.tool=F.name,P.innerHTML=j.icon,w.default.append(this.nodes.toolbox,P),this.nodes.toolbox.appendChild(P),this.nodes.buttons.push(P),this.listeners.on(P,"click",function(ce){L.toolButtonActivate(ce,F.name)});var z=this.drawTooltip(F);this.Editor.Tooltip.onHover(P,z,{placement:"bottom",hidingDelay:200});var Y=F.shortcut;Y&&this.enableShortcut(F.name,Y),this.displayedToolsCount++}else C.log("Toolbar icon is missed. Tool %o skipped","warn",F.name)}},{key:"drawTooltip",value:function(F){var L=F.toolbox||{},j=O.default.t(N.I18nInternalNS.toolNames,L.title||F.name),P=F.shortcut,z=w.default.make("div",this.CSS.buttonTooltip),Y=document.createTextNode(C.capitalize(j));return z.appendChild(Y),P&&(P=C.beautifyShortcut(P),z.appendChild(w.default.make("div",this.CSS.buttonShortcut,{textContent:P}))),z}},{key:"enableShortcut",value:function(F,L){var j=this;m.default.add({name:L,handler:function(P){P.preventDefault(),j.insertNewBlock(F)},on:this.Editor.UI.nodes.redactor})}},{key:"removeAllShortcuts",value:function(){var F=this,L=this.Editor.Tools.blockTools;Array.from(L.values()).forEach(function(j){var P=j.shortcut;P&&m.default.remove(F.Editor.UI.nodes.redactor,P)})}},{key:"enableFlipper",value:function(){var F=Array.from(this.nodes.toolbox.childNodes);this.flipper=new k.default({items:F,focusedItemClass:this.CSS.toolboxButtonActive})}},{key:"insertNewBlock",value:function(F){var L=this.Editor,j=L.BlockManager,P=L.Caret,z=j.currentBlock,Y=j.insert({tool:F,replace:z.isEmpty});Y.call(E.BlockToolAPI.APPEND_CALLBACK),this.Editor.Caret.setToBlock(Y),Y.inputs.length===0&&(Y===j.lastBlock?(j.insertAtEnd(),P.setToBlock(j.lastBlock)):P.setToBlock(j.nextBlock)),this.Editor.Toolbar.close()}},{key:"CSS",get:function(){return{toolbox:"ce-toolbox",toolboxButton:"ce-toolbox__button",toolboxButtonActive:"ce-toolbox__button--active",toolboxOpened:"ce-toolbox--opened",openedToolbarHolderModifier:"codex-editor--toolbox-opened",buttonTooltip:"ce-toolbox-button-tooltip",buttonShortcut:"ce-toolbox-button-tooltip__shortcut"}}},{key:"isEmpty",get:function(){return this.displayedToolsCount===0}}]),B}(g.default);o.default=A,A.displayName="Toolbox",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(42),e(29),e(2),e(3),e(5),e(6),e(4),e(380),e(7),e(8),e(381),e(382),e(383),e(384),e(385),e(389),e(390),e(391),e(392)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N,m,y,b,S,A,I,T,R,B){"use strict";var F=e(9),L=e(1);function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(z){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=L(s),u=L(u),h=L(h),d=L(d),_=L(_),g=L(g),w=L(w),C=L(C),k=L(k),E=L(E),O=L(O),N=F(N),m=L(m),y=L(y),b=L(b),S=L(S),A=L(A),I=L(I),T=L(T),R=L(R),B=L(B);var P=function(z){(0,w.default)(re,z);var Y,ce=(Y=re,function(){var Z,me=(0,k.default)(Y);if(j()){var ke=(0,k.default)(this).constructor;Z=Reflect.construct(me,arguments,ke)}else Z=me.apply(this,arguments);return(0,C.default)(this,Z)});function re(){var Z;return(0,_.default)(this,re),(Z=ce.apply(this,arguments)).stubTool="stub",Z.toolsAvailable=new B.default,Z.toolsUnavailable=new B.default,Z}return(0,g.default)(re,[{key:"prepare",value:function(){var Z=this;if(this.validateTools(),this.config.tools=N.deepMerge({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");var me=this.prepareConfig();this.factory=new A.default(me,this.config,this.Editor.API);var ke=this.getListOfPrepareFunctions(me);return ke.length===0?Promise.resolve():N.sequence(ke,function(ne){Z.toolPrepareMethodSuccess(ne)},function(ne){Z.toolPrepareMethodFallback(ne)})}},{key:"getTunesForTool",value:function(Z){var me=Z.enabledBlockTunes;if(me===!1)return new B.default;if(Array.isArray(me))return new B.default(Array.from(this.blockTunes.entries()).filter(function(ne){var oe=(0,d.default)(ne,2)[1];return me.includes(oe.name)}).concat((0,h.default)(this.blockTunes.internalTools.entries())));var ke=this.config.tunes;return Array.isArray(ke)?new B.default(Array.from(this.blockTunes.entries()).filter(function(ne){var oe=(0,d.default)(ne,2)[1];return ke.includes(oe.name)}).concat((0,h.default)(this.blockTunes.internalTools.entries()))):this.blockTunes.internalTools}},{key:"destroy",value:function(){Object.values(this.available).forEach(function(){var Z=(0,u.default)(s.default.mark(function me(ke){return s.default.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!N.isFunction(ke.reset)){ne.next=3;break}return ne.next=3,ke.reset();case 3:case"end":return ne.stop()}},me)}));return function(me){return Z.apply(this,arguments)}}())}},{key:"toolPrepareMethodSuccess",value:function(Z){var me=this.factory.get(Z.toolName);if(me.isInline()){var ke=["render","surround","checkState"].filter(function(ne){return!me.create()[ne]});if(ke.length)return N.log("Incorrect Inline Tool: ".concat(me.name,". Some of required methods is not implemented %o"),"warn",ke),void this.toolsUnavailable.set(me.name,me)}this.toolsAvailable.set(me.name,me)}},{key:"toolPrepareMethodFallback",value:function(Z){this.toolsUnavailable.set(Z.toolName,this.factory.get(Z.toolName))}},{key:"getListOfPrepareFunctions",value:function(Z){var me=[];return Object.entries(Z).forEach(function(ke){var ne=(0,d.default)(ke,2),oe=ne[0],ge=ne[1];me.push({function:N.isFunction(ge.class.prepare)?ge.class.prepare:function(){},data:{toolName:oe}})}),me}},{key:"validateTools",value:function(){for(var Z in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,Z)){if(Z in this.internalTools)return;var me=this.config.tools[Z];if(!N.isFunction(me)&&!N.isFunction(me.class))throw Error("Tool \xAB".concat(Z,"\xBB must be a constructor function or an object with function in the \xABclass\xBB property"))}}},{key:"prepareConfig",value:function(){var Z={};for(var me in this.config.tools)N.isObject(this.config.tools[me])?Z[me]=this.config.tools[me]:Z[me]={class:this.config.tools[me]};return Z}},{key:"available",get:function(){return this.toolsAvailable}},{key:"unavailable",get:function(){return this.toolsUnavailable}},{key:"inlineTools",get:function(){return this.available.inlineTools}},{key:"blockTools",get:function(){return this.available.blockTools}},{key:"blockTunes",get:function(){return this.available.blockTunes}},{key:"defaultTool",get:function(){return this.blockTools.get(this.config.defaultBlock)}},{key:"internal",get:function(){return this.available.internalTools}},{key:"internalTools",get:function(){return{bold:{class:m.default,isInternal:!0},italic:{class:y.default,isInternal:!0},link:{class:b.default,isInternal:!0},paragraph:{class:E.default,inlineToolbar:!0,isInternal:!0},stub:{class:S.default,isInternal:!0},moveUpTune:{class:R.default,isInternal:!0},deleteTune:{class:T.default,isInternal:!0},moveDownTune:{class:I.default,isInternal:!0}}}}]),re}(O.default);o.default=P,P.displayName="Tools",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(7),e(393)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_),g=C(g),w=C(w);var E=function(O){(0,h.default)(y,O);var N,m=(N=y,function(){var b,S=(0,_.default)(N);if(k()){var A=(0,_.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,d.default)(this,b)});function y(){var b;return(0,s.default)(this,y),(b=m.apply(this,arguments)).lib=new w.default,b}return(0,u.default)(y,[{key:"show",value:function(b,S,A){this.lib.show(b,S,A)}},{key:"hide",value:function(){this.lib.hide()}},{key:"onHover",value:function(b,S,A){this.lib.onHover(b,S,A)}}]),y}(g.default);o.default=E,E.displayName="Tooltip",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(42),e(21),e(22),e(2),e(3),e(5),e(6),e(4),e(394),e(7),e(15),e(8),e(25),e(61),e(60)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k,E,O,N,m,y,b,S){"use strict";var A=e(9),I=e(1);function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(B){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=I(s),u=I(u),h=I(h),d=I(d),_=I(_),g=I(g),w=I(w),C=I(C),k=I(k),E=I(E),O=I(O),N=I(N),m=A(m),y=I(y),b=I(b),S=I(S);var R=function(B){(0,w.default)(P,B);var F,L,j=(F=P,function(){var z,Y=(0,k.default)(F);if(T()){var ce=(0,k.default)(this).constructor;z=Reflect.construct(Y,arguments,ce)}else z=Y.apply(this,arguments);return(0,C.default)(this,z)});function P(){var z;return(0,_.default)(this,P),(z=j.apply(this,arguments)).isMobile=!1,z.contentRectCache=void 0,z.resizeDebouncer=m.debounce(function(){z.windowResize()},200),z}return(0,g.default)(P,[{key:"addLoader",value:function(){this.nodes.loader=N.default.make("div",this.CSS.editorLoader),this.nodes.wrapper.prepend(this.nodes.loader),this.nodes.redactor.classList.add(this.CSS.editorZoneHidden)}},{key:"removeLoader",value:function(){this.nodes.loader.remove(),this.nodes.redactor.classList.remove(this.CSS.editorZoneHidden)}},{key:"prepare",value:(L=(0,d.default)(h.default.mark(function z(){return h.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:this.checkIsMobile(),this.make(),this.addLoader(),this.appendSVGSprite(),this.loadStyles();case 5:case"end":return Y.stop()}},z,this)})),function(){return L.apply(this,arguments)})},{key:"toggleReadOnly",value:function(z){z?this.disableModuleBindings():this.enableModuleBindings()}},{key:"checkEmptiness",value:function(){var z=this.Editor.BlockManager;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,z.isEditorEmpty)}},{key:"destroy",value:function(){this.nodes.holder.innerHTML=""}},{key:"closeAllToolbars",value:function(){var z=this.Editor,Y=z.Toolbox,ce=z.BlockSettings,re=z.InlineToolbar,Z=z.ConversionToolbar;ce.close(),re.close(),Z.close(),Y.close()}},{key:"checkIsMobile",value:function(){this.isMobile=window.innerWidth<650}},{key:"make",value:function(){this.nodes.holder=N.default.getHolder(this.config.holder),this.nodes.wrapper=N.default.make("div",[this.CSS.editorWrapper].concat((0,u.default)(this.isRtl?[this.CSS.editorRtlFix]:[]))),this.nodes.redactor=N.default.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}},{key:"loadStyles",value:function(){var z=e(395);if(!N.default.get("editor-js-styles")){var Y=N.default.make("style",null,{id:"editor-js-styles",textContent:z.toString()});N.default.prepend(document.head,Y)}}},{key:"enableModuleBindings",value:function(){var z=this;this.readOnlyMutableListeners.on(this.nodes.redactor,"click",function(Y){z.redactorClicked(Y)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",function(Y){z.documentTouched(Y)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",function(Y){z.documentTouched(Y)},!0),this.readOnlyMutableListeners.on(document,"keydown",function(Y){z.documentKeydown(Y)},!0),this.readOnlyMutableListeners.on(document,"click",function(Y){z.documentClicked(Y)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",function(Y){z.selectionChanged(Y)},!0),this.readOnlyMutableListeners.on(window,"resize",function(){z.resizeDebouncer()},{passive:!0})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"windowResize",value:function(){this.contentRectCache=null,this.checkIsMobile()}},{key:"documentKeydown",value:function(z){switch(z.keyCode){case m.keyCodes.ENTER:this.enterPressed(z);break;case m.keyCodes.BACKSPACE:this.backspacePressed(z);break;case m.keyCodes.ESC:this.escapePressed(z);break;default:this.defaultBehaviour(z)}}},{key:"defaultBehaviour",value:function(z){var Y=this.Editor.BlockManager.currentBlock,ce=z.target.closest(".".concat(this.CSS.editorWrapper)),re=z.altKey||z.ctrlKey||z.metaKey||z.shiftKey;Y===void 0||ce!==null?ce||Y&&re||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(z)}},{key:"backspacePressed",value:function(z){var Y=this.Editor,ce=Y.BlockManager,re=Y.BlockSelection,Z=Y.Caret;if(re.anyBlockSelected&&!y.default.isSelectionExists){var me=ce.removeSelectedBlocks();Z.setToBlock(ce.insertDefaultBlockAtIndex(me,!0),Z.positions.START),re.clearSelection(z),z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation()}}},{key:"escapePressed",value:function(z){this.Editor.BlockSelection.clearSelection(z),this.Editor.Toolbox.opened?this.Editor.Toolbox.close():this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}},{key:"enterPressed",value:function(z){var Y=this.Editor,ce=Y.BlockManager,re=Y.BlockSelection,Z=ce.currentBlockIndex>=0;if(re.anyBlockSelected&&!y.default.isSelectionExists)return re.clearSelection(z),z.preventDefault(),z.stopImmediatePropagation(),void z.stopPropagation();if(!this.someToolbarOpened&&Z&&z.target.tagName==="BODY"){var me=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(me),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.move(),this.Editor.Toolbar.plusButton.show()}this.Editor.BlockSelection.clearSelection(z)}},{key:"documentClicked",value:function(z){if(z.isTrusted){var Y=z.target;this.nodes.holder.contains(Y)||y.default.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.InlineToolbar.close(),this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close()),this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted||this.Editor.BlockSelection.clearSelection(z)}}},{key:"documentTouched",value:function(z){var Y=z.target;if(Y===this.nodes.redactor){var ce=z instanceof MouseEvent?z.clientX:z.touches[0].clientX,re=z instanceof MouseEvent?z.clientY:z.touches[0].clientY;Y=document.elementFromPoint(ce,re)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(Y),this.Editor.BlockManager.highlightCurrentNode()}catch(Z){this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.open(),this.Editor.Toolbar.plusButton.hide()}},{key:"redactorClicked",value:function(z){if(y.default.isCollapsed){var Y=function(){z.stopImmediatePropagation(),z.stopPropagation()},ce=z.target,re=z.metaKey||z.ctrlKey;if(N.default.isAnchor(ce)&&re){Y();var Z=ce.getAttribute("href"),me=m.getValidUrl(Z);m.openTab(me)}else this.Editor.BlockManager.currentBlock||(Y(),this.Editor.BlockManager.insert()),this.Editor.BlockManager.currentBlock.tool.isDefault&&(Y(),this.Editor.BlockManager.currentBlock.isEmpty&&this.Editor.Toolbar.plusButton.show())}}},{key:"selectionChanged",value:function(z){var Y=this.Editor,ce=Y.CrossBlockSelection,re=Y.BlockSelection,Z=y.default.anchorElement;ce.isCrossBlockSelectionStarted&&re.anyBlockSelected&&y.default.get().removeAllRanges(),Z&&Z.closest(".".concat(b.default.CSS.content))?(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(Z),this.Editor.InlineToolbar.tryToShow(!0)):this.Editor.InlineToolbar.containsNode(Z)||this.Editor.InlineToolbar.close()}},{key:"appendSVGSprite",value:function(){var z=N.default.make("div");z.hidden=!0,z.style.display="none",z.innerHTML=E.default,N.default.append(this.nodes.wrapper,z)}},{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorLoader:"codex-editor__loader",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}},{key:"contentRect",get:function(){if(this.contentRectCache)return this.contentRectCache;var z=this.nodes.wrapper.querySelector(".".concat(b.default.CSS.content));return z?(this.contentRectCache=z.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}},{key:"someToolbarOpened",get:function(){var z=this.Editor,Y=z.Toolbox,ce=z.BlockSettings,re=z.InlineToolbar,Z=z.ConversionToolbar;return ce.opened||re.opened||Z.opened||Y.opened}},{key:"someFlipperButtonFocused",get:function(){return Object.entries(this.Editor).filter(function(z){var Y=(0,s.default)(z,2);return Y[0],Y[1].flipper instanceof S.default}).some(function(z){var Y=(0,s.default)(z,2);return Y[0],Y[1].flipper.currentItem})}}]),P}(O.default);o.default=R,R.displayName="UI",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){e(184),r.exports=e(356)},function(r,t,e){e(185)},function(r,t,e){"use strict";e(186),e(329),e(331),e(334),e(336),e(338),e(340),e(342),e(344),e(346),e(348),e(350),e(352),e(140)},function(r,t,e){e(187),e(190),e(191),e(192),e(193),e(194),e(195),e(196),e(197),e(198),e(199),e(200),e(201),e(202),e(203),e(204),e(205),e(206),e(207),e(208),e(209),e(210),e(211),e(212),e(213),e(214),e(215),e(216),e(217),e(218),e(219),e(220),e(221),e(222),e(223),e(224),e(225),e(226),e(227),e(228),e(229),e(230),e(231),e(233),e(234),e(235),e(236),e(237),e(238),e(239),e(240),e(241),e(242),e(243),e(244),e(245),e(246),e(247),e(248),e(249),e(250),e(251),e(252),e(253),e(254),e(255),e(256),e(257),e(258),e(259),e(260),e(261),e(262),e(263),e(264),e(265),e(266),e(268),e(269),e(271),e(272),e(273),e(274),e(275),e(276),e(277),e(279),e(280),e(281),e(282),e(283),e(284),e(285),e(286),e(287),e(288),e(289),e(290),e(291),e(102),e(292),e(129),e(293),e(130),e(294),e(295),e(296),e(297),e(131),e(300),e(301),e(302),e(303),e(304),e(305),e(306),e(307),e(308),e(309),e(310),e(311),e(312),e(313),e(314),e(315),e(316),e(317),e(318),e(319),e(320),e(321),e(322),e(323),e(324),e(325),e(326),e(327),e(328),r.exports=e(17)},function(r,t,e){"use strict";var n=e(10),i=e(26),a=e(18),o=e(0),s=e(23),u=e(41).KEY,h=e(11),d=e(67),_=e(53),g=e(44),w=e(14),C=e(83),k=e(110),E=e(189),O=e(70),N=e(12),m=e(13),y=e(20),b=e(28),S=e(40),A=e(43),I=e(48),T=e(113),R=e(34),B=e(69),F=e(19),L=e(46),j=R.f,P=F.f,z=T.f,Y=n.Symbol,ce=n.JSON,re=ce&&ce.stringify,Z=w("_hidden"),me=w("toPrimitive"),ke={}.propertyIsEnumerable,ne=d("symbol-registry"),oe=d("symbols"),ge=d("op-symbols"),ve=Object.prototype,pe=typeof Y=="function"&&!!B.f,he=n.QObject,Ae=!he||!he.prototype||!he.prototype.findChild,Me=a&&h(function(){return I(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a!=7})?function(Ce,Ie,Ve){var ct=j(ve,Ie);ct&&delete ve[Ie],P(Ce,Ie,Ve),ct&&Ce!==ve&&P(ve,Ie,ct)}:P,De=function(Ce){var Ie=oe[Ce]=I(Y.prototype);return Ie._k=Ce,Ie},Je=pe&&typeof Y.iterator=="symbol"?function(Ce){return typeof Ce=="symbol"}:function(Ce){return Ce instanceof Y},Se=function(Ce,Ie,Ve){return Ce===ve&&Se(ge,Ie,Ve),N(Ce),Ie=S(Ie,!0),N(Ve),i(oe,Ie)?(Ve.enumerable?(i(Ce,Z)&&Ce[Z][Ie]&&(Ce[Z][Ie]=!1),Ve=I(Ve,{enumerable:A(0,!1)})):(i(Ce,Z)||P(Ce,Z,A(1,{})),Ce[Z][Ie]=!0),Me(Ce,Ie,Ve)):P(Ce,Ie,Ve)},ze=function(Ce,Ie){N(Ce);for(var Ve,ct=E(Ie=b(Ie)),Pt=0,Mt=ct.length;Mt>Pt;)Se(Ce,Ve=ct[Pt++],Ie[Ve]);return Ce},at=function(Ce){var Ie=ke.call(this,Ce=S(Ce,!0));return!(this===ve&&i(oe,Ce)&&!i(ge,Ce))&&(!(Ie||!i(this,Ce)||!i(oe,Ce)||i(this,Z)&&this[Z][Ce])||Ie)},Qe=function(Ce,Ie){if(Ce=b(Ce),Ie=S(Ie,!0),Ce!==ve||!i(oe,Ie)||i(ge,Ie)){var Ve=j(Ce,Ie);return!Ve||!i(oe,Ie)||i(Ce,Z)&&Ce[Z][Ie]||(Ve.enumerable=!0),Ve}},lt=function(Ce){for(var Ie,Ve=z(b(Ce)),ct=[],Pt=0;Ve.length>Pt;)i(oe,Ie=Ve[Pt++])||Ie==Z||Ie==u||ct.push(Ie);return ct},At=function(Ce){for(var Ie,Ve=Ce===ve,ct=z(Ve?ge:b(Ce)),Pt=[],Mt=0;ct.length>Mt;)!i(oe,Ie=ct[Mt++])||Ve&&!i(ve,Ie)||Pt.push(oe[Ie]);return Pt};pe||(s((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor!");var Ce=g(arguments.length>0?arguments[0]:void 0),Ie=function(Ve){this===ve&&Ie.call(ge,Ve),i(this,Z)&&i(this[Z],Ce)&&(this[Z][Ce]=!1),Me(this,Ce,A(1,Ve))};return a&&Ae&&Me(ve,Ce,{configurable:!0,set:Ie}),De(Ce)}).prototype,"toString",function(){return this._k}),R.f=Qe,F.f=Se,e(49).f=T.f=lt,e(63).f=at,B.f=At,a&&!e(45)&&s(ve,"propertyIsEnumerable",at,!0),C.f=function(Ce){return De(w(Ce))}),o(o.G+o.W+o.F*!pe,{Symbol:Y});for(var It="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),bt=0;It.length>bt;)w(It[bt++]);for(var Et=L(w.store),Rt=0;Et.length>Rt;)k(Et[Rt++]);o(o.S+o.F*!pe,"Symbol",{for:function(Ce){return i(ne,Ce+="")?ne[Ce]:ne[Ce]=Y(Ce)},keyFor:function(Ce){if(!Je(Ce))throw TypeError(Ce+" is not a symbol!");for(var Ie in ne)if(ne[Ie]===Ce)return Ie},useSetter:function(){Ae=!0},useSimple:function(){Ae=!1}}),o(o.S+o.F*!pe,"Object",{create:function(Ce,Ie){return Ie===void 0?I(Ce):ze(I(Ce),Ie)},defineProperty:Se,defineProperties:ze,getOwnPropertyDescriptor:Qe,getOwnPropertyNames:lt,getOwnPropertySymbols:At});var Lt=h(function(){B.f(1)});o(o.S+o.F*Lt,"Object",{getOwnPropertySymbols:function(Ce){return B.f(y(Ce))}}),ce&&o(o.S+o.F*(!pe||h(function(){var Ce=Y();return re([Ce])!="[null]"||re({a:Ce})!="{}"||re(Object(Ce))!="{}"})),"JSON",{stringify:function(Ce){for(var Ie,Ve,ct=[Ce],Pt=1;arguments.length>Pt;)ct.push(arguments[Pt++]);if(Ve=Ie=ct[1],(m(Ie)||Ce!==void 0)&&!Je(Ce))return O(Ie)||(Ie=function(Mt,Zt){if(typeof Ve=="function"&&(Zt=Ve.call(this,Mt,Zt)),!Je(Zt))return Zt}),ct[1]=Ie,re.apply(ce,ct)}}),Y.prototype[me]||e(27)(Y.prototype,me,Y.prototype.valueOf),_(Y,"Symbol"),_(Math,"Math",!0),_(n.JSON,"JSON",!0)},function(r,t,e){r.exports=e(67)("native-function-to-string",Function.toString)},function(r,t,e){var n=e(46),i=e(69),a=e(63);r.exports=function(o){var s=n(o),u=i.f;if(u)for(var h,d=u(o),_=a.f,g=0;d.length>g;)_.call(o,h=d[g++])&&s.push(h);return s}},function(r,t,e){var n=e(0);n(n.S,"Object",{create:e(48)})},function(r,t,e){var n=e(0);n(n.S+n.F*!e(18),"Object",{defineProperty:e(19).f})},function(r,t,e){var n=e(0);n(n.S+n.F*!e(18),"Object",{defineProperties:e(112)})},function(r,t,e){var n=e(28),i=e(34).f;e(35)("getOwnPropertyDescriptor",function(){return function(a,o){return i(n(a),o)}})},function(r,t,e){var n=e(20),i=e(50);e(35)("getPrototypeOf",function(){return function(a){return i(n(a))}})},function(r,t,e){var n=e(20),i=e(46);e(35)("keys",function(){return function(a){return i(n(a))}})},function(r,t,e){e(35)("getOwnPropertyNames",function(){return e(113).f})},function(r,t,e){var n=e(13),i=e(41).onFreeze;e(35)("freeze",function(a){return function(o){return a&&n(o)?a(i(o)):o}})},function(r,t,e){var n=e(13),i=e(41).onFreeze;e(35)("seal",function(a){return function(o){return a&&n(o)?a(i(o)):o}})},function(r,t,e){var n=e(13),i=e(41).onFreeze;e(35)("preventExtensions",function(a){return function(o){return a&&n(o)?a(i(o)):o}})},function(r,t,e){var n=e(13);e(35)("isFrozen",function(i){return function(a){return!n(a)||!!i&&i(a)}})},function(r,t,e){var n=e(13);e(35)("isSealed",function(i){return function(a){return!n(a)||!!i&&i(a)}})},function(r,t,e){var n=e(13);e(35)("isExtensible",function(i){return function(a){return!!n(a)&&(!i||i(a))}})},function(r,t,e){var n=e(0);n(n.S+n.F,"Object",{assign:e(114)})},function(r,t,e){var n=e(0);n(n.S,"Object",{is:e(115)})},function(r,t,e){var n=e(0);n(n.S,"Object",{setPrototypeOf:e(87).set})},function(r,t,e){"use strict";var n=e(64),i={};i[e(14)("toStringTag")]="z",i+""!="[object z]"&&e(23)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(r,t,e){var n=e(0);n(n.P,"Function",{bind:e(116)})},function(r,t,e){var n=e(19).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||e(18)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(o){return""}}})},function(r,t,e){"use strict";var n=e(13),i=e(50),a=e(14)("hasInstance"),o=Function.prototype;a in o||e(19).f(o,a,{value:function(s){if(typeof this!="function"||!n(s))return!1;if(!n(this.prototype))return s instanceof this;for(;s=i(s);)if(this.prototype===s)return!0;return!1}})},function(r,t,e){var n=e(0),i=e(118);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(r,t,e){var n=e(0),i=e(119);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(r,t,e){"use strict";var n=e(10),i=e(26),a=e(37),o=e(89),s=e(40),u=e(11),h=e(49).f,d=e(34).f,_=e(19).f,g=e(54).trim,w=n.Number,C=w,k=w.prototype,E=a(e(48)(k))=="Number",O="trim"in String.prototype,N=function(S){var A=s(S,!1);if(typeof A=="string"&&A.length>2){var I,T,R,B=(A=O?A.trim():g(A,3)).charCodeAt(0);if(B===43||B===45){if((I=A.charCodeAt(2))===88||I===120)return NaN}else if(B===48){switch(A.charCodeAt(1)){case 66:case 98:T=2,R=49;break;case 79:case 111:T=8,R=55;break;default:return+A}for(var F,L=A.slice(2),j=0,P=L.length;j<P;j++)if((F=L.charCodeAt(j))<48||F>R)return NaN;return parseInt(L,T)}}return+A};if(!w(" 0o1")||!w("0b1")||w("+0x1")){w=function(S){var A=arguments.length<1?0:S,I=this;return I instanceof w&&(E?u(function(){k.valueOf.call(I)}):a(I)!="Number")?o(new C(N(A)),I,w):N(A)};for(var m,y=e(18)?h(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;y.length>b;b++)i(C,m=y[b])&&!i(w,m)&&_(w,m,d(C,m));w.prototype=k,k.constructor=w,e(23)(n,"Number",w)}},function(r,t,e){"use strict";var n=e(0),i=e(33),a=e(120),o=e(90),s=1 .toFixed,u=Math.floor,h=[0,0,0,0,0,0],d="Number.toFixed: incorrect invocation!",_=function(k,E){for(var O=-1,N=E;++O<6;)N+=k*h[O],h[O]=N%1e7,N=u(N/1e7)},g=function(k){for(var E=6,O=0;--E>=0;)O+=h[E],h[E]=u(O/k),O=O%k*1e7},w=function(){for(var k=6,E="";--k>=0;)if(E!==""||k===0||h[k]!==0){var O=String(h[k]);E=E===""?O:E+o.call("0",7-O.length)+O}return E},C=function(k,E,O){return E===0?O:E%2==1?C(k,E-1,O*k):C(k*k,E/2,O)};n(n.P+n.F*(!!s&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!e(11)(function(){s.call({})})),"Number",{toFixed:function(k){var E,O,N,m,y=a(this,d),b=i(k),S="",A="0";if(b<0||b>20)throw RangeError(d);if(y!=y)return"NaN";if(y<=-1e21||y>=1e21)return String(y);if(y<0&&(S="-",y=-y),y>1e-21)if(O=(E=function(I){for(var T=0,R=I;R>=4096;)T+=12,R/=4096;for(;R>=2;)T+=1,R/=2;return T}(y*C(2,69,1))-69)<0?y*C(2,-E,1):y/C(2,E,1),O*=4503599627370496,(E=52-E)>0){for(_(0,O),N=b;N>=7;)_(1e7,0),N-=7;for(_(C(10,N,1),0),N=E-1;N>=23;)g(1<<23),N-=23;g(1<<N),_(1,1),g(2),A=w()}else _(0,O),_(1<<-E,0),A=w()+o.call("0",b);return A=b>0?S+((m=A.length)<=b?"0."+o.call("0",b-m)+A:A.slice(0,m-b)+"."+A.slice(m-b)):S+A}})},function(r,t,e){"use strict";var n=e(0),i=e(11),a=e(120),o=1 .toPrecision;n(n.P+n.F*(i(function(){return o.call(1,void 0)!=="1"})||!i(function(){o.call({})})),"Number",{toPrecision:function(s){var u=a(this,"Number#toPrecision: incorrect invocation!");return s===void 0?o.call(u):o.call(u,s)}})},function(r,t,e){var n=e(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(r,t,e){var n=e(0),i=e(10).isFinite;n(n.S,"Number",{isFinite:function(a){return typeof a=="number"&&i(a)}})},function(r,t,e){var n=e(0);n(n.S,"Number",{isInteger:e(121)})},function(r,t,e){var n=e(0);n(n.S,"Number",{isNaN:function(i){return i!=i}})},function(r,t,e){var n=e(0),i=e(121),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(o){return i(o)&&a(o)<=9007199254740991}})},function(r,t,e){var n=e(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(r,t,e){var n=e(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(r,t,e){var n=e(0),i=e(119);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(r,t,e){var n=e(0),i=e(118);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(r,t,e){var n=e(0),i=e(122),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&Math.floor(o(Number.MAX_VALUE))==710&&o(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:i(s-1+a(s-1)*a(s+1))}})},function(r,t,e){var n=e(0),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function a(o){return isFinite(o=+o)&&o!=0?o<0?-a(-o):Math.log(o+Math.sqrt(o*o+1)):o}})},function(r,t,e){var n=e(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(a){return(a=+a)==0?a:Math.log((1+a)/(1-a))/2}})},function(r,t,e){var n=e(0),i=e(91);n(n.S,"Math",{cbrt:function(a){return i(a=+a)*Math.pow(Math.abs(a),1/3)}})},function(r,t,e){var n=e(0);n(n.S,"Math",{clz32:function(i){return(i>>>=0)?31-Math.floor(Math.log(i+.5)*Math.LOG2E):32}})},function(r,t,e){var n=e(0),i=Math.exp;n(n.S,"Math",{cosh:function(a){return(i(a=+a)+i(-a))/2}})},function(r,t,e){var n=e(0),i=e(92);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(r,t,e){var n=e(0);n(n.S,"Math",{fround:e(232)})},function(r,t,e){var n=e(91),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126);r.exports=Math.fround||function(h){var d,_,g=Math.abs(h),w=n(h);return g<u?w*(g/u/o+1/a-1/a)*u*o:(_=(d=(1+o/a)*g)-(d-g))>s||_!=_?w*(1/0):w*_}},function(r,t,e){var n=e(0),i=Math.abs;n(n.S,"Math",{hypot:function(a,o){for(var s,u,h=0,d=0,_=arguments.length,g=0;d<_;)g<(s=i(arguments[d++]))?(h=h*(u=g/s)*u+1,g=s):h+=s>0?(u=s/g)*u:s;return g===1/0?1/0:g*Math.sqrt(h)}})},function(r,t,e){var n=e(0),i=Math.imul;n(n.S+n.F*e(11)(function(){return i(4294967295,5)!=-5||i.length!=2}),"Math",{imul:function(a,o){var s=+a,u=+o,h=65535&s,d=65535&u;return 0|h*d+((65535&s>>>16)*d+h*(65535&u>>>16)<<16>>>0)}})},function(r,t,e){var n=e(0);n(n.S,"Math",{log10:function(i){return Math.log(i)*Math.LOG10E}})},function(r,t,e){var n=e(0);n(n.S,"Math",{log1p:e(122)})},function(r,t,e){var n=e(0);n(n.S,"Math",{log2:function(i){return Math.log(i)/Math.LN2}})},function(r,t,e){var n=e(0);n(n.S,"Math",{sign:e(91)})},function(r,t,e){var n=e(0),i=e(92),a=Math.exp;n(n.S+n.F*e(11)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(o){return Math.abs(o=+o)<1?(i(o)-i(-o))/2:(a(o-1)-a(-o-1))*(Math.E/2)}})},function(r,t,e){var n=e(0),i=e(92),a=Math.exp;n(n.S,"Math",{tanh:function(o){var s=i(o=+o),u=i(-o);return s==1/0?1:u==1/0?-1:(s-u)/(a(o)+a(-o))}})},function(r,t,e){var n=e(0);n(n.S,"Math",{trunc:function(i){return(i>0?Math.floor:Math.ceil)(i)}})},function(r,t,e){var n=e(0),i=e(47),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&o.length!=1),"String",{fromCodePoint:function(s){for(var u,h=[],d=arguments.length,_=0;d>_;){if(u=+arguments[_++],i(u,1114111)!==u)throw RangeError(u+" is not a valid code point");h.push(u<65536?a(u):a(55296+((u-=65536)>>10),u%1024+56320))}return h.join("")}})},function(r,t,e){var n=e(0),i=e(28),a=e(16);n(n.S,"String",{raw:function(o){for(var s=i(o.raw),u=a(s.length),h=arguments.length,d=[],_=0;u>_;)d.push(String(s[_++])),_<h&&d.push(String(arguments[_]));return d.join("")}})},function(r,t,e){"use strict";e(54)("trim",function(n){return function(){return n(this,3)}})},function(r,t,e){"use strict";var n=e(93)(!0);e(94)(String,"String",function(i){this._t=String(i),this._i=0},function(){var i,a=this._t,o=this._i;return o>=a.length?{value:void 0,done:!0}:(i=n(a,o),this._i+=i.length,{value:i,done:!1})})},function(r,t,e){"use strict";var n=e(0),i=e(93)(!1);n(n.P,"String",{codePointAt:function(a){return i(this,a)}})},function(r,t,e){"use strict";var n=e(0),i=e(16),a=e(95),o="".endsWith;n(n.P+n.F*e(97)("endsWith"),"String",{endsWith:function(s){var u=a(this,s,"endsWith"),h=arguments.length>1?arguments[1]:void 0,d=i(u.length),_=h===void 0?d:Math.min(i(h),d),g=String(s);return o?o.call(u,g,_):u.slice(_-g.length,_)===g}})},function(r,t,e){"use strict";var n=e(0),i=e(95);n(n.P+n.F*e(97)("includes"),"String",{includes:function(a){return!!~i(this,a,"includes").indexOf(a,arguments.length>1?arguments[1]:void 0)}})},function(r,t,e){var n=e(0);n(n.P,"String",{repeat:e(90)})},function(r,t,e){"use strict";var n=e(0),i=e(16),a=e(95),o="".startsWith;n(n.P+n.F*e(97)("startsWith"),"String",{startsWith:function(s){var u=a(this,s,"startsWith"),h=i(Math.min(arguments.length>1?arguments[1]:void 0,u.length)),d=String(s);return o?o.call(u,d,h):u.slice(h,h+d.length)===d}})},function(r,t,e){"use strict";e(24)("anchor",function(n){return function(i){return n(this,"a","name",i)}})},function(r,t,e){"use strict";e(24)("big",function(n){return function(){return n(this,"big","","")}})},function(r,t,e){"use strict";e(24)("blink",function(n){return function(){return n(this,"blink","","")}})},function(r,t,e){"use strict";e(24)("bold",function(n){return function(){return n(this,"b","","")}})},function(r,t,e){"use strict";e(24)("fixed",function(n){return function(){return n(this,"tt","","")}})},function(r,t,e){"use strict";e(24)("fontcolor",function(n){return function(i){return n(this,"font","color",i)}})},function(r,t,e){"use strict";e(24)("fontsize",function(n){return function(i){return n(this,"font","size",i)}})},function(r,t,e){"use strict";e(24)("italics",function(n){return function(){return n(this,"i","","")}})},function(r,t,e){"use strict";e(24)("link",function(n){return function(i){return n(this,"a","href",i)}})},function(r,t,e){"use strict";e(24)("small",function(n){return function(){return n(this,"small","","")}})},function(r,t,e){"use strict";e(24)("strike",function(n){return function(){return n(this,"strike","","")}})},function(r,t,e){"use strict";e(24)("sub",function(n){return function(){return n(this,"sub","","")}})},function(r,t,e){"use strict";e(24)("sup",function(n){return function(){return n(this,"sup","","")}})},function(r,t,e){var n=e(0);n(n.S,"Date",{now:function(){return new Date().getTime()}})},function(r,t,e){"use strict";var n=e(0),i=e(20),a=e(40);n(n.P+n.F*e(11)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(o){var s=i(this),u=a(s);return typeof u!="number"||isFinite(u)?s.toISOString():null}})},function(r,t,e){var n=e(0),i=e(267);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(r,t,e){"use strict";var n=e(11),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(s){return s>9?s:"0"+s};r.exports=n(function(){return a.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var s=this,u=s.getUTCFullYear(),h=s.getUTCMilliseconds(),d=u<0?"-":u>9999?"+":"";return d+("00000"+Math.abs(u)).slice(d?-6:-4)+"-"+o(s.getUTCMonth()+1)+"-"+o(s.getUTCDate())+"T"+o(s.getUTCHours())+":"+o(s.getUTCMinutes())+":"+o(s.getUTCSeconds())+"."+(h>99?h:"0"+o(h))+"Z"}:a},function(r,t,e){var n=Date.prototype,i=n.toString,a=n.getTime;new Date(NaN)+""!="Invalid Date"&&e(23)(n,"toString",function(){var o=a.call(this);return o==o?i.call(this):"Invalid Date"})},function(r,t,e){var n=e(14)("toPrimitive"),i=Date.prototype;n in i||e(27)(i,n,e(270))},function(r,t,e){"use strict";var n=e(12),i=e(40);r.exports=function(a){if(a!=="string"&&a!=="number"&&a!=="default")throw TypeError("Incorrect hint");return i(n(this),a!="number")}},function(r,t,e){var n=e(0);n(n.S,"Array",{isArray:e(70)})},function(r,t,e){"use strict";var n=e(31),i=e(0),a=e(20),o=e(124),s=e(98),u=e(16),h=e(99),d=e(100);i(i.S+i.F*!e(71)(function(_){Array.from(_)}),"Array",{from:function(_){var g,w,C,k,E=a(_),O=typeof this=="function"?this:Array,N=arguments.length,m=N>1?arguments[1]:void 0,y=m!==void 0,b=0,S=d(E);if(y&&(m=n(m,N>2?arguments[2]:void 0,2)),S==null||O==Array&&s(S))for(w=new O(g=u(E.length));g>b;b++)h(w,b,y?m(E[b],b):E[b]);else for(k=S.call(E),w=new O;!(C=k.next()).done;b++)h(w,b,y?o(k,m,[C.value,b],!0):C.value);return w.length=b,w}})},function(r,t,e){"use strict";var n=e(0),i=e(99);n(n.S+n.F*e(11)(function(){function a(){}return!(Array.of.call(a)instanceof a)}),"Array",{of:function(){for(var a=0,o=arguments.length,s=new(typeof this=="function"?this:Array)(o);o>a;)i(s,a,arguments[a++]);return s.length=o,s}})},function(r,t,e){"use strict";var n=e(0),i=e(28),a=[].join;n(n.P+n.F*(e(62)!=Object||!e(30)(a)),"Array",{join:function(o){return a.call(i(this),o===void 0?",":o)}})},function(r,t,e){"use strict";var n=e(0),i=e(86),a=e(37),o=e(47),s=e(16),u=[].slice;n(n.P+n.F*e(11)(function(){i&&u.call(i)}),"Array",{slice:function(h,d){var _=s(this.length),g=a(this);if(d=d===void 0?_:d,g=="Array")return u.call(this,h,d);for(var w=o(h,_),C=o(d,_),k=s(C-w),E=new Array(k),O=0;O<k;O++)E[O]=g=="String"?this.charAt(w+O):this[w+O];return E}})},function(r,t,e){"use strict";var n=e(0),i=e(32),a=e(20),o=e(11),s=[].sort,u=[1,2,3];n(n.P+n.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!e(30)(s)),"Array",{sort:function(h){return h===void 0?s.call(a(this)):s.call(a(this),i(h))}})},function(r,t,e){"use strict";var n=e(0),i=e(36)(0),a=e(30)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(o){return i(this,o,arguments[1])}})},function(r,t,e){var n=e(13),i=e(70),a=e(14)("species");r.exports=function(o){var s;return i(o)&&(typeof(s=o.constructor)!="function"||s!==Array&&!i(s.prototype)||(s=void 0),n(s)&&(s=s[a])===null&&(s=void 0)),s===void 0?Array:s}},function(r,t,e){"use strict";var n=e(0),i=e(36)(1);n(n.P+n.F*!e(30)([].map,!0),"Array",{map:function(a){return i(this,a,arguments[1])}})},function(r,t,e){"use strict";var n=e(0),i=e(36)(2);n(n.P+n.F*!e(30)([].filter,!0),"Array",{filter:function(a){return i(this,a,arguments[1])}})},function(r,t,e){"use strict";var n=e(0),i=e(36)(3);n(n.P+n.F*!e(30)([].some,!0),"Array",{some:function(a){return i(this,a,arguments[1])}})},function(r,t,e){"use strict";var n=e(0),i=e(36)(4);n(n.P+n.F*!e(30)([].every,!0),"Array",{every:function(a){return i(this,a,arguments[1])}})},function(r,t,e){"use strict";var n=e(0),i=e(126);n(n.P+n.F*!e(30)([].reduce,!0),"Array",{reduce:function(a){return i(this,a,arguments.length,arguments[1],!1)}})},function(r,t,e){"use strict";var n=e(0),i=e(126);n(n.P+n.F*!e(30)([].reduceRight,!0),"Array",{reduceRight:function(a){return i(this,a,arguments.length,arguments[1],!0)}})},function(r,t,e){"use strict";var n=e(0),i=e(68)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!e(30)(a)),"Array",{indexOf:function(s){return o?a.apply(this,arguments)||0:i(this,s,arguments[1])}})},function(r,t,e){"use strict";var n=e(0),i=e(28),a=e(33),o=e(16),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!e(30)(s)),"Array",{lastIndexOf:function(h){if(u)return s.apply(this,arguments)||0;var d=i(this),_=o(d.length),g=_-1;for(arguments.length>1&&(g=Math.min(g,a(arguments[1]))),g<0&&(g=_+g);g>=0;g--)if(g in d&&d[g]===h)return g||0;return-1}})},function(r,t,e){var n=e(0);n(n.P,"Array",{copyWithin:e(127)}),e(51)("copyWithin")},function(r,t,e){var n=e(0);n(n.P,"Array",{fill:e(101)}),e(51)("fill")},function(r,t,e){"use strict";var n=e(0),i=e(36)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(o){return i(this,o,arguments.length>1?arguments[1]:void 0)}}),e(51)("find")},function(r,t,e){"use strict";var n=e(0),i=e(36)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(s){return i(this,s,arguments.length>1?arguments[1]:void 0)}}),e(51)(a)},function(r,t,e){e(56)("Array")},function(r,t,e){var n=e(10),i=e(89),a=e(19).f,o=e(49).f,s=e(96),u=e(72),h=n.RegExp,d=h,_=h.prototype,g=/a/g,w=/a/g,C=new h(g)!==g;if(e(18)&&(!C||e(11)(function(){return w[e(14)("match")]=!1,h(g)!=g||h(w)==w||h(g,"i")!="/a/i"}))){h=function(N,m){var y=this instanceof h,b=s(N),S=m===void 0;return!y&&b&&N.constructor===h&&S?N:i(C?new d(b&&!S?N.source:N,m):d((b=N instanceof h)?N.source:N,b&&S?u.call(N):m),y?this:_,h)};for(var k=function(N){N in h||a(h,N,{configurable:!0,get:function(){return d[N]},set:function(m){d[N]=m}})},E=o(d),O=0;E.length>O;)k(E[O++]);_.constructor=h,h.prototype=_,e(23)(n,"RegExp",h)}e(56)("RegExp")},function(r,t,e){"use strict";e(130);var n=e(12),i=e(72),a=e(18),o=/./.toString,s=function(u){e(23)(RegExp.prototype,"toString",u,!0)};e(11)(function(){return o.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var u=n(this);return"/".concat(u.source,"/","flags"in u?u.flags:!a&&u instanceof RegExp?i.call(u):void 0)}):o.name!="toString"&&s(function(){return o.call(this)})},function(r,t,e){"use strict";var n=e(12),i=e(16),a=e(104),o=e(73);e(74)("match",1,function(s,u,h,d){return[function(_){var g=s(this),w=_==null?void 0:_[u];return w!==void 0?w.call(_,g):new RegExp(_)[u](String(g))},function(_){var g=d(h,_,this);if(g.done)return g.value;var w=n(_),C=String(this);if(!w.global)return o(w,C);var k=w.unicode;w.lastIndex=0;for(var E,O=[],N=0;(E=o(w,C))!==null;){var m=String(E[0]);O[N]=m,m===""&&(w.lastIndex=a(C,i(w.lastIndex),k)),N++}return N===0?null:O}]})},function(r,t,e){"use strict";var n=e(12),i=e(20),a=e(16),o=e(33),s=e(104),u=e(73),h=Math.max,d=Math.min,_=Math.floor,g=/\$([$&`']|\d\d?|<[^>]*>)/g,w=/\$([$&`']|\d\d?)/g;e(74)("replace",2,function(C,k,E,O){return[function(m,y){var b=C(this),S=m==null?void 0:m[k];return S!==void 0?S.call(m,b,y):E.call(String(b),m,y)},function(m,y){var b=O(E,m,this,y);if(b.done)return b.value;var S=n(m),A=String(this),I=typeof y=="function";I||(y=String(y));var T=S.global;if(T){var R=S.unicode;S.lastIndex=0}for(var B=[];;){var F=u(S,A);if(F===null||(B.push(F),!T))break;String(F[0])===""&&(S.lastIndex=s(A,a(S.lastIndex),R))}for(var L,j="",P=0,z=0;z<B.length;z++){F=B[z];for(var Y=String(F[0]),ce=h(d(o(F.index),A.length),0),re=[],Z=1;Z<F.length;Z++)re.push((L=F[Z])===void 0?L:String(L));var me=F.groups;if(I){var ke=[Y].concat(re,ce,A);me!==void 0&&ke.push(me);var ne=String(y.apply(void 0,ke))}else ne=N(Y,A,ce,re,me,y);ce>=P&&(j+=A.slice(P,ce)+ne,P=ce+Y.length)}return j+A.slice(P)}];function N(m,y,b,S,A,I){var T=b+m.length,R=S.length,B=w;return A!==void 0&&(A=i(A),B=g),E.call(I,B,function(F,L){var j;switch(L.charAt(0)){case"$":return"$";case"&":return m;case"`":return y.slice(0,b);case"'":return y.slice(T);case"<":j=A[L.slice(1,-1)];break;default:var P=+L;if(P===0)return F;if(P>R){var z=_(P/10);return z===0?F:z<=R?S[z-1]===void 0?L.charAt(1):S[z-1]+L.charAt(1):F}j=S[P-1]}return j===void 0?"":j})}})},function(r,t,e){"use strict";var n=e(12),i=e(115),a=e(73);e(74)("search",1,function(o,s,u,h){return[function(d){var _=o(this),g=d==null?void 0:d[s];return g!==void 0?g.call(d,_):new RegExp(d)[s](String(_))},function(d){var _=h(u,d,this);if(_.done)return _.value;var g=n(d),w=String(this),C=g.lastIndex;i(C,0)||(g.lastIndex=0);var k=a(g,w);return i(g.lastIndex,C)||(g.lastIndex=C),k===null?-1:k.index}]})},function(r,t,e){"use strict";var n=e(96),i=e(12),a=e(65),o=e(104),s=e(16),u=e(73),h=e(103),d=e(11),_=Math.min,g=[].push,w="length",C=!d(function(){RegExp(4294967295,"y")});e(74)("split",2,function(k,E,O,N){var m;return m="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1)[w]!=4||"ab".split(/(?:ab)*/)[w]!=2||".".split(/(.?)(.?)/)[w]!=4||".".split(/()()/)[w]>1||"".split(/.?/)[w]?function(y,b){var S=String(this);if(y===void 0&&b===0)return[];if(!n(y))return O.call(S,y,b);for(var A,I,T,R=[],B=(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.unicode?"u":"")+(y.sticky?"y":""),F=0,L=b===void 0?4294967295:b>>>0,j=new RegExp(y.source,B+"g");(A=h.call(j,S))&&!((I=j.lastIndex)>F&&(R.push(S.slice(F,A.index)),A[w]>1&&A.index<S[w]&&g.apply(R,A.slice(1)),T=A[0][w],F=I,R[w]>=L));)j.lastIndex===A.index&&j.lastIndex++;return F===S[w]?!T&&j.test("")||R.push(""):R.push(S.slice(F)),R[w]>L?R.slice(0,L):R}:"0".split(void 0,0)[w]?function(y,b){return y===void 0&&b===0?[]:O.call(this,y,b)}:O,[function(y,b){var S=k(this),A=y==null?void 0:y[E];return A!==void 0?A.call(y,S,b):m.call(String(S),y,b)},function(y,b){var S=N(m,y,this,b,m!==O);if(S.done)return S.value;var A=i(y),I=String(this),T=a(A,RegExp),R=A.unicode,B=(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(C?"y":"g"),F=new T(C?A:"^(?:"+A.source+")",B),L=b===void 0?4294967295:b>>>0;if(L===0)return[];if(I.length===0)return u(F,I)===null?[I]:[];for(var j=0,P=0,z=[];P<I.length;){F.lastIndex=C?P:0;var Y,ce=u(F,C?I:I.slice(P));if(ce===null||(Y=_(s(F.lastIndex+(C?0:P)),I.length))===j)P=o(I,P,R);else{if(z.push(I.slice(j,P)),z.length===L)return z;for(var re=1;re<=ce.length-1;re++)if(z.push(ce[re]),z.length===L)return z;P=j=Y}}return z.push(I.slice(j)),z}]})},function(r,t,e){var n=e(10),i=e(105).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u=e(37)(o)=="process";r.exports=function(){var h,d,_,g=function(){var E,O;for(u&&(E=o.domain)&&E.exit();h;){O=h.fn,h=h.next;try{O()}catch(N){throw h?_():d=void 0,N}}d=void 0,E&&E.enter()};if(u)_=function(){o.nextTick(g)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var w=s.resolve(void 0);_=function(){w.then(g)}}else _=function(){i.call(n,g)};else{var C=!0,k=document.createTextNode("");new a(g).observe(k,{characterData:!0}),_=function(){k.data=C=!C}}return function(E){var O={fn:E,next:void 0};d&&(d.next=O),h||(h=O,_()),d=O}}},function(r,t){r.exports=function(e){try{return{e:!1,v:e()}}catch(n){return{e:!0,v:n}}}},function(r,t,e){"use strict";var n=e(134),i=e(52);r.exports=e(77)("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var o=n.getEntry(i(this,"Map"),a);return o&&o.v},set:function(a,o){return n.def(i(this,"Map"),a===0?0:a,o)}},n,!0)},function(r,t,e){"use strict";var n=e(134),i=e(52);r.exports=e(77)("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return n.def(i(this,"Set"),a=a===0?0:a,a)}},n)},function(r,t,e){"use strict";var n,i=e(10),a=e(36)(0),o=e(23),s=e(41),u=e(114),h=e(135),d=e(13),_=e(52),g=e(52),w=!i.ActiveXObject&&"ActiveXObject"in i,C=s.getWeak,k=Object.isExtensible,E=h.ufstore,O=function(y){return function(){return y(this,arguments.length>0?arguments[0]:void 0)}},N={get:function(y){if(d(y)){var b=C(y);return b===!0?E(_(this,"WeakMap")).get(y):b?b[this._i]:void 0}},set:function(y,b){return h.def(_(this,"WeakMap"),y,b)}},m=r.exports=e(77)("WeakMap",O,N,h,!0,!0);g&&w&&(u((n=h.getConstructor(O,"WeakMap")).prototype,N),s.NEED=!0,a(["delete","has","get","set"],function(y){var b=m.prototype,S=b[y];o(b,y,function(A,I){if(d(A)&&!k(A)){this._f||(this._f=new n);var T=this._f[y](A,I);return y=="set"?this:T}return S.call(this,A,I)})}))},function(r,t,e){"use strict";var n=e(135),i=e(52);e(77)("WeakSet",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return n.def(i(this,"WeakSet"),a,!0)}},n,!1,!0)},function(r,t,e){"use strict";var n=e(0),i=e(78),a=e(106),o=e(12),s=e(47),u=e(16),h=e(13),d=e(10).ArrayBuffer,_=e(65),g=a.ArrayBuffer,w=a.DataView,C=i.ABV&&d.isView,k=g.prototype.slice,E=i.VIEW;n(n.G+n.W+n.F*(d!==g),{ArrayBuffer:g}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(O){return C&&C(O)||h(O)&&E in O}}),n(n.P+n.U+n.F*e(11)(function(){return!new g(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(O,N){if(k!==void 0&&N===void 0)return k.call(o(this),O);for(var m=o(this).byteLength,y=s(O,m),b=s(N===void 0?m:N,m),S=new(_(this,g))(u(b-y)),A=new w(this),I=new w(S),T=0;y<b;)I.setUint8(T++,A.getUint8(y++));return S}}),e(56)("ArrayBuffer")},function(r,t,e){var n=e(0);n(n.G+n.W+n.F*!e(78).ABV,{DataView:e(106).DataView})},function(r,t,e){e(39)("Int8",1,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Uint8",1,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Uint8",1,function(n){return function(i,a,o){return n(this,i,a,o)}},!0)},function(r,t,e){e(39)("Int16",2,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Uint16",2,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Int32",4,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Uint32",4,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Float32",4,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){e(39)("Float64",8,function(n){return function(i,a,o){return n(this,i,a,o)}})},function(r,t,e){var n=e(0),i=e(32),a=e(12),o=(e(10).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!e(11)(function(){o(function(){})}),"Reflect",{apply:function(u,h,d){var _=i(u),g=a(d);return o?o(_,h,g):s.call(_,h,g)}})},function(r,t,e){var n=e(0),i=e(48),a=e(32),o=e(12),s=e(13),u=e(11),h=e(116),d=(e(10).Reflect||{}).construct,_=u(function(){function w(){}return!(d(function(){},[],w)instanceof w)}),g=!u(function(){d(function(){})});n(n.S+n.F*(_||g),"Reflect",{construct:function(w,C){a(w),o(C);var k=arguments.length<3?w:a(arguments[2]);if(g&&!_)return d(w,C,k);if(w==k){switch(C.length){case 0:return new w;case 1:return new w(C[0]);case 2:return new w(C[0],C[1]);case 3:return new w(C[0],C[1],C[2]);case 4:return new w(C[0],C[1],C[2],C[3])}var E=[null];return E.push.apply(E,C),new(h.apply(w,E))}var O=k.prototype,N=i(s(O)?O:Object.prototype),m=Function.apply.call(w,N,C);return s(m)?m:N}})},function(r,t,e){var n=e(19),i=e(0),a=e(12),o=e(40);i(i.S+i.F*e(11)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,u,h){a(s),u=o(u,!0),a(h);try{return n.f(s,u,h),!0}catch(d){return!1}}})},function(r,t,e){var n=e(0),i=e(34).f,a=e(12);n(n.S,"Reflect",{deleteProperty:function(o,s){var u=i(a(o),s);return!(u&&!u.configurable)&&delete o[s]}})},function(r,t,e){"use strict";var n=e(0),i=e(12),a=function(o){this._t=i(o),this._i=0;var s,u=this._k=[];for(s in o)u.push(s)};e(123)(a,"Object",function(){var o,s=this._k;do if(this._i>=s.length)return{value:void 0,done:!0};while(!((o=s[this._i++])in this._t));return{value:o,done:!1}}),n(n.S,"Reflect",{enumerate:function(o){return new a(o)}})},function(r,t,e){var n=e(34),i=e(50),a=e(26),o=e(0),s=e(13),u=e(12);o(o.S,"Reflect",{get:function h(d,_){var g,w,C=arguments.length<3?d:arguments[2];return u(d)===C?d[_]:(g=n.f(d,_))?a(g,"value")?g.value:g.get!==void 0?g.get.call(C):void 0:s(w=i(d))?h(w,_,C):void 0}})},function(r,t,e){var n=e(34),i=e(0),a=e(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(o,s){return n.f(a(o),s)}})},function(r,t,e){var n=e(0),i=e(50),a=e(12);n(n.S,"Reflect",{getPrototypeOf:function(o){return i(a(o))}})},function(r,t,e){var n=e(0);n(n.S,"Reflect",{has:function(i,a){return a in i}})},function(r,t,e){var n=e(0),i=e(12),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(o){return i(o),!a||a(o)}})},function(r,t,e){var n=e(0);n(n.S,"Reflect",{ownKeys:e(137)})},function(r,t,e){var n=e(0),i=e(12),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(o){i(o);try{return a&&a(o),!0}catch(s){return!1}}})},function(r,t,e){var n=e(19),i=e(34),a=e(50),o=e(26),s=e(0),u=e(43),h=e(12),d=e(13);s(s.S,"Reflect",{set:function _(g,w,C){var k,E,O=arguments.length<4?g:arguments[3],N=i.f(h(g),w);if(!N){if(d(E=a(g)))return _(E,w,C,O);N=u(0)}if(o(N,"value")){if(N.writable===!1||!d(O))return!1;if(k=i.f(O,w)){if(k.get||k.set||k.writable===!1)return!1;k.value=C,n.f(O,w,k)}else n.f(O,w,u(0,C));return!0}return N.set!==void 0&&(N.set.call(O,C),!0)}})},function(r,t,e){var n=e(0),i=e(87);i&&n(n.S,"Reflect",{setPrototypeOf:function(a,o){i.check(a,o);try{return i.set(a,o),!0}catch(s){return!1}}})},function(r,t,e){e(330),r.exports=e(17).Array.includes},function(r,t,e){"use strict";var n=e(0),i=e(68)(!0);n(n.P,"Array",{includes:function(a){return i(this,a,arguments.length>1?arguments[1]:void 0)}}),e(51)("includes")},function(r,t,e){e(332),r.exports=e(17).Array.flatMap},function(r,t,e){"use strict";var n=e(0),i=e(333),a=e(20),o=e(16),s=e(32),u=e(125);n(n.P,"Array",{flatMap:function(h){var d,_,g=a(this);return s(h),d=o(g.length),_=u(g,0),i(_,g,g,d,0,1,h,arguments[1]),_}}),e(51)("flatMap")},function(r,t,e){"use strict";var n=e(70),i=e(13),a=e(16),o=e(31),s=e(14)("isConcatSpreadable");r.exports=function u(h,d,_,g,w,C,k,E){for(var O,N,m=w,y=0,b=!!k&&o(k,E,3);y<g;){if(y in _){if(O=b?b(_[y],y,d):_[y],N=!1,i(O)&&(N=(N=O[s])!==void 0?!!N:n(O)),N&&C>0)m=u(h,d,O,a(O.length),m,C-1)-1;else{if(m>=9007199254740991)throw TypeError();h[m]=O}m++}y++}return m}},function(r,t,e){e(335),r.exports=e(17).String.padStart},function(r,t,e){"use strict";var n=e(0),i=e(138),a=e(76),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*o,"String",{padStart:function(s){return i(this,s,arguments.length>1?arguments[1]:void 0,!0)}})},function(r,t,e){e(337),r.exports=e(17).String.padEnd},function(r,t,e){"use strict";var n=e(0),i=e(138),a=e(76),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*o,"String",{padEnd:function(s){return i(this,s,arguments.length>1?arguments[1]:void 0,!1)}})},function(r,t,e){e(339),r.exports=e(17).String.trimLeft},function(r,t,e){"use strict";e(54)("trimLeft",function(n){return function(){return n(this,1)}},"trimStart")},function(r,t,e){e(341),r.exports=e(17).String.trimRight},function(r,t,e){"use strict";e(54)("trimRight",function(n){return function(){return n(this,2)}},"trimEnd")},function(r,t,e){e(343),r.exports=e(83).f("asyncIterator")},function(r,t,e){e(110)("asyncIterator")},function(r,t,e){e(345),r.exports=e(17).Object.getOwnPropertyDescriptors},function(r,t,e){var n=e(0),i=e(137),a=e(28),o=e(34),s=e(99);n(n.S,"Object",{getOwnPropertyDescriptors:function(u){for(var h,d,_=a(u),g=o.f,w=i(_),C={},k=0;w.length>k;)(d=g(_,h=w[k++]))!==void 0&&s(C,h,d);return C}})},function(r,t,e){e(347),r.exports=e(17).Object.values},function(r,t,e){var n=e(0),i=e(139)(!1);n(n.S,"Object",{values:function(a){return i(a)}})},function(r,t,e){e(349),r.exports=e(17).Object.entries},function(r,t,e){var n=e(0),i=e(139)(!0);n(n.S,"Object",{entries:function(a){return i(a)}})},function(r,t,e){"use strict";e(131),e(351),r.exports=e(17).Promise.finally},function(r,t,e){"use strict";var n=e(0),i=e(17),a=e(10),o=e(65),s=e(133);n(n.P+n.R,"Promise",{finally:function(u){var h=o(this,i.Promise||a.Promise),d=typeof u=="function";return this.then(d?function(_){return s(h,u()).then(function(){return _})}:u,d?function(_){return s(h,u()).then(function(){throw _})}:u)}})},function(r,t,e){e(353),e(354),e(355),r.exports=e(17)},function(r,t,e){var n=e(10),i=e(0),a=e(76),o=[].slice,s=/MSIE .\./.test(a),u=function(h){return function(d,_){var g=arguments.length>2,w=!!g&&o.call(arguments,2);return h(g?function(){(typeof d=="function"?d:Function(d)).apply(this,w)}:d,_)}};i(i.G+i.B+i.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(r,t,e){var n=e(0),i=e(105);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(r,t,e){for(var n=e(102),i=e(46),a=e(23),o=e(10),s=e(27),u=e(55),h=e(14),d=h("iterator"),_=h("toStringTag"),g=u.Array,w={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},C=i(w),k=0;k<C.length;k++){var E,O=C[k],N=w[O],m=o[O],y=m&&m.prototype;if(y&&(y[d]||s(y,d,g),y[_]||s(y,_,O),u[O]=g,N))for(E in n)y[E]||a(y,E,n[E],!0)}},function(r,t,e){var n,i,a;i=[t,e(29),e(2),e(3),e(360),e(362),e(363),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(9),k=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=k(s),u=k(u),h=k(h),g=k(g),w=C(w);var E=function(){function O(N){var m=this;(0,u.default)(this,O);var y=function(){};w.isObject(N)&&w.isFunction(N.onReady)&&(y=N.onReady);var b=new g.default(N);this.isReady=b.isReady.then(function(){m.exportAPI(b),y()})}return(0,h.default)(O,[{key:"exportAPI",value:function(N){var m=this;["configuration"].forEach(function(y){m[y]=N[y]}),this.destroy=function(){for(var y in Object.values(N.moduleInstances).forEach(function(b){w.isFunction(b.destroy)&&b.destroy(),b.listeners.removeAll()}),N=null,m)Object.prototype.hasOwnProperty.call(m,y)&&delete m[y];Object.setPrototypeOf(m,null)},Object.setPrototypeOf(this,N.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(function(y){var b=(0,s.default)(y,2),S=b[0],A=b[1];Object.entries(A).forEach(function(I){var T=(0,s.default)(I,2),R=T[0],B=T[1];m[B]=N.moduleInstances.API.methods[S][R]})})}}],[{key:"version",get:function(){return"2.20.0"}}]),O}();o.default=E,E.displayName="EditorJS",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t){r.exports=function(e){if(Array.isArray(e))return e}},function(r,t){r.exports=function(e,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e)){var i=[],a=!0,o=!1,s=void 0;try{for(var u,h=e[Symbol.iterator]();!(a=(u=h.next()).done)&&(i.push(u.value),!n||i.length!==n);a=!0);}catch(d){o=!0,s=d}finally{try{a||h.return==null||h.return()}finally{if(o)throw s}}return i}}},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(r,t,e){(t=r.exports=function(...a){return i(...a)}).__esModule=!0;let n=e(361),i=n.default;Object.assign(t,n)},function(r,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){},t.revert=function(){}},function(r,t,e){var n,i,a;i=[],(a=typeof(n=function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(o){for(var s=(this.document||this.ownerDocument).querySelectorAll(o),u=s.length;--u>=0&&s.item(u)!==this;);return u>-1}),Element.prototype.closest||(Element.prototype.closest=function(o){var s=this;if(!document.documentElement.contains(s))return null;do{if(s.matches(o))return s;s=s.parentElement||s.parentNode}while(s!==null);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(o){var s=document.createDocumentFragment();Array.isArray(o)||(o=[o]),o.forEach(function(u){var h=u instanceof Node;s.appendChild(h?u:document.createTextNode(u))}),this.insertBefore(s,this.firstChild)})})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(21),e(22),e(2),e(3),e(15),e(8),e(59),e(145),e(372)],(a=typeof(n=function(o,s,u,h,d,_,g,w,C,k){"use strict";var E=e(9),O=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=O(s),u=O(u),h=O(h),d=O(d),_=O(_),g=E(g),w=O(w),k=O(k);var N=e(373),m=[];N.keys().forEach(function(b){b.match(/^\.\/[^_][\w/]*\.([tj])s$/)&&m.push(N(b))});var y=function(){function b(I){var T,R,B=this;(0,h.default)(this,b),this.moduleInstances={},this.eventsDispatcher=new k.default,this.isReady=new Promise(function(F,L){T=F,R=L}),Promise.resolve().then((0,u.default)(s.default.mark(function F(){return s.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return B.configuration=I,L.next=3,B.validate();case 3:return L.next=5,B.init();case 5:return L.next=7,B.start();case 7:g.logLabeled("I'm ready! (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727","log","","color: #E24A75"),setTimeout((0,u.default)(s.default.mark(function j(){var P,z,Y;return s.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,B.render();case 2:B.configuration.autofocus&&(P=B.moduleInstances,z=P.BlockManager,(Y=P.Caret).setToBlock(z.blocks[0],Y.positions.START),z.highlightCurrentNode()),B.moduleInstances.UI.removeLoader(),T();case 5:case"end":return ce.stop()}},j)})),500);case 9:case"end":return L.stop()}},F)}))).catch(function(F){g.log("Editor.js is not ready because of ".concat(F),"error"),R(F)})}var S,A;return(0,d.default)(b,[{key:"validate",value:(A=(0,u.default)(s.default.mark(function I(){var T,R,B;return s.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(T=this.config,R=T.holderId,B=T.holder,!R||!B){F.next=3;break}throw Error("\xABholderId\xBB and \xABholder\xBB param can't assign at the same time.");case 3:if(!g.isString(B)||_.default.get(B)){F.next=5;break}throw Error("element with ID \xAB".concat(B,"\xBB is missing. Pass correct holder's ID."));case 5:if(!B||!g.isObject(B)||_.default.isElement(B)){F.next=7;break}throw Error("\xABholder\xBB value must be an Element node");case 7:case"end":return F.stop()}},I,this)})),function(){return A.apply(this,arguments)})},{key:"init",value:function(){this.constructModules(),this.configureModules()}},{key:"start",value:(S=(0,u.default)(s.default.mark(function I(){var T,R=this;return s.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return T=["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"],B.next=3,T.reduce(function(F,L){return F.then((0,u.default)(s.default.mark(function j(){return s.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,R.moduleInstances[L].prepare();case 3:P.next=10;break;case 5:if(P.prev=5,P.t0=P.catch(0),!(P.t0 instanceof C.CriticalError)){P.next=9;break}throw new Error(P.t0.message);case 9:g.log("Module ".concat(L," was skipped because of %o"),"warn",P.t0);case 10:case"end":return P.stop()}},j,null,[[0,5]])})))},Promise.resolve());case 3:case"end":return B.stop()}},I)})),function(){return S.apply(this,arguments)})},{key:"render",value:function(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}},{key:"constructModules",value:function(){var I=this;m.forEach(function(T){var R=g.isFunction(T)?T:T.default;try{I.moduleInstances[R.displayName]=new R({config:I.configuration,eventsDispatcher:I.eventsDispatcher})}catch(B){g.log("Module ".concat(R.displayName," skipped because"),"warn",B)}})}},{key:"configureModules",value:function(){for(var I in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,I)&&(this.moduleInstances[I].state=this.getModulesDiff(I))}},{key:"getModulesDiff",value:function(I){var T={};for(var R in this.moduleInstances)R!==I&&(T[R]=this.moduleInstances[R]);return T}},{key:"configuration",set:function(I){var T,R;g.isObject(I)?this.config=Object.assign({},I):this.config={holder:I},g.deprecationAssert(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=g.LogLevels.VERBOSE),g.setLogLevel(this.config.logLevel),g.deprecationAssert(Boolean(this.config.initialBlock),"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;var B={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||function(){},this.config.onChange=this.config.onChange||function(){},this.config.inlineToolbar=this.config.inlineToolbar===void 0||this.config.inlineToolbar,!g.isEmpty(this.config.data)&&this.config.data.blocks&&this.config.data.blocks.length!==0||(this.config.data={blocks:[B]}),this.config.readOnly=this.config.readOnly||!1,!((T=this.config.i18n)===null||T===void 0)&&T.messages&&w.default.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((R=this.config.i18n)===null||R===void 0?void 0:R.direction)||"ltr"},get:function(){return this.config}}]),b}();o.default=y,y.displayName="Core",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n=e(142);r.exports=function(i){if(Array.isArray(i))return n(i)}},function(r,t){r.exports=function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(r,t){r.exports=function(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}},function(r,t){r.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(r,t){r.exports=function(e){return Function.toString.call(e).indexOf("[native code]")!==-1}},function(r,t,e){var n=e(107),i=e(371);function a(o,s,u){return i()?r.exports=a=Reflect.construct:r.exports=a=function(h,d,_){var g=[null];g.push.apply(g,d);var w=new(Function.bind.apply(h,g));return _&&n(w,_.prototype),w},a.apply(null,arguments)}r.exports=a},function(r,t){r.exports=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}},function(r,t,e){var n,i,a;i=[t,e(2),e(3)],(a=typeof(n=function(o,s,u){"use strict";var h=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=h(s),u=h(u);var d=function(){function _(){(0,s.default)(this,_),this.subscribers={}}return(0,u.default)(_,[{key:"on",value:function(g,w){g in this.subscribers||(this.subscribers[g]=[]),this.subscribers[g].push(w)}},{key:"once",value:function(g,w){var C=this;g in this.subscribers||(this.subscribers[g]=[]),this.subscribers[g].push(function k(E){var O=w(E),N=C.subscribers[g].indexOf(k);return N!==-1&&C.subscribers[g].splice(N,1),O})}},{key:"emit",value:function(g,w){this.subscribers[g]&&this.subscribers[g].reduce(function(C,k){return k(C)||C},w)}},{key:"off",value:function(g,w){for(var C=0;C<this.subscribers[g].length;C++)if(this.subscribers[g][C]===w){delete this.subscribers[g][C];break}}},{key:"destroy",value:function(){this.subscribers=null}}]),_}();o.default=d,d.displayName="EventsDispatcher",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n={"./api":79,"./api/":79,"./api/blocks":147,"./api/blocks.ts":147,"./api/caret":149,"./api/caret.ts":149,"./api/events":150,"./api/events.ts":150,"./api/i18n":151,"./api/i18n.ts":151,"./api/index":79,"./api/index.ts":79,"./api/inlineToolbar":152,"./api/inlineToolbar.ts":152,"./api/listeners":153,"./api/listeners.ts":153,"./api/notifier":154,"./api/notifier.ts":154,"./api/readonly":155,"./api/readonly.ts":155,"./api/sanitizer":156,"./api/sanitizer.ts":156,"./api/saver":157,"./api/saver.ts":157,"./api/selection":158,"./api/selection.ts":158,"./api/styles":159,"./api/styles.ts":159,"./api/toolbar":160,"./api/toolbar.ts":160,"./api/tooltip":161,"./api/tooltip.ts":161,"./blockEvents":162,"./blockEvents.ts":162,"./blockManager":163,"./blockManager.ts":163,"./blockSelection":164,"./blockSelection.ts":164,"./caret":165,"./caret.ts":165,"./crossBlockSelection":166,"./crossBlockSelection.ts":166,"./dragNDrop":167,"./dragNDrop.ts":167,"./modificationsObserver":168,"./modificationsObserver.ts":168,"./notifier":169,"./notifier.ts":169,"./paste":170,"./paste.ts":170,"./readonly":171,"./readonly.ts":171,"./rectangleSelection":172,"./rectangleSelection.ts":172,"./renderer":173,"./renderer.ts":173,"./sanitizer":174,"./sanitizer.ts":174,"./saver":175,"./saver.ts":175,"./toolbar":80,"./toolbar/":80,"./toolbar/blockSettings":176,"./toolbar/blockSettings.ts":176,"./toolbar/conversion":177,"./toolbar/conversion.ts":177,"./toolbar/index":80,"./toolbar/index.ts":80,"./toolbar/inline":178,"./toolbar/inline.ts":178,"./toolbar/toolbox":179,"./toolbar/toolbox.ts":179,"./tools":180,"./tools.ts":180,"./tooltip":181,"./tooltip.ts":181,"./ui":182,"./ui.ts":182};function i(o){var s=a(o);return e(s)}function a(o){if(!e.o(n,o)){var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}return n[o]}i.keys=function(){return Object.keys(n)},i.resolve=a,r.exports=i,i.id=373},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(8)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(9),_=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=_(s),u=_(u),h=d(h);var g=function(){function w(){(0,s.default)(this,w),this.allListeners=[]}return(0,u.default)(w,[{key:"on",value:function(C,k,E){var O=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=h.generateId("l"),m={id:N,element:C,eventType:k,handler:E,options:O},y=this.findOne(C,k,E);if(!y)return this.allListeners.push(m),C.addEventListener(k,E,O),N}},{key:"off",value:function(C,k,E,O){var N=this,m=this.findAll(C,k,E);m.forEach(function(y,b){var S=N.allListeners.indexOf(m[b]);S>-1&&(N.allListeners.splice(S,1),y.element.removeEventListener(y.eventType,y.handler,y.options))})}},{key:"offById",value:function(C){var k=this.findById(C);k&&k.element.removeEventListener(k.eventType,k.handler,k.options)}},{key:"findOne",value:function(C,k,E){var O=this.findAll(C,k,E);return O.length>0?O[0]:null}},{key:"findAll",value:function(C,k,E){var O=C?this.findByEventTarget(C):[];return C&&k&&E?O.filter(function(N){return N.eventType===k&&N.handler===E}):C&&k?O.filter(function(N){return N.eventType===k}):O}},{key:"removeAll",value:function(){this.allListeners.map(function(C){C.element.removeEventListener(C.eventType,C.handler,C.options)}),this.allListeners=[]}},{key:"destroy",value:function(){this.removeAll()}},{key:"findByEventTarget",value:function(C){return this.allListeners.filter(function(k){if(k.element===C)return k})}},{key:"findByType",value:function(C){return this.allListeners.filter(function(k){if(k.eventType===C)return k})}},{key:"findByHandler",value:function(C){return this.allListeners.filter(function(k){if(k.handler===C)return k})}},{key:"findById",value:function(C){return this.allListeners.find(function(k){return k.id===C})}}]),w}();o.default=g,g.displayName="Listeners",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15),e(8),e(25)],(a=typeof(n=function(o,s,u,h,d,_){"use strict";var g=e(9),w=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=g(d),_=w(_);var C=function(){function k(E,O){(0,s.default)(this,k),this.cursor=-1,this.items=[],this.items=E||[],this.focusedCssClass=O}return(0,u.default)(k,[{key:"setItems",value:function(E){this.items=E}},{key:"next",value:function(){this.cursor=this.leafNodesAndReturnIndex(k.directions.RIGHT)}},{key:"previous",value:function(){this.cursor=this.leafNodesAndReturnIndex(k.directions.LEFT)}},{key:"dropCursor",value:function(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}},{key:"leafNodesAndReturnIndex",value:function(E){var O=this;if(this.items.length===0)return this.cursor;var N=this.cursor;return N===-1?N=E===k.directions.RIGHT?-1:0:this.items[N].classList.remove(this.focusedCssClass),N=E===k.directions.RIGHT?(N+1)%this.items.length:(this.items.length+N-1)%this.items.length,h.default.canSetCaret(this.items[N])&&d.delay(function(){return _.default.setCursor(O.items[N])},50)(),this.items[N].classList.add(this.focusedCssClass),N}},{key:"currentItem",get:function(){return this.cursor===-1?null:this.items[this.cursor]}}]),k}();o.default=C,C.displayName="DomIterator",C.directions={RIGHT:"right",LEFT:"left"},r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(8),e(15),e(61)],(a=typeof(n=function(o,s,u,h,d,_){"use strict";var g=e(9),w=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=g(h),d=w(d);var C=function(){function k(E){(0,s.default)(this,k),this.blocks=[],this.workingArea=E}return(0,u.default)(k,[{key:"push",value:function(E){this.blocks.push(E),this.insertToDOM(E)}},{key:"swap",value:function(E,O){var N=this.blocks[O];d.default.swap(this.blocks[E].holder,N.holder),this.blocks[O]=this.blocks[E],this.blocks[E]=N}},{key:"move",value:function(E,O){var N=this.blocks.splice(O,1)[0],m=E-1,y=Math.max(0,m),b=this.blocks[y];E>0?this.insertToDOM(N,"afterend",b):this.insertToDOM(N,"beforebegin",b),this.blocks.splice(E,0,N);var S=this.composeBlockEvent("move",{fromIndex:O,toIndex:E});N.call(_.BlockToolAPI.MOVED,S)}},{key:"insert",value:function(E,O){var N=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(this.length){E>this.length&&(E=this.length),N&&(this.blocks[E].holder.remove(),this.blocks[E].call(_.BlockToolAPI.REMOVED));var m=N?1:0;if(this.blocks.splice(E,m,O),E>0){var y=this.blocks[E-1];this.insertToDOM(O,"afterend",y)}else{var b=this.blocks[E+1];b?this.insertToDOM(O,"beforebegin",b):this.insertToDOM(O)}}else this.push(O)}},{key:"remove",value:function(E){isNaN(E)&&(E=this.length-1),this.blocks[E].holder.remove(),this.blocks[E].call(_.BlockToolAPI.REMOVED),this.blocks.splice(E,1)}},{key:"removeAll",value:function(){this.workingArea.innerHTML="",this.blocks.forEach(function(E){return E.call(_.BlockToolAPI.REMOVED)}),this.blocks.length=0}},{key:"insertAfter",value:function(E,O){var N=this.blocks.indexOf(E);this.insert(N+1,O)}},{key:"get",value:function(E){return this.blocks[E]}},{key:"indexOf",value:function(E){return this.blocks.indexOf(E)}},{key:"insertToDOM",value:function(E,O,N){O?N.holder.insertAdjacentElement(O,E.holder):this.workingArea.appendChild(E.holder),E.call(_.BlockToolAPI.RENDERED)}},{key:"composeBlockEvent",value:function(E,O){return new CustomEvent(E,{detail:O})}},{key:"length",get:function(){return this.blocks.length}},{key:"array",get:function(){return this.blocks}},{key:"nodes",get:function(){return h.array(this.workingArea.children)}}],[{key:"set",value:function(E,O,N){return isNaN(Number(O))?(Reflect.set(E,O,N),!0):(E.insert(+O,N),!0)}},{key:"get",value:function(E,O){return isNaN(Number(O))?Reflect.get(E,O):E.get(+O)}}]),k}();o.default=C,C.displayName="Blocks",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){r.exports=function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(1&s&&(o=a(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var h in o)a.d(u,h,function(d){return o[d]}.bind(null,h));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=0)}([function(n,i,a){"use strict";function o(h,d){for(var _=0;_<d.length;_++){var g=d[_];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function s(h,d,_){return d&&o(h.prototype,d),_&&o(h,_),h}a.r(i);var u=function(){function h(d){var _=this;(function(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")})(this,h),this.commands={},this.keys={},this.name=d.name,this.parseShortcutName(d.name),this.element=d.on,this.callback=d.callback,this.executeShortcut=function(g){_.execute(g)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return s(h,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46}}}]),s(h,[{key:"parseShortcutName",value:function(d){d=d.split("+");for(var _=0;_<d.length;_++){d[_]=d[_].toUpperCase();var g=!1;for(var w in h.supportedCommands)if(h.supportedCommands[w].includes(d[_])){g=this.commands[w]=!0;break}g||(this.keys[d[_]]=!0)}for(var C in h.supportedCommands)this.commands[C]||(this.commands[C]=!1)}},{key:"execute",value:function(d){var _,g={CMD:d.ctrlKey||d.metaKey,SHIFT:d.shiftKey,ALT:d.altKey},w=!0;for(_ in this.commands)this.commands[_]!==g[_]&&(w=!1);var C,k=!0;for(C in this.keys)k=k&&d.keyCode===h.keyCodes[C];w&&k&&this.callback(d)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),h}();i.default=u}]).default},function(r,t,e){r.exports=function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(1&s&&(o=a(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var h in o)a.d(u,h,function(d){return o[d]}.bind(null,h));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="/",a(a.s=0)}([function(n,i,a){"use strict";a(1),n.exports=function(){var o=a(6),s=null;return{show:function(u){if(u.message){(function(){if(s)return!0;s=o.getWrapper(),document.body.appendChild(s)})();var h=null,d=u.time||8e3;switch(u.type){case"confirm":h=o.confirm(u);break;case"prompt":h=o.prompt(u);break;default:h=o.alert(u),window.setTimeout(function(){h.remove()},d)}s.appendChild(h),h.classList.add("cdx-notify--bounce-in")}}}}()},function(n,i,a){var o=a(2);typeof o=="string"&&(o=[[n.i,o,""]]),a(4)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(n.exports=o.locals)},function(n,i,a){(n.exports=a(3)(!1)).push([n.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(n,i){n.exports=function(a){var o=[];return o.toString=function(){return this.map(function(s){var u=function(h,d){var _,g=h[1]||"",w=h[3];if(!w)return g;if(d&&typeof btoa=="function"){var C=(_=w,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(_))))+" */"),k=w.sources.map(function(E){return"/*# sourceURL="+w.sourceRoot+E+" */"});return[g].concat(k).concat([C]).join(`
`)}return[g].join(`
`)}(s,a);return s[2]?"@media "+s[2]+"{"+u+"}":u}).join("")},o.i=function(s,u){typeof s=="string"&&(s=[[null,s,""]]);for(var h={},d=0;d<this.length;d++){var _=this[d][0];typeof _=="number"&&(h[_]=!0)}for(d=0;d<s.length;d++){var g=s[d];typeof g[0]=="number"&&h[g[0]]||(u&&!g[2]?g[2]=u:u&&(g[2]="("+g[2]+") and ("+u+")"),o.push(g))}},o}},function(n,i,a){var o,s,u={},h=(o=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=o.apply(this,arguments)),s}),d=function(T){var R={};return function(B){if(typeof B=="function")return B();if(R[B]===void 0){var F=function(L){return document.querySelector(L)}.call(this,B);if(window.HTMLIFrameElement&&F instanceof window.HTMLIFrameElement)try{F=F.contentDocument.head}catch(L){F=null}R[B]=F}return R[B]}}(),_=null,g=0,w=[],C=a(5);function k(T,R){for(var B=0;B<T.length;B++){var F=T[B],L=u[F.id];if(L){L.refs++;for(var j=0;j<L.parts.length;j++)L.parts[j](F.parts[j]);for(;j<F.parts.length;j++)L.parts.push(b(F.parts[j],R))}else{var P=[];for(j=0;j<F.parts.length;j++)P.push(b(F.parts[j],R));u[F.id]={id:F.id,refs:1,parts:P}}}}function E(T,R){for(var B=[],F={},L=0;L<T.length;L++){var j=T[L],P=R.base?j[0]+R.base:j[0],z={css:j[1],media:j[2],sourceMap:j[3]};F[P]?F[P].parts.push(z):B.push(F[P]={id:P,parts:[z]})}return B}function O(T,R){var B=d(T.insertInto);if(!B)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var F=w[w.length-1];if(T.insertAt==="top")F?F.nextSibling?B.insertBefore(R,F.nextSibling):B.appendChild(R):B.insertBefore(R,B.firstChild),w.push(R);else if(T.insertAt==="bottom")B.appendChild(R);else{if(typeof T.insertAt!="object"||!T.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var L=d(T.insertInto+" "+T.insertAt.before);B.insertBefore(R,L)}}function N(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T);var R=w.indexOf(T);R>=0&&w.splice(R,1)}function m(T){var R=document.createElement("style");return T.attrs.type===void 0&&(T.attrs.type="text/css"),y(R,T.attrs),O(T,R),R}function y(T,R){Object.keys(R).forEach(function(B){T.setAttribute(B,R[B])})}function b(T,R){var B,F,L,j;if(R.transform&&T.css){if(!(j=R.transform(T.css)))return function(){};T.css=j}if(R.singleton){var P=g++;B=_||(_=m(R)),F=I.bind(null,B,P,!1),L=I.bind(null,B,P,!0)}else T.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(B=function(z){var Y=document.createElement("link");return z.attrs.type===void 0&&(z.attrs.type="text/css"),z.attrs.rel="stylesheet",y(Y,z.attrs),O(z,Y),Y}(R),F=function(z,Y,ce){var re=ce.css,Z=ce.sourceMap,me=Y.convertToAbsoluteUrls===void 0&&Z;(Y.convertToAbsoluteUrls||me)&&(re=C(re)),Z&&(re+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Z))))+" */");var ke=new Blob([re],{type:"text/css"}),ne=z.href;z.href=URL.createObjectURL(ke),ne&&URL.revokeObjectURL(ne)}.bind(null,B,R),L=function(){N(B),B.href&&URL.revokeObjectURL(B.href)}):(B=m(R),F=function(z,Y){var ce=Y.css,re=Y.media;if(re&&z.setAttribute("media",re),z.styleSheet)z.styleSheet.cssText=ce;else{for(;z.firstChild;)z.removeChild(z.firstChild);z.appendChild(document.createTextNode(ce))}}.bind(null,B),L=function(){N(B)});return F(T),function(z){if(z){if(z.css===T.css&&z.media===T.media&&z.sourceMap===T.sourceMap)return;F(T=z)}else L()}}n.exports=function(T,R){if(typeof DEBUG!="undefined"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(R=R||{}).attrs=typeof R.attrs=="object"?R.attrs:{},R.singleton||typeof R.singleton=="boolean"||(R.singleton=h()),R.insertInto||(R.insertInto="head"),R.insertAt||(R.insertAt="bottom");var B=E(T,R);return k(B,R),function(F){for(var L=[],j=0;j<B.length;j++){var P=B[j];(z=u[P.id]).refs--,L.push(z)}for(F&&k(E(F,R),R),j=0;j<L.length;j++){var z;if((z=L[j]).refs===0){for(var Y=0;Y<z.parts.length;Y++)z.parts[Y]();delete u[z.id]}}}};var S,A=(S=[],function(T,R){return S[T]=R,S.filter(Boolean).join(`
`)});function I(T,R,B,F){var L=B?"":F.css;if(T.styleSheet)T.styleSheet.cssText=A(R,L);else{var j=document.createTextNode(L),P=T.childNodes;P[R]&&T.removeChild(P[R]),P.length?T.insertBefore(j,P[R]):T.appendChild(j)}}},function(n,i){n.exports=function(a){var o=typeof window!="undefined"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!a||typeof a!="string")return a;var s=o.protocol+"//"+o.host,u=s+o.pathname.replace(/\/[^\/]*$/,"/");return a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(h,d){var _,g=d.trim().replace(/^"(.*)"$/,function(w,C){return C}).replace(/^'(.*)'$/,function(w,C){return C});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(g)?h:(_=g.indexOf("//")===0?g:g.indexOf("/")===0?s+g:u+g.replace(/^\.\//,""),"url("+JSON.stringify(_)+")")})}},function(n,i,a){"use strict";var o,s,u,h,d,_;n.exports=(o="cdx-notify",s="cdx-notify__cross",u="cdx-notify__button--confirm",h="cdx-notify__button",d="cdx-notify__btns-wrapper",{alert:_=function(g){var w=document.createElement("DIV"),C=document.createElement("DIV"),k=g.message,E=g.style;return w.classList.add(o),E&&w.classList.add(o+"--"+E),w.innerHTML=k,C.classList.add(s),C.addEventListener("click",w.remove.bind(w)),w.appendChild(C),w},confirm:function(g){var w=_(g),C=document.createElement("div"),k=document.createElement("button"),E=document.createElement("button"),O=w.querySelector("."+s),N=g.cancelHandler,m=g.okHandler;return C.classList.add(d),k.innerHTML=g.okText||"Confirm",E.innerHTML=g.cancelText||"Cancel",k.classList.add(h),E.classList.add(h),k.classList.add(u),E.classList.add("cdx-notify__button--cancel"),N&&typeof N=="function"&&(E.addEventListener("click",N),O.addEventListener("click",N)),m&&typeof m=="function"&&k.addEventListener("click",m),k.addEventListener("click",w.remove.bind(w)),E.addEventListener("click",w.remove.bind(w)),C.appendChild(k),C.appendChild(E),w.appendChild(C),w},prompt:function(g){var w=_(g),C=document.createElement("div"),k=document.createElement("button"),E=document.createElement("input"),O=w.querySelector("."+s),N=g.cancelHandler,m=g.okHandler;return C.classList.add(d),k.innerHTML=g.okText||"Ok",k.classList.add(h),k.classList.add(u),E.classList.add("cdx-notify__input"),g.placeholder&&E.setAttribute("placeholder",g.placeholder),g.default&&(E.value=g.default),g.inputType&&(E.type=g.inputType),N&&typeof N=="function"&&O.addEventListener("click",N),m&&typeof m=="function"&&k.addEventListener("click",function(){m(E.value)}),k.addEventListener("click",w.remove.bind(w)),C.appendChild(E),C.appendChild(k),w.appendChild(C),w},getWrapper:function(){var g=document.createElement("DIV");return g.classList.add("cdx-notifies"),g}})}])},function(r,t,e){var n,i;(i=typeof(n=function(){function a(w){var C=w.tags;if(!Object.keys(C).map(function(k){return typeof C[k]}).every(function(k){return k==="object"||k==="boolean"||k==="function"}))throw new Error("The configuration was invalid");this.config=w}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(w){return o.indexOf(w.nodeName)!==-1}var u=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function h(w){return u.indexOf(w.nodeName)!==-1}function d(w,C,k){return typeof w.tags[C]=="function"?w.tags[C](k):w.tags[C]}function _(w,C){return C===void 0||typeof C=="boolean"&&!C}function g(w,C,k){var E=w.name.toLowerCase();return C!==!0&&(typeof C[E]=="function"?!C[E](w.value,k):C[E]===void 0||C[E]===!1||typeof C[E]=="string"&&C[E]!==w.value)}return a.prototype.clean=function(w){let C=document.implementation.createHTMLDocument(),k=C.createElement("div");return k.innerHTML=w,this._sanitize(C,k),k.innerHTML},a.prototype._sanitize=function(w,C){var k=function(T,R){return T.createTreeWalker(R,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(w,C),E=k.firstChild();if(E)do if(E.nodeType!==Node.TEXT_NODE){if(E.nodeType===Node.COMMENT_NODE){C.removeChild(E),this._sanitize(w,C);break}var O,N=h(E);N&&(O=Array.prototype.some.call(E.childNodes,s));var m=!!C.parentNode,y=s(C)&&s(E)&&m,b=E.nodeName.toLowerCase(),S=d(this.config,b,E);if(N&&O||_(0,S)||!this.config.keepNestedBlockElements&&y){if(E.nodeName!=="SCRIPT"&&E.nodeName!=="STYLE")for(;E.childNodes.length>0;)C.insertBefore(E.childNodes[0],E);C.removeChild(E),this._sanitize(w,C);break}for(var A=0;A<E.attributes.length;A+=1){var I=E.attributes[A];g(I,S,E)&&(E.removeAttribute(I.name),A-=1)}this._sanitize(w,E)}else if(E.data.trim()===""&&(E.previousElementSibling&&s(E.previousElementSibling)||E.nextElementSibling&&s(E.nextElementSibling))){C.removeChild(E),this._sanitize(w,C);break}while(E=k.nextSibling())},a})=="function"?n.call(t,e,t,r):n)===void 0||(r.exports=i)},function(r,t,e){r.exports=function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(1&s&&(o=a(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var h in o)a.d(u,h,function(d){return o[d]}.bind(null,h));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="/",a(a.s=0)}([function(n,i,a){function o(h,d){for(var _=0;_<d.length;_++){var g=d[_];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function s(h,d,_){return d&&o(h.prototype,d),_&&o(h,_),h}a(1).toString();var u=function(){function h(d){var _=d.data,g=d.config,w=d.api,C=d.readOnly;(function(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")})(this,h),this.api=w,this.readOnly=C,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=g.placeholder?g.placeholder:h.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=g.preserveBlank!==void 0&&g.preserveBlank,this.data=_}return s(h,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),s(h,[{key:"onKeyUp",value:function(d){d.code!=="Backspace"&&d.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var d=document.createElement("DIV");return d.classList.add(this._CSS.wrapper,this._CSS.block),d.contentEditable=!1,d.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(d.contentEditable=!0,d.addEventListener("keyup",this.onKeyUp)),d}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(d){var _={text:this.data.text+d.text};this.data=_}},{key:"validate",value:function(d){return!(d.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(d){return{text:d.innerHTML}}},{key:"onPaste",value:function(d){var _={text:d.detail.data.innerHTML};this.data=_}},{key:"data",get:function(){var d=this._element.innerHTML;return this._data.text=d,this._data},set:function(d){this._data=d||{},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:a(5).default,title:"Text"}}}]),h}();n.exports=u},function(n,i,a){var o=a(2),s=a(3);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[n.i,s,""]]),o(s,{insert:"head",singleton:!1}),n.exports=s.locals||{}},function(n,i,a){"use strict";var o,s=function(){var m={};return function(y){if(m[y]===void 0){var b=document.querySelector(y);if(window.HTMLIFrameElement&&b instanceof window.HTMLIFrameElement)try{b=b.contentDocument.head}catch(S){b=null}m[y]=b}return m[y]}}(),u=[];function h(m){for(var y=-1,b=0;b<u.length;b++)if(u[b].identifier===m){y=b;break}return y}function d(m,y){for(var b={},S=[],A=0;A<m.length;A++){var I=m[A],T=y.base?I[0]+y.base:I[0],R=b[T]||0,B="".concat(T," ").concat(R);b[T]=R+1;var F=h(B),L={css:I[1],media:I[2],sourceMap:I[3]};F!==-1?(u[F].references++,u[F].updater(L)):u.push({identifier:B,updater:N(L,y),references:1}),S.push(B)}return S}function _(m){var y=document.createElement("style"),b=m.attributes||{};if(b.nonce===void 0){var S=a.nc;S&&(b.nonce=S)}if(Object.keys(b).forEach(function(I){y.setAttribute(I,b[I])}),typeof m.insert=="function")m.insert(y);else{var A=s(m.insert||"head");if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(y)}return y}var g,w=(g=[],function(m,y){return g[m]=y,g.filter(Boolean).join(`
`)});function C(m,y,b,S){var A=b?"":S.media?"@media ".concat(S.media," {").concat(S.css,"}"):S.css;if(m.styleSheet)m.styleSheet.cssText=w(y,A);else{var I=document.createTextNode(A),T=m.childNodes;T[y]&&m.removeChild(T[y]),T.length?m.insertBefore(I,T[y]):m.appendChild(I)}}function k(m,y,b){var S=b.css,A=b.media,I=b.sourceMap;if(A?m.setAttribute("media",A):m.removeAttribute("media"),I&&btoa&&(S+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(I))))," */")),m.styleSheet)m.styleSheet.cssText=S;else{for(;m.firstChild;)m.removeChild(m.firstChild);m.appendChild(document.createTextNode(S))}}var E=null,O=0;function N(m,y){var b,S,A;if(y.singleton){var I=O++;b=E||(E=_(y)),S=C.bind(null,b,I,!1),A=C.bind(null,b,I,!0)}else b=_(y),S=k.bind(null,b,y),A=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(b)};return S(m),function(T){if(T){if(T.css===m.css&&T.media===m.media&&T.sourceMap===m.sourceMap)return;S(m=T)}else A()}}n.exports=function(m,y){(y=y||{}).singleton||typeof y.singleton=="boolean"||(y.singleton=(o===void 0&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var b=d(m=m||[],y);return function(S){if(S=S||[],Object.prototype.toString.call(S)==="[object Array]"){for(var A=0;A<b.length;A++){var I=h(b[A]);u[I].references--}for(var T=d(S,y),R=0;R<b.length;R++){var B=h(b[R]);u[B].references===0&&(u[B].updater(),u.splice(B,1))}b=T}}}},function(n,i,a){(i=a(4)(!1)).push([n.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),n.exports=i},function(n,i,a){"use strict";n.exports=function(o){var s=[];return s.toString=function(){return this.map(function(u){var h=function(d,_){var g,w,C,k=d[1]||"",E=d[3];if(!E)return k;if(_&&typeof btoa=="function"){var O=(g=E,w=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),C="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(w),"/*# ".concat(C," */")),N=E.sources.map(function(m){return"/*# sourceURL=".concat(E.sourceRoot||"").concat(m," */")});return[k].concat(N).concat([O]).join(`
`)}return[k].join(`
`)}(u,o);return u[2]?"@media ".concat(u[2]," {").concat(h,"}"):h}).join("")},s.i=function(u,h,d){typeof u=="string"&&(u=[[null,u,""]]);var _={};if(d)for(var g=0;g<this.length;g++){var w=this[g][0];w!=null&&(_[w]=!0)}for(var C=0;C<u.length;C++){var k=[].concat(u[C]);d&&_[k[0]]||(h&&(k[2]?k[2]="".concat(h," and ").concat(k[2]):k[2]=h),s.push(k))}},s}},function(n,i,a){"use strict";a.r(i),i.default=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">
  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>
</svg>
`}])},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(){(0,s.default)(this,g),this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}return(0,u.default)(g,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.appendChild(h.default.svg("bold",12,14)),this.nodes.button}},{key:"surround",value:function(w){document.execCommand(this.commandName)}},{key:"checkState",value:function(w){var C=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,C),C}},{key:"shortcut",get:function(){return"CMD+B"}}],[{key:"sanitize",get:function(){return{b:{}}}}]),g}();o.default=_,_.displayName="BoldInlineTool",_.isInline=!0,_.title="Bold",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(){(0,s.default)(this,g),this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}return(0,u.default)(g,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.appendChild(h.default.svg("italic",4,11)),this.nodes.button}},{key:"surround",value:function(w){document.execCommand(this.commandName)}},{key:"checkState",value:function(w){var C=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,C),C}},{key:"shortcut",get:function(){return"CMD+I"}}],[{key:"sanitize",get:function(){return{i:{}}}}]),g}();o.default=_,_.displayName="ItalicInlineTool",_.isInline=!0,_.title="Italic",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(25),e(15),e(8)],(a=typeof(n=function(o,s,u,h,d,_){"use strict";var g=e(9),w=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),h=w(h),d=w(d),_=g(_);var C=function(){function k(E){var O=E.api;(0,s.default)(this,k),this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=O.toolbar,this.inlineToolbar=O.inlineToolbar,this.notifier=O.notifier,this.i18n=O.i18n,this.selection=new h.default}return(0,u.default)(k,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.appendChild(d.default.svg("link",14,10)),this.nodes.button.appendChild(d.default.svg("unlink",15,11)),this.nodes.button}},{key:"renderActions",value:function(){var E=this;return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",function(O){O.keyCode===E.ENTER_KEY&&E.enterPressed(O)}),this.nodes.input}},{key:"surround",value:function(E){if(E){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());var O=this.selection.findParentTag("A");if(O)return this.selection.expandToTag(O),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}},{key:"checkState",value:function(E){var O=this.selection.findParentTag("A");if(O){this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();var N=O.getAttribute("href");this.nodes.input.value=N!=="null"?N:"",this.selection.save()}else this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!O}},{key:"clear",value:function(){this.closeActions()}},{key:"toggleActions",value:function(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}},{key:"openActions",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.nodes.input.classList.add(this.CSS.inputShowed),E&&this.nodes.input.focus(),this.inputOpened=!0}},{key:"closeActions",value:function(){var E=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(this.selection.isFakeBackgroundEnabled){var O=new h.default;O.save(),this.selection.restore(),this.selection.removeFakeBackground(),O.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",E&&this.selection.clearSaved(),this.inputOpened=!1}},{key:"enterPressed",value:function(E){var O=this.nodes.input.value||"";return O.trim()?this.validateURL(O)?(O=this.prepareLink(O),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(O),E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void _.log("Incorrect Link pasted","warn",O)):(this.selection.restore(),this.unlink(),E.preventDefault(),void this.closeActions())}},{key:"validateURL",value:function(E){return!/\s/.test(E)}},{key:"prepareLink",value:function(E){return E=E.trim(),E=this.addProtocol(E)}},{key:"addProtocol",value:function(E){if(/^(\w+):(\/\/)?/.test(E))return E;var O=/^\/[^/\s]/.test(E),N=E.substring(0,1)==="#",m=/^\/\/[^/\s]/.test(E);return O||N||m||(E="http://"+E),E}},{key:"insertLink",value:function(E){var O=this.selection.findParentTag("A");O&&this.selection.expandToTag(O),document.execCommand(this.commandLink,!1,E)}},{key:"unlink",value:function(){document.execCommand(this.commandUnlink)}},{key:"shortcut",get:function(){return"CMD+K"}}],[{key:"sanitize",get:function(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}}]),k}();o.default=C,C.displayName="LinkInlineTool",C.isInline=!0,C.title="Link",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(w){var C=w.data,k=w.api;(0,s.default)(this,g),this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=k,this.title=C.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=C.savedData,this.wrapper=this.make()}return(0,u.default)(g,[{key:"render",value:function(){return this.wrapper}},{key:"save",value:function(){return this.savedData}},{key:"make",value:function(){var w=h.default.make("div",this.CSS.wrapper),C=h.default.svg("sad-face",52,52),k=h.default.make("div",this.CSS.info),E=h.default.make("div",this.CSS.title,{textContent:this.title}),O=h.default.make("div",this.CSS.subtitle,{textContent:this.subtitle});return w.appendChild(C),k.appendChild(E),k.appendChild(O),w.appendChild(k),w}}]),g}();o.default=_,_.displayName="Stub",_.isReadOnlySupported=!0,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(66),e(386),e(387),e(388)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=w(s),u=w(u),d=w(d),_=w(_),g=w(g);var C=function(E,O){var N={};for(var m in E)Object.prototype.hasOwnProperty.call(E,m)&&O.indexOf(m)<0&&(N[m]=E[m]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(m=Object.getOwnPropertySymbols(E);y<m.length;y++)O.indexOf(m[y])<0&&Object.prototype.propertyIsEnumerable.call(E,m[y])&&(N[m[y]]=E[m[y]])}return N},k=function(){function E(O,N,m){(0,s.default)(this,E),this.api=m,this.config=O,this.editorConfig=N}return(0,u.default)(E,[{key:"get",value:function(O){var N=this.config[O],m=N.class,y=N.isInternal,b=y!==void 0&&y,S=C(N,["class","isInternal"]);return new(this.getConstructor(m))({name:O,constructable:m,config:S,api:this.api,isDefault:O===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:b})}},{key:"getConstructor",value:function(O){switch(!0){case O[h.InternalInlineToolSettings.IsInline]:return d.default;case O[h.InternalTuneSettings.IsTune]:return _.default;default:return g.default}}}]),E}();o.default=k,k.displayName="ToolsFactory",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(66)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(9),C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_);var E=function(O){(0,h.default)(y,O);var N,m=(N=y,function(){var b,S=(0,_.default)(N);if(k()){var A=(0,_.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,d.default)(this,b)});function y(){var b;return(0,s.default)(this,y),(b=m.apply(this,arguments)).type=g.ToolType.Inline,b}return(0,u.default)(y,[{key:"create",value:function(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}},{key:"title",get:function(){return this.constructable[g.InternalInlineToolSettings.Title]}}]),y}((g=w(g)).default);o.default=E,E.displayName="InlineTool",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(66)],(a=typeof(n=function(o,s,u,h,d,_,g){"use strict";var w=e(9),C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_);var E=function(O){(0,h.default)(y,O);var N,m=(N=y,function(){var b,S=(0,_.default)(N);if(k()){var A=(0,_.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,d.default)(this,b)});function y(){var b;return(0,s.default)(this,y),(b=m.apply(this,arguments)).type=g.ToolType.Tune,b}return(0,u.default)(y,[{key:"create",value:function(b,S){return new this.constructable({api:this.api.getMethodsForTool(this),settings:this.settings,block:S,data:b})}}]),y}((g=w(g)).default);o.default=E,E.displayName="BlockTune",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(5),e(6),e(4),e(66),e(8)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(9),k=e(1);function E(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=k(s),u=k(u),h=k(h),d=k(d),_=k(_),g=C(g),w=C(w);var O=function(N){(0,h.default)(b,N);var m,y=(m=b,function(){var S,A=(0,_.default)(m);if(E()){var I=(0,_.default)(this).constructor;S=Reflect.construct(A,arguments,I)}else S=A.apply(this,arguments);return(0,d.default)(this,S)});function b(){var S;return(0,s.default)(this,b),(S=y.apply(this,arguments)).type=g.ToolType.Block,S}return(0,u.default)(b,[{key:"create",value:function(S,A,I){return new this.constructable({data:S,block:A,readOnly:I,api:this.api.getMethodsForTool(this),config:this.settings})}},{key:"isReadOnlySupported",get:function(){return this.constructable[g.InternalBlockToolSettings.IsReadOnlySupported]===!0}},{key:"isLineBreaksEnabled",get:function(){return this.constructable[g.InternalBlockToolSettings.IsEnabledLineBreaks]}},{key:"toolbox",get:function(){var S=this.constructable[g.InternalBlockToolSettings.Toolbox],A=this.config[g.UserSettings.Toolbox];if(!w.isEmpty(S)&&(A!=null?A:S)!==!1)return Object.assign({},S,A)}},{key:"conversionConfig",get:function(){return this.constructable[g.InternalBlockToolSettings.ConversionConfig]}},{key:"enabledInlineTools",get:function(){return this.config[g.UserSettings.EnabledInlineTools]}},{key:"enabledBlockTunes",get:function(){return this.config[g.UserSettings.EnabledBlockTunes]}},{key:"pasteConfig",get:function(){return this.constructable[g.InternalBlockToolSettings.PasteConfig]||{}}}]),b}(g.default);o.default=O,O.displayName="BlockTool",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(w){var C=w.api;(0,s.default)(this,g),this.CSS={button:"ce-settings__button",wrapper:"ce-tune-move-down",animation:"wobble"},this.api=C}return(0,u.default)(g,[{key:"render",value:function(){var w=this,C=h.default.make("div",[this.CSS.button,this.CSS.wrapper],{});return C.appendChild(h.default.svg("arrow-down",14,14)),this.api.listeners.on(C,"click",function(k){return w.handleClick(k,C)},!1),this.api.tooltip.onHover(C,this.api.i18n.t("Move down")),C}},{key:"handleClick",value:function(w,C){var k=this,E=this.api.blocks.getCurrentBlockIndex(),O=this.api.blocks.getBlockByIndex(E+1);if(!O)return C.classList.add(this.CSS.animation),void window.setTimeout(function(){C.classList.remove(k.CSS.animation)},500);var N=O.holder,m=N.getBoundingClientRect(),y=Math.abs(window.innerHeight-N.offsetHeight);m.top<window.innerHeight&&(y=window.scrollY+N.offsetHeight),window.scrollTo(0,y),this.api.blocks.move(E+1),this.api.tooltip.hide()}}]),g}();o.default=_,_.displayName="MoveDownTune",_.isTune=!0,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(w){var C=this,k=w.api;(0,s.default)(this,g),this.CSS={button:"ce-settings__button",buttonDelete:"ce-settings__button--delete",buttonConfirm:"ce-settings__button--confirm"},this.nodes={button:null},this.api=k,this.resetConfirmation=function(){C.setConfirmation(!1)}}return(0,u.default)(g,[{key:"render",value:function(){var w=this;return this.nodes.button=h.default.make("div",[this.CSS.button,this.CSS.buttonDelete],{}),this.nodes.button.appendChild(h.default.svg("cross",12,12)),this.api.listeners.on(this.nodes.button,"click",function(C){return w.handleClick(C)},!1),this.api.tooltip.onHover(this.nodes.button,this.api.i18n.t("Delete")),this.nodes.button}},{key:"handleClick",value:function(w){this.needConfirmation?(this.api.events.off("block-settings-closed",this.resetConfirmation),this.api.blocks.delete(),this.api.toolbar.close(),this.api.tooltip.hide(),w.stopPropagation()):(this.setConfirmation(!0),this.api.events.on("block-settings-closed",this.resetConfirmation))}},{key:"setConfirmation",value:function(w){this.needConfirmation=w,this.nodes.button.classList.add(this.CSS.buttonConfirm)}}]),g}();o.default=_,_.displayName="DeleteTune",_.isTune=!0,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(2),e(3),e(15)],(a=typeof(n=function(o,s,u,h){"use strict";var d=e(1);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=d(s),u=d(u),h=d(h);var _=function(){function g(w){var C=w.api;(0,s.default)(this,g),this.CSS={button:"ce-settings__button",wrapper:"ce-tune-move-up",animation:"wobble"},this.api=C}return(0,u.default)(g,[{key:"render",value:function(){var w=this,C=h.default.make("div",[this.CSS.button,this.CSS.wrapper],{});return C.appendChild(h.default.svg("arrow-up",14,14)),this.api.listeners.on(C,"click",function(k){return w.handleClick(k,C)},!1),this.api.tooltip.onHover(C,this.api.i18n.t("Move up")),C}},{key:"handleClick",value:function(w,C){var k=this,E=this.api.blocks.getCurrentBlockIndex(),O=this.api.blocks.getBlockByIndex(E),N=this.api.blocks.getBlockByIndex(E-1);if(E===0||!O||!N)return C.classList.add(this.CSS.animation),void window.setTimeout(function(){C.classList.remove(k.CSS.animation)},500);var m,y=O.holder,b=N.holder,S=y.getBoundingClientRect(),A=b.getBoundingClientRect();m=A.top>0?Math.abs(S.top)-Math.abs(A.top):window.innerHeight-Math.abs(S.top)+Math.abs(A.top),window.scrollBy(0,-1*m),this.api.blocks.move(E-1),this.api.tooltip.hide()}}]),g}();o.default=_,_.displayName="MoveUpTune",_.isTune=!0,r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){var n,i,a;i=[t,e(29),e(2),e(3),e(5),e(6),e(4),e(146)],(a=typeof(n=function(o,s,u,h,d,_,g,w){"use strict";var C=e(1);function k(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,s=C(s),u=C(u),h=C(h),d=C(d),_=C(_),g=C(g);var E=function(O){(0,d.default)(y,O);var N,m=(N=y,function(){var b,S=(0,g.default)(N);if(k()){var A=(0,g.default)(this).constructor;b=Reflect.construct(S,arguments,A)}else b=S.apply(this,arguments);return(0,_.default)(this,b)});function y(){return(0,u.default)(this,y),m.apply(this,arguments)}return(0,h.default)(y,[{key:"blockTools",get:function(){return new y(Array.from(this.entries()).filter(function(b){return(0,s.default)(b,2)[1].isBlock()}))}},{key:"inlineTools",get:function(){return new y(Array.from(this.entries()).filter(function(b){return(0,s.default)(b,2)[1].isInline()}))}},{key:"blockTunes",get:function(){return new y(Array.from(this.entries()).filter(function(b){return(0,s.default)(b,2)[1].isTune()}))}},{key:"internalTools",get:function(){return new y(Array.from(this.entries()).filter(function(b){return(0,s.default)(b,2)[1].isInternal}))}},{key:"externalTools",get:function(){return new y(Array.from(this.entries()).filter(function(b){return!(0,s.default)(b,2)[1].isInternal}))}}]),y}((0,(w=C(w)).default)(Map));o.default=E,E.displayName="ToolsCollection",r.exports=t.default})=="function"?n.apply(t,i):n)===void 0||(r.exports=a)},function(r,t,e){r.exports=function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(1&s&&(o=a(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var h in o)a.d(u,h,function(d){return o[d]}.bind(null,h));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=0)}([function(n,i,a){n.exports=a(1)},function(n,i,a){"use strict";a.r(i),a.d(i,"default",function(){return o});class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.loadStyles(),this.prepare(),window.addEventListener("scroll",()=>{this.showed&&this.hide(!0)},{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(u,h,d){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);let _=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},d);if(_.hidingDelay&&(this.hidingDelay=_.hidingDelay),this.nodes.content.innerHTML="",typeof h=="string")this.nodes.content.appendChild(document.createTextNode(h));else{if(!(h instanceof Node))throw Error("[CodeX Tooltip] Wrong type of \xABcontent\xBB passed. It should be an instance of Node or String. But "+typeof h+" given.");this.nodes.content.appendChild(h)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),_.placement){case"top":this.placeTop(u,_);break;case"left":this.placeLeft(u,_);break;case"right":this.placeRight(u,_);break;case"bottom":default:this.placeBottom(u,_)}_&&_.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},_.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(u=!1){if(this.hidingDelay&&!u)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(u,h,d){u.addEventListener("mouseenter",()=>{this.show(u,h,d)}),u.addEventListener("mouseleave",()=>{this.hide()})}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){let u="codex-tooltips-style";if(document.getElementById(u))return;let h=a(2),d=this.make("style",null,{textContent:h.toString(),id:u});this.prepend(document.head,d)}placeBottom(u,h){let d=u.getBoundingClientRect(),_=d.left+u.clientWidth/2-this.nodes.wrapper.offsetWidth/2,g=d.bottom+window.pageYOffset+this.offsetTop+h.marginTop;this.applyPlacement("bottom",_,g)}placeTop(u,h){let d=u.getBoundingClientRect(),_=d.left+u.clientWidth/2-this.nodes.wrapper.offsetWidth/2,g=d.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",_,g)}placeLeft(u,h){let d=u.getBoundingClientRect(),_=d.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-h.marginLeft,g=d.top+window.pageYOffset+u.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",_,g)}placeRight(u,h){let d=u.getBoundingClientRect(),_=d.right+this.offsetRight+h.marginRight,g=d.top+window.pageYOffset+u.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",_,g)}applyPlacement(u,h,d){this.nodes.wrapper.classList.add(this.CSS.placement[u]),this.nodes.wrapper.style.left=h+"px",this.nodes.wrapper.style.top=d+"px"}make(u,h=null,d={}){let _=document.createElement(u);Array.isArray(h)?_.classList.add(...h):h&&_.classList.add(h);for(let g in d)d.hasOwnProperty(g)&&(_[g]=d[g]);return _}append(u,h){Array.isArray(h)?h.forEach(d=>u.appendChild(d)):u.appendChild(h)}prepend(u,h){Array.isArray(h)?(h=h.reverse()).forEach(d=>u.prepend(d)):u.prepend(h)}}},function(n,i){n.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default},function(r,t,e){"use strict";e.r(t),t.default=`<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg">
<symbol id="arrow-down" viewBox="0 0 14 14">
  <path transform="matrix(1 0 0 -1 0 14)" d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>

</symbol>
<symbol id="arrow-up" viewBox="0 0 14 14">
    <path d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>

</symbol>
<symbol id="bold" viewBox="0 0 12 14"><path d="M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"/>
</symbol>
<symbol id="cross" viewBox="0 0 237 237">
  <path transform="rotate(45 280.675 51.325)" d="M191 191V73c0-5.523 4.477-10 10-10h25c5.523 0 10 4.477 10 10v118h118c5.523 0 10 4.477 10 10v25c0 5.523-4.477 10-10 10H236v118c0 5.523-4.477 10-10 10h-25c-5.523 0-10-4.477-10-10V236H73c-5.523 0-10-4.477-10-10v-25c0-5.523 4.477-10 10-10h118z"/>

</symbol>
<symbol id="dots" viewBox="0 0 8 8">
  <circle cx="6.5" cy="1.5" r="1.5"/>
  <circle cx="6.5" cy="6.5" r="1.5"/>
  <circle cx="1.5" cy="1.5" r="1.5"/>
  <circle cx="1.5" cy="6.5" r="1.5"/>

</symbol>
<symbol id="italic" viewBox="0 0 4 11">
    <path d="M3.289 4.17L2.164 9.713c-.078.384-.238.674-.48.87-.243.198-.52.296-.831.296-.312 0-.545-.1-.699-.302-.153-.202-.192-.49-.116-.864L1.15 4.225c.077-.38.232-.665.466-.857a1.25 1.25 0 01.818-.288c.312 0 .55.096.713.288.163.192.21.46.141.801zm-.667-2.09c-.295 0-.53-.09-.706-.273-.176-.181-.233-.439-.173-.77.055-.302.207-.55.457-.745C2.45.097 2.716 0 3 0c.273 0 .5.088.68.265.179.176.238.434.177.771-.06.327-.21.583-.45.767-.24.185-.502.277-.785.277z"/>

</symbol>
<symbol id="link" viewBox="0 0 14 10">
  <path d="M6 0v2H5a3 3 0 000 6h1v2H5A5 5 0 115 0h1zm2 0h1a5 5 0 110 10H8V8h1a3 3 0 000-6H8V0zM5 4h4a1 1 0 110 2H5a1 1 0 110-2z"/>

</symbol>
<symbol id="plus" viewBox="0 0 14 14">
    <path d="M8.05 5.8h4.625a1.125 1.125 0 0 1 0 2.25H8.05v4.625a1.125 1.125 0 0 1-2.25 0V8.05H1.125a1.125 1.125 0 0 1 0-2.25H5.8V1.125a1.125 1.125 0 0 1 2.25 0V5.8z"/>

</symbol>
<symbol id="sad-face" viewBox="0 0 52 52">
    <path fill="#D76B6B" fill-rule="nonzero" d="M26 52C11.64 52 0 40.36 0 26S11.64 0 26 0s26 11.64 26 26-11.64 26-26 26zm0-3.25c12.564 0 22.75-10.186 22.75-22.75S38.564 3.25 26 3.25 3.25 13.436 3.25 26 13.436 48.75 26 48.75zM15.708 33.042a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm23.834 0a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm-15.875 5.452a1.083 1.083 0 1 1-1.834-1.155c1.331-2.114 3.49-3.179 6.334-3.179 2.844 0 5.002 1.065 6.333 3.18a1.083 1.083 0 1 1-1.833 1.154c-.913-1.45-2.366-2.167-4.5-2.167s-3.587.717-4.5 2.167z"/>

</symbol>
<symbol id="toggler-down">
  <path d="M6.5 9.294a.792.792 0 01-.562-.232L2.233 5.356a.794.794 0 011.123-1.123L6.5 7.377l3.144-3.144a.794.794 0 011.123 1.123L7.062 9.062a.792.792 0 01-.562.232z"/>

</symbol>
<symbol id="unlink" viewBox="0 0 15 11">
  <path d="M13.073 2.099l-1.448 1.448A3 3 0 009 2H8V0h1c1.68 0 3.166.828 4.073 2.099zM6.929 4l-.879.879L7.172 6H5a1 1 0 110-2h1.929zM6 0v2H5a3 3 0 100 6h1v2H5A5 5 0 115 0h1zm6.414 7l2.122 2.121-1.415 1.415L11 8.414l-2.121 2.122L7.464 9.12 9.586 7 7.464 4.879 8.88 3.464 11 5.586l2.121-2.122 1.415 1.415L12.414 7z"/>

</symbol></svg>`},function(r,t){r.exports='.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide,.codex-editor__redactor--hidden{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff "}@media (min-width:651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor__loader{position:relative;height:30vh}.codex-editor__loader:before{content:"";position:absolute;left:50%;top:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:2px solid rgba(201,201,204,.48);border-top-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:editor-loader-spin .8s linear infinite;animation:editor-loader-spin .8s linear infinite;will-change:transform}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:rgba(46,170,220,.2);border:1px solid transparent}.codex-editor svg{fill:currentColor;vertical-align:middle;max-height:100%}::-moz-selection{background-color:#d4ecff}::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}@-webkit-keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,transform;display:none}@media (max-width:650px){.ce-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}}@media (max-width:650px) and (max-width:650px){.ce-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}@media (max-width:650px){.ce-toolbar{padding:3px;margin-top:5px}.ce-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar--opened{display:block}@media (max-width:650px){.ce-toolbar--opened{display:-webkit-box;display:-ms-flexbox;display:flex}}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}@media (max-width:650px){.ce-toolbar__content{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;margin:0;max-width:calc(100% - 35px)}}.ce-toolbar__plus{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:-34px;-ms-flex-negative:0;flex-shrink:0}.ce-toolbar__plus--active,.ce-toolbar__plus:hover{color:#388ae5}.ce-toolbar__plus--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}.ce-toolbar__plus--hidden{display:none}@media (max-width:650px){.ce-toolbar__plus{display:-webkit-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;position:static;-webkit-transform:none!important;transform:none!important}}.ce-toolbar .ce-toolbox,.ce-toolbar__plus{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ce-toolbar__actions{position:absolute;right:-30px;top:5px;opacity:0}@media (max-width:650px){.ce-toolbar__actions{position:absolute;right:-28px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.ce-toolbar__actions--opened{opacity:1}.ce-toolbar__actions-buttons{text-align:right}.ce-toolbar__settings-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:18px;height:18px;color:#707684;cursor:pointer;background:#eff2f5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-toolbar__settings-btn:hover{color:#1d202b}@media (max-width:650px){.ce-toolbar__settings-btn{background:transparent}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}.ce-toolbox{position:absolute;visibility:hidden;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}@media (max-width:650px){.ce-toolbox{position:static;-webkit-transform:none!important;transform:none!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto}}.ce-toolbox--opened{opacity:1;visibility:visible}.ce-toolbox__button{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-negative:0;flex-shrink:0}.ce-toolbox__button--active,.ce-toolbox__button:hover{color:#388ae5}.ce-toolbox__button--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbox-button-tooltip__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}@media (min-width:651px){.codex-editor--narrow .ce-toolbox{background:#fff;z-index:2}}.ce-inline-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-inline-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-inline-toolbar{-webkit-transform:translateX(-50%) translateY(8px) scale(.9);transform:translateX(-50%) translateY(8px) scale(.9);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.9);transform:translateX(-23px) translateY(8px) scale(.9)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translateX(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.9);transform:translateX(-100%) translateY(8px) scale(.9);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{width:100%;padding:0 6px}.ce-inline-toolbar__buttons,.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:34px;padding:0 9px 0 10px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48)}.ce-inline-toolbar__dropdown:hover{background:#eff2f5}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content{display:-webkit-box;display:-ms-flexbox;display:flex;font-weight:500;font-size:14px}.ce-inline-toolbar__dropdown-content svg{height:12px}.ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:4px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-inline-tool:hover{background-color:#eff2f5}.ce-inline-tool{border-radius:0;line-height:normal;width:auto;padding:0 5px!important;min-width:24px}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool:not(:last-of-type){margin-right:2px}.ce-inline-tool .icon{height:12px}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48)}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-conversion-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-conversion-toolbar{opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:150px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:20px;height:20px;border:1px solid rgba(201,201,204,.48);border-radius:3px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px;background:#fff}.ce-conversion-tool__icon svg{width:11px;height:11px}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-settings{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-settings{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-settings{right:-1px;top:30px;min-width:114px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-settings--left-oriented:before{left:15px;margin-left:0}.ce-settings--right-oriented:before{left:auto;right:15px;margin-left:0}@media (max-width:650px){.ce-settings{bottom:40px;right:-11px;top:auto}}.ce-settings:before{left:auto;right:12px}@media (max-width:650px){.ce-settings:before{bottom:-5px;top:auto}}.ce-settings{display:none}.ce-settings--opened{display:block;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-name:panelShowing;animation-name:panelShowing}.ce-settings__plugin-zone:not(:empty){padding:3px 3px 0}.ce-settings__default-zone:not(:empty){padding:3px}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-settings__button:hover{background-color:#eff2f5}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button{line-height:32px}.ce-settings__button--disabled{cursor:not-allowed!important;opacity:.3}.ce-settings__button--selected{color:#388ae5}.ce-settings__button--delete{-webkit-transition:background-color .3s ease;transition:background-color .3s ease;will-change:background-color}.ce-settings__button--delete .icon{-webkit-transition:-webkit-transform .2s ease-out;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out;will-change:transform}.ce-settings__button--confirm{background-color:#e24a4a!important;color:#fff}.ce-settings__button--confirm:hover{background-color:#d54a4a!important}.ce-settings__button--confirm .icon{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content .ce-stub,.ce-block--selected .ce-block__content img{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388ae5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388ae5,#388ae5 1px,#fff 0,#fff 6px)}.ce-block a{cursor:pointer;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width:651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.cdx-block{padding:.4em 0}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important;display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.cdx-settings-button:hover{background-color:#eff2f5}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button:not(:nth-child(3n+3)){margin-right:3px}.cdx-settings-button:nth-child(n+4){margin-top:3px}.cdx-settings-button--active{color:#388ae5}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s linear infinite;animation:cdxRotation 1.2s linear infinite}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px 0 rgba(18,30,57,.04);color:#707684;text-align:center;cursor:pointer}.cdx-button:hover{background:#fbfcfe;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px 0 rgba(18,30,57,.08)}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:3.5em 0;margin:17px 0;border-radius:3px;background:#fcf7f7;color:#b46262}.ce-stub__info{margin-left:20px}.ce-stub__title{margin-bottom:3px;font-weight:600;font-size:18px;text-transform:capitalize}.ce-stub__subtitle{font-size:16px}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-34px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-34px}@media (max-width:650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0 solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}'}])})});var Pp=xr((mo,rc)=>{(function(r,t){typeof mo=="object"&&typeof rc=="object"?rc.exports=t():typeof define=="function"&&define.amd?define([],t):typeof mo=="object"?mo.Undo=t():r.Undo=t()})(window,function(){return function(r){var t={};function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=r,e.c=t,e.d=function(n,i,a){e.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:a})},e.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,i){if(1&i&&(n=e(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var o in n)e.d(a,o,function(s){return n[s]}.bind(null,o));return a},e.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(i,"a",i),i},e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},e.p="/",e(e.s=0)}([function(r,t,e){"use strict";function n(s,u){for(var h=0;h<u.length;h++){var d=u[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}e.r(t),e.d(t,"default",function(){return o});var i=function(){function s(_,g){(function(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")})(this,s),this.holder=typeof g=="string"?document.getElementById(g):g,this.observer=null,this.debounceTimer=200,this.mutationDebouncer=this.debounce(function(){_()},this.debounceTimer)}var u,h,d;return u=s,(h=[{key:"setMutationObserver",value:function(){var _=this,g=this.holder;this.observer=new MutationObserver(function(w){_.mutationHandler(w)}),this.observer.observe(g,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(_){var g=this,w=!1;_.forEach(function(C){switch(C.type){case"childList":C.target===g.holder?g.onDestroy():w=!0;break;case"characterData":w=!0;break;case"attributes":C.target.classList.contains("ce-block")||(w=!0)}}),w&&this.mutationDebouncer()}},{key:"debounce",value:function(_,g){var w,C=this;return function(){for(var k=arguments.length,E=new Array(k),O=0;O<k;O++)E[O]=arguments[O];var N=C;clearTimeout(w),w=setTimeout(function(){return _.apply(N,E)},g)}}},{key:"onDestroy",value:function(){var _=new CustomEvent("destroy");document.dispatchEvent(_),this.observer.disconnect()}}])&&n(u.prototype,h),d&&n(u,d),s}();function a(s,u){for(var h=0;h<u.length;h++){var d=u[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}var o=function(){function s(_){var g=this,w=_.editor,C=_.onUpdate,k=_.maxLength;(function(N,m){if(!(N instanceof m))throw new TypeError("Cannot call a class as a function")})(this,s);var E={maxLength:30,onUpdate:function(){}},O=w.configuration;this.editor=w,this.shouldSaveHistory=!0,this.readOnly=O.readOnly,this.maxLength=k||E.maxLength,this.onUpdate=C||E.onUpdate,new i(function(){return g.registerChange()},O.holder).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var u,h,d;return u=s,d=[{key:"isReadOnlySupported",get:function(){return!0}}],(h=[{key:"truncate",value:function(_,g){for(;_.length>g;)_.shift()}},{key:"initialize",value:function(_){var g="blocks"in _?_.blocks:_,w={index:g.length-1,state:g};this.stack[0]=w,this.initialItem=w}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[]}],this.position=0,this.onUpdate()}},{key:"registerChange",value:function(){var _=this;this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(g){_.editorDidUpdate(g.blocks)&&_.save(g.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(_){var g=this.stack[this.position].state;return _.length!==g.length||JSON.stringify(g)!==JSON.stringify(_)}},{key:"save",value:function(_){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var g=this.editor.blocks.getCurrentBlockIndex();this.stack.push({index:g,state:_}),this.position+=1,this.onUpdate()}},{key:"undo",value:function(){var _=this;if(this.canUndo()){this.shouldSaveHistory=!1;var g=this.stack[this.position-=1],w=g.index,C=g.state;this.onUpdate(),this.editor.blocks.render({blocks:C}).then(function(){return _.editor.caret.setToBlock(w,"end")})}}},{key:"redo",value:function(){var _=this;if(this.canRedo()){this.shouldSaveHistory=!1;var g=this.stack[this.position+=1],w=g.index,C=g.state;this.onUpdate(),this.editor.blocks.render({blocks:C}).then(function(){return _.editor.caret.setToBlock(w,"end")})}}},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"setEventListeners",value:function(){var _=this,g=/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",w=function(k){k[g]&&k.key==="z"&&(k.preventDefault(),_.undo())},C=function(k){k[g]&&k.key==="y"&&(k.preventDefault(),_.redo())};document.addEventListener("keydown",w),document.addEventListener("keydown",C),document.addEventListener("destroy",function(){document.removeEventListener("keydown",w),document.removeEventListener("keydown",C)})}}])&&a(u.prototype,h),d&&a(u,d),s}()}]).default})});var Hp=xr((exports,module)=>{frappe.dashboard_utils={render_chart_filters:function(r,t,e,n){r.forEach(i=>{let a="",o="";i.icon&&(a=frappe.utils.icon(i.icon)),i.class&&(o=i.class);let s=`<div class="${t} ${o} btn-group dropdown pull-right">
					<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<button class="btn btn-secondary btn-xs">
			 				${a}
							<span class="filter-label">${i.label}</span>
							${frappe.utils.icon("select","xs")}
						</button>
				</a>`,u;i.fieldnames?u=i.options.map((_,g)=>`<li>
						<a class="dropdown-item" data-fieldname="${i.fieldnames[g]}">${_}</a>
					</li>`).join(""):u=i.options.map(_=>`<li><a class="dropdown-item">${_}</a></li>`).join("");let h=s+`<ul class="dropdown-menu">${u}</ul></div>`,d=$(h);n?d.prependTo(e):d.appendTo(e),d.find(".dropdown-menu").on("click","li a",_=>{let g=$(_.currentTarget),w;g.attr("data-fieldname")&&(w=g.attr("data-fieldname"));let C=g.text();g.parents(`.${t}`).find(".filter-label").text(C),i.action(C,w)})})},get_filters_for_chart_type:function(r){if(r.chart_type==="Custom"&&r.source){let t="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(t,{name:r.source}).then(e=>(frappe.dom.eval(e),frappe.dashboards.chart_sources[r.source].filters))}else return r.chart_type==="Report"&&r.report_name?frappe.report_utils.get_report_filters(r.report_name).then(t=>t):Promise.resolve()},get_dashboard_settings(){return frappe.db.get_list("Dashboard Settings",{filters:{name:frappe.session.user},fields:["*"]}).then(r=>r.length?r[0]:this.create_dashboard_settings().then(t=>t))},create_dashboard_settings(){return frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.create_dashboard_settings",{user:frappe.session.user}).then(r=>r)},get_years_since_creation(r){let t=this.get_year(r),e=this.get_year(frappe.datetime.now_date()),n=[];for(var i=e;i>=t;i--)n.push(i);return n},get_year(r){return r.substring(0,r.indexOf("-"))},remove_common_static_filter_values(r,t){if(t)if($.isArray(r))r=r.filter(e=>{for(let n of t)if(e[0]==n[0]&&e[1]==n[1])return!1;return!0});else for(let e of Object.keys(t))delete r[e];return r},get_fields_for_dynamic_filter_dialog(r,t,e){let n=[{fieldtype:"HTML",fieldname:"description",options:`<div>
						<p>Set dynamic filter values in JavaScript for the required fields here.
						</p>
						<p>Ex:
							<code>frappe.defaults.get_user_default("Company")</code>
						</p>
					</div>`}];if(r)e&&(t=[...t,...e]),t.forEach(i=>{for(let a of n)if(a.fieldname==i[0]+":"+i[1])return;i[2]=="="&&n.push({label:`${i[1]} (${i[0]})`,fieldname:i[0]+":"+i[1],fieldtype:"Data"})});else{t=Vt(Vt({},e),t);for(let i of Object.keys(t))n.push({label:i,fieldname:i,fieldtype:"Data"})}return n},get_all_filters(doc){let filters=JSON.parse(doc.filters_json||"null"),dynamic_filters=JSON.parse(doc.dynamic_filters_json||"null");if(!dynamic_filters)return filters;if($.isArray(dynamic_filters))dynamic_filters.forEach(f=>{try{f[3]=eval(f[3])}catch(r){frappe.throw(__("Invalid expression set in filter {0} ({1})",[f[1],f[0]]))}}),filters=[...filters,...dynamic_filters];else{for(let key of Object.keys(dynamic_filters))try{let val=eval(dynamic_filters[key]);dynamic_filters[key]=val}catch(r){frappe.throw(__("Invalid expression set in filter {0}",[key]))}Object.assign(filters,dynamic_filters)}return filters},get_dashboard_link_field(){let r={label:__("Select Dashboard"),fieldtype:"Link",fieldname:"dashboard",options:"Dashboard"};return frappe.boot.developer_mode||(r.get_query=()=>({filters:{is_standard:0}})),r},get_add_to_dashboard_dialog(r,t,e){let n=this.get_dashboard_link_field(),i=new frappe.ui.Dialog({title:__("Add to Dashboard"),fields:[n],primary_action:a=>{a.name=r,a.set_standard=frappe.boot.developer_mode,frappe.xcall(e,{args:a}).then(()=>{let o=`<a href = "#dashboard/${a.dashboard}">${a.dashboard}</a>`,s=__("{0} {1} added to Dashboard {2}",[t,a.name,o]);frappe.msgprint(s)}),i.hide()}});return i}}});var gh=xr((mS,Lo)=>{(function(t){"use strict";typeof define=="function"&&define.amd?define(t):typeof Lo!="undefined"&&typeof Lo.exports!="undefined"?Lo.exports=t():window.Sortable=t()})(function(){"use strict";if(typeof window=="undefined"||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,n,i,a,o,s,u,h,d,_,g,w,C,k=[],E=!1,O=!1,N=!1,m=[],y,b,S,A,I,T,R,B,F=!1,L=!1,j,P,z,Y,ce=/\s+/g,re="Sortable"+new Date().getTime(),Z=window,me=Z.document,ke=Z.parseInt,ne=Z.setTimeout,oe=Z.jQuery||Z.Zepto,ge=Z.Polymer,ve={capture:!1,passive:!1},pe=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),he=!!navigator.userAgent.match(/Edge/i),Ae=he||pe?"cssFloat":"float",Me="draggable"in me.createElement("div"),De=function(){if(pe)return!1;var X=me.createElement("x");return X.style.cssText="pointer-events:auto",X.style.pointerEvents==="auto"}(),Je=!1,Se=!1,ze=Math.abs,at=Math.min,Qe=[],lt=function(X,se){var de=ht(X),Te=ke(de.width),xe=rr(X,0,se),Fe=rr(X,1,se),Ue=xe&&ht(xe),Ke=Fe&&ht(Fe),Ye=Ue&&ke(Ue.marginLeft)+ke(Ue.marginRight)+We(xe).width,Xe=Ke&&ke(Ke.marginLeft)+ke(Ke.marginRight)+We(Fe).width;if(de.display==="flex")return de.flexDirection==="column"||de.flexDirection==="column-reverse"?"vertical":"horizontal";if(xe&&Ue.float!=="none"){var kt=Ue.float==="left"?"left":"right";return Fe&&(Ke.clear==="both"||Ke.clear===kt)?"vertical":"horizontal"}return xe&&(Ue.display==="block"||Ue.display==="flex"||Ue.display==="table"||Ue.display==="grid"||Ye>=Te&&de[Ae]==="none"||Fe&&de[Ae]==="none"&&Ye+Xe>Te)?"vertical":"horizontal"},At=function(X,se){for(var de=0;de<m.length;de++)if(!m[de].children.length){var Te=We(m[de]),xe=m[de][re].options.emptyInsertThreshold,Fe=X>=Te.left-xe&&X<=Te.right+xe,Ue=se>=Te.top-xe&&se<=Te.bottom+xe;if(Fe&&Ue)return m[de]}},It=function(X,se,de,Te,xe){var Fe=We(de),Ue=Te==="vertical"?Fe.left:Fe.top,Ke=Te==="vertical"?Fe.right:Fe.bottom,Ye=Te==="vertical"?X:se;return Ue<Ye&&Ye<Ke},bt=function(X,se,de){var Te=X===t&&Y||We(X),xe=se===t&&Y||We(se),Fe=de==="vertical"?Te.left:Te.top,Ue=de==="vertical"?Te.right:Te.bottom,Ke=de==="vertical"?Te.width:Te.height,Ye=de==="vertical"?xe.left:xe.top,Xe=de==="vertical"?xe.right:xe.bottom,kt=de==="vertical"?xe.width:xe.height;return Fe===Ye||Ue===Xe||Fe+Ke/2===Ye+kt/2},Et=function(X,se){if(!X||!X.getBoundingClientRect)return Z;var de=X,Te=!1;do if(de.clientWidth<de.scrollWidth||de.clientHeight<de.scrollHeight){var xe=ht(de);if(de.clientWidth<de.scrollWidth&&(xe.overflowX=="auto"||xe.overflowX=="scroll")||de.clientHeight<de.scrollHeight&&(xe.overflowY=="auto"||xe.overflowY=="scroll")){if(!de||!de.getBoundingClientRect||de===me.body)return Z;if(Te||se)return de;Te=!0}}while(de=de.parentNode);return Z},Rt=Jr(function(X,se,de,Te){if(se.scroll){var xe=de?de[re]:window,Fe=se.scrollSensitivity,Ue=se.scrollSpeed,Ke=X.clientX,Ye=X.clientY,Xe=window.innerWidth,kt=window.innerHeight,pt=!1;h!==de&&(Lt(),u=se.scroll,d=se.scrollFn,u===!0&&(u=Et(de,!0),h=u));var Ot=0,qt=u;do{var mt=qt,yt=We(mt),ur=yt.top,or=yt.bottom,tr=yt.left,nr=yt.right,K=yt.width,_e=yt.height,ae,we,q,D,V,W,le,Q,ue;if(mt!==Z?(ae=mt.scrollWidth,we=mt.scrollHeight,q=ht(mt),W=K<ae&&(q.overflowX==="auto"||q.overflowX==="scroll"),le=_e<we&&(q.overflowY==="auto"||q.overflowY==="scroll"),Q=mt.scrollLeft,ue=mt.scrollTop):(ae=me.documentElement.scrollWidth,we=me.documentElement.scrollHeight,q=ht(me.documentElement),W=K<ae&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),le=_e<we&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible"),Q=me.documentElement.scrollLeft,ue=me.documentElement.scrollTop),D=W&&(ze(nr-Ke)<=Fe&&Q+K<ae)-(ze(tr-Ke)<=Fe&&!!Q),V=le&&(ze(or-Ye)<=Fe&&ue+_e<we)-(ze(ur-Ye)<=Fe&&!!ue),!k[Ot])for(var ye=0;ye<=Ot;ye++)k[ye]||(k[ye]={});(k[Ot].vx!=D||k[Ot].vy!=V||k[Ot].el!==mt)&&(k[Ot].el=mt,k[Ot].vx=D,k[Ot].vy=V,clearInterval(k[Ot].pid),mt&&(D!=0||V!=0)&&(pt=!0,k[Ot].pid=setInterval(function(){Te&&this.layer===0&&nt.active._emulateDragOver(!0);var Le=k[this.layer].vy?k[this.layer].vy*Ue:0,Pe=k[this.layer].vx?k[this.layer].vx*Ue:0;typeof d=="function"&&d.call(xe,Pe,Le,X,I,k[this.layer].el)!=="continue"||(k[this.layer].el===Z?Z.scrollTo(Z.pageXOffset+Pe,Z.pageYOffset+Le):(k[this.layer].el.scrollTop+=Le,k[this.layer].el.scrollLeft+=Pe))}.bind({layer:Ot}),24))),Ot++}while(se.bubbleScroll&&qt!==Z&&(qt=Et(qt,!1)));E=pt}},30),Lt=function(){k.forEach(function(X){clearInterval(X.pid)}),k=[]},Ce=function(X){function se(xe,Fe){return function(Ue,Ke,Ye,Xe){var kt=Ue.options.group.name&&Ke.options.group.name&&Ue.options.group.name===Ke.options.group.name;if(xe==null&&(Fe||kt))return!0;if(xe==null||xe===!1)return!1;if(Fe&&xe==="clone")return xe;if(typeof xe=="function")return se(xe(Ue,Ke,Ye,Xe),Fe)(Ue,Ke,Ye,Xe);var pt=(Fe?Ue:Ke).options.group.name;return xe===!0||typeof xe=="string"&&xe===pt||xe.join&&xe.indexOf(pt)>-1}}var de={},Te=X.group;(!Te||typeof Te!="object")&&(Te={name:Te}),de.name=Te.name,de.checkPull=se(Te.pull,!0),de.checkPut=se(Te.put),de.revertClone=Te.revertClone,X.group=de},Ie=function(X){!t||!t.parentNode||t.parentNode[re]&&t.parentNode[re]._computeIsAligned(X)},Ve=function(X,se){for(var de=se;!de[re];)de=de.parentNode;return X===de},ct=function(X,se,de){for(var Te=X.parentNode;Te&&!Te[re];)Te=Te.parentNode;Te&&Te[re][de](mr(se,{artificialBubble:!0}))},Pt=function(){!De&&n&&ht(n,"display","none")},Mt=function(){!De&&n&&ht(n,"display","")};me.addEventListener("click",function(X){if(N)return X.preventDefault(),X.stopPropagation&&X.stopPropagation(),X.stopImmediatePropagation&&X.stopImmediatePropagation(),N=!1,!1},!0);var Zt=function(X){if(X=X.touches?X.touches[0]:X,t){var se=At(X.clientX,X.clientY);se&&se[re]._onDragOver({clientX:X.clientX,clientY:X.clientY,target:se,rootEl:se})}};xt(me,"dragover",Zt),xt(me,"mousemove",Zt),xt(me,"touchmove",Zt);function nt(X,se){if(!(X&&X.nodeType&&X.nodeType===1))throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(X);this.el=X,this.options=se=mr({},se),X[re]=this;var de={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(X.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return lt(X,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Fe,Ue){Fe.setData("Text",Ue.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:ke(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:nt.supportPointer!==!1&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var Te in de)!(Te in se)&&(se[Te]=de[Te]);Ce(se);for(var xe in this)xe.charAt(0)==="_"&&typeof this[xe]=="function"&&(this[xe]=this[xe].bind(this));this.nativeDraggable=se.forceFallback?!1:Me,se.supportPointer?xt(X,"pointerdown",this._onTapStart):(xt(X,"mousedown",this._onTapStart),xt(X,"touchstart",this._onTapStart)),this.nativeDraggable&&(xt(X,"dragover",this),xt(X,"dragenter",this)),m.push(this.el),se.store&&se.store.get&&this.sort(se.store.get(this)||[])}nt.prototype={constructor:nt,_computeIsAligned:function(X){var se;if(n&&!De?(Pt(),se=me.elementFromPoint(X.clientX,X.clientY),Mt()):se=X.target,se=Nt(se,this.options.draggable,this.el,!1),!Se&&!(!t||t.parentNode!==this.el)){for(var de=this.el.children,Te=0;Te<de.length;Te++)Nt(de[Te],this.options.draggable,this.el,!1)&&de[Te]!==se&&(de[Te].sortableMouseAligned=It(X.clientX,X.clientY,de[Te],this._getDirection(X,null),this.options));Nt(se,this.options.draggable,this.el,!0)||(R=null),Se=!0,ne(function(){Se=!1},30)}},_getDirection:function(X,se){return typeof this.options.direction=="function"?this.options.direction.call(this,X,se,t):this.options.direction},_onTapStart:function(X){if(!!X.cancelable){var se=this,de=this.el,Te=this.options,xe=Te.preventOnFilter,Fe=X.type,Ue=X.touches&&X.touches[0],Ke=(Ue||X).target,Ye=X.target.shadowRoot&&(X.path&&X.path[0]||X.composedPath&&X.composedPath()[0])||Ke,Xe=Te.filter,kt;if(tt(de),!(pe&&!X.artificialBubble&&!Ve(de,Ke))&&!t&&!(/mousedown|pointerdown/.test(Fe)&&X.button!==0||Te.disabled)&&!Ye.isContentEditable){if(Ke=Nt(Ke,Te.draggable,de,!1),!Ke){pe&&ct(de,X,"_onTapStart");return}if(s!==Ke){if(kt=ar(Ke,Te.draggable),typeof Xe=="function"){if(Xe.call(this,X,Ke,this)){ut(se,Ye,"filter",Ke,de,de,kt),xe&&X.cancelable&&X.preventDefault();return}}else if(Xe&&(Xe=Xe.split(",").some(function(pt){if(pt=Nt(Ye,pt.trim(),de,!1),pt)return ut(se,pt,"filter",Ke,de,de,kt),!0}),Xe)){xe&&X.cancelable&&X.preventDefault();return}Te.handle&&!Nt(Ye,Te.handle,de,!1)||this._prepareDragStart(X,Ue,Ke,kt)}}}},_handleAutoScroll:function(X,se){if(!(!t||!this.options.scroll)){var de=X.clientX,Te=X.clientY,xe=me.elementFromPoint(de,Te),Fe=this;if(se||he||pe){Rt(X,Fe.options,xe,se);var Ue=Et(xe,!0);E&&(!y||de!==b||Te!==S)&&(y&&clearInterval(y),y=setInterval(function(){if(!!t){var Ke=Et(me.elementFromPoint(de,Te),!0);Ke!==Ue&&(Ue=Ke,Lt(),Rt(X,Fe.options,Ue,se))}},10),b=de,S=Te)}else{if(!Fe.options.bubbleScroll||Et(xe,!0)===window){Lt();return}Rt(X,Fe.options,Et(xe,!1),!1)}}},_prepareDragStart:function(X,se,de,Te){var xe=this,Fe=xe.el,Ue=xe.options,Ke=Fe.ownerDocument,Ye;de&&!t&&de.parentNode===Fe&&(a=Fe,t=de,e=t.parentNode,o=t.nextSibling,s=de,w=Ue.group,_=Te,A={target:t,clientX:(se||X).clientX,clientY:(se||X).clientY},this._lastX=(se||X).clientX,this._lastY=(se||X).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",Ye=function(){xe._disableDelayedDrag(),t.draggable=xe.nativeDraggable,xe._triggerDragStart(X,se),ut(xe,a,"choose",t,a,a,_),St(t,Ue.chosenClass,!0)},Ue.ignore.split(",").forEach(function(Xe){Wt(t,Xe.trim(),$t)}),Ue.supportPointer?xt(Ke,"pointerup",xe._onDrop):(xt(Ke,"mouseup",xe._onDrop),xt(Ke,"touchend",xe._onDrop),xt(Ke,"touchcancel",xe._onDrop)),Ue.delay?(xt(Ke,"mouseup",xe._disableDelayedDrag),xt(Ke,"touchend",xe._disableDelayedDrag),xt(Ke,"touchcancel",xe._disableDelayedDrag),xt(Ke,"mousemove",xe._delayedDragTouchMoveHandler),xt(Ke,"touchmove",xe._delayedDragTouchMoveHandler),Ue.supportPointer&&xt(Ke,"pointermove",xe._delayedDragTouchMoveHandler),xe._dragStartTimer=ne(Ye,Ue.delay)):Ye())},_delayedDragTouchMoveHandler:function(X){var se=X.touches?X.touches[0]:X;at(ze(se.clientX-this._lastX),ze(se.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var X=this.el.ownerDocument;clearTimeout(this._dragStartTimer),Ct(X,"mouseup",this._disableDelayedDrag),Ct(X,"touchend",this._disableDelayedDrag),Ct(X,"touchcancel",this._disableDelayedDrag),Ct(X,"mousemove",this._delayedDragTouchMoveHandler),Ct(X,"touchmove",this._delayedDragTouchMoveHandler),Ct(X,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(X,se){se=se||(X.pointerType=="touch"?X:null),!this.nativeDraggable||se?this.options.supportPointer?xt(me,"pointermove",this._onTouchMove):se?xt(me,"touchmove",this._onTouchMove):xt(me,"mousemove",this._onTouchMove):(xt(t,"dragend",this),xt(a,"dragstart",this._onDragStart));try{me.selection?Bt(function(){me.selection.empty()}):window.getSelection().removeAllRanges()}catch(de){}},_dragStarted:function(X){if(O=!1,a&&t){this.nativeDraggable&&(xt(me,"dragover",this._handleAutoScroll),xt(me,"dragover",Ie));var se=this.options;!X&&St(t,se.dragClass,!1),St(t,se.ghostClass,!0),ht(t,"transform",""),nt.active=this,X&&this._appendGhost(),ut(this,a,"start",t,a,a,_)}else this._nulling()},_emulateDragOver:function(X){if(I){if(this._lastX===I.clientX&&this._lastY===I.clientY&&!X)return;this._lastX=I.clientX,this._lastY=I.clientY,Pt();for(var se=me.elementFromPoint(I.clientX,I.clientY),de=se;se&&se.shadowRoot;)se=se.shadowRoot.elementFromPoint(I.clientX,I.clientY),de=se;if(de)do{if(de[re]){var Te;if(Te=de[re]._onDragOver({clientX:I.clientX,clientY:I.clientY,target:se,rootEl:de}),Te&&!this.options.dragoverBubble)break}se=de}while(de=de.parentNode);t.parentNode[re]._computeIsAligned(I),Mt()}},_onTouchMove:function(X){if(A){var se=this.options,de=se.fallbackTolerance,Te=se.fallbackOffset,xe=X.touches?X.touches[0]:X,Fe=n&&Pr(n),Ue=n&&Fe&&Fe.a,Ke=n&&Fe&&Fe.d,Ye=(xe.clientX-A.clientX+Te.x)/(Ue||1),Xe=(xe.clientY-A.clientY+Te.y)/(Ke||1),kt=X.touches?"translate3d("+Ye+"px,"+Xe+"px,0)":"translate("+Ye+"px,"+Xe+"px)";if(!nt.active&&!O){if(de&&at(ze(xe.clientX-this._lastX),ze(xe.clientY-this._lastY))<de)return;this._onDragStart(X,!0)}this._handleAutoScroll(xe,!0),T=!0,I=xe,ht(n,"webkitTransform",kt),ht(n,"mozTransform",kt),ht(n,"msTransform",kt),ht(n,"transform",kt),X.cancelable&&X.preventDefault()}},_appendGhost:function(){if(!n){var X=We(t,this.options.fallbackOnBody?me.body:a,!0),se=ht(t),de=this.options;n=t.cloneNode(!0),St(n,de.ghostClass,!1),St(n,de.fallbackClass,!0),St(n,de.dragClass,!0),ht(n,"box-sizing","border-box"),ht(n,"margin",0),ht(n,"top",X.top),ht(n,"left",X.left),ht(n,"width",X.width),ht(n,"height",X.height),ht(n,"opacity","0.8"),ht(n,"position","fixed"),ht(n,"zIndex","100000"),ht(n,"pointerEvents","none"),de.fallbackOnBody&&me.body.appendChild(n)||a.appendChild(n)}},_onDragStart:function(X,se){var de=this,Te=X.dataTransfer,xe=de.options;i=cr(t),i.draggable=!1,i.style["will-change"]="",this._hideClone(),St(i,de.options.chosenClass,!1),de._cloneId=Bt(function(){de.options.removeCloneOnHide||a.insertBefore(i,t),ut(de,a,"clone",t)}),!se&&St(t,xe.dragClass,!0),se?(N=!0,de._loopId=setInterval(de._emulateDragOver,50)):(Ct(me,"mouseup",de._onDrop),Ct(me,"touchend",de._onDrop),Ct(me,"touchcancel",de._onDrop),Te&&(Te.effectAllowed="move",xe.setData&&xe.setData.call(de,Te,t)),xt(me,"drop",de),ht(t,"transform","translateZ(0)")),O=!0,de._dragStartId=Bt(de._dragStarted.bind(de,se)),xt(me,"selectstart",de)},_onDragOver:function(X){var se=this.el,de=X.target,Te,xe,Fe,Ue=this.options,Ke=Ue.group,Ye=nt.active,Xe=w===Ke,kt=Ue.sort,pt=this;if(Je||pe&&!X.rootEl&&!X.artificialBubble&&!Ve(se,de))return;function Ot(){return Ye&&(St(t,C?C.options.ghostClass:Ye.options.ghostClass,!1),St(t,Ue.ghostClass,!0)),C!==pt&&pt!==nt.active?C=pt:pt===nt.active&&(C=null),(de===t&&!t.animated||de===se&&!de.animated)&&(R=null),!Ue.dragoverBubble&&!X.rootEl&&de!==me&&(pt._handleAutoScroll(X),t.parentNode[re]._computeIsAligned(X)),!Ue.dragoverBubble&&X.stopPropagation&&X.stopPropagation(),!0}function qt(){ut(pt,a,"change",de,se,a,_,ar(t,Ue.draggable),X)}if(X.preventDefault!==void 0&&X.cancelable&&X.preventDefault(),T=!0,de=Nt(de,Ue.draggable,se,!0),!!Nt(X.target,null,t,!0)||de.animated)return Ot();if(de!==t&&(N=!1),Ye&&!Ue.disabled&&(Xe?kt||(Fe=!a.contains(t)):C===this||(this.lastPutMode=w.checkPull(this,Ye,t,X))&&Ke.checkPut(this,Ye,t,X))){var mt=this._getDirection(X,de);if(Te=We(t),Fe)return this._hideClone(),e=a,o?a.insertBefore(t,o):a.appendChild(t),Ot();if(se.children.length===0||se.children[0]===n||Dt(X,mt,se)&&!t.animated){if(se.children.length!==0&&se.children[0]!==n&&se===X.target&&(de=Gr(se)),de&&(xe=We(de)),Xe?Ye._hideClone():Ye._showClone(this),Tr(a,se,t,Te,de,xe,X,!!de)!==!1)return se.appendChild(t),e=se,Y=null,qt(),this._animate(Te,t),de&&this._animate(xe,de),Ot()}else if(de&&de!==t&&de.parentNode===se){var yt=0,ur,or=de.sortableMouseAligned,tr=t.parentNode!==se,nr=ot(de,mt==="vertical"?"top":"left");if(R!==de&&(j=null,ur=We(de)[mt==="vertical"?"top":"left"],F=!1),bt(t,de,mt)&&or||tr||nr||Ue.invertSwap||j==="insert"||j==="swap"?(j!=="swap"&&(L=Ue.invertSwap||tr||E||nr),yt=lr(X,de,mt,Ue.swapThreshold,Ue.invertedSwapThreshold==null?Ue.swapThreshold:Ue.invertedSwapThreshold,L,R===de),j="swap"):(yt=Rr(de,Ue),j="insert"),yt===0)return Ot();Y=null,R=de,B=yt,xe=We(de);var K=de.nextElementSibling,_e=!1;_e=yt===1;var ae=Tr(a,se,t,Te,de,xe,X,_e);if(ae!==!1)return(ae===1||ae===-1)&&(_e=ae===1),Je=!0,ne(Hr,30),Xe?Ye._hideClone():Ye._showClone(this),_e&&!K?se.appendChild(t):de.parentNode.insertBefore(t,_e?K:de),e=t.parentNode,ur!==void 0&&!L&&(P=ze(ur-We(de)[mt==="vertical"?"top":"left"])),qt(),!tr&&this._animate(xe,de),this._animate(Te,t),Ot()}if(se.contains(t))return Ot()}return pe&&!X.rootEl&&ct(se,X,"_onDragOver"),!1},_animate:function(X,se){var de=this.options.animation;if(de){var Te=We(se);if(se===t&&(Y=Te),X.nodeType===1&&(X=We(X)),X.left+X.width/2!==Te.left+Te.width/2||X.top+X.height/2!==Te.top+Te.height/2){var xe=Pr(this.el),Fe=xe&&xe.a,Ue=xe&&xe.d;ht(se,"transition","none"),ht(se,"transform","translate3d("+(X.left-Te.left)/(Fe||1)+"px,"+(X.top-Te.top)/(Ue||1)+"px,0)"),z=se.offsetWidth,ht(se,"transition","transform "+de+"ms"+(this.options.easing?" "+this.options.easing:"")),ht(se,"transform","translate3d(0,0,0)")}typeof se.animated=="number"&&clearTimeout(se.animated),se.animated=ne(function(){ht(se,"transition",""),ht(se,"transform",""),se.animated=!1},de)}},_offUpEvents:function(){var X=this.el.ownerDocument;Ct(me,"touchmove",this._onTouchMove),Ct(me,"pointermove",this._onTouchMove),Ct(X,"mouseup",this._onDrop),Ct(X,"touchend",this._onDrop),Ct(X,"pointerup",this._onDrop),Ct(X,"touchcancel",this._onDrop),Ct(me,"selectstart",this)},_onDrop:function(X){var se=this.el,de=this.options;O=!1,E=!1,L=!1,F=!1,clearInterval(this._loopId),clearInterval(y),Lt(),Nr(),clearTimeout(this._dragStartTimer),Ge(this._cloneId),Ge(this._dragStartId),Ct(me,"mousemove",this._onTouchMove),this.nativeDraggable&&(Ct(me,"drop",this),Ct(se,"dragstart",this._onDragStart),Ct(me,"dragover",this._handleAutoScroll),Ct(me,"dragover",Ie)),this._offUpEvents(),X&&(T&&(X.cancelable&&X.preventDefault(),!de.dropBubble&&X.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(a===e||C&&C.lastPutMode!=="clone")&&i&&i.parentNode&&i.parentNode.removeChild(i),t&&(this.nativeDraggable&&Ct(t,"dragend",this),$t(t),t.style["will-change"]="",St(t,C?C.options.ghostClass:this.options.ghostClass,!1),St(t,this.options.chosenClass,!1),ut(this,a,"unchoose",t,e,a,_,null,X),a!==e?(g=ar(t,de.draggable),g>=0&&(ut(null,e,"add",t,e,a,_,g,X),ut(this,a,"remove",t,e,a,_,g,X),ut(null,e,"sort",t,e,a,_,g,X),ut(this,a,"sort",t,e,a,_,g,X)),C&&C.save()):t.nextSibling!==o&&(g=ar(t,de.draggable),g>=0&&(ut(this,a,"update",t,e,a,_,g,X),ut(this,a,"sort",t,e,a,_,g,X))),nt.active&&((g==null||g===-1)&&(g=_),ut(this,a,"end",t,e,a,_,g,X),this.save()))),this._nulling()},_nulling:function(){a=t=e=n=o=i=s=u=h=k.length=y=b=S=A=I=T=g=_=R=B=z=Y=C=w=nt.active=null,Qe.forEach(function(X){X.checked=!0}),Qe.length=0},handleEvent:function(X){switch(X.type){case"drop":case"dragend":this._onDrop(X);break;case"dragenter":case"dragover":t&&(this._onDragOver(X),Gt(X));break;case"selectstart":X.preventDefault();break}},toArray:function(){for(var X=[],se,de=this.el.children,Te=0,xe=de.length,Fe=this.options;Te<xe;Te++)se=de[Te],Nt(se,Fe.draggable,this.el,!1)&&X.push(se.getAttribute(Fe.dataIdAttr)||fn(se));return X},sort:function(X){var se={},de=this.el;this.toArray().forEach(function(Te,xe){var Fe=de.children[xe];Nt(Fe,this.options.draggable,de,!1)&&(se[Te]=Fe)},this),X.forEach(function(Te){se[Te]&&(de.removeChild(se[Te]),de.appendChild(se[Te]))})},save:function(){var X=this.options.store;X&&X.set&&X.set(this)},closest:function(X,se){return Nt(X,se||this.options.draggable,this.el,!1)},option:function(X,se){var de=this.options;if(se===void 0)return de[X];de[X]=se,X==="group"&&Ce(de)},destroy:function(){var X=this.el;X[re]=null,Ct(X,"mousedown",this._onTapStart),Ct(X,"touchstart",this._onTapStart),Ct(X,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ct(X,"dragover",this),Ct(X,"dragenter",this)),Array.prototype.forEach.call(X.querySelectorAll("[draggable]"),function(se){se.removeAttribute("draggable")}),this._onDrop(),m.splice(m.indexOf(this.el),1),this.el=X=null},_hideClone:function(){i.cloneHidden||(ht(i,"display","none"),i.cloneHidden=!0,i.parentNode&&this.options.removeCloneOnHide&&i.parentNode.removeChild(i))},_showClone:function(X){if(X.lastPutMode!=="clone"){this._hideClone();return}i.cloneHidden&&(a.contains(t)&&!this.options.group.revertClone?a.insertBefore(i,t):o?a.insertBefore(i,o):a.appendChild(i),this.options.group.revertClone&&this._animate(t,i),ht(i,"display",""),i.cloneHidden=!1)}};function Nt(X,se,de,Te){if(X){de=de||me;do{if(se!=null&&(se[0]===">"&&X.parentNode===de&&Ur(X,se.substring(1))||Ur(X,se))||Te&&X===de)return X;if(X===de)break}while(X=Ir(X))}return null}function Ir(X){return X.host&&X!==me&&X.host.nodeType?X.host:X.parentNode}function Gt(X){X.dataTransfer&&(X.dataTransfer.dropEffect="move"),X.cancelable&&X.preventDefault()}function xt(X,se,de){X.addEventListener(se,de,ve)}function Ct(X,se,de){X.removeEventListener(se,de,ve)}function St(X,se,de){if(X&&se)if(X.classList)X.classList[de?"add":"remove"](se);else{var Te=(" "+X.className+" ").replace(ce," ").replace(" "+se+" "," ");X.className=(Te+(de?" "+se:"")).replace(ce," ")}}function ht(X,se,de){var Te=X&&X.style;if(Te){if(de===void 0)return me.defaultView&&me.defaultView.getComputedStyle?de=me.defaultView.getComputedStyle(X,""):X.currentStyle&&(de=X.currentStyle),se===void 0?de:de[se];!(se in Te)&&se.indexOf("webkit")===-1&&(se="-webkit-"+se),Te[se]=de+(typeof de=="string"?"":"px")}}function Pr(X){var se="";do{var de=ht(X,"transform");de&&de!=="none"&&(se=de+" "+se)}while(X=X.parentNode);if(window.DOMMatrix)return new DOMMatrix(se);if(window.WebKitCSSMatrix)return new WebKitCSSMatrix(se);if(window.CSSMatrix)return new CSSMatrix(se)}function Wt(X,se,de){if(X){var Te=X.getElementsByTagName(se),xe=0,Fe=Te.length;if(de)for(;xe<Fe;xe++)de(Te[xe],xe);return Te}return[]}function ut(X,se,de,Te,xe,Fe,Ue,Ke,Ye){X=X||se[re];var Xe,kt=X.options,pt="on"+de.charAt(0).toUpperCase()+de.substr(1);window.CustomEvent&&!pe&&!he?Xe=new CustomEvent(de,{bubbles:!0,cancelable:!0}):(Xe=me.createEvent("Event"),Xe.initEvent(de,!0,!0)),Xe.to=xe||se,Xe.from=Fe||se,Xe.item=Te||se,Xe.clone=i,Xe.oldIndex=Ue,Xe.newIndex=Ke,Xe.originalEvent=Ye,se&&se.dispatchEvent(Xe),kt[pt]&&kt[pt].call(X,Xe)}function Tr(X,se,de,Te,xe,Fe,Ue,Ke){var Ye,Xe=X[re],kt=Xe.options.onMove,pt;return window.CustomEvent&&!pe&&!he?Ye=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Ye=me.createEvent("Event"),Ye.initEvent("move",!0,!0)),Ye.to=se,Ye.from=X,Ye.dragged=de,Ye.draggedRect=Te,Ye.related=xe||se,Ye.relatedRect=Fe||We(se),Ye.willInsertAfter=Ke,Ye.originalEvent=Ue,X.dispatchEvent(Ye),kt&&(pt=kt.call(Xe,Ye,Ue)),pt}function $t(X){X.draggable=!1}function Hr(){Je=!1}function rr(X,se,de){for(var Te=0,xe=0,Fe=X.children;xe<Fe.length;){if(Fe[xe].style.display!=="none"&&Fe[xe]!==n&&Fe[xe]!==t&&Nt(Fe[xe],de.draggable,X,!1)){if(Te===se)return Fe[xe];Te++}xe++}return null}function Gr(X){for(var se=X.lastElementChild;(se===n||se.style.display==="none")&&(se=se.previousElementSibling,!!se););return se||null}function Dt(X,se,de){var Te=We(Gr(de)),xe=se==="vertical"?X.clientY:X.clientX,Fe=se==="vertical"?X.clientX:X.clientY,Ue=se==="vertical"?Te.bottom:Te.right,Ke=se==="vertical"?Te.left:Te.top,Ye=se==="vertical"?Te.right:Te.bottom,Xe=10;return se==="vertical"?Fe>Ye+Xe||Fe<=Ye&&xe>Ue&&Fe>=Ke:xe>Ue&&Fe>Ke||xe<=Ue&&Fe>Ye+Xe}function lr(X,se,de,Te,xe,Fe,Ue){var Ke=We(se),Ye=de==="vertical"?X.clientY:X.clientX,Xe=de==="vertical"?Ke.height:Ke.width,kt=de==="vertical"?Ke.top:Ke.left,pt=de==="vertical"?Ke.bottom:Ke.right,Ot=We(t),qt=!1;if(!Fe){if(Ue&&P<Xe*Te)if(!F&&(B===1?Ye>kt+Xe*xe/2:Ye<pt-Xe*xe/2)&&(F=!0),F)qt=!0;else{var mt=de==="vertical"?Ot.top:Ot.left,yt=de==="vertical"?Ot.bottom:Ot.right;if(B===1?Ye<kt+P:Ye>pt-P)return B*-1}else if(Ye>kt+Xe*(1-Te)/2&&Ye<pt-Xe*(1-Te)/2)return Ye>kt+Xe/2?-1:1}return qt=qt||Fe,qt&&(Ye<kt+Xe*xe/2||Ye>pt-Xe*xe/2)?Ye>kt+Xe/2?1:-1:0}function Rr(X,se){var de=ar(t,se.draggable),Te=ar(X,se.draggable);return de<Te?1:-1}function fn(X){for(var se=X.tagName+X.className+X.src+X.href+X.textContent,de=se.length,Te=0;de--;)Te+=se.charCodeAt(de);return Te.toString(36)}function ar(X,se){var de=0;if(!X||!X.parentNode)return-1;for(;X&&(X=X.previousElementSibling);)X.nodeName.toUpperCase()!=="TEMPLATE"&&X!==i&&de++;return de}function Ur(X,se){if(X)try{if(X.matches)return X.matches(se);if(X.msMatchesSelector)return X.msMatchesSelector(se);if(X.webkitMatchesSelector)return X.webkitMatchesSelector(se)}catch(de){return!1}return!1}var hr;function Jr(X,se){return function(){if(!hr){var de=arguments,Te=this;hr=ne(function(){de.length===1?X.call(Te,de[0]):X.apply(Te,de),hr=void 0},se)}}}function Nr(){clearTimeout(hr),hr=void 0}function mr(X,se){if(X&&se)for(var de in se)se.hasOwnProperty(de)&&(X[de]=se[de]);return X}function cr(X){return ge&&ge.dom?ge.dom(X).cloneNode(!0):oe?oe(X).clone(!0)[0]:X.cloneNode(!0)}function tt(X){Qe.length=0;for(var se=X.getElementsByTagName("input"),de=se.length;de--;){var Te=se[de];Te.checked&&Qe.push(Te)}}function Bt(X){return ne(X,0)}function Ge(X){return clearTimeout(X)}function We(X,se,de){if(!(!X.getBoundingClientRect&&X!==Z)){var Te,xe,Fe,Ue,Ke,Ye,Xe;if(X!==Z?(Te=X.getBoundingClientRect(),xe=Te.top,Fe=Te.left,Ue=Te.bottom,Ke=Te.right,Ye=Te.height,Xe=Te.width):(xe=0,Fe=0,Ue=window.innerHeight,Ke=window.innerWidth,Ye=window.innerHeight,Xe=window.innerWidth),de&&X!==Z){if(se=se||X.parentNode,!pe)do if(se&&se.getBoundingClientRect&&ht(se,"transform")!=="none"){var kt=se.getBoundingClientRect();xe-=kt.top+ke(ht(se,"border-top-width")),Fe-=kt.left+ke(ht(se,"border-left-width")),Ue=xe+Te.height,Ke=Fe+Te.width;break}while(se=se.parentNode);var pt=Pr(X),Ot=pt&&pt.a,qt=pt&&pt.d;pt&&(xe/=qt,Fe/=Ot,Xe/=Ot,Ye/=qt,Ue=xe+Ye,Ke=Fe+Xe)}return{top:xe,left:Fe,bottom:Ue,right:Ke,width:Xe,height:Ye}}}function ot(X,se){for(var de=Et(de,!0),Te=We(X)[se];de;){var xe=We(de)[se],Fe;if(se==="top"||se==="left"?Fe=Te>=xe:Fe=Te<=xe,!Fe)return!0;if(de===Z)break;de=Et(de,!1)}return!1}return xt(me,"touchmove",function(X){(nt.active||O)&&X.cancelable&&X.preventDefault()}),nt.utils={on:xt,off:Ct,css:ht,find:Wt,is:function(X,se){return!!Nt(X,se,X,!1)},extend:mr,throttle:Jr,closest:Nt,toggleClass:St,clone:cr,index:ar,nextTick:Bt,cancelNextTick:Ge,detectDirection:lt,getChild:rr},nt.create=function(X,se){return new nt(X,se)},nt.version="1.8.3",nt})});var jh=xr((gS,Bh)=>{"use strict";function D0(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var B0=D0(gh());function Ee(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}Ee.each=(r,t)=>typeof r=="string"?Array.from((t||document).querySelectorAll(r)):r||null;Ee.create=(r,t)=>{let e=document.createElement(r);for(let n in t){let i=t[n];if(n==="inside")Ee(i).appendChild(e);else if(n==="around"){let a=Ee(i);a.parentNode.insertBefore(e,a),e.appendChild(a)}else n==="styles"?typeof i=="object"&&Object.keys(i).map(a=>{e.style[a]=i[a]}):n in e?e[n]=i:e.setAttribute(n,i)}return e};Ee.on=(r,t,e,n)=>{n?Ee.delegate(r,t,e,n):(n=e,Ee.bind(r,t,n))};Ee.off=(r,t,e)=>{r.removeEventListener(t,e)};Ee.bind=(r,t,e)=>{t.split(/\s+/).forEach(function(n){r.addEventListener(n,e)})};Ee.delegate=(r,t,e,n)=>{r.addEventListener(t,function(i){let a=i.target.closest(e);a&&(i.delegatedTarget=a,n.call(this,i,a))})};Ee.unbind=(r,t)=>{if(r)for(let e in t){let n=t[e];e.split(/\s+/).forEach(function(i){r.removeEventListener(i,n)})}};Ee.fire=(r,t,e)=>{let n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);for(let i in e)n[i]=e[i];return r.dispatchEvent(n)};Ee.data=(r,t)=>{if(!t)return r.dataset;for(let e in t)r.dataset[e]=t[e]};Ee.style=(r,t)=>{if(typeof t=="string")return Ee.getStyle(r,t);Array.isArray(r)||(r=[r]),r.map(e=>{for(let n in t)e.style[n]=t[n]})};Ee.removeStyle=(r,t)=>{Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]),r.map(e=>{for(let n of t)e.style[n]=""})};Ee.getStyle=(r,t)=>{if(!t)return getComputedStyle(r);let e=getComputedStyle(r)[t];return["width","height"].includes(t)&&(e=parseFloat(e)),e};Ee.closest=(r,t)=>t?t.matches(r)?t:Ee.closest(r,t.parentNode):null;Ee.inViewport=(r,t)=>{let{top:e,left:n,bottom:i,right:a}=r.getBoundingClientRect(),{top:o,left:s,bottom:u,right:h}=t.getBoundingClientRect();return e>=o&&n>=s&&i<=u&&a<=h};Ee.scrollTop=function(t,e){requestAnimationFrame(()=>{t.scrollTop=e})};Ee.scrollbarSize=function(){return Ee.scrollBarSizeValue||(Ee.scrollBarSizeValue=j0()),Ee.scrollBarSizeValue};function j0(){let r=document.createElement("div");Ee.style(r,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),document.body.appendChild(r);let t=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),t}Ee.hasVerticalOverflow=function(r){return r.scrollHeight>r.offsetHeight+10};Ee.hasHorizontalOverflow=function(r){return r.scrollWidth>r.offsetWidth+10};Ee.measureTextWidth=function(r){let t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto",t.style.width="auto",t.style.whiteSpace="nowrap",t.innerText=r,document.body.appendChild(t),t.clientWidth+1};function F0(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var Si=F0,Mo=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function No(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function z0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function H0(r,t){return t={exports:{}},r(t,t.exports),t.exports}var U0=typeof Mo=="object"&&Mo&&Mo.Object===Object&&Mo,W0=U0,q0=typeof self=="object"&&self&&self.Object===Object&&self,V0=W0||q0||Function("return this")(),ma=V0,G0=function(){return ma.Date.now()},gc=G0,Y0=ma.Symbol,jo=Y0,Ch=Object.prototype,X0=Ch.hasOwnProperty,K0=Ch.toString,da=jo?jo.toStringTag:void 0;function J0(r){var t=X0.call(r,da),e=r[da];try{r[da]=void 0}catch(i){}var n=K0.call(r);return t?r[da]=e:delete r[da],n}var Z0=J0,Q0=Object.prototype,ew=Q0.toString;function tw(r){return ew.call(r)}var rw=tw,nw="[object Null]",iw="[object Undefined]",_h=jo?jo.toStringTag:void 0;function aw(r){return r==null?r===void 0?iw:nw:_h&&_h in Object(r)?Z0(r):rw(r)}var Sh=aw;function ow(r){return r!=null&&typeof r=="object"}var sw=ow,lw="[object Symbol]";function cw(r){return typeof r=="symbol"||sw(r)&&Sh(r)==lw}var uw=cw,vh=0/0,dw=/^\s+|\s+$/g,fw=/^[-+]0x[0-9a-f]+$/i,pw=/^0b[01]+$/i,hw=/^0o[0-7]+$/i,mw=parseInt;function gw(r){if(typeof r=="number")return r;if(uw(r))return vh;if(Si(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Si(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(dw,"");var e=pw.test(r);return e||hw.test(r)?mw(r.slice(2),e?2:8):fw.test(r)?vh:+r}var bh=gw,_w="Expected a function",vw=Math.max,bw=Math.min;function yw(r,t,e){var n,i,a,o,s,u,h=0,d=!1,_=!1,g=!0;if(typeof r!="function")throw new TypeError(_w);t=bh(t)||0,Si(e)&&(d=!!e.leading,_="maxWait"in e,a=_?vw(bh(e.maxWait)||0,t):a,g="trailing"in e?!!e.trailing:g);function w(S){var A=n,I=i;return n=i=void 0,h=S,o=r.apply(I,A),o}function C(S){return h=S,s=setTimeout(O,t),d?w(S):o}function k(S){var A=S-u,I=S-h,T=t-A;return _?bw(T,a-I):T}function E(S){var A=S-u,I=S-h;return u===void 0||A>=t||A<0||_&&I>=a}function O(){var S=gc();if(E(S))return N(S);s=setTimeout(O,k(S))}function N(S){return s=void 0,g&&n?w(S):(n=i=void 0,o)}function m(){s!==void 0&&clearTimeout(s),h=0,n=u=i=s=void 0}function y(){return s===void 0?o:N(gc())}function b(){var S=gc(),A=E(S);if(n=arguments,i=this,u=S,A){if(s===void 0)return C(u);if(_)return s=setTimeout(O,t),w(u)}return s===void 0&&(s=setTimeout(O,t)),o}return b.cancel=m,b.flush=y,b}var Th=yw,ww="Expected a function";function kw(r,t,e){var n=!0,i=!0;if(typeof r!="function")throw new TypeError(ww);return Si(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),Th(r,t,{leading:n,maxWait:t,trailing:i})}var xw=kw,Cw="[object AsyncFunction]",Sw="[object Function]",Tw="[object GeneratorFunction]",Ew="[object Proxy]";function Aw(r){if(!Si(r))return!1;var t=Sh(r);return t==Sw||t==Tw||t==Cw||t==Ew}var $w=Aw,Ow=ma["__core-js_shared__"],_c=Ow,yh=function(){var r=/[^.]+$/.exec(_c&&_c.keys&&_c.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Iw(r){return!!yh&&yh in r}var Pw=Iw,Rw=Function.prototype,Lw=Rw.toString;function Mw(r){if(r!=null){try{return Lw.call(r)}catch(t){}try{return r+""}catch(t){}}return""}var Nw=Mw,Dw=/[\\^$.*+?()[\]{}|]/g,Bw=/^\[object .+?Constructor\]$/,jw=Function.prototype,Fw=Object.prototype,zw=jw.toString,Hw=Fw.hasOwnProperty,Uw=RegExp("^"+zw.call(Hw).replace(Dw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ww(r){if(!Si(r)||Pw(r))return!1;var t=$w(r)?Uw:Bw;return t.test(Nw(r))}var qw=Ww;function Vw(r,t){return r==null?void 0:r[t]}var Gw=Vw;function Yw(r,t){var e=Gw(r,t);return qw(e)?e:void 0}var wc=Yw,Xw=wc(Object,"create"),ha=Xw;function Kw(){this.__data__=ha?ha(null):{},this.size=0}var Jw=Kw;function Zw(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Qw=Zw,e1="__lodash_hash_undefined__",t1=Object.prototype,r1=t1.hasOwnProperty;function n1(r){var t=this.__data__;if(ha){var e=t[r];return e===e1?void 0:e}return r1.call(t,r)?t[r]:void 0}var i1=n1,a1=Object.prototype,o1=a1.hasOwnProperty;function s1(r){var t=this.__data__;return ha?t[r]!==void 0:o1.call(t,r)}var l1=s1,c1="__lodash_hash_undefined__";function u1(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=ha&&t===void 0?c1:t,this}var d1=u1;function Ti(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Ti.prototype.clear=Jw;Ti.prototype.delete=Qw;Ti.prototype.get=i1;Ti.prototype.has=l1;Ti.prototype.set=d1;var wh=Ti;function f1(){this.__data__=[],this.size=0}var p1=f1;function h1(r,t){return r===t||r!==r&&t!==t}var m1=h1;function g1(r,t){for(var e=r.length;e--;)if(m1(r[e][0],t))return e;return-1}var zo=g1,_1=Array.prototype,v1=_1.splice;function b1(r){var t=this.__data__,e=zo(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():v1.call(t,e,1),--this.size,!0}var y1=b1;function w1(r){var t=this.__data__,e=zo(t,r);return e<0?void 0:t[e][1]}var k1=w1;function x1(r){return zo(this.__data__,r)>-1}var C1=x1;function S1(r,t){var e=this.__data__,n=zo(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}var T1=S1;function Ei(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Ei.prototype.clear=p1;Ei.prototype.delete=y1;Ei.prototype.get=k1;Ei.prototype.has=C1;Ei.prototype.set=T1;var E1=Ei,A1=wc(ma,"Map"),$1=A1;function O1(){this.size=0,this.__data__={hash:new wh,map:new($1||E1),string:new wh}}var I1=O1;function P1(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var R1=P1;function L1(r,t){var e=r.__data__;return R1(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Ho=L1;function M1(r){var t=Ho(this,r).delete(r);return this.size-=t?1:0,t}var N1=M1;function D1(r){return Ho(this,r).get(r)}var B1=D1;function j1(r){return Ho(this,r).has(r)}var F1=j1;function z1(r,t){var e=Ho(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}var H1=z1;function Ai(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Ai.prototype.clear=I1;Ai.prototype.delete=N1;Ai.prototype.get=B1;Ai.prototype.has=F1;Ai.prototype.set=H1;var U1=Ai,W1="__lodash_hash_undefined__";function q1(r){return this.__data__.set(r,W1),this}var V1=q1;function G1(r){return this.__data__.has(r)}var Y1=G1;function Fo(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new U1;++t<e;)this.add(r[t])}Fo.prototype.add=Fo.prototype.push=V1;Fo.prototype.has=Y1;var X1=Fo;function K1(r,t,e,n){for(var i=r.length,a=e+(n?1:-1);n?a--:++a<i;)if(t(r[a],a,r))return a;return-1}var J1=K1;function Z1(r){return r!==r}var Q1=Z1;function ek(r,t,e){for(var n=e-1,i=r.length;++n<i;)if(r[n]===t)return n;return-1}var tk=ek;function rk(r,t,e){return t===t?tk(r,t,e):J1(r,Q1,e)}var nk=rk;function ik(r,t){var e=r==null?0:r.length;return!!e&&nk(r,t,0)>-1}var ak=ik;function ok(r,t,e){for(var n=-1,i=r==null?0:r.length;++n<i;)if(e(t,r[n]))return!0;return!1}var sk=ok;function lk(r,t){return r.has(t)}var ck=lk,uk=wc(ma,"Set"),vc=uk;function dk(){}var fk=dk;function pk(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var Eh=pk,hk=1/0,mk=vc&&1/Eh(new vc([,-0]))[1]==hk?function(r){return new vc(r)}:fk,gk=mk,_k=200;function vk(r,t,e){var n=-1,i=ak,a=r.length,o=!0,s=[],u=s;if(e)o=!1,i=sk;else if(a>=_k){var h=t?null:gk(r);if(h)return Eh(h);o=!1,i=ck,u=new X1}else u=t?[]:s;e:for(;++n<a;){var d=r[n],_=t?t(d):d;if(d=e||d!==0?d:0,o&&_===_){for(var g=u.length;g--;)if(u[g]===_)continue e;t&&u.push(_),s.push(d)}else i(u,_,e)||(u!==s&&u.push(_),s.push(d))}return s}var bk=vk;function yk(r){return r&&r.length?bk(r):[]}var wk=yk;function Ah(r){return r.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`)}function bc(r){return Object.keys(r).map(e=>{let n=Ah(e),i=r[e];return i===void 0?"":`data-${n}="${i}" `}).join("").trim()}function kh(r){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=r,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(t)}function kk(r){return!isNaN(r)}var $h=xw,xk=Th;function pa(r,t=null){return(...e)=>new Promise(n=>{setTimeout(()=>{let a=r.apply(t,e);n(a)})})}function Uo(r,t,e){let n=e.reduce((i,a)=>(i[a]={get(){return t[a]}},i),{});Object.defineProperties(r,n)}function Ck(r){return r!==void 0||r!==null}function Sk(r){return!Ck(r)}function Do(r){return!isNaN(r)}function Tk(r){return Array.isArray(r)?r:[r]}function xh(r){return wk(r)}function fa(r,t){return r-t}function Ek(r){return r.replace(/<[^>]*>/g,"")}function Ak(r,t){return r&&(Object.keys(t).forEach(e=>{let n=new RegExp(`{(${e})}`,"g");r=r.replace(n,t[e])}),r)}var Oh=class{constructor(t){this.options=t,this.sortRows=pa(this.sortRows,this),this.switchColumn=pa(this.switchColumn,this),this.removeColumn=pa(this.removeColumn,this),this.options.filterRows=pa(this.options.filterRows,this)}init(t,e){t||(t=this.options.data),e&&(this.options.columns=e),this.data=t,this.rowCount=0,this.columns=[],this.rows=[],this.prepareColumns(),this.prepareRows(),this.prepareTreeRows(),this.prepareRowView(),this.prepareNumericColumns()}get currentSort(){return this.columns.find(e=>e.sortOrder!=="none")||{colIndex:-1,sortOrder:"none"}}prepareColumns(){this.columns=[],this.validateColumns(),this.prepareDefaultColumns(),this.prepareHeader()}prepareDefaultColumns(){if(this.options.checkboxColumn&&!this.hasColumnById("_checkbox")){let t={id:"_checkbox",content:this.getCheckboxHTML(),editable:!1,resizable:!1,sortable:!1,focusable:!1,dropdown:!1,width:32};this.columns.push(t)}if(this.options.serialNoColumn&&!this.hasColumnById("_rowIndex")){let t={id:"_rowIndex",content:"",align:"center",editable:!1,resizable:!1,focusable:!1,dropdown:!1};this.columns.push(t)}}prepareHeader(){let t=this.columns.concat(this.options.columns),e={isHeader:1,editable:!0,sortable:!0,resizable:!0,focusable:!0,dropdown:!0,width:null,format:n=>n==null?"":n+""};this.columns=t.map((n,i)=>this.prepareCell(n,i)).map(n=>Object.assign({},e,n)).map(n=>(n.content=n.content||n.name||"",n.id=n.id||n.content,n))}prepareCell(t,e){let n={content:"",sortOrder:"none",colIndex:e,column:this.columns[e]};return t!==null&&typeof t=="object"?Object.assign(n,t):n.content=t,n}prepareNumericColumns(){let t=this.getRow(0);!t||(this.columns=this.columns.map((e,n)=>{let i=t[n].content;return!e.align&&kk(i)&&(e.align="right"),e}))}prepareRows(){this.validateData(this.data),this.rows=this.data.map((t,e)=>{let n=this._getNextRowCount(),i=[],a={rowIndex:n};if(Array.isArray(t))for(this.options.checkboxColumn&&i.push(this.getCheckboxHTML()),this.options.serialNoColumn&&i.push(n+1+""),i=i.concat(t);i.length<this.columns.length;)i.push("");else{for(let o of this.columns)o.id==="_checkbox"?i.push(this.getCheckboxHTML()):o.id==="_rowIndex"?i.push(n+1+""):i.push(t[o.id]);a.indent=t.indent||0}return this.prepareRow(i,a)})}prepareTreeRows(){this.rows.forEach((t,e)=>{if(Do(t.meta.indent)){let n=this.getRow(e+1);t.meta.isLeaf=!n||Sk(n.meta.indent)||n.meta.indent<=t.meta.indent,t.meta.isTreeNodeClose=!1}})}prepareRowView(){this.rowViewOrder=this.rows.map(t=>t.meta.rowIndex)}prepareRow(t,e){let n={rowIndex:e.rowIndex,indent:e.indent};return t=t.map((i,a)=>this.prepareCell(i,a)).map(i=>Object.assign({},n,i)),t.meta=e,t}validateColumns(){let t=this.options.columns;if(!Array.isArray(t))throw new Bo("`columns` must be an array");t.forEach((e,n)=>{if(typeof e!="string"&&typeof e!="object")throw new Bo(`column "${n}" must be a string or an object`)})}validateData(t){if(Array.isArray(t)&&(t.length===0||Array.isArray(t[0])||typeof t[0]=="object"))return!0;throw new Bo("`data` must be an array of arrays or objects")}appendRows(t){this.validateData(t),this.rows.push(...this.prepareRows(t))}sortRows(t,e="none"){t=+t,this.getColumns().map(n=>{n.colIndex===t?n.sortOrder=e:n.sortOrder="none"}),this._sortRows(t,e)}_sortRows(t,e){if(this.currentSort.colIndex===t&&(this.currentSort.sortOrder==="asc"&&e==="desc"||this.currentSort.sortOrder==="desc"&&e==="asc")){this.reverseArray(this.rowViewOrder),this.currentSort.sortOrder=e;return}if(this.rowViewOrder.sort((n,i)=>{let a=n,o=i,s=this.getCell(t,n).content,u=this.getCell(t,i).content;if(s=s==null?"":s,u=u==null?"":u,e==="none")return a-o;if(e==="asc"){if(s<u)return-1;if(s>u)return 1;if(s===u)return 0}else if(e==="desc"){if(s<u)return 1;if(s>u)return-1;if(s===u)return 0}return 0}),this.hasColumnById("_rowIndex")){let n=this.getColumnIndexById("_rowIndex");this.rows.forEach((i,a)=>{let o=this.rowViewOrder.indexOf(a),s=i[n];s.content=o+1+""})}}reverseArray(t){let e=null,n=null,i=t.length;for(e=0,n=i-1;e<n;e+=1,n-=1){let a=t[e];t[e]=t[n],t[n]=a}}switchColumn(t,e){let n=this.columns[t];this.columns[t]=this.columns[e],this.columns[e]=n,this.columns[t].colIndex=t,this.columns[e].colIndex=e,this.rows.forEach(i=>{let a=Object.assign({},i[t],{colIndex:e}),o=Object.assign({},i[e],{colIndex:t});i[e]=a,i[t]=o})}removeColumn(t){t=+t;let e=i=>i.colIndex!==t,n=(i,a)=>Object.assign({},i,{colIndex:a});this.columns=this.columns.filter(e).map(n),this.rows.forEach(i=>{i.splice(t,1),i.forEach((a,o)=>{a.colIndex=o})})}updateRow(t,e){t.length<this.columns.length&&(this.hasColumnById("_rowIndex")&&(t=[e+1+""].concat(t)),this.hasColumnById("_checkbox")&&(t=['<input type="checkbox" />'].concat(t)));let n=this.prepareRow(t,{rowIndex:e}),i=this.rows.findIndex(a=>a[0].rowIndex===e);return this.rows[i]=n,n}updateCell(t,e,n){let i;typeof t=="object"&&(i=t,t=i.colIndex,e=i.rowIndex,n=i),i=this.getCell(t,e);for(let a in n){let o=n[a];o!==void 0&&(i[a]=o)}return i}updateColumn(t,e){let n=this.getColumn(t);for(let i in e){let a=e[i];a!==void 0&&(n[i]=a)}return n}filterRows(t){return this.options.filterRows(this.rows,t).then(e=>(e||(e=this.getAllRowIndices()),e.then||(e=Promise.resolve(e)),e.then(n=>(this._filteredRows=n,{rowsToHide:this.getAllRowIndices().filter(a=>!n.includes(a)),rowsToShow:n}))))}getFilteredRowIndices(){return this._filteredRows||this.getAllRowIndices()}getAllRowIndices(){return this.rows.map(t=>t.meta.rowIndex)}getRowCount(){return this.rowCount}_getNextRowCount(){let t=this.rowCount;return this.rowCount++,t}getRows(t,e){return this.rows.slice(t,e)}getRowsForView(t,e){return this.rowViewOrder.map(i=>this.rows[i]).slice(t,e)}getColumns(t){let e=this.columns;return t&&(e=e.slice(this.getStandardColumnCount())),e}getStandardColumnCount(){return this.options.checkboxColumn&&this.options.serialNoColumn?2:this.options.checkboxColumn||this.options.serialNoColumn?1:0}getColumnCount(t){let e=this.columns.length;return t&&(e=e-this.getStandardColumnCount()),e}getColumn(t){return t=+t,t<0&&(t=this.columns.length+t),this.columns.find(e=>e.colIndex===t)}getColumnById(t){return this.columns.find(e=>e.id===t)}getRow(t){return t=+t,this.rows[t]}getCell(t,e){return e=+e,t=+t,this.getRow(e)[t]}getChildren(t){t=+t;let e=this.getRow(t).meta.indent,n=[];for(let i=t+1;i<this.rowCount;i++){let a=this.getRow(i);if(!isNaN(a.meta.indent)&&(a.meta.indent>e&&n.push(i),a.meta.indent===e))break}return n}getImmediateChildren(t){t=+t;let e=this.getRow(t).meta.indent,n=[],i=e+1;for(let a=t+1;a<this.rowCount;a++){let o=this.getRow(a);if(!(isNaN(o.meta.indent)||o.meta.indent>i)&&(o.meta.indent===i&&n.push(a),o.meta.indent===e))break}return n}get(){return{columns:this.columns,rows:this.rows}}getData(t){return this.data[t]}hasColumn(t){return Boolean(this.columns.find(e=>e.content===t))}hasColumnById(t){return Boolean(this.columns.find(e=>e.id===t))}getColumnIndex(t){return this.columns.findIndex(e=>e.content===t)}getColumnIndexById(t){return this.columns.findIndex(e=>e.id===t)}getCheckboxHTML(){return'<input type="checkbox" />'}},Bo=class extends TypeError{},yc={chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},Ih=class{constructor(t){this.instance=t,Uo(this,this.instance,["wrapper","options","style","header","bodyScrollable","columnmanager","rowmanager","datamanager","keyboard"]),this.bindEvents()}bindEvents(){this.bindFocusCell(),this.bindEditCell(),this.bindKeyboardSelection(),this.bindCopyCellContents(),this.bindMouseEvents(),this.bindTreeEvents()}bindFocusCell(){this.bindKeyboardNav()}bindEditCell(){this.$editingCell=null,Ee.on(this.bodyScrollable,"dblclick",".dt-cell",(t,e)=>{this.activateEditing(e)}),this.keyboard.on("enter",()=>{this.$focusedCell&&!this.$editingCell?this.activateEditing(this.$focusedCell):this.$editingCell&&this.deactivateEditing()})}bindKeyboardNav(){let t=e=>{if(!this.$focusedCell||this.$editingCell)return!1;let n=this.$focusedCell,{rowIndex:i,colIndex:a}=Ee.data(n);return e==="left"?n=this.getLeftMostCell$(i):e==="right"?n=this.getRightMostCell$(i):e==="up"?n=this.getTopMostCell$(a):e==="down"&&(n=this.getBottomMostCell$(a)),this.focusCell(n),!0};["left","right","up","down","tab","shift+tab"].map(e=>this.keyboard.on(e,()=>this.focusCellInDirection(e))),["left","right","up","down"].map(e=>this.keyboard.on(`ctrl+${e}`,()=>t(e))),this.keyboard.on("esc",()=>{this.deactivateEditing(!1),this.columnmanager.toggleFilter(!1)}),this.options.inlineFilters&&(this.keyboard.on("ctrl+f",e=>{let n=Ee.closest(".dt-cell",e.target),{colIndex:i}=Ee.data(n);return this.activateFilter(i),!0}),Ee.on(this.header,"focusin",".dt-filter",()=>{this.unfocusCell(this.$focusedCell)}))}bindKeyboardSelection(){let t=e=>{let n=this.getSelectionCursor();return e==="left"?n=this.getLeftCell$(n):e==="right"?n=this.getRightCell$(n):e==="up"?n=this.getAboveCell$(n):e==="down"&&(n=this.getBelowCell$(n)),n};["left","right","up","down"].map(e=>this.keyboard.on(`shift+${e}`,()=>this.selectArea(t(e))))}bindCopyCellContents(){this.keyboard.on("ctrl+c",()=>{let t=this.copyCellContents(this.$focusedCell,this.$selectionCursor),e=this.instance.translate("{count} cells copied",{count:t});t&&this.instance.showToastMessage(e,2)}),this.options.pasteFromClipboard&&this.keyboard.on("ctrl+v",t=>(this.instance.pasteTarget.focus(),setTimeout(()=>{let e=this.instance.pasteTarget.value;this.instance.pasteTarget.value="",this.pasteContentInCell(e)},10),!1))}bindMouseEvents(){let t=null;Ee.on(this.bodyScrollable,"mousedown",".dt-cell",n=>{t=!0,this.focusCell(Ee(n.delegatedTarget))}),Ee.on(this.bodyScrollable,"mouseup",()=>{t=!1});let e=n=>{!t||this.selectArea(Ee(n.delegatedTarget))};Ee.on(this.bodyScrollable,"mousemove",".dt-cell",$h(e,50))}bindTreeEvents(){Ee.on(this.bodyScrollable,"click",".dt-tree-node__toggle",(t,e)=>{let n=Ee.closest(".dt-cell",e),{rowIndex:i}=Ee.data(n);n.classList.contains("dt-cell--tree-close")?this.rowmanager.openSingleNode(i):this.rowmanager.closeSingleNode(i)})}focusCell(t,{skipClearSelection:e=0,skipDOMFocus:n=0,skipScrollToCell:i=0}={}){if(!t||t===this.$editingCell)return;let{colIndex:a,isHeader:o}=Ee.data(t);o||this.columnmanager.getColumn(a).focusable===!1||(i||this.scrollToCell(t),this.deactivateEditing(),e||this.clearSelection(),this.$focusedCell&&this.$focusedCell.classList.remove("dt-cell--focus"),this.$focusedCell=t,t.classList.add("dt-cell--focus"),n||t.focus(),this.highlightRowColumnHeader(t))}unfocusCell(t){!t||(t.classList.remove("dt-cell--focus"),this.$focusedCell=null,this.lastHeaders&&this.lastHeaders.forEach(e=>e&&e.classList.remove("dt-cell--highlight")))}highlightRowColumnHeader(t){let{colIndex:e,rowIndex:n}=Ee.data(t),i=this.datamanager.getColumnIndexById("_rowIndex"),a=`.dt-cell--header-${e}`,o=`.dt-cell--${i}-${n}`;this.lastHeaders&&this.lastHeaders.forEach(h=>h&&h.classList.remove("dt-cell--highlight"));let s=Ee(a,this.wrapper),u=Ee(o,this.wrapper);this.lastHeaders=[s,u],this.lastHeaders.forEach(h=>h&&h.classList.add("dt-cell--highlight"))}selectAreaOnClusterChanged(){if(!(this.$focusedCell&&this.$selectionCursor))return;let{colIndex:t,rowIndex:e}=Ee.data(this.$selectionCursor),n=this.getCell$(t,e);if(!n||n===this.$selectionCursor)return;let i=Ee.data(this.$focusedCell);this.$focusedCell=this.getCell$(i.colIndex,i.rowIndex),this.selectArea(n)}focusCellOnClusterChanged(){if(!this.$focusedCell)return;let{colIndex:t,rowIndex:e}=Ee.data(this.$focusedCell),n=this.getCell$(t,e);!n||this.focusCell(n,{skipClearSelection:1,skipDOMFocus:1,skipScrollToCell:1})}selectArea(t){!this.$focusedCell||this._selectArea(this.$focusedCell,t)&&(this.$selectionCursor=t)}_selectArea(t,e){if(t===e)return!1;let n=this.getCellsInRange(t,e);return n?(this.clearSelection(),this._selectedCells=n.map(i=>this.getCell$(...i)),requestAnimationFrame(()=>{this._selectedCells.map(i=>i.classList.add("dt-cell--highlight"))}),!0):!1}getCellsInRange(t,e){let n,i,a,o;if(typeof t=="number")[n,i,a,o]=arguments;else if(typeof t=="object"){if(!(t&&e))return!1;let _=Ee.data(t),g=Ee.data(e);n=+_.colIndex,i=+_.rowIndex,a=+g.colIndex,o=+g.rowIndex}if(i>o&&([i,o]=[o,i]),n>a&&([n,a]=[a,n]),this.isStandardCell(n)||this.isStandardCell(a))return!1;let s=[],u=n,h=i,d=[];for(;h<=o;)d.push(h),h+=1;return d.map(_=>{for(;u<=a;)s.push([u,_]),u++;u=n}),s}clearSelection(){(this._selectedCells||[]).forEach(t=>t.classList.remove("dt-cell--highlight")),this._selectedCells=[],this.$selectionCursor=null}getSelectionCursor(){return this.$selectionCursor||this.$focusedCell}activateEditing(t){this.focusCell(t);let{rowIndex:e,colIndex:n}=Ee.data(t),i=this.columnmanager.getColumn(n);if(i&&(i.editable===!1||i.focusable===!1))return;let a=this.getCell(n,e);if(a&&a.editable===!1)return;if(this.$editingCell){let{_rowIndex:u,_colIndex:h}=Ee.data(this.$editingCell);if(e===u&&n===h)return}this.$editingCell=t,t.classList.add("dt-cell--editing");let o=Ee(".dt-cell__edit",t);o.innerHTML="";let s=this.getEditor(n,e,a.content,o);s&&(this.currentCellEditor=s,s.initValue(a.content,e,i))}deactivateEditing(t=!0){t&&this.submitEditing(),this.$focusedCell&&this.$focusedCell.focus(),this.$editingCell&&(this.$editingCell.classList.remove("dt-cell--editing"),this.$editingCell=null)}getEditor(t,e,n,i){let a=this.datamanager.getColumn(t),o=this.datamanager.getRow(e),s=this.datamanager.getData(e),u=this.options.getEditor?this.options.getEditor(t,e,n,i,a,o,s):this.getDefaultEditor(i);return u===!1?!1:(u===void 0&&(u=this.getDefaultEditor(i)),u)}getDefaultEditor(t){let e=Ee.create("input",{class:"dt-input",type:"text",inside:t});return{initValue(n){e.focus(),e.value=n},getValue(){return e.value},setValue(n){e.value=n}}}submitEditing(){let t=Promise.resolve();if(!this.$editingCell)return t;let e=this.$editingCell,{rowIndex:n,colIndex:i}=Ee.data(e),a=this.datamanager.getColumn(i);if(e){let o=this.currentCellEditor;if(o){let s=o.getValue();s.then||(s=Promise.resolve(s)),t=s.then(u=>{let h=o.setValue(u,n,a),d=this.getCell(i,n).content;return this.updateCell(i,n,u),e.focus(),h&&h.then&&h.catch(_=>{console.log(_),this.updateCell(i,n,d)}),h})}}return this.currentCellEditor=null,t}copyCellContents(t,e){if(!e&&t){let{colIndex:o,rowIndex:s}=Ee.data(t),u=this.getCell(o,s);return kh(u.content),1}let n=this.getCellsInRange(t,e);if(!n)return 0;let i=n.map(o=>this.getCell(...o)).reduce((o,s)=>{let u=s.rowIndex;return o[u]=o[u]||[],o[u].push(s.content),o},[]),a=i.map(o=>o.join("	")).join(`
`);return kh(a),i.reduce((o,s)=>o+s.length,0)}pasteContentInCell(t){if(!this.$focusedCell)return;let e=t.split(`
`).map(o=>o.split("	")).filter(o=>o.length&&o.every(s=>s)),{colIndex:n,rowIndex:i}=Ee.data(this.$focusedCell),a={colIndex:+n,rowIndex:+i};e.forEach((o,s)=>{let u=s+a.rowIndex;o.forEach((h,d)=>{let _=d+a.colIndex;this.updateCell(_,u,h)})})}activateFilter(t){this.columnmanager.toggleFilter(),this.columnmanager.focusFilter(t),this.columnmanager.isFilterShown||this.$focusedCell&&this.$focusedCell.focus()}updateCell(t,e,n){let i=this.datamanager.updateCell(t,e,{content:n});this.refreshCell(i)}refreshCell(t){let e=Ee(this.selector(t.colIndex,t.rowIndex),this.bodyScrollable);e.innerHTML=this.getCellContent(t)}toggleTreeButton(t,e){let n=this.columnmanager.getFirstColumnIndex(),i=this.getCell$(n,t);i&&i.classList[e?"remove":"add"]("dt-cell--tree-close")}isStandardCell(t){return t<this.columnmanager.getFirstColumnIndex()}focusCellInDirection(t){if(this.$focusedCell)this.$editingCell&&["tab","shift+tab"].includes(t)&&this.deactivateEditing();else return!1;let e=this.$focusedCell;if(t==="left"||t==="shift+tab"?e=this.getLeftCell$(e):t==="right"||t==="tab"?e=this.getRightCell$(e):t==="up"?e=this.getAboveCell$(e):t==="down"&&(e=this.getBelowCell$(e)),!e)return!1;let{colIndex:n}=Ee.data(e);if(!this.columnmanager.getColumn(n).focusable){let a=this.$focusedCell;this.unfocusCell(a),this.$focusedCell=e;let o=this.focusCellInDirection(t);return o||this.focusCell(a),o}return this.focusCell(e),!0}getCell$(t,e){return Ee(this.selector(t,e),this.bodyScrollable)}getAboveCell$(t){let{colIndex:e}=Ee.data(t),n=t.parentElement.previousElementSibling;for(;n&&n.classList.contains("dt-row--hide");)n=n.previousElementSibling;return n?Ee(`.dt-cell--col-${e}`,n):t}getBelowCell$(t){let{colIndex:e}=Ee.data(t),n=t.parentElement.nextElementSibling;for(;n&&n.classList.contains("dt-row--hide");)n=n.nextElementSibling;return n?Ee(`.dt-cell--col-${e}`,n):t}getLeftCell$(t){return t.previousElementSibling}getRightCell$(t){return t.nextElementSibling}getLeftMostCell$(t){return this.getCell$(this.columnmanager.getFirstColumnIndex(),t)}getRightMostCell$(t){return this.getCell$(this.columnmanager.getLastColumnIndex(),t)}getTopMostCell$(t){return this.getCell$(t,this.rowmanager.getFirstRowIndex())}getBottomMostCell$(t){return this.getCell$(t,this.rowmanager.getLastRowIndex())}getCell(t,e){return this.instance.datamanager.getCell(t,e)}getRowHeight(){return Ee.style(Ee(".dt-row",this.bodyScrollable),"height")}scrollToCell(t){if(Ee.inViewport(t,this.bodyScrollable))return!1;let{rowIndex:e}=Ee.data(t);return this.rowmanager.scrollToRow(e),!1}getRowCountPerPage(){return Math.ceil(this.instance.getViewportHeight()/this.getRowHeight())}getCellHTML(t){let{rowIndex:e,colIndex:n,isHeader:i,isFilter:a,isTotalRow:o}=t,s=bc({rowIndex:e,colIndex:n,isHeader:i,isFilter:a,isTotalRow:o}),u=this.datamanager.getRow(e),h=!(i||a||o);return`
            <div class="${["dt-cell","dt-cell--col-"+n,h?`dt-cell--${n}-${e}`:"",h?"dt-cell--row-"+e:"",i?"dt-cell--header":"",i?`dt-cell--header-${n}`:"",a?"dt-cell--filter":"",h&&u&&u.meta.isTreeNodeClose?"dt-cell--tree-close":""].join(" ")}" ${s} tabindex="0">
                ${this.getCellContent(t)}
            </div>
        `}getCellContent(t){let{isHeader:e,isFilter:n,colIndex:i}=t,o=!e&&t.editable!==!1?this.getEditCellHTML(i):"",u=e&&t.sortable!==!1?`<span class="sort-indicator">
                ${this.options.sortIndicator[t.sortOrder]}
            </span>`:"",d=e&&t.resizable!==!1?'<span class="dt-cell__resize-handle"></span>':"",g=e&&t.dropdown!==!1?this.columnmanager.getDropdownHTML():"",w=t.format||t.column&&t.column.format||null,C;if(e||n||!w)C=t.content;else{let E=this.datamanager.getRow(t.rowIndex),O=this.datamanager.getData(t.rowIndex);C=w(t.content,E,t.column,O)}if(t.html=C,this.options.treeView&&!(e||n)&&t.indent!==void 0){let E=this.datamanager.getRow(t.rowIndex+1),O=E&&E.meta.indent>t.indent,N=20,m="px";if(this.datamanager.getColumnIndexById("_rowIndex")+1===t.colIndex){let b=(t.indent||0)*N,S=O?`<span class="dt-tree-node__toggle" style="left: ${b-N}${m}">
                        <span class="icon-open">${yc.chevronDown}</span>
                        <span class="icon-close">${yc.chevronRight}</span>
                    </span>`:"";C=`<span class="dt-tree-node" style="padding-left: ${b}${m}">
                    ${S}
                    <span>${C}</span>
                </span>`}}return`
            <div class="${["dt-cell__content",e?`dt-cell__content--header-${i}`:`dt-cell__content--col-${i}`].join(" ")}">
                ${C}
                ${u}
                ${d}
                ${g}
            </div>
            ${o}
        `}getEditCellHTML(t){return`<div class="dt-cell__edit dt-cell__edit--col-${t}"></div>`}selector(t,e){return`.dt-cell--${t}-${e}`}},Ph=class{constructor(t){this.instance=t,Uo(this,this.instance,["options","fireEvent","header","datamanager","cellmanager","style","wrapper","rowmanager","bodyScrollable","bodyRenderer"]),this.bindEvents()}renderHeader(){this.header.innerHTML="<div></div>",this.refreshHeader()}refreshHeader(){let t=this.datamanager.getColumns();Ee("div",this.header).innerHTML=this.getHeaderHTML(t),this.$filterRow=Ee(".dt-row-filter",this.header),this.$filterRow&&Ee.style(this.$filterRow,{display:"none"}),this.$columnMap=[],this.bindMoveColumn()}getHeaderHTML(t){let e=this.rowmanager.getRowHTML(t,{isHeader:1});return this.options.inlineFilters&&(e+=this.rowmanager.getRowHTML(t,{isFilter:1})),e}bindEvents(){this.bindDropdown(),this.bindResizeColumn(),this.bindPerfectColumnWidth(),this.bindFilter()}bindDropdown(){let t=".dt-dropdown__toggle",e=".dt-dropdown__list";this.instance.dropdownContainer.innerHTML=this.getDropdownListHTML(),this.$dropdownList=this.instance.dropdownContainer.firstElementChild,Ee.on(this.header,"click",t,o=>{this.openDropdown(o)});let n=o=>{let s=[t,t+" *",e,e+" *"].join(",");o.target.matches(s)||a()};Ee.on(document.body,"click",n),document.addEventListener("scroll",a,!0),this.instance.on("onDestroy",()=>{Ee.off(document.body,"click",n),Ee.off(document,"scroll",a)}),Ee.on(this.$dropdownList,"click",".dt-dropdown__list-item",(o,s)=>{if(!this._dropdownActiveColIndex)return;let u=this.options.headerDropdown,{index:h}=Ee.data(s),d=this._dropdownActiveColIndex,_=u[h].action;_&&_.call(this.instance,this.getColumn(d)),this.hideDropdown()});let i=this;function a(o){i.hideDropdown()}this.hideDropdown()}openDropdown(t){this._dropdownWidth||(Ee.style(this.$dropdownList,{display:""}),this._dropdownWidth=Ee.style(this.$dropdownList,"width")),Ee.style(this.$dropdownList,{display:"",left:t.clientX-this._dropdownWidth+4+"px",top:t.clientY+4+"px"});let e=Ee.closest(".dt-cell",t.target),{colIndex:n}=Ee.data(e);this._dropdownActiveColIndex=n}hideDropdown(){Ee.style(this.$dropdownList,{display:"none"}),this._dropdownActiveColIndex=null}bindResizeColumn(){let t=!1,e,n,i;Ee.on(this.header,"mousedown",".dt-cell .dt-cell__resize-handle",(s,u)=>{document.body.classList.add("dt-resize"),e=u.parentNode.parentNode;let{colIndex:d}=Ee.data(e),_=this.getColumn(d);_&&_.resizable===!1||(t=!0,n=Ee.style(Ee(".dt-cell__content",e),"width"),i=s.pageX)});let a=s=>{if(document.body.classList.remove("dt-resize"),!e)return;t=!1;let{colIndex:u}=Ee.data(e);this.setColumnWidth(u),this.style.setBodyStyle(),e=null};Ee.on(document.body,"mouseup",a),this.instance.on("onDestroy",()=>{Ee.off(document.body,"mouseup",a)});let o=s=>{if(!t)return;let u=s.pageX-i;this.options.direction==="rtl"&&(u=-1*u);let h=n+u,{colIndex:d}=Ee.data(e);this.options.minimumColumnWidth>h||(this.datamanager.updateColumn(d,{width:h}),this.setColumnHeaderWidth(d))};Ee.on(document.body,"mousemove",o),this.instance.on("onDestroy",()=>{Ee.off(document.body,"mousemove",o)})}bindPerfectColumnWidth(){Ee.on(this.header,"dblclick",".dt-cell .dt-cell__resize-handle",(t,e)=>{let n=e.parentNode.parentNode,{colIndex:i}=Ee.data(n),a=this.bodyRenderer.visibleRows.map(k=>k[i]).reduce((k,E)=>k.content.length>E.content.length?k:E),o=this.cellmanager.getCellHTML(a),s=document.createElement("div");s.innerHTML=o;let u=s.querySelector(".dt-cell__content").textContent,{borderLeftWidth:h,borderRightWidth:d,paddingLeft:_,paddingRight:g}=Ee.getStyle(this.bodyScrollable.querySelector(".dt-cell__content")),w=[h,d,_,g].map(parseFloat).reduce((k,E)=>k+E),C=Ee.measureTextWidth(u)+w;this.datamanager.updateColumn(i,{width:C}),this.setColumnHeaderWidth(i),this.setColumnWidth(i)})}bindMoveColumn(){if(this.options.disableReorderColumn)return;let t=Ee(".dt-row",this.header);this.sortable=B0.create(t,{onEnd:e=>{let{oldIndex:n,newIndex:i}=e,a=e.item,{colIndex:o}=Ee.data(a);+o!==i&&this.switchColumn(n,i)},preventOnFilter:!1,filter:".dt-cell__resize-handle, .dt-dropdown",chosenClass:"dt-cell--dragging",animation:150})}sortColumn(t,e){this.instance.freeze(),this.sortRows(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onSortColumn",this.getColumn(t))})}removeColumn(t){let e=this.getColumn(t);this.instance.freeze(),this.datamanager.removeColumn(t).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onRemoveColumn",e)})}switchColumn(t,e){this.instance.freeze(),this.datamanager.switchColumn(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>{this.setColumnWidth(t),this.setColumnWidth(e),this.instance.unfreeze()}).then(()=>{this.fireEvent("onSwitchColumn",this.getColumn(t),this.getColumn(e))})}toggleFilter(t){if(!this.options.inlineFilters)return;let e;t===void 0?e=!this.isFilterShown:e=t,e?Ee.style(this.$filterRow,{display:""}):Ee.style(this.$filterRow,{display:"none"}),this.isFilterShown=e,this.style.setBodyStyle()}focusFilter(t){if(!this.isFilterShown)return;Ee(`.dt-cell--col-${t} .dt-filter`,this.$filterRow).focus()}bindFilter(){if(!this.options.inlineFilters)return;let t=e=>{this.applyFilter(this.getAppliedFilters())};Ee.on(this.header,"keydown",".dt-filter",xk(t,300))}applyFilter(t){this.datamanager.filterRows(t).then(({rowsToShow:e})=>{this.rowmanager.showRows(e)})}getAppliedFilters(){let t={};return Ee.each(".dt-filter",this.header).map(e=>{let n=e.value;n&&(t[e.dataset.colIndex]=n)}),t}applyDefaultSortOrder(){let t=this.getColumns().filter(e=>e.sortOrder!=="none");if(t.length===1){let e=t[0];this.sortColumn(e.colIndex,e.sortOrder)}}sortRows(t,e){return this.datamanager.sortRows(t,e)}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}setColumnWidth(t,e){t=+t;let n=e||this.getColumn(t).width,i=[`.dt-cell__content--col-${t}`,`.dt-cell__edit--col-${t}`].join(", "),a={width:n+"px"};this.style.setStyle(i,a)}setColumnHeaderWidth(t){t=+t,this.$columnMap=this.$columnMap||[];let e=`.dt-cell__content--header-${t}`,{width:n}=this.getColumn(t),i=this.$columnMap[t];i||(i=this.header.querySelector(e),this.$columnMap[t]=i),i.style.width=n+"px"}getColumnMinWidth(t){return t=+t,this.getColumn(t).minWidth||24}getFirstColumnIndex(){return this.datamanager.getColumnIndexById("_rowIndex")+1}getHeaderCell$(t){return Ee(`.dt-cell--header-${t}`,this.header)}getLastColumnIndex(){return this.datamanager.getColumnCount()-1}getDropdownHTML(){let{dropdownButton:t}=this.options;return`
            <div class="dt-dropdown">
                <div class="dt-dropdown__toggle">${t}</div>
            </div>
      `}getDropdownListHTML(){let{headerDropdown:t}=this.options;return`
            <div class="dt-dropdown__list">
            ${t.map((e,n)=>`
                <div class="dt-dropdown__list-item" data-index="${n}">${e.label}</div>
            `).join("")}
            </div>
        `}},Rh=class{constructor(t){this.instance=t,Uo(this,this.instance,["options","fireEvent","wrapper","bodyScrollable","bodyRenderer","style"]),this.bindEvents(),this.refreshRows=pa(this.refreshRows,this)}get datamanager(){return this.instance.datamanager}get cellmanager(){return this.instance.cellmanager}bindEvents(){this.bindCheckbox()}bindCheckbox(){!this.options.checkboxColumn||(this.checkMap=[],Ee.on(this.wrapper,"click",'.dt-cell--col-0 [type="checkbox"]',(t,e)=>{let n=e.closest(".dt-cell"),{rowIndex:i,isHeader:a}=Ee.data(n),o=e.checked;a?this.checkAll(o):this.checkRow(i,o)}))}refreshRows(){this.instance.renderBody(),this.instance.setDimensions()}refreshRow(t,e){this.datamanager.updateRow(t,e).forEach(i=>{this.cellmanager.refreshCell(i)})}getCheckedRows(){if(!this.checkMap)return[];let t=[];for(let e in this.checkMap)this.checkMap[e]===1&&t.push(e);return t}highlightCheckedRows(){this.getCheckedRows().map(t=>this.checkRow(t,!0))}checkRow(t,e){let n=e?1:0,i=a=>`.dt-cell--0-${a} [type="checkbox"]`;this.checkMap[t]=n,Ee.each(i(t),this.bodyScrollable).map(a=>{a.checked=e}),this.highlightRow(t,e),this.showCheckStatus(),this.fireEvent("onCheckRow",this.datamanager.getRow(t))}checkAll(t){let e=t?1:0;t?this.checkMap=Array.from(Array(this.getTotalRows())).map(n=>e):this.checkMap=[],Ee.each('.dt-cell--col-0 [type="checkbox"]',this.bodyScrollable).map(n=>{n.checked=t}),this.highlightAll(t),this.showCheckStatus(),this.fireEvent("onCheckRow")}showCheckStatus(){if(!this.options.checkedRowStatus)return;let e=this.getCheckedRows().length;if(e>0){let n=this.instance.translate("{count} rows selected",{count:e});this.bodyRenderer.showToastMessage(n)}else this.bodyRenderer.clearToastMessage()}highlightRow(t,e=!0){let n=this.getRow$(t);if(!!n){if(!e&&this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")){n.classList.add("dt-row--unhighlight");return}e&&n.classList.contains("dt-row--unhighlight")&&n.classList.remove("dt-row--unhighlight"),this._highlightedRows=this._highlightedRows||{},e?(n.classList.add("dt-row--highlight"),this._highlightedRows[t]=n):(n.classList.remove("dt-row--highlight"),delete this._highlightedRows[t])}}highlightAll(t=!0){if(t)this.bodyScrollable.classList.add("dt-scrollable--highlight-all");else{this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");for(let e in this._highlightedRows)this._highlightedRows[e].classList.remove("dt-row--highlight");this._highlightedRows={}}}showRows(t){t=Tk(t);let e=t.map(n=>this.datamanager.getRow(n));this.bodyRenderer.renderRows(e)}showAllRows(){let t=this.datamanager.getAllRowIndices();this.showRows(t)}getChildrenToShowForNode(t){let e=this.datamanager.getRow(t);return e.meta.isTreeNodeClose=!1,this.datamanager.getImmediateChildren(t)}openSingleNode(t){let e=this.getChildrenToShowForNode(t),n=this.bodyRenderer.visibleRowIndices,i=xh([...e,...n]).sort(fa);this.showRows(i)}getChildrenToHideForNode(t){let e=this.datamanager.getRow(t);e.meta.isTreeNodeClose=!0;let n=this.datamanager.getChildren(t);return n.forEach(i=>{let a=this.datamanager.getRow(i);a.meta.isLeaf||(a.meta.isTreeNodeClose=!0)}),n}closeSingleNode(t){let e=this.getChildrenToHideForNode(t),i=this.bodyRenderer.visibleRowIndices.filter(a=>!e.includes(a)).sort(fa);this.showRows(i)}expandAllNodes(){let n=this.datamanager.getRows().filter(o=>!o.meta.isLeaf).map(o=>this.getChildrenToShowForNode(o.meta.rowIndex)).flat(),i=this.bodyRenderer.visibleRowIndices,a=xh([...n,...i]).sort(fa);this.showRows(a)}collapseAllNodes(){let n=this.datamanager.getRows().filter(o=>o.meta.indent===0).map(o=>this.getChildrenToHideForNode(o.meta.rowIndex)).flat(),a=this.bodyRenderer.visibleRowIndices.filter(o=>!n.includes(o)).sort(fa);this.showRows(a)}setTreeDepth(t){let e=this.datamanager.getRows(),n=e.filter(s=>s.meta.indent<t),i=e.filter(s=>s.meta.indent>=t),a=i.filter(s=>s.meta.indent>t);i.forEach(s=>{s.meta.isLeaf||(s.meta.isTreeNodeClose=!0)}),n.forEach(s=>{s.meta.isLeaf||(s.meta.isTreeNodeClose=!1)});let o=e.filter(s=>!a.includes(s)).map(s=>s.meta.rowIndex).sort(fa);this.showRows(o)}getRow$(t){return Ee(this.selector(t),this.bodyScrollable)}getTotalRows(){return this.datamanager.getRowCount()}getFirstRowIndex(){return 0}getLastRowIndex(){return this.datamanager.getRowCount()-1}scrollToRow(t){t=+t,this._lastScrollTo=this._lastScrollTo||0;let e=this.getRow$(t);if(Ee.inViewport(e,this.bodyScrollable))return;let{height:n}=e.getBoundingClientRect(),{top:i,bottom:a}=this.bodyScrollable.getBoundingClientRect(),o=Math.floor((a-i)/n),s=0;t>this._lastScrollTo?s=n*(t+1-o):s=n*(t+1-1),this._lastScrollTo=t,Ee.scrollTop(this.bodyScrollable,s)}getRowHTML(t,e){let n=bc(e),i=e.rowIndex;return e.isFilter&&(t=t.map(a=>Object.assign({},a,{content:this.getFilterInput({colIndex:a.colIndex}),isFilter:1,isHeader:void 0,editable:!1})),i="filter"),e.isHeader&&(i="header"),`
            <div class="dt-row dt-row-${i}" ${n}>
                ${t.map(a=>this.cellmanager.getCellHTML(a)).join("")}
            </div>
        `}getFilterInput(t){return`<input class="dt-filter dt-input" type="text" ${bc(t)} tabindex="1" />`}selector(t){return`.dt-row-${t}`}},$k=H0(function(r,t){(function(e){r.exports=e()})(function(){return function e(n,i,a){function o(h,d){if(!i[h]){if(!n[h]){var _=typeof No=="function"&&No;if(!d&&_)return _(h,!0);if(s)return s(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var w=i[h]={exports:{}};n[h][0].call(w.exports,function(C){var k=n[h][1][C];return o(k||C)},w,w.exports,e,n,i,a)}return i[h].exports}for(var s=typeof No=="function"&&No,u=0;u<a.length;u++)o(a[u]);return o}({1:[function(e,n,i){Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function d(_,g){for(var w=0;w<g.length;w++){var C=g[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(_,C.key,C)}}return function(_,g,w){return g&&d(_.prototype,g),w&&d(_,w),_}}();function o(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}var s={width:"100%",height:"100%"},u=function(_){return Number(_)===Number(_)},h=function(){a(d,null,[{key:"create",value:function(g,w){return new d(g,w)}},{key:"mergeStyle",value:function(g,w){for(var C in w)g.style[C]!==w[C]&&(g.style[C]=w[C])}},{key:"getMaxBrowserHeight",value:function(){var g=document.createElement("div"),w=document.createElement("div");d.mergeStyle(g,{position:"absolute",height:"1px",opacity:0}),d.mergeStyle(w,{height:"1e7px"}),g.appendChild(w),document.body.appendChild(g);var C=w.offsetHeight;return document.body.removeChild(g),C}}]);function d(_,g){var w=this;o(this,d),this._config={},this._lastRepaint=null,this._maxElementHeight=d.getMaxBrowserHeight(),this.refresh(_,g);var C=this._config,k=function E(){var O=w._getScrollPosition(),N=w._lastRepaint;if(w._renderAnimationFrame=window.requestAnimationFrame(E),O!==N&&(!N||Math.abs(O-N)>w._averageHeight)){var m=w._renderChunk();w._lastRepaint=O,m!==!1&&typeof C.afterRender=="function"&&C.afterRender()}};k()}return a(d,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(g,w){var C=this;if(Object.assign(this._config,s,w),!g||g.nodeType!==1)throw new Error("HyperList requires a valid DOM Node container");this._element=g;var k=this._config,E=this._scroller||k.scroller||document.createElement(k.scrollerTagName||"tr");if(typeof k.useFragment!="boolean"&&(this._config.useFragment=!0),!k.generate)throw new Error("Missing required `generate` function");if(!u(k.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(k.itemHeight)&&!u(k.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());u(k.itemHeight)?this._itemHeights=Array(k.total).fill(k.itemHeight):this._itemHeights=k.itemHeight,Object.keys(s).filter(function(b){return b in k}).forEach(function(b){var S=k[b],A=u(S),I=A?!1:S.slice(-1)==="%";if(S&&typeof S!="string"&&typeof S!="number"){var T="Invalid optional `"+b+"`, expected string or number";throw new Error(T)}else A&&(k[b]=S+"px");if(b==="height"){var R=A?S:parseInt(S.replace(/px|%/,""),10);I?C._containerHeight=window.innerHeight*R/100:C._containerHeight=u(S)?S:R}});var O={width:""+k.width,height:""+k.height,overflow:"auto",position:"relative"};d.mergeStyle(g,O);var N=k.itemHeight*k.total,m=this._maxElementHeight;N>m&&console.warn(["HyperList: The maximum element height",m+"px has","been exceeded; please reduce your item height."].join(" "));var y={opacity:"0",position:"absolute",width:"1px",height:N+"px"};d.mergeStyle(E,y),this._scroller||g.appendChild(E),this._scroller=E,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(k.total).fill(0),this._computePositions(0),this._renderChunk(this._lastRepaint!==null),typeof k.afterRender=="function"&&k.afterRender()}},{key:"_getRow",value:function(g){var w=this._config,C=w.generate(g),k=C.height;if(k!==void 0&&u(k)?(C=C.element,k!==this._itemHeights&&(this._itemHeights[g]=k,this._computePositions(g),this._scrollHeight=this._computeScrollHeight(g))):k=this._itemHeights[g],!C||C.nodeType!==1)throw new Error("Generator did not return a DOM Node for index: "+g);var E=C.getAttribute("class")||"";C.setAttribute("class",E+" "+(w.rowClassName||"vrow"));var O=this._itemPositions[g];return d.mergeStyle(C,{position:"absolute",top:O+"px"}),C}},{key:"_getScrollPosition",value:function(){var g=this._config;return typeof g.overrideScrollPosition=="function"?g.overrideScrollPosition():this._element.scrollTop}},{key:"_renderChunk",value:function(g){var w=this._config,C=this._element,k=this._getScrollPosition(),E=w.total,O=w.reverse?this._getReverseFrom(k):this._getFrom(k)-1;if((O<0||O-this._screenItemsLen<0)&&(O=0),!g&&this._lastFrom===O)return!1;this._lastFrom=O;var N=O+this._cachedItemsLen;(N>E||N+this._cachedItemsLen>E)&&(N=E);var m=w.useFragment?document.createDocumentFragment():[],y=this._scroller;m[w.useFragment?"appendChild":"push"](y);for(var b=O;b<N;b++){var S=this._getRow(b);m[w.useFragment?"appendChild":"push"](S)}if(w.applyPatch)return w.applyPatch(C,m);C.innerHTML="",C.appendChild(m)}},{key:"_computePositions",value:function(){var g=arguments.length<=0||arguments[0]===void 0?1:arguments[0],w=this._config,C=w.total,k=w.reverse;g<1&&!k&&(g=1);for(var E=g;E<C;E++)k?E===0?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[E]=this._itemPositions[E-1]-this._itemHeights[E]:this._itemPositions[E]=this._itemHeights[E-1]+this._itemPositions[E-1]}},{key:"_computeScrollHeight",value:function(){var g=this,w=this._config,C=w.total,k=this._itemHeights.reduce(function(y,b){return y+b},0);d.mergeStyle(this._scroller,{opacity:0,position:"absolute",width:"1px",height:k+"px"});var E=this._itemHeights.slice(0).sort(function(y,b){return y-b}),O=Math.floor(C/2),N=C%2===0?(E[O]+E[O-1])/2:E[O],m=this._element.clientHeight?this._element.clientHeight:this._containerHeight;return this._screenItemsLen=Math.ceil(m/N),this._containerHeight=m,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,this._screenItemsLen*3),this._averageHeight=N,w.reverse&&window.requestAnimationFrame(function(){g._element.scrollTop=k}),k}},{key:"_getFrom",value:function(g){for(var w=0;this._itemPositions[w]<g;)w++;return w}},{key:"_getReverseFrom",value:function(g){for(var w=this._config.total-1;w>0&&this._itemPositions[w]<g+this._containerHeight;)w--;return w}}]),d}();i.default=h,n.exports=i.default},{}]},{},[1])(1)})}),Ok=z0($k),Lh=class{constructor(t){this.instance=t,this.options=t.options,this.datamanager=t.datamanager,this.rowmanager=t.rowmanager,this.cellmanager=t.cellmanager,this.bodyScrollable=t.bodyScrollable,this.footer=this.instance.footer,this.log=t.log}renderRows(t){if(this.visibleRows=t,this.visibleRowIndices=t.map(a=>a.meta.rowIndex),t.length===0){this.bodyScrollable.innerHTML=this.getNoDataHTML();return}let e=this.datamanager.rowViewOrder.map(a=>this.visibleRowIndices.includes(a)?a:null).filter(a=>a!==null),n=getComputedStyle(this.bodyScrollable),i={width:n.width,height:n.height,itemHeight:this.options.cellHeight,total:t.length,generate:a=>{let o=document.createElement("div"),s=e[a],u=this.datamanager.getRow(s),h=this.rowmanager.getRowHTML(u,u.meta);return o.innerHTML=h,o.children[0]},afterRender:()=>{this.restoreState()}};this.hyperlist?this.hyperlist.refresh(this.bodyScrollable,i):this.hyperlist=new Ok(this.bodyScrollable,i),this.renderFooter()}render(){let t=this.datamanager.getRowsForView();this.renderRows(t),this.instance.setDimensions()}renderFooter(){if(!this.options.showTotalRow)return;let t=this.getTotalRow(),e=this.rowmanager.getRowHTML(t,{isTotalRow:1,rowIndex:"totalRow"});this.footer.innerHTML=e}getTotalRow(){return this.datamanager.getColumns().map(i=>{let a=null;return["_rowIndex","_checkbox"].includes(i.id)&&(a=""),{content:a,isTotalRow:1,colIndex:i.colIndex,column:i}}).map((i,a)=>{if(i.content==="")return i;if(this.options.hooks.columnTotal){let o=this.visibleRows.map(u=>u[a].content),s=this.options.hooks.columnTotal.call(this.instance,o,i);if(s!=null)return i.content=s,i}return i.content=this.visibleRows.reduce((o,s)=>{let u=s[a];return typeof u.content=="number"?(o==null&&(o=0),o+u.content):o},i.content),i})}restoreState(){this.rowmanager.highlightCheckedRows(),this.cellmanager.selectAreaOnClusterChanged(),this.cellmanager.focusCellOnClusterChanged()}showToastMessage(t,e){this.instance.toastMessage.innerHTML=this.getToastMessageHTML(t),e&&setTimeout(()=>{this.clearToastMessage()},e*1e3)}clearToastMessage(){this.instance.toastMessage.innerHTML=""}getNoDataHTML(){return`<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`}getToastMessageHTML(t){return`<span class="dt-toast__message">${t}</span>`}},Mh=class{constructor(t){this.instance=t,Uo(this,this.instance,["options","datamanager","columnmanager","header","footer","bodyScrollable","datatableWrapper","getColumn","bodyRenderer"]),this.scopeClass="dt-instance-"+t.constructor.instances,t.datatableWrapper.classList.add(this.scopeClass);let e=document.createElement("style");t.wrapper.insertBefore(e,t.datatableWrapper),this.styleEl=e,this.bindResizeWindow(),this.bindScrollHeader()}get stylesheet(){return this.styleEl.sheet}bindResizeWindow(){this.onWindowResize=this.onWindowResize.bind(this),this.onWindowResize=$h(this.onWindowResize,300),this.options.layout==="fluid"&&Ee.on(window,"resize",this.onWindowResize)}bindScrollHeader(){this._settingHeaderPosition=!1,Ee.on(this.bodyScrollable,"scroll",t=>{this._settingHeaderPosition||(this._settingHeaderPosition=!0,requestAnimationFrame(()=>{let e=-t.target.scrollLeft;Ee.style(this.header,{transform:`translateX(${e}px)`}),Ee.style(this.footer,{transform:`translateX(${e}px)`}),this._settingHeaderPosition=!1}))})}onWindowResize(){this.distributeRemainingWidth(),this.refreshColumnWidth(),this.setBodyStyle()}destroy(){this.styleEl.remove(),Ee.off(window,"resize",this.onWindowResize)}setStyle(t,e){if(t.includes(",")){t.split(",").map(o=>o.trim()).forEach(o=>{this.setStyle(o,e)});return}if(t=t.trim(),!t)return;this._styleRulesMap=this._styleRulesMap||{};let n=this._getPrefixedSelector(t);this._styleRulesMap[n]&&(this.removeStyle(t),e=Object.assign({},this._styleRulesMap[n],e));let i=this._getRuleString(e),a=`${n} { ${i} }`;this._styleRulesMap[n]=e,this.stylesheet.insertRule(a)}removeStyle(t){if(t.includes(",")){t.split(",").map(i=>i.trim()).forEach(i=>{this.removeStyle(i)});return}if(t=t.trim(),!t)return;let e=this._getPrefixedSelector(t),n=Array.from(this.stylesheet.cssRules).findIndex(i=>i.selectorText===e);n!==-1&&this.stylesheet.deleteRule(n)}_getPrefixedSelector(t){return`.${this.scopeClass} ${t}`}_getRuleString(t){return Object.keys(t).map(e=>{let n=e;return e.includes("-")||(n=Ah(e)),`${n}:${t[e]};`}).join("")}setDimensions(){this.setCellHeight(),this.setupMinWidth(),this.setupNaturalColumnWidth(),this.setupColumnWidth(),this.distributeRemainingWidth(),this.setColumnStyle(),this.setBodyStyle()}setCellHeight(){this.setStyle(".dt-cell",{height:this.options.cellHeight+"px"})}setupMinWidth(){Ee.each(".dt-cell--header",this.header).map(t=>{let{colIndex:e}=Ee.data(t),n=this.getColumn(e);if(!n.minWidth){let i=Ee.style(Ee(".dt-cell__content",t),"width");n.minWidth=i}})}setupNaturalColumnWidth(){!Ee(".dt-row")||(Ee.each(".dt-row-header .dt-cell",this.header).map(t=>{let{colIndex:e}=Ee.data(t),n=this.datamanager.getColumn(e),i=Ee.style(Ee(".dt-cell__content",t),"width");typeof i=="number"&&i>=this.options.minimumColumnWidth?n.naturalWidth=i:n.naturalWidth=this.options.minimumColumnWidth}),Ee.each(".dt-row-0 .dt-cell",this.bodyScrollable).map(t=>{let{colIndex:e}=Ee.data(t),n=this.datamanager.getColumn(e),i=Ee.style(Ee(".dt-cell__content",t),"width");typeof i=="number"&&i>=n.naturalWidth?n.naturalWidth=i:n.naturalWidth=n.naturalWidth}))}setupColumnWidth(){if(this.options.layout==="ratio"){let t=Ee.style(this.datatableWrapper,"width");if(this.options.serialNoColumn){let i=this.datamanager.getColumnById("_rowIndex");t=t-i.width-1}if(this.options.checkboxColumn){let i=this.datamanager.getColumnById("_checkbox");t=t-i.width-1}let e=this.datamanager.getColumns().map(i=>i.id==="_rowIndex"||i.id==="_checkbox"?0:(i.width||(i.width=1),i.ratioWidth=parseInt(i.width,10),i.ratioWidth)).reduce((i,a)=>i+a),n=t/e;this.datamanager.getColumns().map(i=>{i.id==="_rowIndex"||i.id==="_checkbox"||(i.width=Math.floor(n*i.ratioWidth)-1)})}else this.datamanager.getColumns().map(t=>{t.width||(t.width=t.naturalWidth),t.id==="_rowIndex"&&(t.width=this.getRowIndexColumnWidth()),t.width<this.options.minimumColumnWidth&&(t.width=this.options.minimumColumnWidth)})}distributeRemainingWidth(){if(this.options.layout!=="fluid")return;let t=Ee.style(this.instance.datatableWrapper,"width"),e=Ee(".dt-row",this.bodyScrollable),n=t;if(e)n=Ee.style(e,"width");else{let o=Ee(".dt-row",this.instance.header);n=Array.from(o.children).map(u=>u.offsetWidth).reduce((u,h)=>u+h,0)}let i=this.datamanager.getColumns().filter(o=>o.resizable),a=(t-n)/i.length;i.map(o=>{let s=Ee.style(this.getColumnHeaderElement(o.colIndex),"width"),u=Math.floor(s+a)-2;this.datamanager.updateColumn(o.colIndex,{width:u})})}setColumnStyle(){this.datamanager.getColumns().map(t=>{t.align||(t.align="left"),["left","center","right"].includes(t.align)||(t.align="left"),this.setStyle(`.dt-cell--col-${t.colIndex}`,{"text-align":t.align}),this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}refreshColumnWidth(){this.datamanager.getColumns().map(t=>{this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}setBodyStyle(){let t=Ee.style(this.datatableWrapper,"width"),e=Ee(".dt-row",this.bodyScrollable);if(!e)return;let n=Ee.style(e,"width"),i=t>n?n:t;Ee.style(this.bodyScrollable,{width:i+"px"}),Ee.removeStyle(this.bodyScrollable,"height");let a=Ee.getStyle(this.bodyScrollable,"height"),o=(this.bodyRenderer.hyperlist||{})._scrollHeight||1/0,s=Ee.hasHorizontalOverflow(this.bodyScrollable),u;o<a&&(u=o,s&&(u+=Ee.scrollbarSize()),Ee.style(this.bodyScrollable,{height:u+"px"})),this.bodyScrollable.scrollHeight-this.bodyScrollable.offsetHeight<Ee.scrollbarSize()&&Ee.style(this.bodyScrollable,{overflowY:"hidden"}),this.options.layout==="fluid"&&Ee.style(this.bodyScrollable,{overflowX:"hidden"})}getColumnHeaderElement(t){return t=+t,t<0?null:Ee(`.dt-cell--col-${t}`,this.header)}getRowIndexColumnWidth(){let t=this.datamanager.getRowCount(),e=22;return Ee.measureTextWidth(t+"")+e}},Ik={13:"enter",91:"meta",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",9:"tab",27:"esc",67:"c",70:"f",86:"v"},Nh=class{constructor(t){this.listeners={},Ee.on(t,"keydown",this.handler.bind(this))}handler(t){let e=Ik[t.keyCode];t.shiftKey&&e!=="shift"&&(e="shift+"+e),(t.ctrlKey&&e!=="ctrl"||t.metaKey&&e!=="meta")&&(e="ctrl+"+e);let n=this.listeners[e];if(n&&n.length>0)for(let i of n){let a=i(t);(a===void 0||a===!0)&&t.preventDefault()}}on(t,e){t.split(",").map(i=>i.trim()).map(i=>{this.listeners[i]=this.listeners[i]||[],this.listeners[i].push(e)})}},Pk={"Sort Ascending":"Sort Ascending","Sort Descending":"Sort Descending","Reset sorting":"Reset sorting","Remove column":"Remove column","No Data":"No Data","{count} cells copied":{"1":"{count} cell copied",default:"{count} cells copied"},"{count} rows selected":{"1":"{count} row selected",default:"{count} rows selected"}},Rk={"Sort Ascending":"Aufsteigend sortieren","Sort Descending":"Absteigend sortieren","Reset sorting":"Sortierung zur\xFCcksetzen","Remove column":"Spalte entfernen","No Data":"Keine Daten","{count} cells copied":{"1":"{count} Zelle kopiert",default:"{count} Zellen kopiert"},"{count} rows selected":{"1":"{count} Zeile ausgew\xE4hlt",default:"{count} Zeilen ausgew\xE4hlt"}},Lk={"Sort Ascending":"Trier par ordre croissant","Sort Descending":"Trier par ordre d\xE9croissant","Reset sorting":"R\xE9initialiser le tri","Remove column":"Supprimer colonne","No Data":"Pas de donn\xE9es","{count} cells copied":{"1":"{count} cellule copi\xE9e",default:"{count} cellules copi\xE9es"},"{count} rows selected":{"1":"{count} ligne s\xE9lectionn\xE9e",default:"{count} lignes s\xE9lectionn\xE9es"}},Mk={"Sort Ascending":"Ordinamento ascendente","Sort Descending":"Ordinamento decrescente","Reset sorting":"Azzeramento ordinamento","Remove column":"Rimuovi colonna","No Data":"Nessun dato","{count} cells copied":{"1":"Copiato {count} cella",default:"{count} celle copiate"},"{count} rows selected":{"1":"{count} linea selezionata",default:"{count} linee selezionate"}};function Nk(){return{en:Pk,de:Rk,fr:Lk,it:Mk}}var Dh=class{constructor(t){this.language=t,this.translations=Nk()}addTranslations(t){this.translations=Object.assign(this.translations,t)}translate(t,e){let n=this.translations[this.language]&&this.translations[this.language][t]||t;return typeof n=="object"&&(n=e&&e.count?this.getPluralizedTranslation(n,e.count):t),Ak(n,e||{})}getPluralizedTranslation(t,e){return t[e]||t.default}};function Dk(r,t){let e=[];if(Object.keys(t).length===0)return r.map(n=>n.meta.rowIndex);for(let n in t){let i=t[n],o=(e.length?e.map(h=>r[h]):r).map(h=>h[n]),s=jk(i),u=Bk(s);u?e=u(s.text,o):e=o.map(h=>h.rowIndex)}return e}function Bk(r){let t=a=>String(Ek(a.html||"")||a.content||"").toLowerCase(),e=a=>parseFloat(a.content),n=(a,o)=>{if(a.column.compareValue){let u=a.column.compareValue(a,o);if(u&&Array.isArray(u))return u}let s=e(a);return isNaN(s)?[t(a),o]:[s,o]};return{contains(a,o){return o.filter(s=>{let u=t(s),h=(a||"").toLowerCase();return!h||u.includes(h)}).map(s=>s.rowIndex)},greaterThan(a,o){return o.filter(s=>{let[u,h]=n(s,a);return u>h}).map(s=>s.rowIndex)},lessThan(a,o){return o.filter(s=>{let[u,h]=n(s,a);return u<h}).map(s=>s.rowIndex)},equals(a,o){return o.filter(s=>parseFloat(s.content)===a).map(s=>s.rowIndex)},notEquals(a,o){return o.filter(s=>parseFloat(s.content)!==a).map(s=>s.rowIndex)},range(a,o){return o.filter(s=>{let u=n(s,a[0]),h=n(s,a[1]),d=u[0];return d>=u[1]&&d<=h[1]}).map(s=>s.rowIndex)},containsNumber(a,o){return o.filter(s=>{let u=parseFloat(a,10),h=a,d=e(s),_=t(s);return u===d||_.includes(h)}).map(s=>s.rowIndex)}}[r.type]}function jk(r=""){if(r.length===0)return{};let t=r;return[">","<","="].includes(t[0])?t=r.slice(1):t.startsWith("!=")&&(t=r.slice(2)),r.startsWith(">")&&t?{type:"greaterThan",text:t.trim()}:r.startsWith("<")&&t?{type:"lessThan",text:t.trim()}:r.startsWith("=")&&Do(t)?{type:"equals",text:Number(r.slice(1).trim())}:Do(t)?{type:"containsNumber",text:t}:r.startsWith("!=")&&Do(t)?{type:"notEquals",text:Number(r.slice(2).trim())}:r.split(":").length===2?(t=r.split(":"),{type:"range",text:t.map(e=>e.trim())}):{type:"contains",text:t.toLowerCase()}}function Fk(r){return{columns:[],data:[],dropdownButton:yc.chevronDown,headerDropdown:[{label:r.translate("Sort Ascending"),action:function(t){this.sortColumn(t.colIndex,"asc")}},{label:r.translate("Sort Descending"),action:function(t){this.sortColumn(t.colIndex,"desc")}},{label:r.translate("Reset sorting"),action:function(t){this.sortColumn(t.colIndex,"none")}},{label:r.translate("Remove column"),action:function(t){this.removeColumn(t.colIndex)}}],events:{onRemoveColumn(t){},onSwitchColumn(t,e){},onSortColumn(t){},onCheckRow(t){},onDestroy(){}},hooks:{columnTotal:null},sortIndicator:{asc:"\u2191",desc:"\u2193",none:""},overrideComponents:{},filterRows:Dk,freezeMessage:"",getEditor:null,serialNoColumn:!0,checkboxColumn:!1,clusterize:!0,logs:!1,layout:"fixed",noDataMessage:r.translate("No Data"),cellHeight:40,minimumColumnWidth:30,inlineFilters:!1,treeView:!1,checkedRowStatus:!0,dynamicRowHeight:!1,pasteFromClipboard:!1,showTotalRow:!1,direction:"ltr",disableReorderColumn:!1}}var zk={DataManager:Oh,CellManager:Ih,ColumnManager:Ph,RowManager:Rh,BodyRenderer:Lh,Style:Mh,Keyboard:Nh},$i=class{constructor(t,e){if($i.instances++,typeof t=="string"&&(t=document.querySelector(t)),this.wrapper=t,!(this.wrapper instanceof HTMLElement))throw new Error("Invalid argument given for `wrapper`");this.initializeTranslations(e),this.setDefaultOptions(),this.buildOptions(e),this.prepare(),this.initializeComponents(),this.options.data&&(this.refresh(),this.columnmanager.applyDefaultSortOrder())}initializeTranslations(t){this.language=t.language||"en",this.translationManager=new Dh(this.language),t.translations&&this.translationManager.addTranslations(t.translations)}setDefaultOptions(){this.DEFAULT_OPTIONS=Fk(this)}buildOptions(t){this.options=this.options||{},this.options=Object.assign({},this.DEFAULT_OPTIONS,this.options||{},t),t.headerDropdown=t.headerDropdown||[],this.options.headerDropdown=[...this.DEFAULT_OPTIONS.headerDropdown,...t.headerDropdown],this.events=Object.assign({},this.DEFAULT_OPTIONS.events,this.options.events||{},t.events||{}),this.fireEvent=this.fireEvent.bind(this)}prepare(){this.prepareDom(),this.unfreeze()}initializeComponents(){let t=Object.assign({},zk,this.options.overrideComponents),{Style:e,Keyboard:n,DataManager:i,RowManager:a,ColumnManager:o,CellManager:s,BodyRenderer:u}=t;this.style=new e(this),this.keyboard=new n(this.wrapper),this.datamanager=new i(this.options),this.rowmanager=new a(this),this.columnmanager=new o(this),this.cellmanager=new s(this),this.bodyRenderer=new u(this)}prepareDom(){this.wrapper.innerHTML=`
            <div class="datatable" dir="${this.options.direction}">
                <div class="dt-header"></div>
                <div class="dt-scrollable"></div>
                <div class="dt-footer"></div>
                <div class="dt-freeze">
                    <span class="dt-freeze__message">
                        ${this.options.freezeMessage}
                    </span>
                </div>
                <div class="dt-toast"></div>
                <div class="dt-dropdown-container"></div>
                <textarea class="dt-paste-target"></textarea>
            </div>
        `,this.datatableWrapper=Ee(".datatable",this.wrapper),this.header=Ee(".dt-header",this.wrapper),this.footer=Ee(".dt-footer",this.wrapper),this.bodyScrollable=Ee(".dt-scrollable",this.wrapper),this.freezeContainer=Ee(".dt-freeze",this.wrapper),this.toastMessage=Ee(".dt-toast",this.wrapper),this.pasteTarget=Ee(".dt-paste-target",this.wrapper),this.dropdownContainer=Ee(".dt-dropdown-container",this.wrapper)}refresh(t,e){this.datamanager.init(t,e),this.render(),this.setDimensions()}destroy(){this.wrapper.innerHTML="",this.style.destroy(),this.fireEvent("onDestroy")}appendRows(t){this.datamanager.appendRows(t),this.rowmanager.refreshRows()}refreshRow(t,e){this.rowmanager.refreshRow(t,e)}render(){this.renderHeader(),this.renderBody()}renderHeader(){this.columnmanager.renderHeader()}renderBody(){this.bodyRenderer.render()}setDimensions(){this.style.setDimensions()}showToastMessage(t,e){this.bodyRenderer.showToastMessage(t,e)}clearToastMessage(){this.bodyRenderer.clearToastMessage()}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}getRows(){return this.datamanager.getRows()}getCell(t,e){return this.datamanager.getCell(t,e)}getColumnHeaderElement(t){return this.columnmanager.getColumnHeaderElement(t)}getViewportHeight(){return this.viewportHeight||(this.viewportHeight=Ee.style(this.bodyScrollable,"height")),this.viewportHeight}sortColumn(t,e){this.columnmanager.sortColumn(t,e)}removeColumn(t){this.columnmanager.removeColumn(t)}scrollToLastColumn(){this.datatableWrapper.scrollLeft=9999}freeze(){Ee.style(this.freezeContainer,{display:""})}unfreeze(){Ee.style(this.freezeContainer,{display:"none"})}updateOptions(t){this.buildOptions(t)}fireEvent(t,...e){let n=[...this._internalEventHandlers[t]||[],this.events[t]].filter(Boolean);for(let i of n)i.apply(this,e)}on(t,e){this._internalEventHandlers=this._internalEventHandlers||{},this._internalEventHandlers[t]=this._internalEventHandlers[t]||[],this._internalEventHandlers[t].push(e)}log(){this.options.logs&&console.log.apply(console,arguments)}translate(t,e){return this.translationManager.translate(t,e)}};$i.instances=0;var Hk="frappe-datatable",Uk="0.0.0-development",Wk="A modern datatable library for the web",qk="dist/frappe-datatable.cjs.js",Vk="dist/frappe-datatable.min.js",Gk="dist/frappe-datatable.min.js",Yk={start:"yarn run dev",build:"rollup -c && NODE_ENV=production rollup -c",dev:"rollup -c -w","cy:server":"http-server -p 8989","cy:open":"cypress open","cy:run":"cypress run",test:"start-server-and-test cy:server http://localhost:8989 cy:run","test-local":"start-server-and-test cy:server http://localhost:8989 cy:open","travis-deploy-once":"travis-deploy-once","semantic-release":"semantic-release",lint:"eslint src","lint-and-build":"yarn lint && yarn build",commit:"npx git-cz"},Xk=["dist","src"],Kk={autoprefixer:"^9.0.0",chai:"3.5.0",cypress:"^9.2.0","cz-conventional-changelog":"^2.1.0",deepmerge:"^2.0.1",eslint:"^5.0.1","eslint-config-airbnb":"^16.1.0","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.11.0","http-server":"^0.11.1",mocha:"3.3.0","postcss-custom-properties":"^7.0.0","postcss-nested":"^3.0.0",rollup:"^0.59.4","rollup-plugin-commonjs":"^8.3.0","rollup-plugin-eslint":"^4.0.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.3","rollup-plugin-postcss":"^1.2.8","rollup-plugin-uglify-es":"^0.0.1","semantic-release":"^17.1.1","start-server-and-test":"^1.4.1","travis-deploy-once":"^5.0.1"},Jk={type:"git",url:"https://github.com/frappe/datatable.git"},Zk=["datatable","data","grid","table"],Qk="Faris Ansari",ex="MIT",tx={url:"https://github.com/frappe/datatable/issues"},rx="https://frappe.github.io/datatable",nx={hyperlist:"^1.0.0-beta",lodash:"^4.17.5",sortablejs:"^1.7.0"},ix={commitizen:{path:"cz-conventional-changelog"}},ax={name:Hk,version:Uk,description:Wk,main:qk,unpkg:Vk,jsdelivr:Gk,scripts:Yk,files:Xk,devDependencies:Kk,repository:Jk,keywords:Zk,author:Qk,license:ex,bugs:tx,homepage:rx,dependencies:nx,config:ix};$i.__version__=ax.version;Bh.exports=$i});var zh=xr((Wo,kc)=>{(function(r,t){typeof Wo=="object"&&typeof kc=="object"?kc.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Wo=="object"?Wo.Driver=t():r.Driver=t()})(window,function(){return function(r){var t={};function e(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=r,e.c=t,e.d=function(n,i,a){e.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:a})},e.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,i){if(1&i&&(n=e(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var o in n)e.d(a,o,function(s){return n[s]}.bind(null,o));return a},e.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(i,"a",i),i},e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},e.p="/dist/",e(e.s=57)}([function(r,t,e){var n=e(2),i=e(11),a=e(4),o=e(13),s=e(22),u=function(h,d,_){var g,w,C,k,E=h&u.F,O=h&u.G,N=h&u.S,m=h&u.P,y=h&u.B,b=O?n:N?n[d]||(n[d]={}):(n[d]||{}).prototype,S=O?i:i[d]||(i[d]={}),A=S.prototype||(S.prototype={});for(g in O&&(_=d),_)C=((w=!E&&b&&b[g]!==void 0)?b:_)[g],k=y&&w?s(C,n):m&&typeof C=="function"?s(Function.call,C):C,b&&o(b,g,C,h&u.U),S[g]!=C&&a(S,g,k),m&&A[g]!=C&&(A[g]=C)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,r.exports=u},function(r,t,e){var n=e(17)("wks"),i=e(14),a=e(2).Symbol,o=typeof a=="function";(r.exports=function(s){return n[s]||(n[s]=o&&a[s]||(o?a:i)("Symbol."+s))}).store=n},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var n=e(5),i=e(16);r.exports=e(6)?function(a,o,s){return n.f(a,o,i(1,s))}:function(a,o,s){return a[o]=s,a}},function(r,t,e){var n=e(12),i=e(35),a=e(21),o=Object.defineProperty;t.f=e(6)?Object.defineProperty:function(s,u,h){if(n(s),u=a(u,!0),n(h),i)try{return o(s,u,h)}catch(d){}if("get"in h||"set"in h)throw TypeError("Accessors not supported!");return"value"in h&&(s[u]=h.value),s}},function(r,t,e){r.exports=!e(7)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t){r.exports=function(e){try{return!!e()}catch(n){return!0}}},function(r,t){var e={}.hasOwnProperty;r.exports=function(n,i){return e.call(n,i)}},function(r,t,e){var n=e(39),i=e(24);r.exports=function(a){return n(i(a))}},function(r,t,e){var n=e(0);n(n.S+n.F*!e(6),"Object",{defineProperty:e(5).f})},function(r,t){var e=r.exports={version:"2.6.9"};typeof __e=="number"&&(__e=e)},function(r,t,e){var n=e(3);r.exports=function(i){if(!n(i))throw TypeError(i+" is not an object!");return i}},function(r,t,e){var n=e(2),i=e(4),a=e(8),o=e(14)("src"),s=e(59),u=(""+s).split("toString");e(11).inspectSource=function(h){return s.call(h)},(r.exports=function(h,d,_,g){var w=typeof _=="function";w&&(a(_,"name")||i(_,"name",d)),h[d]!==_&&(w&&(a(_,o)||i(_,o,h[d]?""+h[d]:u.join(String(d)))),h===n?h[d]=_:g?h[d]?h[d]=_:i(h,d,_):(delete h[d],i(h,d,_)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[o]||s.call(this)})},function(r,t){var e=0,n=Math.random();r.exports=function(i){return"Symbol(".concat(i===void 0?"":i,")_",(++e+n).toString(36))}},function(r,t,e){var n=e(45),i=e(28);r.exports=Object.keys||function(a){return n(a,i)}},function(r,t){r.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(r,t,e){var n=e(11),i=e(2),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(r.exports=function(o,s){return a[o]||(a[o]=s!==void 0?s:{})})("versions",[]).push({version:n.version,mode:e(18)?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},function(r,t){r.exports=!1},function(r,t,e){var n=e(24);r.exports=function(i){return Object(n(i))}},function(r,t,e){"use strict";var n=e(2),i=e(8),a=e(6),o=e(0),s=e(13),u=e(62).KEY,h=e(7),d=e(17),_=e(26),g=e(14),w=e(1),C=e(43),k=e(44),E=e(63),O=e(42),N=e(12),m=e(3),y=e(19),b=e(9),S=e(21),A=e(16),I=e(30),T=e(67),R=e(49),B=e(47),F=e(5),L=e(15),j=R.f,P=F.f,z=T.f,Y=n.Symbol,ce=n.JSON,re=ce&&ce.stringify,Z=w("_hidden"),me=w("toPrimitive"),ke={}.propertyIsEnumerable,ne=d("symbol-registry"),oe=d("symbols"),ge=d("op-symbols"),ve=Object.prototype,pe=typeof Y=="function"&&!!B.f,he=n.QObject,Ae=!he||!he.prototype||!he.prototype.findChild,Me=a&&h(function(){return I(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a!=7})?function(Ce,Ie,Ve){var ct=j(ve,Ie);ct&&delete ve[Ie],P(Ce,Ie,Ve),ct&&Ce!==ve&&P(ve,Ie,ct)}:P,De=function(Ce){var Ie=oe[Ce]=I(Y.prototype);return Ie._k=Ce,Ie},Je=pe&&typeof Y.iterator=="symbol"?function(Ce){return typeof Ce=="symbol"}:function(Ce){return Ce instanceof Y},Se=function(Ce,Ie,Ve){return Ce===ve&&Se(ge,Ie,Ve),N(Ce),Ie=S(Ie,!0),N(Ve),i(oe,Ie)?(Ve.enumerable?(i(Ce,Z)&&Ce[Z][Ie]&&(Ce[Z][Ie]=!1),Ve=I(Ve,{enumerable:A(0,!1)})):(i(Ce,Z)||P(Ce,Z,A(1,{})),Ce[Z][Ie]=!0),Me(Ce,Ie,Ve)):P(Ce,Ie,Ve)},ze=function(Ce,Ie){N(Ce);for(var Ve,ct=E(Ie=b(Ie)),Pt=0,Mt=ct.length;Mt>Pt;)Se(Ce,Ve=ct[Pt++],Ie[Ve]);return Ce},at=function(Ce){var Ie=ke.call(this,Ce=S(Ce,!0));return!(this===ve&&i(oe,Ce)&&!i(ge,Ce))&&(!(Ie||!i(this,Ce)||!i(oe,Ce)||i(this,Z)&&this[Z][Ce])||Ie)},Qe=function(Ce,Ie){if(Ce=b(Ce),Ie=S(Ie,!0),Ce!==ve||!i(oe,Ie)||i(ge,Ie)){var Ve=j(Ce,Ie);return!Ve||!i(oe,Ie)||i(Ce,Z)&&Ce[Z][Ie]||(Ve.enumerable=!0),Ve}},lt=function(Ce){for(var Ie,Ve=z(b(Ce)),ct=[],Pt=0;Ve.length>Pt;)i(oe,Ie=Ve[Pt++])||Ie==Z||Ie==u||ct.push(Ie);return ct},At=function(Ce){for(var Ie,Ve=Ce===ve,ct=z(Ve?ge:b(Ce)),Pt=[],Mt=0;ct.length>Mt;)!i(oe,Ie=ct[Mt++])||Ve&&!i(ve,Ie)||Pt.push(oe[Ie]);return Pt};pe||(s((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor!");var Ce=g(arguments.length>0?arguments[0]:void 0),Ie=function(Ve){this===ve&&Ie.call(ge,Ve),i(this,Z)&&i(this[Z],Ce)&&(this[Z][Ce]=!1),Me(this,Ce,A(1,Ve))};return a&&Ae&&Me(ve,Ce,{configurable:!0,set:Ie}),De(Ce)}).prototype,"toString",function(){return this._k}),R.f=Qe,F.f=Se,e(48).f=T.f=lt,e(29).f=at,B.f=At,a&&!e(18)&&s(ve,"propertyIsEnumerable",at,!0),C.f=function(Ce){return De(w(Ce))}),o(o.G+o.W+o.F*!pe,{Symbol:Y});for(var It="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),bt=0;It.length>bt;)w(It[bt++]);for(var Et=L(w.store),Rt=0;Et.length>Rt;)k(Et[Rt++]);o(o.S+o.F*!pe,"Symbol",{for:function(Ce){return i(ne,Ce+="")?ne[Ce]:ne[Ce]=Y(Ce)},keyFor:function(Ce){if(!Je(Ce))throw TypeError(Ce+" is not a symbol!");for(var Ie in ne)if(ne[Ie]===Ce)return Ie},useSetter:function(){Ae=!0},useSimple:function(){Ae=!1}}),o(o.S+o.F*!pe,"Object",{create:function(Ce,Ie){return Ie===void 0?I(Ce):ze(I(Ce),Ie)},defineProperty:Se,defineProperties:ze,getOwnPropertyDescriptor:Qe,getOwnPropertyNames:lt,getOwnPropertySymbols:At});var Lt=h(function(){B.f(1)});o(o.S+o.F*Lt,"Object",{getOwnPropertySymbols:function(Ce){return B.f(y(Ce))}}),ce&&o(o.S+o.F*(!pe||h(function(){var Ce=Y();return re([Ce])!="[null]"||re({a:Ce})!="{}"||re(Object(Ce))!="{}"})),"JSON",{stringify:function(Ce){for(var Ie,Ve,ct=[Ce],Pt=1;arguments.length>Pt;)ct.push(arguments[Pt++]);if(Ve=Ie=ct[1],(m(Ie)||Ce!==void 0)&&!Je(Ce))return O(Ie)||(Ie=function(Mt,Zt){if(typeof Ve=="function"&&(Zt=Ve.call(this,Mt,Zt)),!Je(Zt))return Zt}),ct[1]=Ie,re.apply(ce,ct)}}),Y.prototype[me]||e(4)(Y.prototype,me,Y.prototype.valueOf),_(Y,"Symbol"),_(Math,"Math",!0),_(n.JSON,"JSON",!0)},function(r,t,e){var n=e(3);r.exports=function(i,a){if(!n(i))return i;var o,s;if(a&&typeof(o=i.toString)=="function"&&!n(s=o.call(i))||typeof(o=i.valueOf)=="function"&&!n(s=o.call(i))||!a&&typeof(o=i.toString)=="function"&&!n(s=o.call(i)))return s;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var n=e(37);r.exports=function(i,a,o){if(n(i),a===void 0)return i;switch(o){case 1:return function(s){return i.call(a,s)};case 2:return function(s,u){return i.call(a,s,u)};case 3:return function(s,u,h){return i.call(a,s,u,h)}}return function(){return i.apply(a,arguments)}}},function(r,t){var e={}.toString;r.exports=function(n){return e.call(n).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";var n=e(7);r.exports=function(i,a){return!!i&&n(function(){a?i.call(null,function(){},1):i.call(null)})}},function(r,t,e){var n=e(5).f,i=e(8),a=e(1)("toStringTag");r.exports=function(o,s,u){o&&!i(o=u?o:o.prototype,a)&&n(o,a,{configurable:!0,value:s})}},function(r,t,e){var n=e(17)("keys"),i=e(14);r.exports=function(a){return n[a]||(n[a]=i(a))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var n=e(12),i=e(65),a=e(28),o=e(27)("IE_PROTO"),s=function(){},u=function(){var h,d=e(36)("iframe"),_=a.length;for(d.style.display="none",e(66).appendChild(d),d.src="javascript:",(h=d.contentWindow.document).open(),h.write("<script>document.F=Object<\/script>"),h.close(),u=h.F;_--;)delete u.prototype[a[_]];return u()};r.exports=Object.create||function(h,d){var _;return h!==null?(s.prototype=n(h),_=new s,s.prototype=null,_[o]=h):_=u(),d===void 0?_:i(_,d)}},function(r,t,e){"use strict";var n=e(68),i=e(69),a=e(32),o=e(9);r.exports=e(70)(Array,"Array",function(s,u){this._t=o(s),this._i=0,this._k=u},function(){var s=this._t,u=this._k,h=this._i++;return!s||h>=s.length?(this._t=void 0,i(1)):i(0,u=="keys"?h:u=="values"?s[h]:[h,s[h]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(r,t){r.exports={}},function(r,t,e){e(44)("asyncIterator")},function(r,t,e){"use strict";var n=e(0),i=e(38)(0),a=e(25)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(o){return i(this,o,arguments[1])}})},function(r,t,e){r.exports=!e(6)&&!e(7)(function(){return Object.defineProperty(e(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var n=e(3),i=e(2).document,a=n(i)&&n(i.createElement);r.exports=function(o){return a?i.createElement(o):{}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t,e){var n=e(22),i=e(39),a=e(19),o=e(40),s=e(60);r.exports=function(u,h){var d=u==1,_=u==2,g=u==3,w=u==4,C=u==6,k=u==5||C,E=h||s;return function(O,N,m){for(var y,b,S=a(O),A=i(S),I=n(N,m,3),T=o(A.length),R=0,B=d?E(O,T):_?E(O,0):void 0;T>R;R++)if((k||R in A)&&(b=I(y=A[R],R,S),u)){if(d)B[R]=b;else if(b)switch(u){case 3:return!0;case 5:return y;case 6:return R;case 2:B.push(y)}else if(w)return!1}return C?-1:g||w?w:B}}},function(r,t,e){var n=e(23);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return n(i)=="String"?i.split(""):Object(i)}},function(r,t,e){var n=e(41),i=Math.min;r.exports=function(a){return a>0?i(n(a),9007199254740991):0}},function(r,t){var e=Math.ceil,n=Math.floor;r.exports=function(i){return isNaN(i=+i)?0:(i>0?n:e)(i)}},function(r,t,e){var n=e(23);r.exports=Array.isArray||function(i){return n(i)=="Array"}},function(r,t,e){t.f=e(1)},function(r,t,e){var n=e(2),i=e(11),a=e(18),o=e(43),s=e(5).f;r.exports=function(u){var h=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});u.charAt(0)=="_"||u in h||s(h,u,{value:o.f(u)})}},function(r,t,e){var n=e(8),i=e(9),a=e(46)(!1),o=e(27)("IE_PROTO");r.exports=function(s,u){var h,d=i(s),_=0,g=[];for(h in d)h!=o&&n(d,h)&&g.push(h);for(;u.length>_;)n(d,h=u[_++])&&(~a(g,h)||g.push(h));return g}},function(r,t,e){var n=e(9),i=e(40),a=e(64);r.exports=function(o){return function(s,u,h){var d,_=n(s),g=i(_.length),w=a(h,g);if(o&&u!=u){for(;g>w;)if((d=_[w++])!=d)return!0}else for(;g>w;w++)if((o||w in _)&&_[w]===u)return o||w||0;return!o&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var n=e(45),i=e(28).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(a){return n(a,i)}},function(r,t,e){var n=e(29),i=e(16),a=e(9),o=e(21),s=e(8),u=e(35),h=Object.getOwnPropertyDescriptor;t.f=e(6)?h:function(d,_){if(d=a(d),_=o(_,!0),u)try{return h(d,_)}catch(g){}if(s(d,_))return i(!n.f.call(d,_),d[_])}},function(r,t,e){for(var n=e(31),i=e(15),a=e(13),o=e(2),s=e(4),u=e(32),h=e(1),d=h("iterator"),_=h("toStringTag"),g=u.Array,w={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},C=i(w),k=0;k<C.length;k++){var E,O=C[k],N=w[O],m=o[O],y=m&&m.prototype;if(y&&(y[d]||s(y,d,g),y[_]||s(y,_,O),u[O]=g,N))for(E in n)y[E]||a(y,E,n[E],!0)}},function(r,t,e){"use strict";var n=e(73),i={};i[e(1)("toStringTag")]="z",i+""!="[object z]"&&e(13)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(r,t,e){var n=e(19),i=e(15);e(74)("keys",function(){return function(a){return i(n(a))}})},function(r,t,e){"use strict";var n=e(0),i=e(38)(2);n(n.P+n.F*!e(25)([].filter,!0),"Array",{filter:function(a){return i(this,a,arguments[1])}})},function(r,t,e){var n=e(0);n(n.P,"Function",{bind:e(75)})},function(r,t,e){var n=e(0);n(n.S,"Object",{create:e(30)})},function(r,t,e){var n=e(0);n(n.S,"Object",{setPrototypeOf:e(81).set})},function(r,t,e){e(58),r.exports=e(82)},function(r,t){},function(r,t,e){r.exports=e(17)("native-function-to-string",Function.toString)},function(r,t,e){var n=e(61);r.exports=function(i,a){return new(n(i))(a)}},function(r,t,e){var n=e(3),i=e(42),a=e(1)("species");r.exports=function(o){var s;return i(o)&&(typeof(s=o.constructor)!="function"||s!==Array&&!i(s.prototype)||(s=void 0),n(s)&&(s=s[a])===null&&(s=void 0)),s===void 0?Array:s}},function(r,t,e){var n=e(14)("meta"),i=e(3),a=e(8),o=e(5).f,s=0,u=Object.isExtensible||function(){return!0},h=!e(7)(function(){return u(Object.preventExtensions({}))}),d=function(g){o(g,n,{value:{i:"O"+ ++s,w:{}}})},_=r.exports={KEY:n,NEED:!1,fastKey:function(g,w){if(!i(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!a(g,n)){if(!u(g))return"F";if(!w)return"E";d(g)}return g[n].i},getWeak:function(g,w){if(!a(g,n)){if(!u(g))return!0;if(!w)return!1;d(g)}return g[n].w},onFreeze:function(g){return h&&_.NEED&&u(g)&&!a(g,n)&&d(g),g}}},function(r,t,e){var n=e(15),i=e(47),a=e(29);r.exports=function(o){var s=n(o),u=i.f;if(u)for(var h,d=u(o),_=a.f,g=0;d.length>g;)_.call(o,h=d[g++])&&s.push(h);return s}},function(r,t,e){var n=e(41),i=Math.max,a=Math.min;r.exports=function(o,s){return(o=n(o))<0?i(o+s,0):a(o,s)}},function(r,t,e){var n=e(5),i=e(12),a=e(15);r.exports=e(6)?Object.defineProperties:function(o,s){i(o);for(var u,h=a(s),d=h.length,_=0;d>_;)n.f(o,u=h[_++],s[u]);return o}},function(r,t,e){var n=e(2).document;r.exports=n&&n.documentElement},function(r,t,e){var n=e(9),i=e(48).f,a={}.toString,o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(s){return o&&a.call(s)=="[object Window]"?function(u){try{return i(u)}catch(h){return o.slice()}}(s):i(n(s))}},function(r,t,e){var n=e(1)("unscopables"),i=Array.prototype;i[n]==null&&e(4)(i,n,{}),r.exports=function(a){i[n][a]=!0}},function(r,t){r.exports=function(e,n){return{value:n,done:!!e}}},function(r,t,e){"use strict";var n=e(18),i=e(0),a=e(13),o=e(4),s=e(32),u=e(71),h=e(26),d=e(72),_=e(1)("iterator"),g=!([].keys&&"next"in[].keys()),w=function(){return this};r.exports=function(C,k,E,O,N,m,y){u(E,k,O);var b,S,A,I=function(Y){if(!g&&Y in F)return F[Y];switch(Y){case"keys":case"values":return function(){return new E(this,Y)}}return function(){return new E(this,Y)}},T=k+" Iterator",R=N=="values",B=!1,F=C.prototype,L=F[_]||F["@@iterator"]||N&&F[N],j=L||I(N),P=N?R?I("entries"):j:void 0,z=k=="Array"&&F.entries||L;if(z&&(A=d(z.call(new C)))!==Object.prototype&&A.next&&(h(A,T,!0),n||typeof A[_]=="function"||o(A,_,w)),R&&L&&L.name!=="values"&&(B=!0,j=function(){return L.call(this)}),n&&!y||!g&&!B&&F[_]||o(F,_,j),s[k]=j,s[T]=w,N)if(b={values:R?j:I("values"),keys:m?j:I("keys"),entries:P},y)for(S in b)S in F||a(F,S,b[S]);else i(i.P+i.F*(g||B),k,b);return b}},function(r,t,e){"use strict";var n=e(30),i=e(16),a=e(26),o={};e(4)(o,e(1)("iterator"),function(){return this}),r.exports=function(s,u,h){s.prototype=n(o,{next:i(1,h)}),a(s,u+" Iterator")}},function(r,t,e){var n=e(8),i=e(19),a=e(27)("IE_PROTO"),o=Object.prototype;r.exports=Object.getPrototypeOf||function(s){return s=i(s),n(s,a)?s[a]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?o:null}},function(r,t,e){var n=e(23),i=e(1)("toStringTag"),a=n(function(){return arguments}())=="Arguments";r.exports=function(o){var s,u,h;return o===void 0?"Undefined":o===null?"Null":typeof(u=function(d,_){try{return d[_]}catch(g){}}(s=Object(o),i))=="string"?u:a?n(s):(h=n(s))=="Object"&&typeof s.callee=="function"?"Arguments":h}},function(r,t,e){var n=e(0),i=e(11),a=e(7);r.exports=function(o,s){var u=(i.Object||{})[o]||Object[o],h={};h[o]=s(u),n(n.S+n.F*a(function(){u(1)}),"Object",h)}},function(r,t,e){"use strict";var n=e(37),i=e(3),a=e(76),o=[].slice,s={};r.exports=Function.bind||function(u){var h=n(this),d=o.call(arguments,1),_=function(){var g=d.concat(o.call(arguments));return this instanceof _?function(w,C,k){if(!(C in s)){for(var E=[],O=0;O<C;O++)E[O]="a["+O+"]";s[C]=Function("F,a","return new F("+E.join(",")+")")}return s[C](w,k)}(h,g.length,g):a(h,g,u)};return i(h.prototype)&&(_.prototype=h.prototype),_}},function(r,t){r.exports=function(e,n,i){var a=i===void 0;switch(n.length){case 0:return a?e():e.call(i);case 1:return a?e(n[0]):e.call(i,n[0]);case 2:return a?e(n[0],n[1]):e.call(i,n[0],n[1]);case 3:return a?e(n[0],n[1],n[2]):e.call(i,n[0],n[1],n[2]);case 4:return a?e(n[0],n[1],n[2],n[3]):e.call(i,n[0],n[1],n[2],n[3])}return e.apply(i,n)}},function(r,t,e){"use strict";e(78)("trim",function(n){return function(){return n(this,3)}})},function(r,t,e){var n=e(0),i=e(24),a=e(7),o=e(79),s="["+o+"]",u=RegExp("^"+s+s+"*"),h=RegExp(s+s+"*$"),d=function(g,w,C){var k={},E=a(function(){return!!o[g]()||"\u200B\x85"[g]()!="\u200B\x85"}),O=k[g]=E?w(_):o[g];C&&(k[C]=O),n(n.P+n.F*E,"String",k)},_=d.trim=function(g,w){return g=String(i(g)),1&w&&(g=g.replace(u,"")),2&w&&(g=g.replace(h,"")),g};r.exports=d},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){"use strict";var n=e(0),i=e(46)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!e(25)(a)),"Array",{indexOf:function(s){return o?a.apply(this,arguments)||0:i(this,s,arguments[1])}})},function(r,t,e){var n=e(3),i=e(12),a=function(o,s){if(i(o),!n(s)&&s!==null)throw TypeError(s+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(o,s,u){try{(u=e(22)(Function.call,e(49).f(Object.prototype,"__proto__").set,2))(o,[]),s=!(o instanceof Array)}catch(h){s=!0}return function(h,d){return a(h,d),s?h.__proto__=d:u(h,d),h}}({},!1):void 0),check:a}},function(r,t,e){"use strict";e.r(t),e(34),e(20),e(50),e(31),e(51),e(52),e(10),e(53),e(54);var n=.75,i=10,a=!0,o=!0,s=!0,u=!1,h="driver-highlighted-element-stage",d='<div id="'.concat("driver-page-overlay",'"></div>'),_='<div id="'.concat(h,'"></div>');e(33),e(77);function g(ne){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})(ne)}var w=function(ne){var oe=document.createElement("div");return oe.innerHTML=ne.trim(),oe.firstChild},C=function ne(oe,ge){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]){for(var ve=["","-webkit-","-ms-","moz-","-o-"],pe=0;pe<ve.length;pe++){var he=ne(oe,ve[pe]+ge);if(he)return he}return""}var Ae="";return oe.currentStyle?Ae=oe.currentStyle[ge]:document.defaultView&&document.defaultView.getComputedStyle&&(Ae=document.defaultView.getComputedStyle(oe,null).getPropertyValue(ge)),Ae&&Ae.toLowerCase?Ae.toLowerCase():Ae},k=function(ne){return ne&&g(ne)==="object"&&"nodeType"in ne};function E(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}var O=function(){function ne(pe,he,Ae){(function(Me,De){if(!(Me instanceof De))throw new TypeError("Cannot call a class as a function")})(this,ne),this.options=pe,this.highlightedElement=null,this.lastHighlightedElement=null,this.hideTimer=null,this.window=he,this.document=Ae,this.removeNode=this.removeNode.bind(this)}var oe,ge,ve;return oe=ne,(ge=[{key:"attachNode",value:function(){var pe=this.document.getElementById("driver-page-overlay");pe||(pe=w(d),document.body.appendChild(pe)),this.node=pe,this.node.style.opacity="0",this.options.animate||this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"highlight",value:function(pe){pe&&pe.node?pe.isSame(this.highlightedElement)||(this.window.clearTimeout(this.hideTimer),pe.onHighlightStarted(),this.highlightedElement&&!this.highlightedElement.isSame(this.lastHighlightedElement)&&this.highlightedElement.onDeselected(),pe.getCalculatedPosition().canHighlight()&&(this.lastHighlightedElement=this.highlightedElement,this.highlightedElement=pe,this.show(),this.highlightedElement.onHighlighted())):console.warn("Invalid element to highlight. Must be an instance of `Element`")}},{key:"show",value:function(){var pe=this;this.node&&this.node.parentElement||(this.attachNode(),window.setTimeout(function(){pe.node.style.opacity="".concat(pe.options.opacity),pe.node.style.position="fixed",pe.node.style.left="0",pe.node.style.top="0",pe.node.style.bottom="0",pe.node.style.right="0"}))}},{key:"getHighlightedElement",value:function(){return this.highlightedElement}},{key:"getLastHighlightedElement",value:function(){return this.lastHighlightedElement}},{key:"clear",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.onReset&&this.options.onReset(this.highlightedElement),this.highlightedElement&&this.highlightedElement.onDeselected(!0),this.highlightedElement=null,this.lastHighlightedElement=null,this.node&&(this.window.clearTimeout(this.hideTimer),this.options.animate&&!pe?(this.node.style.opacity="0",this.hideTimer=this.window.setTimeout(this.removeNode,300)):this.removeNode())}},{key:"removeNode",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"refresh",value:function(){this.highlightedElement&&(this.highlightedElement.showPopover(),this.highlightedElement.showStage())}}])&&E(oe.prototype,ge),ve&&E(oe,ve),ne}();e(80);function N(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}var m=function(){function ne(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=pe.left,Ae=he===void 0?0:he,Me=pe.top,De=Me===void 0?0:Me,Je=pe.right,Se=Je===void 0?0:Je,ze=pe.bottom,at=ze===void 0?0:ze;(function(Qe,lt){if(!(Qe instanceof lt))throw new TypeError("Cannot call a class as a function")})(this,ne),this.left=Ae,this.right=Se,this.top=De,this.bottom=at}var oe,ge,ve;return oe=ne,(ge=[{key:"canHighlight",value:function(){return this.left<this.right&&this.top<this.bottom}}])&&N(oe.prototype,ge),ve&&N(oe,ve),ne}();function y(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}var b=function(){function ne(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=pe.node,Ae=pe.options,Me=pe.popover,De=pe.stage,Je=pe.overlay,Se=pe.window,ze=pe.document;(function(at,Qe){if(!(at instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,ne),this.node=he,this.document=ze,this.window=Se,this.options=Ae,this.overlay=Je,this.popover=Me,this.stage=De,this.animationTimeout=null}var oe,ge,ve;return oe=ne,(ge=[{key:"isInView",value:function(){for(var pe=this.node.offsetTop,he=this.node.offsetLeft,Ae=this.node.offsetWidth,Me=this.node.offsetHeight,De=this.node;De.offsetParent;)pe+=(De=De.offsetParent).offsetTop,he+=De.offsetLeft;return pe>=this.window.pageYOffset&&he>=this.window.pageXOffset&&pe+Me<=this.window.pageYOffset+this.window.innerHeight&&he+Ae<=this.window.pageXOffset+this.window.innerWidth}},{key:"scrollManually",value:function(){var pe=this.node.getBoundingClientRect().top+this.window.pageYOffset-this.window.innerHeight/2;this.window.scrollTo(0,pe)}},{key:"bringInView",value:function(){if(this.node&&!this.isInView())if(this.node.scrollIntoView)try{this.node.scrollIntoView(this.options.scrollIntoViewOptions||{behavior:"instant",block:"center"})}catch(pe){this.scrollManually()}else this.scrollManually()}},{key:"getCalculatedPosition",value:function(){var pe=this.document.body,he=this.document.documentElement,Ae=this.window,Me=this.window.pageYOffset||he.scrollTop||pe.scrollTop,De=Ae.pageXOffset||he.scrollLeft||pe.scrollLeft,Je=this.node.getBoundingClientRect();return new m({top:Je.top+Me,left:Je.left+De,right:Je.left+De+Je.width,bottom:Je.top+Me+Je.height})}},{key:"getPopover",value:function(){return this.popover}},{key:"onDeselected",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.hidePopover(),pe&&this.hideStage(),this.removeHighlightClasses(),this.window.clearTimeout(this.animationTimeout),this.options.onDeselected&&this.options.onDeselected(this)}},{key:"isSame",value:function(pe){return!(!pe||!pe.node)&&pe.node===this.node}},{key:"onHighlightStarted",value:function(){this.options.onHighlightStarted&&this.options.onHighlightStarted(this)}},{key:"onHighlighted",value:function(){this.isInView()||this.bringInView(),this.showPopover(),this.showStage(),this.addHighlightClasses(),this.options.onHighlighted&&this.options.onHighlighted(this)}},{key:"removeHighlightClasses",value:function(){this.node.classList.remove("driver-highlighted-element"),this.node.classList.remove("driver-position-relative");for(var pe=this.document.querySelectorAll(".".concat("driver-fix-stacking")),he=0;he<pe.length;he++)pe[he].classList.remove("driver-fix-stacking")}},{key:"addHighlightClasses",value:function(){this.node.classList.add("driver-highlighted-element"),this.canMakeRelative()&&this.node.classList.add("driver-position-relative"),this.fixStackingContext()}},{key:"fixStackingContext",value:function(){for(var pe=this.node.parentNode;pe&&pe.tagName&&pe.tagName.toLowerCase()!=="body";){var he=C(pe,"z-index"),Ae=parseFloat(C(pe,"opacity")),Me=C(pe,"transform",!0),De=C(pe,"transform-style",!0),Je=C(pe,"transform-box",!0),Se=C(pe,"filter",!0),ze=C(pe,"perspective",!0);(/[0-9]+/.test(he)||Ae<1||Me&&Me!=="none"||De&&De!=="flat"||Je&&Je!=="border-box"||Se&&Se!=="none"||ze&&ze!=="none")&&pe.classList.add("driver-fix-stacking"),pe=pe.parentNode}}},{key:"canMakeRelative",value:function(){var pe=this.getStyleProperty("position");return["absolute","fixed","relative"].indexOf(pe)===-1}},{key:"getStyleProperty",value:function(pe){return C(this.node,pe)}},{key:"showStage",value:function(){this.stage.show(this.getCalculatedPosition())}},{key:"getNode",value:function(){return this.node}},{key:"hideStage",value:function(){this.stage.hide()}},{key:"hidePopover",value:function(){this.popover&&this.popover.hide()}},{key:"showPopover",value:function(){var pe=this;if(this.popover){var he=this.getCalculatedPosition(),Ae=300;this.options.animate&&this.overlay.lastHighlightedElement||(Ae=0),this.animationTimeout=this.window.setTimeout(function(){pe.popover.show(he)},Ae)}}},{key:"getFullPageSize",value:function(){var pe=this.document.body,he=this.document.documentElement;return{height:Math.max(pe.scrollHeight,pe.offsetHeight,he.scrollHeight,he.offsetHeight),width:Math.max(pe.scrollWidth,pe.offsetWidth,he.scrollWidth,he.offsetWidth)}}},{key:"getSize",value:function(){return{height:Math.max(this.node.scrollHeight,this.node.offsetHeight),width:Math.max(this.node.scrollWidth,this.node.offsetWidth)}}}])&&y(oe.prototype,ge),ve&&y(oe,ve),ne}();e(55),e(56);function S(ne){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})(ne)}function A(ne,oe,ge){return oe in ne?Object.defineProperty(ne,oe,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ne[oe]=ge,ne}function I(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}function T(ne,oe){return!oe||S(oe)!=="object"&&typeof oe!="function"?function(ge){if(ge===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}(ne):oe}function R(ne){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(oe){return oe.__proto__||Object.getPrototypeOf(oe)})(ne)}function B(ne,oe){return(B=Object.setPrototypeOf||function(ge,ve){return ge.__proto__=ve,ge})(ne,oe)}var F=function(ne){function oe(he,Ae,Me){var De;return function(Je,Se){if(!(Je instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,oe),(De=T(this,R(oe).call(this))).options=function(Je){for(var Se=1;Se<arguments.length;Se++){var ze=arguments[Se]!=null?arguments[Se]:{},at=Object.keys(ze);typeof Object.getOwnPropertySymbols=="function"&&(at=at.concat(Object.getOwnPropertySymbols(ze).filter(function(Qe){return Object.getOwnPropertyDescriptor(ze,Qe).enumerable}))),at.forEach(function(Qe){A(Je,Qe,ze[Qe])})}return Je}({isFirst:!0,isLast:!0,totalCount:1,currentIndex:0,offset:0,showButtons:!0,closeBtnText:"Close",doneBtnText:"Done",startBtnText:"Next &rarr;",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous"},he),De.window=Ae,De.document=Me,De}var ge,ve,pe;return function(he,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Ae&&B(he,Ae)}(oe,b),ge=oe,(ve=[{key:"attachNode",value:function(){var he=this.document.getElementById("driver-popover-item");he&&he.parentElement.removeChild(he),he=w(function(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return`
  <div id="`.concat("driver-popover-item",'" class="').concat(Ae,`">
    <div class="`).concat("driver-popover-tip",`"></div>
    <div class="`).concat("driver-popover-title",`">Popover Title</div>
    <div class="`).concat("driver-popover-description",`">Popover Description</div>
    <div class="driver-clearfix `).concat("driver-popover-footer",`">
      <button class="`).concat("driver-close-btn",`">Close</button>
      <span class="driver-btn-group `).concat("driver-navigation-btns",`">
        <button class="`).concat("driver-prev-btn",`">&larr; Previous</button>
        <button class="`).concat("driver-next-btn",`">Next &rarr;</button>
      </span>
    </div>
  </div>`)}(this.options.className)),document.body.appendChild(he),this.node=he,this.tipNode=he.querySelector(".".concat("driver-popover-tip")),this.titleNode=he.querySelector(".".concat("driver-popover-title")),this.descriptionNode=he.querySelector(".".concat("driver-popover-description")),this.footerNode=he.querySelector(".".concat("driver-popover-footer")),this.nextBtnNode=he.querySelector(".".concat("driver-next-btn")),this.prevBtnNode=he.querySelector(".".concat("driver-prev-btn")),this.closeBtnNode=he.querySelector(".".concat("driver-close-btn"))}},{key:"getTitleNode",value:function(){return this.titleNode}},{key:"getDescriptionNode",value:function(){return this.descriptionNode}},{key:"hide",value:function(){this.node&&(this.node.style.display="none")}},{key:"setInitialState",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right="",this.node.querySelector(".".concat("driver-popover-tip")).className="driver-popover-tip"}},{key:"show",value:function(he){switch(this.attachNode(),this.setInitialState(),this.titleNode.innerHTML=this.options.title,this.descriptionNode.innerHTML=this.options.description||"",this.renderFooter(),this.options.position){case"left":case"left-top":this.positionOnLeft(he);break;case"left-center":this.positionOnLeftCenter(he);break;case"left-bottom":this.positionOnLeftBottom(he);break;case"right":case"right-top":this.positionOnRight(he);break;case"right-center":this.positionOnRightCenter(he);break;case"right-bottom":this.positionOnRightBottom(he);break;case"top":case"top-left":this.positionOnTop(he);break;case"top-center":this.positionOnTopCenter(he);break;case"top-right":this.positionOnTopRight(he);break;case"bottom":case"bottom-left":this.positionOnBottom(he);break;case"bottom-center":this.positionOnBottomCenter(he);break;case"bottom-right":this.positionOnBottomRight(he);break;case"mid-center":this.positionOnMidCenter(he);break;case"auto":default:this.autoPosition(he)}this.bringInView()}},{key:"renderFooter",value:function(){this.nextBtnNode.innerHTML=this.options.nextBtnText,this.prevBtnNode.innerHTML=this.options.prevBtnText,this.closeBtnNode.innerHTML=this.options.closeBtnText;var he=this.options.totalCount&&this.options.totalCount!==1;this.options.showButtons?(he?(this.nextBtnNode.style.display="inline-block",this.prevBtnNode.style.display="inline-block",this.closeBtnNode.classList.remove("driver-close-only-btn")):(this.nextBtnNode.style.display="none",this.prevBtnNode.style.display="none",this.closeBtnNode.classList.add("driver-close-only-btn")),this.footerNode.style.display="block",this.options.isFirst?(this.prevBtnNode.classList.add("driver-disabled"),this.nextBtnNode.innerHTML=this.options.startBtnText):this.prevBtnNode.classList.remove("driver-disabled"),this.options.isLast?this.nextBtnNode.innerHTML=this.options.doneBtnText:this.nextBtnNode.innerHTML=this.options.nextBtnText):this.footerNode.style.display="none"}},{key:"positionOnLeft",value:function(he){var Ae=this.getSize().width,Me=this.options.padding+10;this.node.style.left="".concat(he.left-Ae-Me,"px"),this.node.style.top="".concat(he.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right")}},{key:"positionOnLeftBottom",value:function(he){var Ae=this.getSize(),Me=Ae.width,De=this.options.padding+10;this.node.style.left="".concat(he.left-Me-De,"px"),this.node.style.top="".concat(he.bottom+this.options.padding+this.options.offset-Ae.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("right","position-bottom")}},{key:"positionOnLeftCenter",value:function(he){var Ae=this.getSize(),Me=Ae.width,De=Ae.height/2,Je=this.options.padding+10,Se=(he.bottom-he.top)/2,ze=he.top-De+Se+this.options.offset;this.node.style.left="".concat(he.left-Me-Je,"px"),this.node.style.top="".concat(ze,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right","position-center")}},{key:"positionOnRight",value:function(he){var Ae=this.options.padding+10;this.node.style.left="".concat(he.right+Ae,"px"),this.node.style.top="".concat(he.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left")}},{key:"positionOnRightCenter",value:function(he){var Ae=this.getSize(),Me=this.options.padding+10,De=Ae.height/2,Je=(he.bottom-he.top)/2,Se=he.top-De+Je+this.options.offset;this.node.style.left="".concat(he.right+Me,"px"),this.node.style.top="".concat(Se,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left","position-center")}},{key:"positionOnRightBottom",value:function(he){var Ae=this.options.padding+10,Me=this.getSize();this.node.style.left="".concat(he.right+Ae,"px"),this.node.style.top="".concat(he.bottom+this.options.padding+this.options.offset-Me.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("left","position-bottom")}},{key:"positionOnTop",value:function(he){var Ae=this.getSize().height,Me=this.options.padding+10;this.node.style.top="".concat(he.top-Ae-Me,"px"),this.node.style.left="".concat(he.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom")}},{key:"positionOnTopCenter",value:function(he){var Ae=this.getSize(),Me=Ae.height,De=Ae.width/2,Je=this.options.padding+10,Se=this.options.offset+he.left+(he.right-he.left)/2;this.node.style.top="".concat(he.top-Me-Je,"px"),this.node.style.left="".concat(Se-De-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-center")}},{key:"positionOnTopRight",value:function(he){var Ae=this.getSize(),Me=Ae.height,De=this.options.padding+10;this.node.style.top="".concat(he.top-Me-De,"px"),this.node.style.left="".concat(he.right+this.options.padding+this.options.offset-Ae.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-right")}},{key:"positionOnBottom",value:function(he){var Ae=this.options.padding+10;this.node.style.top="".concat(he.bottom+Ae,"px"),this.node.style.left="".concat(he.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top")}},{key:"positionOnBottomCenter",value:function(he){var Ae=this.getSize().width/2,Me=this.options.padding+10,De=this.options.offset+he.left+(he.right-he.left)/2;this.node.style.top="".concat(he.bottom+Me,"px"),this.node.style.left="".concat(De-Ae-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-center")}},{key:"positionOnBottomRight",value:function(he){var Ae=this.getSize(),Me=this.options.padding+10;this.node.style.top="".concat(he.bottom+Me,"px"),this.node.style.left="".concat(he.right+this.options.padding+this.options.offset-Ae.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-right")}},{key:"positionOnMidCenter",value:function(he){var Ae=this.getSize(),Me=Ae.height,De=Ae.width/2,Je=Me/2,Se=(he.bottom-he.top)/2,ze=he.top-Je+Se+this.options.offset,at=this.options.offset+he.left+(he.right-he.left)/2;this.node.style.top="".concat(ze,"px"),this.node.style.left="".concat(at-De-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("mid-center")}},{key:"autoPosition",value:function(he){var Ae=this.getFullPageSize(),Me=this.getSize(),De=Ae.height,Je=Me.height,Se=this.options.padding+10;he.bottom+Je+Se>=De?this.positionOnTop(he):this.positionOnBottom(he)}}])&&I(ge.prototype,ve),pe&&I(ge,pe),oe}();function L(ne){return(L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})(ne)}function j(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}function P(ne,oe){return!oe||L(oe)!=="object"&&typeof oe!="function"?function(ge){if(ge===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}(ne):oe}function z(ne){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(oe){return oe.__proto__||Object.getPrototypeOf(oe)})(ne)}function Y(ne,oe){return(Y=Object.setPrototypeOf||function(ge,ve){return ge.__proto__=ve,ge})(ne,oe)}var ce=function(ne){function oe(he,Ae,Me){var De;return function(Je,Se){if(!(Je instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,oe),(De=P(this,z(oe).call(this))).options=he,De.window=Ae,De.document=Me,De}var ge,ve,pe;return function(he,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Ae&&Y(he,Ae)}(oe,b),ge=oe,(ve=[{key:"attachNode",value:function(){var he=this.document.getElementById(h);he||(he=w(_),document.body.appendChild(he)),this.node=he,this.options.animate?this.node.classList.remove("driver-stage-no-animation"):this.node.classList.add("driver-stage-no-animation")}},{key:"hide",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"setInitialStyle",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right=""}},{key:"show",value:function(he){this.attachNode(),this.setInitialStyle();var Ae=2*this.options.padding,Me=he.right-he.left+Ae,De=he.bottom-he.top+Ae;this.node.style.display="block",this.node.style.position="absolute",this.node.style.width="".concat(Me,"px"),this.node.style.height="".concat(De,"px"),this.node.style.top="".concat(he.top-Ae/2,"px"),this.node.style.left="".concat(he.left-Ae/2,"px"),this.node.style.backgroundColor=this.options.stageBackground}}])&&j(ge.prototype,ve),pe&&j(ge,pe),oe}();function re(ne){for(var oe=1;oe<arguments.length;oe++){var ge=arguments[oe]!=null?arguments[oe]:{},ve=Object.keys(ge);typeof Object.getOwnPropertySymbols=="function"&&(ve=ve.concat(Object.getOwnPropertySymbols(ge).filter(function(pe){return Object.getOwnPropertyDescriptor(ge,pe).enumerable}))),ve.forEach(function(pe){Z(ne,pe,ge[pe])})}return ne}function Z(ne,oe,ge){return oe in ne?Object.defineProperty(ne,oe,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ne[oe]=ge,ne}function me(ne,oe){for(var ge=0;ge<oe.length;ge++){var ve=oe[ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(ne,ve.key,ve)}}e.d(t,"default",function(){return ke});var ke=function(){function ne(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(he,Ae){if(!(he instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,ne),this.options=re({animate:a,opacity:n,padding:i,scrollIntoViewOptions:null,allowClose:o,keyboardControl:s,overlayClickNext:u,stageBackground:"#ffffff",onHighlightStarted:function(){return null},onHighlighted:function(){return null},onDeselected:function(){return null},onReset:function(){return null},onNext:function(){return null},onPrevious:function(){return null}},pe),this.document=document,this.window=window,this.isActivated=!1,this.steps=[],this.currentStep=0,this.currentMovePrevented=!1,this.overlay=new O(this.options,window,document),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onClick=this.onClick.bind(this),this.moveNext=this.moveNext.bind(this),this.movePrevious=this.movePrevious.bind(this),this.preventMove=this.preventMove.bind(this),this.bind()}var oe,ge,ve;return oe=ne,(ge=[{key:"getSteps",value:function(){return this.steps}},{key:"setSteps",value:function(pe){this.steps=pe}},{key:"bind",value:function(){this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),"ontouchstart"in document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1)}},{key:"onClick",value:function(pe){if(this.isActivated&&this.hasHighlightedElement()){pe.stopPropagation();var he=this.overlay.getHighlightedElement(),Ae=this.document.getElementById("driver-popover-item"),Me=he.node.contains(pe.target),De=Ae&&Ae.contains(pe.target);if(Me||De||!this.options.overlayClickNext)if(Me||De||!this.options.allowClose){var Je=pe.target.classList.contains("driver-next-btn"),Se=pe.target.classList.contains("driver-prev-btn");pe.target.classList.contains("driver-close-btn")?this.reset():Je?this.handleNext():Se&&this.handlePrevious()}else this.reset();else this.handleNext()}}},{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"refresh",value:function(){this.overlay.refresh()}},{key:"onKeyUp",value:function(pe){if(this.isActivated&&this.options.keyboardControl)if(pe.keyCode!==27){var he=this.getHighlightedElement();he&&he.popover&&(pe.keyCode===39?this.handleNext():pe.keyCode===37&&this.handlePrevious())}else this.reset()}},{key:"movePrevious",value:function(){var pe=this.steps[this.currentStep-1];pe?(this.overlay.highlight(pe),this.currentStep-=1):this.reset()}},{key:"preventMove",value:function(){this.currentMovePrevented=!0}},{key:"handleNext",value:function(){this.currentMovePrevented=!1;var pe=this.steps[this.currentStep];pe&&pe.options&&pe.options.onNext&&pe.options.onNext(this.overlay.highlightedElement),this.currentMovePrevented||this.moveNext()}},{key:"handlePrevious",value:function(){this.currentMovePrevented=!1;var pe=this.steps[this.currentStep];pe&&pe.options&&pe.options.onPrevious&&pe.options.onPrevious(this.overlay.highlightedElement),this.currentMovePrevented||this.movePrevious()}},{key:"moveNext",value:function(){var pe=this.steps[this.currentStep+1];pe?(this.overlay.highlight(pe),this.currentStep+=1):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.currentStep=0,this.isActivated=!1,this.overlay.clear(pe)}},{key:"hasHighlightedElement",value:function(){var pe=this.overlay.getHighlightedElement();return pe&&pe.node}},{key:"getHighlightedElement",value:function(){return this.overlay.getHighlightedElement()}},{key:"getLastHighlightedElement",value:function(){return this.overlay.getLastHighlightedElement()}},{key:"defineSteps",value:function(pe){this.steps=[];for(var he=0;he<pe.length;he++){var Ae=this.prepareElementFromStep(pe[he],pe,he);Ae&&this.steps.push(Ae)}}},{key:"prepareElementFromStep",value:function(pe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Me=re({},this.options),De=pe,Je=typeof pe!="string"&&!k(pe);if(!pe||Je&&!pe.element)throw new Error("Element is required in step ".concat(Ae));Je&&(De=pe.element,Me=re({},this.options,pe));var Se=k(De)?De:this.document.querySelector(De);if(!Se)return console.warn("Element to highlight ".concat(De," not found")),null;var ze=null;if(Me.popover&&Me.popover.title){var at=[this.options.className,Me.popover.className].filter(function(It){return It}).join(" "),Qe=re({},Me,Me.popover,{className:at,totalCount:he.length,currentIndex:Ae,isFirst:Ae===0,isLast:he.length===0||Ae===he.length-1});ze=new F(Qe,this.window,this.document)}var lt=re({},Me),At=new ce(lt,this.window,this.document);return new b({node:Se,options:Me,popover:ze,stage:At,overlay:this.overlay,window:this.window,document:this.document})}},{key:"start",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.steps||this.steps.length===0)throw new Error("There are no steps defined to iterate");this.isActivated=!0,this.currentStep=pe,this.overlay.highlight(this.steps[pe])}},{key:"highlight",value:function(pe){this.isActivated=!0;var he=this.prepareElementFromStep(pe);he&&this.overlay.highlight(he)}}])&&me(oe.prototype,ge),ve&&me(oe,ve),ne}()}]).default})});var Uh=xr((xc,Cc)=>{typeof navigator=="object"&&function(r,t){typeof xc=="object"&&typeof Cc!="undefined"?Cc.exports=t():typeof define=="function"&&define.amd?define("Plyr",t):(r=r||self,r.Plyr=t())}(xc,function(){"use strict";(function(){if(typeof window!="undefined")try{var p=new window.CustomEvent("test",{cancelable:!0});if(p.preventDefault(),p.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch(c){var l=function(x,M){var H,U;return M=M||{},M.bubbles=!!M.bubbles,M.cancelable=!!M.cancelable,H=document.createEvent("CustomEvent"),H.initCustomEvent(x,M.bubbles,M.cancelable,M.detail),U=H.preventDefault,H.preventDefault=function(){U.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(G){this.defaultPrevented=!0}},H};l.prototype=window.Event.prototype,window.CustomEvent=l}})();var r=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function t(p,l){return l={exports:{}},p(l,l.exports),l.exports}var e=function(p){return p&&p.Math==Math&&p},n=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof r=="object"&&r)||Function("return this")(),i=function(p){try{return!!p()}catch(l){return!0}},a=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),o={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,u=s&&!o.call({1:2},1),h=u?function(l){var c=s(this,l);return!!c&&c.enumerable}:o,d={f:h},_=function(p,l){return{enumerable:!(p&1),configurable:!(p&2),writable:!(p&4),value:l}},g={}.toString,w=function(p){return g.call(p).slice(8,-1)},C="".split,k=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(p){return w(p)=="String"?C.call(p,""):Object(p)}:Object,E=function(p){if(p==null)throw TypeError("Can't call method on "+p);return p},O=function(p){return k(E(p))},N=function(p){return typeof p=="object"?p!==null:typeof p=="function"},m=function(p,l){if(!N(p))return p;var c,v;if(l&&typeof(c=p.toString)=="function"&&!N(v=c.call(p))||typeof(c=p.valueOf)=="function"&&!N(v=c.call(p))||!l&&typeof(c=p.toString)=="function"&&!N(v=c.call(p)))return v;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,b=function(p,l){return y.call(p,l)},S=n.document,A=N(S)&&N(S.createElement),I=function(p){return A?S.createElement(p):{}},T=!a&&!i(function(){return Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a!=7}),R=Object.getOwnPropertyDescriptor,B=a?R:function(l,c){if(l=O(l),c=m(c,!0),T)try{return R(l,c)}catch(v){}if(b(l,c))return _(!d.f.call(l,c),l[c])},F={f:B},L=function(p){if(!N(p))throw TypeError(String(p)+" is not an object");return p},j=Object.defineProperty,P=a?j:function(l,c,v){if(L(l),c=m(c,!0),L(v),T)try{return j(l,c,v)}catch(x){}if("get"in v||"set"in v)throw TypeError("Accessors not supported");return"value"in v&&(l[c]=v.value),l},z={f:P},Y=a?function(p,l,c){return z.f(p,l,_(1,c))}:function(p,l,c){return p[l]=c,p},ce=function(p,l){try{Y(n,p,l)}catch(c){n[p]=l}return l},re="__core-js_shared__",Z=n[re]||ce(re,{}),me=Z,ke=Function.toString;typeof me.inspectSource!="function"&&(me.inspectSource=function(p){return ke.call(p)});var ne=me.inspectSource,oe=n.WeakMap,ge=typeof oe=="function"&&/native code/.test(ne(oe)),ve=!1,pe=t(function(p){(p.exports=function(l,c){return me[l]||(me[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),he=0,Ae=Math.random(),Me=function(p){return"Symbol("+String(p===void 0?"":p)+")_"+(++he+Ae).toString(36)},De=pe("keys"),Je=function(p){return De[p]||(De[p]=Me(p))},Se={},ze=n.WeakMap,at,Qe,lt,At=function(p){return lt(p)?Qe(p):at(p,{})},It=function(p){return function(l){var c;if(!N(l)||(c=Qe(l)).type!==p)throw TypeError("Incompatible receiver, "+p+" required");return c}};if(ge){var bt=new ze,Et=bt.get,Rt=bt.has,Lt=bt.set;at=function(p,l){return Lt.call(bt,p,l),l},Qe=function(p){return Et.call(bt,p)||{}},lt=function(p){return Rt.call(bt,p)}}else{var Ce=Je("state");Se[Ce]=!0,at=function(p,l){return Y(p,Ce,l),l},Qe=function(p){return b(p,Ce)?p[Ce]:{}},lt=function(p){return b(p,Ce)}}var Ie={set:at,get:Qe,has:lt,enforce:At,getterFor:It},Ve=t(function(p){var l=Ie.get,c=Ie.enforce,v=String(String).split("String");(p.exports=function(x,M,H,U){var G=U?!!U.unsafe:!1,ee=U?!!U.enumerable:!1,ie=U?!!U.noTargetGet:!1;if(typeof H=="function"&&(typeof M=="string"&&!b(H,"name")&&Y(H,"name",M),c(H).source=v.join(typeof M=="string"?M:"")),x===n){ee?x[M]=H:ce(M,H);return}else G?!ie&&x[M]&&(ee=!0):delete x[M];ee?x[M]=H:Y(x,M,H)})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||ne(this)})}),ct=n,Pt=function(p){return typeof p=="function"?p:void 0},Mt=function(p,l){return arguments.length<2?Pt(ct[p])||Pt(n[p]):ct[p]&&ct[p][l]||n[p]&&n[p][l]},Zt=Math.ceil,nt=Math.floor,Nt=function(p){return isNaN(p=+p)?0:(p>0?nt:Zt)(p)},Ir=Math.min,Gt=function(p){return p>0?Ir(Nt(p),9007199254740991):0},xt=Math.max,Ct=Math.min,St=function(p,l){var c=Nt(p);return c<0?xt(c+l,0):Ct(c,l)},ht=function(p){return function(l,c,v){var x=O(l),M=Gt(x.length),H=St(v,M),U;if(p&&c!=c){for(;M>H;)if(U=x[H++],U!=U)return!0}else for(;M>H;H++)if((p||H in x)&&x[H]===c)return p||H||0;return!p&&-1}},Pr={includes:ht(!0),indexOf:ht(!1)},Wt=Pr.indexOf,ut=function(p,l){var c=O(p),v=0,x=[],M;for(M in c)!b(Se,M)&&b(c,M)&&x.push(M);for(;l.length>v;)b(c,M=l[v++])&&(~Wt(x,M)||x.push(M));return x},Tr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$t=Tr.concat("length","prototype"),Hr=Object.getOwnPropertyNames||function(l){return ut(l,$t)},rr={f:Hr},Gr=Object.getOwnPropertySymbols,Dt={f:Gr},lr=Mt("Reflect","ownKeys")||function(l){var c=rr.f(L(l)),v=Dt.f;return v?c.concat(v(l)):c},Rr=function(p,l){for(var c=lr(l),v=z.f,x=F.f,M=0;M<c.length;M++){var H=c[M];b(p,H)||v(p,H,x(l,H))}},fn=/#|\.prototype\./,ar=function(p,l){var c=hr[Ur(p)];return c==Nr?!0:c==Jr?!1:typeof l=="function"?i(l):!!l},Ur=ar.normalize=function(p){return String(p).replace(fn,".").toLowerCase()},hr=ar.data={},Jr=ar.NATIVE="N",Nr=ar.POLYFILL="P",mr=ar,cr=F.f,tt=function(p,l){var c=p.target,v=p.global,x=p.stat,M,H,U,G,ee,ie;if(v?H=n:x?H=n[c]||ce(c,{}):H=(n[c]||{}).prototype,H)for(U in l){if(ee=l[U],p.noTargetGet?(ie=cr(H,U),G=ie&&ie.value):G=H[U],M=mr(v?U:c+(x?".":"#")+U,p.forced),!M&&G!==void 0){if(typeof ee==typeof G)continue;Rr(ee,G)}(p.sham||G&&G.sham)&&Y(ee,"sham",!0),Ve(H,U,ee,p)}},Bt=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())}),Ge=Bt&&!Symbol.sham&&typeof Symbol.iterator=="symbol",We=Array.isArray||function(l){return w(l)=="Array"},ot=function(p){return Object(E(p))},X=Object.keys||function(l){return ut(l,Tr)},se=a?Object.defineProperties:function(l,c){L(l);for(var v=X(c),x=v.length,M=0,H;x>M;)z.f(l,H=v[M++],c[H]);return l},de=Mt("document","documentElement"),Te=">",xe="<",Fe="prototype",Ue="script",Ke=Je("IE_PROTO"),Ye=function(){},Xe=function(p){return xe+Ue+Te+p+xe+"/"+Ue+Te},kt=function(p){p.write(Xe("")),p.close();var l=p.parentWindow.Object;return p=null,l},pt=function(){var p=I("iframe"),l="java"+Ue+":",c;return p.style.display="none",de.appendChild(p),p.src=String(l),c=p.contentWindow.document,c.open(),c.write(Xe("document.F=Object")),c.close(),c.F},Ot,qt=function(){try{Ot=document.domain&&new ActiveXObject("htmlfile")}catch(l){}qt=Ot?kt(Ot):pt();for(var p=Tr.length;p--;)delete qt[Fe][Tr[p]];return qt()};Se[Ke]=!0;var mt=Object.create||function(l,c){var v;return l!==null?(Ye[Fe]=L(l),v=new Ye,Ye[Fe]=null,v[Ke]=l):v=qt(),c===void 0?v:se(v,c)},yt=rr.f,ur={}.toString,or=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],tr=function(p){try{return yt(p)}catch(l){return or.slice()}},nr=function(l){return or&&ur.call(l)=="[object Window]"?tr(l):yt(O(l))},K={f:nr},_e=pe("wks"),ae=n.Symbol,we=Ge?ae:ae&&ae.withoutSetter||Me,q=function(p){return b(_e,p)||(Bt&&b(ae,p)?_e[p]=ae[p]:_e[p]=we("Symbol."+p)),_e[p]},D=q,V={f:D},W=z.f,le=function(p){var l=ct.Symbol||(ct.Symbol={});b(l,p)||W(l,p,{value:V.f(p)})},Q=z.f,ue=q("toStringTag"),ye=function(p,l,c){p&&!b(p=c?p:p.prototype,ue)&&Q(p,ue,{configurable:!0,value:l})},Le=function(p){if(typeof p!="function")throw TypeError(String(p)+" is not a function");return p},Pe=function(p,l,c){if(Le(p),l===void 0)return p;switch(c){case 0:return function(){return p.call(l)};case 1:return function(v){return p.call(l,v)};case 2:return function(v,x){return p.call(l,v,x)};case 3:return function(v,x,M){return p.call(l,v,x,M)}}return function(){return p.apply(l,arguments)}},$e=q("species"),Re=function(p,l){var c;return We(p)&&(c=p.constructor,typeof c=="function"&&(c===Array||We(c.prototype))?c=void 0:N(c)&&(c=c[$e],c===null&&(c=void 0))),new(c===void 0?Array:c)(l===0?0:l)},je=[].push,st=function(p){var l=p==1,c=p==2,v=p==3,x=p==4,M=p==6,H=p==5||M;return function(U,G,ee,ie){for(var J=ot(U),te=k(J),be=Pe(G,ee,3),Oe=Gt(te.length),Ne=0,Be=ie||Re,He=l?Be(U,Oe):c?Be(U,0):void 0,rt,it;Oe>Ne;Ne++)if((H||Ne in te)&&(rt=te[Ne],it=be(rt,Ne,J),p)){if(l)He[Ne]=it;else if(it)switch(p){case 3:return!0;case 5:return rt;case 6:return Ne;case 2:je.call(He,rt)}else if(x)return!1}return M?-1:v||x?x:He}},ft={forEach:st(0),map:st(1),filter:st(2),some:st(3),every:st(4),find:st(5),findIndex:st(6)},jt=ft.forEach,_t=Je("hidden"),Kt="Symbol",Yt="prototype",Qt=q("toPrimitive"),Wr=Ie.set,fr=Ie.getterFor(Kt),qe=Object[Yt],wt=n.Symbol,er=Mt("JSON","stringify"),Lr=F.f,gr=z.f,rn=K.f,pn=d.f,_r=pe("symbols"),Er=pe("op-symbols"),vr=pe("string-to-symbol-registry"),Zr=pe("symbol-to-string-registry"),Kn=pe("wks"),An=n.QObject,$n=!An||!An[Yt]||!An[Yt].findChild,Jn=a&&i(function(){return mt(gr({},"a",{get:function(){return gr(this,"a",{value:7}).a}})).a!=7})?function(p,l,c){var v=Lr(qe,l);v&&delete qe[l],gr(p,l,c),v&&p!==qe&&gr(qe,l,v)}:gr,Zn=function(p,l){var c=_r[p]=mt(wt[Yt]);return Wr(c,{type:Kt,tag:p,description:l}),a||(c.description=l),c},Qn=Ge?function(p){return typeof p=="symbol"}:function(p){return Object(p)instanceof wt},On=function(l,c,v){l===qe&&On(Er,c,v),L(l);var x=m(c,!0);return L(v),b(_r,x)?(v.enumerable?(b(l,_t)&&l[_t][x]&&(l[_t][x]=!1),v=mt(v,{enumerable:_(0,!1)})):(b(l,_t)||gr(l,_t,_(1,{})),l[_t][x]=!0),Jn(l,x,v)):gr(l,x,v)},ga=function(l,c){L(l);var v=O(c),x=X(v).concat(Go(v));return jt(x,function(M){(!a||Vo.call(v,M))&&On(l,M,v[M])}),l},qo=function(l,c){return c===void 0?mt(l):ga(mt(l),c)},Vo=function(l){var c=m(l,!0),v=pn.call(this,c);return this===qe&&b(_r,c)&&!b(Er,c)?!1:v||!b(this,c)||!b(_r,c)||b(this,_t)&&this[_t][c]?v:!0},Sc=function(l,c){var v=O(l),x=m(c,!0);if(!(v===qe&&b(_r,x)&&!b(Er,x))){var M=Lr(v,x);return M&&b(_r,x)&&!(b(v,_t)&&v[_t][x])&&(M.enumerable=!0),M}},Tc=function(l){var c=rn(O(l)),v=[];return jt(c,function(x){!b(_r,x)&&!b(Se,x)&&v.push(x)}),v},Go=function(l){var c=l===qe,v=rn(c?Er:O(l)),x=[];return jt(v,function(M){b(_r,M)&&(!c||b(qe,M))&&x.push(_r[M])}),x};if(Bt||(wt=function(){if(this instanceof wt)throw TypeError("Symbol is not a constructor");var l=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),c=Me(l),v=function(x){this===qe&&v.call(Er,x),b(this,_t)&&b(this[_t],c)&&(this[_t][c]=!1),Jn(this,c,_(1,x))};return a&&$n&&Jn(qe,c,{configurable:!0,set:v}),Zn(c,l)},Ve(wt[Yt],"toString",function(){return fr(this).tag}),Ve(wt,"withoutSetter",function(p){return Zn(Me(p),p)}),d.f=Vo,z.f=On,F.f=Sc,rr.f=K.f=Tc,Dt.f=Go,V.f=function(p){return Zn(q(p),p)},a&&(gr(wt[Yt],"description",{configurable:!0,get:function(){return fr(this).description}}),Ve(qe,"propertyIsEnumerable",Vo,{unsafe:!0}))),tt({global:!0,wrap:!0,forced:!Bt,sham:!Bt},{Symbol:wt}),jt(X(Kn),function(p){le(p)}),tt({target:Kt,stat:!0,forced:!Bt},{for:function(p){var l=String(p);if(b(vr,l))return vr[l];var c=wt(l);return vr[l]=c,Zr[c]=l,c},keyFor:function(l){if(!Qn(l))throw TypeError(l+" is not a symbol");if(b(Zr,l))return Zr[l]},useSetter:function(){$n=!0},useSimple:function(){$n=!1}}),tt({target:"Object",stat:!0,forced:!Bt,sham:!a},{create:qo,defineProperty:On,defineProperties:ga,getOwnPropertyDescriptor:Sc}),tt({target:"Object",stat:!0,forced:!Bt},{getOwnPropertyNames:Tc,getOwnPropertySymbols:Go}),tt({target:"Object",stat:!0,forced:i(function(){Dt.f(1)})},{getOwnPropertySymbols:function(l){return Dt.f(ot(l))}}),er){var qh=!Bt||i(function(){var p=wt();return er([p])!="[null]"||er({a:p})!="{}"||er(Object(p))!="{}"});tt({target:"JSON",stat:!0,forced:qh},{stringify:function(l,c,v){for(var x=[l],M=1,H;arguments.length>M;)x.push(arguments[M++]);if(H=c,!(!N(c)&&l===void 0||Qn(l)))return We(c)||(c=function(U,G){if(typeof H=="function"&&(G=H.call(this,U,G)),!Qn(G))return G}),x[1]=c,er.apply(null,x)}})}wt[Yt][Qt]||Y(wt[Yt],Qt,wt[Yt].valueOf),ye(wt,Kt),Se[_t]=!0;var Vh=z.f,hn=n.Symbol;if(a&&typeof hn=="function"&&(!("description"in hn.prototype)||hn().description!==void 0)){var Ec={},Oi=function(){var l=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),c=this instanceof Oi?new hn(l):l===void 0?hn():hn(l);return l===""&&(Ec[c]=!0),c};Rr(Oi,hn);var Yo=Oi.prototype=hn.prototype;Yo.constructor=Oi;var Gh=Yo.toString,Yh=String(hn("test"))=="Symbol(test)",Xh=/^Symbol\((.*)\)[^)]+$/;Vh(Yo,"description",{configurable:!0,get:function(){var l=N(this)?this.valueOf():this,c=Gh.call(l);if(b(Ec,l))return"";var v=Yh?c.slice(7,-1):c.replace(Xh,"$1");return v===""?void 0:v}}),tt({global:!0,forced:!0},{Symbol:Oi})}le("iterator");var In=function(p,l){var c=[][p];return!!c&&i(function(){c.call(null,l||function(){throw 1},1)})},Kh=Object.defineProperty,Xo={},Ac=function(p){throw p},qr=function(p,l){if(b(Xo,p))return Xo[p];l||(l={});var c=[][p],v=b(l,"ACCESSORS")?l.ACCESSORS:!1,x=b(l,0)?l[0]:Ac,M=b(l,1)?l[1]:void 0;return Xo[p]=!!c&&!i(function(){if(v&&!a)return!0;var H={length:-1};v?Kh(H,1,{enumerable:!0,get:Ac}):H[1]=1,c.call(H,x,M)})},Jh=ft.forEach,Zh=In("forEach"),Qh=qr("forEach"),Ii=!Zh||!Qh?function(l){return Jh(this,l,arguments.length>1?arguments[1]:void 0)}:[].forEach;tt({target:"Array",proto:!0,forced:[].forEach!=Ii},{forEach:Ii});var em=Pr.indexOf,$c=[].indexOf,Oc=!!$c&&1/[1].indexOf(1,-0)<0,tm=In("indexOf"),rm=qr("indexOf",{ACCESSORS:!0,1:0});tt({target:"Array",proto:!0,forced:Oc||!tm||!rm},{indexOf:function(l){return Oc?$c.apply(this,arguments)||0:em(this,l,arguments.length>1?arguments[1]:void 0)}});var Ko=q("unscopables"),Jo=Array.prototype;Jo[Ko]==null&&z.f(Jo,Ko,{configurable:!0,value:mt(null)});var ei=function(p){Jo[Ko][p]=!0},ti={},nm=!i(function(){function p(){}return p.prototype.constructor=null,Object.getPrototypeOf(new p)!==p.prototype}),Ic=Je("IE_PROTO"),im=Object.prototype,_a=nm?Object.getPrototypeOf:function(p){return p=ot(p),b(p,Ic)?p[Ic]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?im:null},Pc=q("iterator"),Rc=!1,am=function(){return this},ri,Zo,Qo;[].keys&&(Qo=[].keys(),"next"in Qo?(Zo=_a(_a(Qo)),Zo!==Object.prototype&&(ri=Zo)):Rc=!0),ri==null&&(ri={}),b(ri,Pc)||Y(ri,Pc,am);var es={IteratorPrototype:ri,BUGGY_SAFARI_ITERATORS:Rc},om=es.IteratorPrototype,sm=function(){return this},Lc=function(p,l,c){var v=l+" Iterator";return p.prototype=mt(om,{next:_(1,c)}),ye(p,v,!1),ti[v]=sm,p},lm=function(p){if(!N(p)&&p!==null)throw TypeError("Can't set "+String(p)+" as a prototype");return p},va=Object.setPrototypeOf||("__proto__"in{}?function(){var p=!1,l={},c;try{c=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,c.call(l,[]),p=l instanceof Array}catch(v){}return function(x,M){return L(x),lm(M),p?c.call(x,M):x.__proto__=M,x}}():void 0),ts=es.IteratorPrototype,ba=es.BUGGY_SAFARI_ITERATORS,Pi=q("iterator"),Mc="keys",ya="values",Nc="entries",cm=function(){return this},Dc=function(p,l,c,v,x,M,H){Lc(c,l,v);var U=function(He){if(He===x&&te)return te;if(!ba&&He in ie)return ie[He];switch(He){case Mc:return function(){return new c(this,He)};case ya:return function(){return new c(this,He)};case Nc:return function(){return new c(this,He)}}return function(){return new c(this)}},G=l+" Iterator",ee=!1,ie=p.prototype,J=ie[Pi]||ie["@@iterator"]||x&&ie[x],te=!ba&&J||U(x),be=l=="Array"&&ie.entries||J,Oe,Ne,Be;if(be&&(Oe=_a(be.call(new p)),ts!==Object.prototype&&Oe.next&&(_a(Oe)!==ts&&(va?va(Oe,ts):typeof Oe[Pi]!="function"&&Y(Oe,Pi,cm)),ye(Oe,G,!0))),x==ya&&J&&J.name!==ya&&(ee=!0,te=function(){return J.call(this)}),ie[Pi]!==te&&Y(ie,Pi,te),ti[l]=te,x)if(Ne={values:U(ya),keys:M?te:U(Mc),entries:U(Nc)},H)for(Be in Ne)(ba||ee||!(Be in ie))&&Ve(ie,Be,Ne[Be]);else tt({target:l,proto:!0,forced:ba||ee},Ne);return Ne},Bc="Array Iterator",um=Ie.set,dm=Ie.getterFor(Bc),Ri=Dc(Array,"Array",function(p,l){um(this,{type:Bc,target:O(p),index:0,kind:l})},function(){var p=dm(this),l=p.target,c=p.kind,v=p.index++;return!l||v>=l.length?(p.target=void 0,{value:void 0,done:!0}):c=="keys"?{value:v,done:!1}:c=="values"?{value:l[v],done:!1}:{value:[v,l[v]],done:!1}},"values");ti.Arguments=ti.Array,ei("keys"),ei("values"),ei("entries");var fm=[].join,pm=k!=Object,hm=In("join",",");tt({target:"Array",proto:!0,forced:pm||!hm},{join:function(l){return fm.call(O(this),l===void 0?",":l)}});var Pn=function(p,l,c){var v=m(l);v in p?z.f(p,v,_(0,c)):p[v]=c},wa=Mt("navigator","userAgent")||"",jc=n.process,Fc=jc&&jc.versions,zc=Fc&&Fc.v8,mn,ka;zc?(mn=zc.split("."),ka=mn[0]+mn[1]):wa&&(mn=wa.match(/Edge\/(\d+)/),(!mn||mn[1]>=74)&&(mn=wa.match(/Chrome\/(\d+)/),mn&&(ka=mn[1])));var xa=ka&&+ka,mm=q("species"),Li=function(p){return xa>=51||!i(function(){var l=[],c=l.constructor={};return c[mm]=function(){return{foo:1}},l[p](Boolean).foo!==1})},gm=Li("slice"),_m=qr("slice",{ACCESSORS:!0,0:0,1:2}),vm=q("species"),bm=[].slice,ym=Math.max;tt({target:"Array",proto:!0,forced:!gm||!_m},{slice:function(l,c){var v=O(this),x=Gt(v.length),M=St(l,x),H=St(c===void 0?x:c,x),U,G,ee;if(We(v)&&(U=v.constructor,typeof U=="function"&&(U===Array||We(U.prototype))?U=void 0:N(U)&&(U=U[vm],U===null&&(U=void 0)),U===Array||U===void 0))return bm.call(v,M,H);for(G=new(U===void 0?Array:U)(ym(H-M,0)),ee=0;M<H;M++,ee++)M in v&&Pn(G,ee,v[M]);return G.length=ee,G}});var wm=q("toStringTag"),Hc={};Hc[wm]="z";var rs=String(Hc)==="[object z]",km=q("toStringTag"),xm=w(function(){return arguments}())=="Arguments",Cm=function(p,l){try{return p[l]}catch(c){}},ns=rs?w:function(p){var l,c,v;return p===void 0?"Undefined":p===null?"Null":typeof(c=Cm(l=Object(p),km))=="string"?c:xm?w(l):(v=w(l))=="Object"&&typeof l.callee=="function"?"Arguments":v},Sm=rs?{}.toString:function(){return"[object "+ns(this)+"]"};rs||Ve(Object.prototype,"toString",Sm,{unsafe:!0});var is=function(){var p=L(this),l="";return p.global&&(l+="g"),p.ignoreCase&&(l+="i"),p.multiline&&(l+="m"),p.dotAll&&(l+="s"),p.unicode&&(l+="u"),p.sticky&&(l+="y"),l};function Uc(p,l){return RegExp(p,l)}var Tm=i(function(){var p=Uc("a","y");return p.lastIndex=2,p.exec("abcd")!=null}),Em=i(function(){var p=Uc("^r","gy");return p.lastIndex=2,p.exec("str")!=null}),as={UNSUPPORTED_Y:Tm,BROKEN_CARET:Em},Ca=RegExp.prototype.exec,Am=String.prototype.replace,Wc=Ca,os=function(){var p=/a/,l=/b*/g;return Ca.call(p,"a"),Ca.call(l,"a"),p.lastIndex!==0||l.lastIndex!==0}(),qc=as.UNSUPPORTED_Y||as.BROKEN_CARET,ss=/()??/.exec("")[1]!==void 0,$m=os||ss||qc;$m&&(Wc=function(l){var c=this,v,x,M,H,U=qc&&c.sticky,G=is.call(c),ee=c.source,ie=0,J=l;return U&&(G=G.replace("y",""),G.indexOf("g")===-1&&(G+="g"),J=String(l).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&l[c.lastIndex-1]!==`
`)&&(ee="(?: "+ee+")",J=" "+J,ie++),x=new RegExp("^(?:"+ee+")",G)),ss&&(x=new RegExp("^"+ee+"$(?!\\s)",G)),os&&(v=c.lastIndex),M=Ca.call(U?x:c,J),U?M?(M.input=M.input.slice(ie),M[0]=M[0].slice(ie),M.index=c.lastIndex,c.lastIndex+=M[0].length):c.lastIndex=0:os&&M&&(c.lastIndex=c.global?M.index+M[0].length:v),ss&&M&&M.length>1&&Am.call(M[0],x,function(){for(H=1;H<arguments.length-2;H++)arguments[H]===void 0&&(M[H]=void 0)}),M});var Mi=Wc;tt({target:"RegExp",proto:!0,forced:/./.exec!==Mi},{exec:Mi});var ls="toString",Vc=RegExp.prototype,Gc=Vc[ls],Om=i(function(){return Gc.call({source:"a",flags:"b"})!="/a/b"}),Im=Gc.name!=ls;(Om||Im)&&Ve(RegExp.prototype,ls,function(){var l=L(this),c=String(l.source),v=l.flags,x=String(v===void 0&&l instanceof RegExp&&!("flags"in Vc)?is.call(l):v);return"/"+c+"/"+x},{unsafe:!0});var Yc=function(p){return function(l,c){var v=String(E(l)),x=Nt(c),M=v.length,H,U;return x<0||x>=M?p?"":void 0:(H=v.charCodeAt(x),H<55296||H>56319||x+1===M||(U=v.charCodeAt(x+1))<56320||U>57343?p?v.charAt(x):H:p?v.slice(x,x+2):(H-55296<<10)+(U-56320)+65536)}},cs={codeAt:Yc(!1),charAt:Yc(!0)},Pm=cs.charAt,Xc="String Iterator",Rm=Ie.set,Lm=Ie.getterFor(Xc);Dc(String,"String",function(p){Rm(this,{type:Xc,string:String(p),index:0})},function(){var l=Lm(this),c=l.string,v=l.index,x;return v>=c.length?{value:void 0,done:!0}:(x=Pm(c,v),l.index+=x.length,{value:x,done:!1})});var Mm=q("species"),Nm=!i(function(){var p=/./;return p.exec=function(){var l=[];return l.groups={a:"7"},l},"".replace(p,"$<a>")!=="7"}),Kc=function(){return"a".replace(/./,"$0")==="$0"}(),Jc=q("replace"),Zc=function(){return/./[Jc]?/./[Jc]("a","$0")==="":!1}(),Dm=!i(function(){var p=/(?:)/,l=p.exec;p.exec=function(){return l.apply(this,arguments)};var c="ab".split(p);return c.length!==2||c[0]!=="a"||c[1]!=="b"}),Sa=function(p,l,c,v){var x=q(p),M=!i(function(){var J={};return J[x]=function(){return 7},""[p](J)!=7}),H=M&&!i(function(){var J=!1,te=/a/;return p==="split"&&(te={},te.constructor={},te.constructor[Mm]=function(){return te},te.flags="",te[x]=/./[x]),te.exec=function(){return J=!0,null},te[x](""),!J});if(!M||!H||p==="replace"&&!(Nm&&Kc&&!Zc)||p==="split"&&!Dm){var U=/./[x],G=c(x,""[p],function(J,te,be,Oe,Ne){return te.exec===Mi?M&&!Ne?{done:!0,value:U.call(te,be,Oe)}:{done:!0,value:J.call(be,te,Oe)}:{done:!1}},{REPLACE_KEEPS_$0:Kc,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Zc}),ee=G[0],ie=G[1];Ve(String.prototype,p,ee),Ve(RegExp.prototype,x,l==2?function(J,te){return ie.call(J,this,te)}:function(J){return ie.call(J,this)})}v&&Y(RegExp.prototype[x],"sham",!0)},Bm=cs.charAt,us=function(p,l,c){return l+(c?Bm(p,l).length:1)},ni=function(p,l){var c=p.exec;if(typeof c=="function"){var v=c.call(p,l);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(w(p)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return Mi.call(p,l)},jm=Math.max,Fm=Math.min,zm=Math.floor,Hm=/\$([$&'`]|\d\d?|<[^>]*>)/g,Um=/\$([$&'`]|\d\d?)/g,Wm=function(p){return p===void 0?p:String(p)};Sa("replace",2,function(p,l,c,v){var x=v.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,M=v.REPLACE_KEEPS_$0,H=x?"$":"$0";return[function(ee,ie){var J=E(this),te=ee==null?void 0:ee[p];return te!==void 0?te.call(ee,J,ie):l.call(String(J),ee,ie)},function(G,ee){if(!x&&M||typeof ee=="string"&&ee.indexOf(H)===-1){var ie=c(l,G,this,ee);if(ie.done)return ie.value}var J=L(G),te=String(this),be=typeof ee=="function";be||(ee=String(ee));var Oe=J.global;if(Oe){var Ne=J.unicode;J.lastIndex=0}for(var Be=[];;){var He=ni(J,te);if(He===null||(Be.push(He),!Oe))break;var rt=String(He[0]);rt===""&&(J.lastIndex=us(te,Gt(J.lastIndex),Ne))}for(var it="",et=0,dt=0;dt<Be.length;dt++){He=Be[dt];for(var Ht=String(He[0]),Tt=jm(Fm(Nt(He.index),te.length),0),Br=[],Kr=1;Kr<He.length;Kr++)Br.push(Wm(He[Kr]));var kr=He.groups;if(be){var Tn=[Ht].concat(Br,Tt,te);kr!==void 0&&Tn.push(kr);var ra=String(ee.apply(void 0,Tn))}else ra=U(Ht,te,Tt,Br,kr,ee);Tt>=et&&(it+=te.slice(et,Tt)+ra,et=Tt+Ht.length)}return it+te.slice(et)}];function U(G,ee,ie,J,te,be){var Oe=ie+G.length,Ne=J.length,Be=Um;return te!==void 0&&(te=ot(te),Be=Hm),l.call(be,Be,function(He,rt){var it;switch(rt.charAt(0)){case"$":return"$";case"&":return G;case"`":return ee.slice(0,ie);case"'":return ee.slice(Oe);case"<":it=te[rt.slice(1,-1)];break;default:var et=+rt;if(et===0)return He;if(et>Ne){var dt=zm(et/10);return dt===0?He:dt<=Ne?J[dt-1]===void 0?rt.charAt(1):J[dt-1]+rt.charAt(1):He}it=J[et-1]}return it===void 0?"":it})}});var Qc=Object.is||function(l,c){return l===c?l!==0||1/l===1/c:l!=l&&c!=c};Sa("search",1,function(p,l,c){return[function(x){var M=E(this),H=x==null?void 0:x[p];return H!==void 0?H.call(x,M):new RegExp(x)[p](String(M))},function(v){var x=c(l,v,this);if(x.done)return x.value;var M=L(v),H=String(this),U=M.lastIndex;Qc(U,0)||(M.lastIndex=0);var G=ni(M,H);return Qc(M.lastIndex,U)||(M.lastIndex=U),G===null?-1:G.index}]});var qm=q("match"),ds=function(p){var l;return N(p)&&((l=p[qm])!==void 0?!!l:w(p)=="RegExp")},Vm=q("species"),eu=function(p,l){var c=L(p).constructor,v;return c===void 0||(v=L(c)[Vm])==null?l:Le(v)},Gm=[].push,Ym=Math.min,fs=4294967295,ii=!i(function(){return!RegExp(fs,"y")});Sa("split",2,function(p,l,c){var v;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?v=function(x,M){var H=String(E(this)),U=M===void 0?fs:M>>>0;if(U===0)return[];if(x===void 0)return[H];if(!ds(x))return l.call(H,x,U);for(var G=[],ee=(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.unicode?"u":"")+(x.sticky?"y":""),ie=0,J=new RegExp(x.source,ee+"g"),te,be,Oe;(te=Mi.call(J,H))&&(be=J.lastIndex,!(be>ie&&(G.push(H.slice(ie,te.index)),te.length>1&&te.index<H.length&&Gm.apply(G,te.slice(1)),Oe=te[0].length,ie=be,G.length>=U)));)J.lastIndex===te.index&&J.lastIndex++;return ie===H.length?(Oe||!J.test(""))&&G.push(""):G.push(H.slice(ie)),G.length>U?G.slice(0,U):G}:"0".split(void 0,0).length?v=function(x,M){return x===void 0&&M===0?[]:l.call(this,x,M)}:v=l,[function(M,H){var U=E(this),G=M==null?void 0:M[p];return G!==void 0?G.call(M,U,H):v.call(String(U),M,H)},function(x,M){var H=c(v,x,this,M,v!==l);if(H.done)return H.value;var U=L(x),G=String(this),ee=eu(U,RegExp),ie=U.unicode,J=(U.ignoreCase?"i":"")+(U.multiline?"m":"")+(U.unicode?"u":"")+(ii?"y":"g"),te=new ee(ii?U:"^(?:"+U.source+")",J),be=M===void 0?fs:M>>>0;if(be===0)return[];if(G.length===0)return ni(te,G)===null?[G]:[];for(var Oe=0,Ne=0,Be=[];Ne<G.length;){te.lastIndex=ii?Ne:0;var He=ni(te,ii?G:G.slice(Ne)),rt;if(He===null||(rt=Ym(Gt(te.lastIndex+(ii?0:Ne)),G.length))===Oe)Ne=us(G,Ne,ie);else{if(Be.push(G.slice(Oe,Ne)),Be.length===be)return Be;for(var it=1;it<=He.length-1;it++)if(Be.push(He[it]),Be.length===be)return Be;Ne=Oe=rt}}return Be.push(G.slice(Oe)),Be}]},!ii);var ps={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Xm in ps){var tu=n[Xm],Ta=tu&&tu.prototype;if(Ta&&Ta.forEach!==Ii)try{Y(Ta,"forEach",Ii)}catch(p){Ta.forEach=Ii}}var hs=q("iterator"),ru=q("toStringTag"),ms=Ri.values;for(var gs in ps){var nu=n[gs],gn=nu&&nu.prototype;if(gn){if(gn[hs]!==ms)try{Y(gn,hs,ms)}catch(p){gn[hs]=ms}if(gn[ru]||Y(gn,ru,gs),ps[gs]){for(var ai in Ri)if(gn[ai]!==Ri[ai])try{Y(gn,ai,Ri[ai])}catch(p){gn[ai]=Ri[ai]}}}}var Km=q("iterator"),_s=!i(function(){var p=new URL("b?a=1&b=2&c=3","http://a"),l=p.searchParams,c="";return p.pathname="c%20d",l.forEach(function(v,x){l.delete("b"),c+=x+v}),ve&&!p.toJSON||!l.sort||p.href!=="http://a/c%20d?a=1&c=3"||l.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!l[Km]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||c!=="a1c3"||new URL("http://x",void 0).host!=="x"}),Ni=function(p,l,c){if(!(p instanceof l))throw TypeError("Incorrect "+(c?c+" ":"")+"invocation");return p},oi=Object.assign,iu=Object.defineProperty,Di=!oi||i(function(){if(a&&oi({b:1},oi(iu({},"a",{enumerable:!0,get:function(){iu(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var p={},l={},c=Symbol(),v="abcdefghijklmnopqrst";return p[c]=7,v.split("").forEach(function(x){l[x]=x}),oi({},p)[c]!=7||X(oi({},l)).join("")!=v})?function(l,c){for(var v=ot(l),x=arguments.length,M=1,H=Dt.f,U=d.f;x>M;)for(var G=k(arguments[M++]),ee=H?X(G).concat(H(G)):X(G),ie=ee.length,J=0,te;ie>J;)te=ee[J++],(!a||U.call(G,te))&&(v[te]=G[te]);return v}:oi,au=function(p,l,c,v){try{return v?l(L(c)[0],c[1]):l(c)}catch(M){var x=p.return;throw x!==void 0&&L(x.call(p)),M}},Jm=q("iterator"),Zm=Array.prototype,ou=function(p){return p!==void 0&&(ti.Array===p||Zm[Jm]===p)},Qm=q("iterator"),Ea=function(p){if(p!=null)return p[Qm]||p["@@iterator"]||ti[ns(p)]},Rn=function(l){var c=ot(l),v=typeof this=="function"?this:Array,x=arguments.length,M=x>1?arguments[1]:void 0,H=M!==void 0,U=Ea(c),G=0,ee,ie,J,te,be,Oe;if(H&&(M=Pe(M,x>2?arguments[2]:void 0,2)),U!=null&&!(v==Array&&ou(U)))for(te=U.call(c),be=te.next,ie=new v;!(J=be.call(te)).done;G++)Oe=H?au(te,M,[J.value,G],!0):J.value,Pn(ie,G,Oe);else for(ee=Gt(c.length),ie=new v(ee);ee>G;G++)Oe=H?M(c[G],G):c[G],Pn(ie,G,Oe);return ie.length=G,ie},vs=2147483647,Bi=36,su=1,bs=26,eg=38,tg=700,rg=72,ng=128,ig="-",ag=/[^\0-\u007E]/,og=/[.\u3002\uFF0E\uFF61]/g,lu="Overflow: input needs wider integers to process",ys=Bi-su,si=Math.floor,ws=String.fromCharCode,sg=function(p){for(var l=[],c=0,v=p.length;c<v;){var x=p.charCodeAt(c++);if(x>=55296&&x<=56319&&c<v){var M=p.charCodeAt(c++);(M&64512)==56320?l.push(((x&1023)<<10)+(M&1023)+65536):(l.push(x),c--)}else l.push(x)}return l},cu=function(p){return p+22+75*(p<26)},lg=function(p,l,c){var v=0;for(p=c?si(p/tg):p>>1,p+=si(p/l);p>ys*bs>>1;v+=Bi)p=si(p/ys);return si(v+(ys+1)*p/(p+eg))},cg=function(p){var l=[];p=sg(p);var c=p.length,v=ng,x=0,M=rg,H,U;for(H=0;H<p.length;H++)U=p[H],U<128&&l.push(ws(U));var G=l.length,ee=G;for(G&&l.push(ig);ee<c;){var ie=vs;for(H=0;H<p.length;H++)U=p[H],U>=v&&U<ie&&(ie=U);var J=ee+1;if(ie-v>si((vs-x)/J))throw RangeError(lu);for(x+=(ie-v)*J,v=ie,H=0;H<p.length;H++){if(U=p[H],U<v&&++x>vs)throw RangeError(lu);if(U==v){for(var te=x,be=Bi;;be+=Bi){var Oe=be<=M?su:be>=M+bs?bs:be-M;if(te<Oe)break;var Ne=te-Oe,Be=Bi-Oe;l.push(ws(cu(Oe+Ne%Be))),te=si(Ne/Be)}l.push(ws(cu(te))),M=lg(x,J,ee==G),x=0,++ee}}++x,++v}return l.join("")},ug=function(p){var l=[],c=p.toLowerCase().replace(og,".").split("."),v,x;for(v=0;v<c.length;v++)x=c[v],l.push(ag.test(x)?"xn--"+cg(x):x);return l.join(".")},ji=function(p,l,c){for(var v in l)Ve(p,v,l[v],c);return p},uu=function(p){var l=Ea(p);if(typeof l!="function")throw TypeError(String(p)+" is not iterable");return L(l.call(p))},du=Mt("fetch"),ks=Mt("Headers"),dg=q("iterator"),li="URLSearchParams",fu=li+"Iterator",pu=Ie.set,Qr=Ie.getterFor(li),fg=Ie.getterFor(fu),pg=/\+/g,hu=Array(4),hg=function(p){return hu[p-1]||(hu[p-1]=RegExp("((?:%[\\da-f]{2}){"+p+"})","gi"))},mg=function(p){try{return decodeURIComponent(p)}catch(l){return p}},mu=function(p){var l=p.replace(pg," "),c=4;try{return decodeURIComponent(l)}catch(v){for(;c;)l=l.replace(hg(c--),mg);return l}},gg=/[!'()~]|%20/g,_g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},vg=function(p){return _g[p]},gu=function(p){return encodeURIComponent(p).replace(gg,vg)},_u=function(p,l){if(l)for(var c=l.split("&"),v=0,x,M;v<c.length;)x=c[v++],x.length&&(M=x.split("="),p.push({key:mu(M.shift()),value:mu(M.join("="))}))},bg=function(p){this.entries.length=0,_u(this.entries,p)},ci=function(p,l){if(p<l)throw TypeError("Not enough arguments")},xs=Lc(function(l,c){pu(this,{type:fu,iterator:uu(Qr(l).entries),kind:c})},"Iterator",function(){var l=fg(this),c=l.kind,v=l.iterator.next(),x=v.value;return v.done||(v.value=c==="keys"?x.key:c==="values"?x.value:[x.key,x.value]),v}),Fi=function(){Ni(this,Fi,li);var l=arguments.length>0?arguments[0]:void 0,c=this,v=[],x,M,H,U,G,ee,ie,J,te;if(pu(c,{type:li,entries:v,updateURL:function(){},updateSearchParams:bg}),l!==void 0)if(N(l))if(x=Ea(l),typeof x=="function")for(M=x.call(l),H=M.next;!(U=H.call(M)).done;){if(G=uu(L(U.value)),ee=G.next,(ie=ee.call(G)).done||(J=ee.call(G)).done||!ee.call(G).done)throw TypeError("Expected sequence with length 2");v.push({key:ie.value+"",value:J.value+""})}else for(te in l)b(l,te)&&v.push({key:te,value:l[te]+""});else _u(v,typeof l=="string"?l.charAt(0)==="?"?l.slice(1):l:l+"")},Aa=Fi.prototype;ji(Aa,{append:function(l,c){ci(arguments.length,2);var v=Qr(this);v.entries.push({key:l+"",value:c+""}),v.updateURL()},delete:function(p){ci(arguments.length,1);for(var l=Qr(this),c=l.entries,v=p+"",x=0;x<c.length;)c[x].key===v?c.splice(x,1):x++;l.updateURL()},get:function(l){ci(arguments.length,1);for(var c=Qr(this).entries,v=l+"",x=0;x<c.length;x++)if(c[x].key===v)return c[x].value;return null},getAll:function(l){ci(arguments.length,1);for(var c=Qr(this).entries,v=l+"",x=[],M=0;M<c.length;M++)c[M].key===v&&x.push(c[M].value);return x},has:function(l){ci(arguments.length,1);for(var c=Qr(this).entries,v=l+"",x=0;x<c.length;)if(c[x++].key===v)return!0;return!1},set:function(l,c){ci(arguments.length,1);for(var v=Qr(this),x=v.entries,M=!1,H=l+"",U=c+"",G=0,ee;G<x.length;G++)ee=x[G],ee.key===H&&(M?x.splice(G--,1):(M=!0,ee.value=U));M||x.push({key:H,value:U}),v.updateURL()},sort:function(){var l=Qr(this),c=l.entries,v=c.slice(),x,M,H;for(c.length=0,H=0;H<v.length;H++){for(x=v[H],M=0;M<H;M++)if(c[M].key>x.key){c.splice(M,0,x);break}M===H&&c.push(x)}l.updateURL()},forEach:function(l){for(var c=Qr(this).entries,v=Pe(l,arguments.length>1?arguments[1]:void 0,3),x=0,M;x<c.length;)M=c[x++],v(M.value,M.key,this)},keys:function(){return new xs(this,"keys")},values:function(){return new xs(this,"values")},entries:function(){return new xs(this,"entries")}},{enumerable:!0}),Ve(Aa,dg,Aa.entries),Ve(Aa,"toString",function(){for(var l=Qr(this).entries,c=[],v=0,x;v<l.length;)x=l[v++],c.push(gu(x.key)+"="+gu(x.value));return c.join("&")},{enumerable:!0}),ye(Fi,li),tt({global:!0,forced:!_s},{URLSearchParams:Fi}),!_s&&typeof du=="function"&&typeof ks=="function"&&tt({global:!0,enumerable:!0,forced:!0},{fetch:function(l){var c=[l],v,x,M;return arguments.length>1&&(v=arguments[1],N(v)&&(x=v.body,ns(x)===li&&(M=v.headers?new ks(v.headers):new ks,M.has("content-type")||M.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),v=mt(v,{body:_(0,String(x)),headers:_(0,M)}))),c.push(v)),du.apply(this,c)}});var vu={URLSearchParams:Fi,getState:Qr},yg=cs.codeAt,zi=n.URL,wg=vu.URLSearchParams,Cs=vu.getState,kg=Ie.set,ir=Ie.getterFor("URL"),xg=Math.floor,bu=Math.pow,Cg="Invalid authority",Ss="Invalid scheme",Ln="Invalid host",yu="Invalid port",wu=/[A-Za-z]/,Sg=/[\d+-.A-Za-z]/,Ts=/\d/,Tg=/^(0x|0X)/,Eg=/^[0-7]+$/,Ag=/^\d+$/,ku=/^[\dA-Fa-f]+$/,$g=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Og=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Ig=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Pg=/[\u0009\u000A\u000D]/g,Yr,Es=function(p,l){var c,v,x;if(l.charAt(0)=="["){if(l.charAt(l.length-1)!="]"||(c=Lg(l.slice(1,-1)),!c))return Ln;p.host=c}else if(br(p)){if(l=ug(l),$g.test(l)||(c=Rg(l),c===null))return Ln;p.host=c}else{if(Og.test(l))return Ln;for(c="",v=Rn(l),x=0;x<v.length;x++)c+=kn(v[x],$a);p.host=c}},Rg=function(p){var l=p.split("."),c,v,x,M,H,U,G;if(l.length&&l[l.length-1]==""&&l.pop(),c=l.length,c>4)return p;for(v=[],x=0;x<c;x++){if(M=l[x],M=="")return p;if(H=10,M.length>1&&M.charAt(0)=="0"&&(H=Tg.test(M)?16:8,M=M.slice(H==8?1:2)),M==="")U=0;else{if(!(H==10?Ag:H==8?Eg:ku).test(M))return p;U=parseInt(M,H)}v.push(U)}for(x=0;x<c;x++)if(U=v[x],x==c-1){if(U>=bu(256,5-c))return null}else if(U>255)return null;for(G=v.pop(),x=0;x<v.length;x++)G+=v[x]*bu(256,3-x);return G},Lg=function(p){var l=[0,0,0,0,0,0,0,0],c=0,v=null,x=0,M,H,U,G,ee,ie,J,te=function(){return p.charAt(x)};if(te()==":"){if(p.charAt(1)!=":")return;x+=2,c++,v=c}for(;te();){if(c==8)return;if(te()==":"){if(v!==null)return;x++,c++,v=c;continue}for(M=H=0;H<4&&ku.test(te());)M=M*16+parseInt(te(),16),x++,H++;if(te()=="."){if(H==0||(x-=H,c>6))return;for(U=0;te();){if(G=null,U>0)if(te()=="."&&U<4)x++;else return;if(!Ts.test(te()))return;for(;Ts.test(te());){if(ee=parseInt(te(),10),G===null)G=ee;else{if(G==0)return;G=G*10+ee}if(G>255)return;x++}l[c]=l[c]*256+G,U++,(U==2||U==4)&&c++}if(U!=4)return;break}else if(te()==":"){if(x++,!te())return}else if(te())return;l[c++]=M}if(v!==null)for(ie=c-v,c=7;c!=0&&ie>0;)J=l[c],l[c--]=l[v+ie-1],l[v+--ie]=J;else if(c!=8)return;return l},Mg=function(p){for(var l=null,c=1,v=null,x=0,M=0;M<8;M++)p[M]!==0?(x>c&&(l=v,c=x),v=null,x=0):(v===null&&(v=M),++x);return x>c&&(l=v,c=x),l},Hi=function(p){var l,c,v,x;if(typeof p=="number"){for(l=[],c=0;c<4;c++)l.unshift(p%256),p=xg(p/256);return l.join(".")}else if(typeof p=="object"){for(l="",v=Mg(p),c=0;c<8;c++)x&&p[c]===0||(x&&(x=!1),v===c?(l+=c?":":"::",x=!0):(l+=p[c].toString(16),c<7&&(l+=":")));return"["+l+"]"}return p},$a={},xu=Di({},$a,{" ":1,'"':1,"<":1,">":1,"`":1}),Cu=Di({},xu,{"#":1,"?":1,"{":1,"}":1}),As=Di({},Cu,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),kn=function(p,l){var c=yg(p,0);return c>32&&c<127&&!b(l,p)?p:encodeURIComponent(p)},Oa={ftp:21,file:null,http:80,https:443,ws:80,wss:443},br=function(p){return b(Oa,p.scheme)},$s=function(p){return p.username!=""||p.password!=""},Os=function(p){return!p.host||p.cannotBeABaseURL||p.scheme=="file"},Ui=function(p,l){var c;return p.length==2&&wu.test(p.charAt(0))&&((c=p.charAt(1))==":"||!l&&c=="|")},Su=function(p){var l;return p.length>1&&Ui(p.slice(0,2))&&(p.length==2||(l=p.charAt(2))==="/"||l==="\\"||l==="?"||l==="#")},Tu=function(p){var l=p.path,c=l.length;c&&(p.scheme!="file"||c!=1||!Ui(l[0],!0))&&l.pop()},Ng=function(p){return p==="."||p.toLowerCase()==="%2e"},Dg=function(p){return p=p.toLowerCase(),p===".."||p==="%2e."||p===".%2e"||p==="%2e%2e"},Is={},Eu={},Ps={},Au={},$u={},Rs={},Ou={},Iu={},Ia={},Pa={},Ls={},Ms={},Ns={},Ds={},Pu={},Bs={},ui={},nn={},Ru={},Mn={},_n={},an=function(p,l,c,v){var x=c||Is,M=0,H="",U=!1,G=!1,ee=!1,ie,J,te,be;for(c||(p.scheme="",p.username="",p.password="",p.host=null,p.port=null,p.path=[],p.query=null,p.fragment=null,p.cannotBeABaseURL=!1,l=l.replace(Ig,"")),l=l.replace(Pg,""),ie=Rn(l);M<=ie.length;){switch(J=ie[M],x){case Is:if(J&&wu.test(J))H+=J.toLowerCase(),x=Eu;else{if(c)return Ss;x=Ps;continue}break;case Eu:if(J&&(Sg.test(J)||J=="+"||J=="-"||J=="."))H+=J.toLowerCase();else if(J==":"){if(c&&(br(p)!=b(Oa,H)||H=="file"&&($s(p)||p.port!==null)||p.scheme=="file"&&!p.host))return;if(p.scheme=H,c){br(p)&&Oa[p.scheme]==p.port&&(p.port=null);return}H="",p.scheme=="file"?x=Ds:br(p)&&v&&v.scheme==p.scheme?x=Au:br(p)?x=Iu:ie[M+1]=="/"?(x=$u,M++):(p.cannotBeABaseURL=!0,p.path.push(""),x=Ru)}else{if(c)return Ss;H="",x=Ps,M=0;continue}break;case Ps:if(!v||v.cannotBeABaseURL&&J!="#")return Ss;if(v.cannotBeABaseURL&&J=="#"){p.scheme=v.scheme,p.path=v.path.slice(),p.query=v.query,p.fragment="",p.cannotBeABaseURL=!0,x=_n;break}x=v.scheme=="file"?Ds:Rs;continue;case Au:if(J=="/"&&ie[M+1]=="/")x=Ia,M++;else{x=Rs;continue}break;case $u:if(J=="/"){x=Pa;break}else{x=nn;continue}case Rs:if(p.scheme=v.scheme,J==Yr)p.username=v.username,p.password=v.password,p.host=v.host,p.port=v.port,p.path=v.path.slice(),p.query=v.query;else if(J=="/"||J=="\\"&&br(p))x=Ou;else if(J=="?")p.username=v.username,p.password=v.password,p.host=v.host,p.port=v.port,p.path=v.path.slice(),p.query="",x=Mn;else if(J=="#")p.username=v.username,p.password=v.password,p.host=v.host,p.port=v.port,p.path=v.path.slice(),p.query=v.query,p.fragment="",x=_n;else{p.username=v.username,p.password=v.password,p.host=v.host,p.port=v.port,p.path=v.path.slice(),p.path.pop(),x=nn;continue}break;case Ou:if(br(p)&&(J=="/"||J=="\\"))x=Ia;else if(J=="/")x=Pa;else{p.username=v.username,p.password=v.password,p.host=v.host,p.port=v.port,x=nn;continue}break;case Iu:if(x=Ia,J!="/"||H.charAt(M+1)!="/")continue;M++;break;case Ia:if(J!="/"&&J!="\\"){x=Pa;continue}break;case Pa:if(J=="@"){U&&(H="%40"+H),U=!0,te=Rn(H);for(var Oe=0;Oe<te.length;Oe++){var Ne=te[Oe];if(Ne==":"&&!ee){ee=!0;continue}var Be=kn(Ne,As);ee?p.password+=Be:p.username+=Be}H=""}else if(J==Yr||J=="/"||J=="?"||J=="#"||J=="\\"&&br(p)){if(U&&H=="")return Cg;M-=Rn(H).length+1,H="",x=Ls}else H+=J;break;case Ls:case Ms:if(c&&p.scheme=="file"){x=Bs;continue}else if(J==":"&&!G){if(H=="")return Ln;if(be=Es(p,H),be)return be;if(H="",x=Ns,c==Ms)return}else if(J==Yr||J=="/"||J=="?"||J=="#"||J=="\\"&&br(p)){if(br(p)&&H=="")return Ln;if(c&&H==""&&($s(p)||p.port!==null))return;if(be=Es(p,H),be)return be;if(H="",x=ui,c)return;continue}else J=="["?G=!0:J=="]"&&(G=!1),H+=J;break;case Ns:if(Ts.test(J))H+=J;else if(J==Yr||J=="/"||J=="?"||J=="#"||J=="\\"&&br(p)||c){if(H!=""){var He=parseInt(H,10);if(He>65535)return yu;p.port=br(p)&&He===Oa[p.scheme]?null:He,H=""}if(c)return;x=ui;continue}else return yu;break;case Ds:if(p.scheme="file",J=="/"||J=="\\")x=Pu;else if(v&&v.scheme=="file")if(J==Yr)p.host=v.host,p.path=v.path.slice(),p.query=v.query;else if(J=="?")p.host=v.host,p.path=v.path.slice(),p.query="",x=Mn;else if(J=="#")p.host=v.host,p.path=v.path.slice(),p.query=v.query,p.fragment="",x=_n;else{Su(ie.slice(M).join(""))||(p.host=v.host,p.path=v.path.slice(),Tu(p)),x=nn;continue}else{x=nn;continue}break;case Pu:if(J=="/"||J=="\\"){x=Bs;break}v&&v.scheme=="file"&&!Su(ie.slice(M).join(""))&&(Ui(v.path[0],!0)?p.path.push(v.path[0]):p.host=v.host),x=nn;continue;case Bs:if(J==Yr||J=="/"||J=="\\"||J=="?"||J=="#"){if(!c&&Ui(H))x=nn;else if(H==""){if(p.host="",c)return;x=ui}else{if(be=Es(p,H),be)return be;if(p.host=="localhost"&&(p.host=""),c)return;H="",x=ui}continue}else H+=J;break;case ui:if(br(p)){if(x=nn,J!="/"&&J!="\\")continue}else if(!c&&J=="?")p.query="",x=Mn;else if(!c&&J=="#")p.fragment="",x=_n;else if(J!=Yr&&(x=nn,J!="/"))continue;break;case nn:if(J==Yr||J=="/"||J=="\\"&&br(p)||!c&&(J=="?"||J=="#")){if(Dg(H)?(Tu(p),J!="/"&&!(J=="\\"&&br(p))&&p.path.push("")):Ng(H)?J!="/"&&!(J=="\\"&&br(p))&&p.path.push(""):(p.scheme=="file"&&!p.path.length&&Ui(H)&&(p.host&&(p.host=""),H=H.charAt(0)+":"),p.path.push(H)),H="",p.scheme=="file"&&(J==Yr||J=="?"||J=="#"))for(;p.path.length>1&&p.path[0]==="";)p.path.shift();J=="?"?(p.query="",x=Mn):J=="#"&&(p.fragment="",x=_n)}else H+=kn(J,Cu);break;case Ru:J=="?"?(p.query="",x=Mn):J=="#"?(p.fragment="",x=_n):J!=Yr&&(p.path[0]+=kn(J,$a));break;case Mn:!c&&J=="#"?(p.fragment="",x=_n):J!=Yr&&(J=="'"&&br(p)?p.query+="%27":J=="#"?p.query+="%23":p.query+=kn(J,$a));break;case _n:J!=Yr&&(p.fragment+=kn(J,xu));break}M++}},Nn=function(l){var c=Ni(this,Nn,"URL"),v=arguments.length>1?arguments[1]:void 0,x=String(l),M=kg(c,{type:"URL"}),H,U;if(v!==void 0){if(v instanceof Nn)H=ir(v);else if(U=an(H={},String(v)),U)throw TypeError(U)}if(U=an(M,x,null,H),U)throw TypeError(U);var G=M.searchParams=new wg,ee=Cs(G);ee.updateSearchParams(M.query),ee.updateURL=function(){M.query=String(G)||null},a||(c.href=Ra.call(c),c.origin=Lu.call(c),c.protocol=Mu.call(c),c.username=Nu.call(c),c.password=Du.call(c),c.host=Bu.call(c),c.hostname=ju.call(c),c.port=Fu.call(c),c.pathname=zu.call(c),c.search=Hu.call(c),c.searchParams=Uu.call(c),c.hash=Wu.call(c))},js=Nn.prototype,Ra=function(){var p=ir(this),l=p.scheme,c=p.username,v=p.password,x=p.host,M=p.port,H=p.path,U=p.query,G=p.fragment,ee=l+":";return x!==null?(ee+="//",$s(p)&&(ee+=c+(v?":"+v:"")+"@"),ee+=Hi(x),M!==null&&(ee+=":"+M)):l=="file"&&(ee+="//"),ee+=p.cannotBeABaseURL?H[0]:H.length?"/"+H.join("/"):"",U!==null&&(ee+="?"+U),G!==null&&(ee+="#"+G),ee},Lu=function(){var p=ir(this),l=p.scheme,c=p.port;if(l=="blob")try{return new URL(l.path[0]).origin}catch(v){return"null"}return l=="file"||!br(p)?"null":l+"://"+Hi(p.host)+(c!==null?":"+c:"")},Mu=function(){return ir(this).scheme+":"},Nu=function(){return ir(this).username},Du=function(){return ir(this).password},Bu=function(){var p=ir(this),l=p.host,c=p.port;return l===null?"":c===null?Hi(l):Hi(l)+":"+c},ju=function(){var p=ir(this).host;return p===null?"":Hi(p)},Fu=function(){var p=ir(this).port;return p===null?"":String(p)},zu=function(){var p=ir(this),l=p.path;return p.cannotBeABaseURL?l[0]:l.length?"/"+l.join("/"):""},Hu=function(){var p=ir(this).query;return p?"?"+p:""},Uu=function(){return ir(this).searchParams},Wu=function(){var p=ir(this).fragment;return p?"#"+p:""},Xr=function(p,l){return{get:p,set:l,configurable:!0,enumerable:!0}};if(a&&se(js,{href:Xr(Ra,function(p){var l=ir(this),c=String(p),v=an(l,c);if(v)throw TypeError(v);Cs(l.searchParams).updateSearchParams(l.query)}),origin:Xr(Lu),protocol:Xr(Mu,function(p){var l=ir(this);an(l,String(p)+":",Is)}),username:Xr(Nu,function(p){var l=ir(this),c=Rn(String(p));if(!Os(l)){l.username="";for(var v=0;v<c.length;v++)l.username+=kn(c[v],As)}}),password:Xr(Du,function(p){var l=ir(this),c=Rn(String(p));if(!Os(l)){l.password="";for(var v=0;v<c.length;v++)l.password+=kn(c[v],As)}}),host:Xr(Bu,function(p){var l=ir(this);l.cannotBeABaseURL||an(l,String(p),Ls)}),hostname:Xr(ju,function(p){var l=ir(this);l.cannotBeABaseURL||an(l,String(p),Ms)}),port:Xr(Fu,function(p){var l=ir(this);Os(l)||(p=String(p),p==""?l.port=null:an(l,p,Ns))}),pathname:Xr(zu,function(p){var l=ir(this);l.cannotBeABaseURL||(l.path=[],an(l,p+"",ui))}),search:Xr(Hu,function(p){var l=ir(this);p=String(p),p==""?l.query=null:(p.charAt(0)=="?"&&(p=p.slice(1)),l.query="",an(l,p,Mn)),Cs(l.searchParams).updateSearchParams(l.query)}),searchParams:Xr(Uu),hash:Xr(Wu,function(p){var l=ir(this);if(p=String(p),p==""){l.fragment=null;return}p.charAt(0)=="#"&&(p=p.slice(1)),l.fragment="",an(l,p,_n)})}),Ve(js,"toJSON",function(){return Ra.call(this)},{enumerable:!0}),Ve(js,"toString",function(){return Ra.call(this)},{enumerable:!0}),zi){var qu=zi.createObjectURL,Vu=zi.revokeObjectURL;qu&&Ve(Nn,"createObjectURL",function(l){return qu.apply(zi,arguments)}),Vu&&Ve(Nn,"revokeObjectURL",function(l){return Vu.apply(zi,arguments)})}ye(Nn,"URL"),tt({global:!0,forced:!_s,sham:!a},{URL:Nn});function La(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?La=function(l){return typeof l}:La=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},La(p)}function Dn(p,l){if(!(p instanceof l))throw new TypeError("Cannot call a class as a function")}function Gu(p,l){for(var c=0;c<l.length;c++){var v=l[c];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function Bn(p,l,c){return l&&Gu(p.prototype,l),c&&Gu(p,c),p}function Fs(p,l,c){return l in p?Object.defineProperty(p,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):p[l]=c,p}function Yu(p,l){var c=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);l&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),c.push.apply(c,v)}return c}function di(p){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Yu(Object(c),!0).forEach(function(v){Fs(p,v,c[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(c)):Yu(Object(c)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(c,v))})}return p}function Bg(p,l){if(p==null)return{};var c={},v=Object.keys(p),x,M;for(M=0;M<v.length;M++)x=v[M],!(l.indexOf(x)>=0)&&(c[x]=p[x]);return c}function jg(p,l){if(p==null)return{};var c=Bg(p,l),v,x;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(p);for(x=0;x<M.length;x++)v=M[x],!(l.indexOf(v)>=0)&&(!Object.prototype.propertyIsEnumerable.call(p,v)||(c[v]=p[v]))}return c}function yr(p,l){return zg(p)||Ug(p,l)||Xu(p,l)||qg()}function zs(p){return Fg(p)||Hg(p)||Xu(p)||Wg()}function Fg(p){if(Array.isArray(p))return Hs(p)}function zg(p){if(Array.isArray(p))return p}function Hg(p){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(p))return Array.from(p)}function Ug(p,l){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(p)))){var c=[],v=!0,x=!1,M=void 0;try{for(var H=p[Symbol.iterator](),U;!(v=(U=H.next()).done)&&(c.push(U.value),!(l&&c.length===l));v=!0);}catch(G){x=!0,M=G}finally{try{!v&&H.return!=null&&H.return()}finally{if(x)throw M}}return c}}function Xu(p,l){if(!!p){if(typeof p=="string")return Hs(p,l);var c=Object.prototype.toString.call(p).slice(8,-1);if(c==="Object"&&p.constructor&&(c=p.constructor.name),c==="Map"||c==="Set")return Array.from(p);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Hs(p,l)}}function Hs(p,l){(l==null||l>p.length)&&(l=p.length);for(var c=0,v=new Array(l);c<l;c++)v[c]=p[c];return v}function Wg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(function(p){var l=function(){try{return!!Symbol.iterator}catch(ie){return!1}},c=l(),v=function(ie){var J={next:function(){var be=ie.shift();return{done:be===void 0,value:be}}};return c&&(J[Symbol.iterator]=function(){return J}),J},x=function(ie){return encodeURIComponent(ie).replace(/%20/g,"+")},M=function(ie){return decodeURIComponent(String(ie).replace(/\+/g," "))},H=function(){var ie=function te(be){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var Oe=La(be);if(Oe!=="undefined")if(Oe==="string")be!==""&&this._fromString(be);else if(be instanceof te){var Ne=this;be.forEach(function(it,et){Ne.append(et,it)})}else if(be!==null&&Oe==="object")if(Object.prototype.toString.call(be)==="[object Array]")for(var Be=0;Be<be.length;Be++){var He=be[Be];if(Object.prototype.toString.call(He)==="[object Array]"||He.length!==2)this.append(He[0],He[1]);else throw new TypeError("Expected [string, any] as entry at index "+Be+" of URLSearchParams's input")}else for(var rt in be)be.hasOwnProperty(rt)&&this.append(rt,be[rt]);else throw new TypeError("Unsupported input's type for URLSearchParams")},J=ie.prototype;J.append=function(te,be){te in this._entries?this._entries[te].push(String(be)):this._entries[te]=[String(be)]},J.delete=function(te){delete this._entries[te]},J.get=function(te){return te in this._entries?this._entries[te][0]:null},J.getAll=function(te){return te in this._entries?this._entries[te].slice(0):[]},J.has=function(te){return te in this._entries},J.set=function(te,be){this._entries[te]=[String(be)]},J.forEach=function(te,be){var Oe;for(var Ne in this._entries)if(this._entries.hasOwnProperty(Ne)){Oe=this._entries[Ne];for(var Be=0;Be<Oe.length;Be++)te.call(be,Oe[Be],Ne,this)}},J.keys=function(){var te=[];return this.forEach(function(be,Oe){te.push(Oe)}),v(te)},J.values=function(){var te=[];return this.forEach(function(be){te.push(be)}),v(te)},J.entries=function(){var te=[];return this.forEach(function(be,Oe){te.push([Oe,be])}),v(te)},c&&(J[Symbol.iterator]=J.entries),J.toString=function(){var te=[];return this.forEach(function(be,Oe){te.push(x(Oe)+"="+x(be))}),te.join("&")},p.URLSearchParams=ie},U=function(){try{var ie=p.URLSearchParams;return new ie("?a=1").toString()==="a=1"&&typeof ie.prototype.set=="function"}catch(J){return!1}};U()||H();var G=p.URLSearchParams.prototype;typeof G.sort!="function"&&(G.sort=function(){var ee=this,ie=[];this.forEach(function(te,be){ie.push([be,te]),ee._entries||ee.delete(be)}),ie.sort(function(te,be){return te[0]<be[0]?-1:te[0]>be[0]?1:0}),ee._entries&&(ee._entries={});for(var J=0;J<ie.length;J++)this.append(ie[J][0],ie[J][1])}),typeof G._fromString!="function"&&Object.defineProperty(G,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(ie){if(this._entries)this._entries={};else{var J=[];this.forEach(function(Ne,Be){J.push(Be)});for(var te=0;te<J.length;te++)this.delete(J[te])}ie=ie.replace(/^\?/,"");for(var be=ie.split("&"),Oe,te=0;te<be.length;te++)Oe=be[te].split("="),this.append(M(Oe[0]),Oe.length>1?M(Oe[1]):"")}})})(typeof r!="undefined"?r:typeof window!="undefined"?window:typeof self!="undefined"?self:r),function(p){var l=function(){try{var M=new p.URL("b","http://a");return M.pathname="c d",M.href==="http://a/c%20d"&&M.searchParams}catch(H){return!1}},c=function(){var M=p.URL,H=function(ie,J){typeof ie!="string"&&(ie=String(ie));var te=document,be;if(J&&(p.location===void 0||J!==p.location.href)){te=document.implementation.createHTMLDocument(""),be=te.createElement("base"),be.href=J,te.head.appendChild(be);try{if(be.href.indexOf(J)!==0)throw new Error(be.href)}catch(et){throw new Error("URL unable to set base "+J+" due to "+et)}}var Oe=te.createElement("a");if(Oe.href=ie,be&&(te.body.appendChild(Oe),Oe.href=Oe.href),Oe.protocol===":"||!/:/.test(Oe.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:Oe});var Ne=new p.URLSearchParams(this.search),Be=!0,He=!0,rt=this;["append","delete","set"].forEach(function(et){var dt=Ne[et];Ne[et]=function(){dt.apply(Ne,arguments),Be&&(He=!1,rt.search=Ne.toString(),He=!0)}}),Object.defineProperty(this,"searchParams",{value:Ne,enumerable:!0});var it=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==it&&(it=this.search,He&&(Be=!1,this.searchParams._fromString(this.search),Be=!0))}})},U=H.prototype,G=function(ie){Object.defineProperty(U,ie,{get:function(){return this._anchorElement[ie]},set:function(te){this._anchorElement[ie]=te},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(ee){G(ee)}),Object.defineProperty(U,"search",{get:function(){return this._anchorElement.search},set:function(ie){this._anchorElement.search=ie,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(U,{toString:{get:function(){var ie=this;return function(){return ie.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(ie){this._anchorElement.href=ie,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(ie){this._anchorElement.pathname=ie},enumerable:!0},origin:{get:function(){var ie={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],J=this._anchorElement.port!=ie&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(J?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(ie){},enumerable:!0},username:{get:function(){return""},set:function(ie){},enumerable:!0}}),H.createObjectURL=function(ee){return M.createObjectURL.apply(M,arguments)},H.revokeObjectURL=function(ee){return M.revokeObjectURL.apply(M,arguments)},p.URL=H};if(l()||c(),p.location!==void 0&&!("origin"in p.location)){var v=function(){return p.location.protocol+"//"+p.location.hostname+(p.location.port?":"+p.location.port:"")};try{Object.defineProperty(p.location,"origin",{get:v,enumerable:!0})}catch(x){setInterval(function(){p.location.origin=v()},100)}}}(typeof r!="undefined"?r:typeof window!="undefined"?window:typeof self!="undefined"?self:r);var Ku=q("isConcatSpreadable"),Ju=9007199254740991,Zu="Maximum allowed index exceeded",Vg=xa>=51||!i(function(){var p=[];return p[Ku]=!1,p.concat()[0]!==p}),Gg=Li("concat"),Yg=function(p){if(!N(p))return!1;var l=p[Ku];return l!==void 0?!!l:We(p)},Xg=!Vg||!Gg;tt({target:"Array",proto:!0,forced:Xg},{concat:function(l){var c=ot(this),v=Re(c,0),x=0,M,H,U,G,ee;for(M=-1,U=arguments.length;M<U;M++)if(ee=M===-1?c:arguments[M],Yg(ee)){if(G=Gt(ee.length),x+G>Ju)throw TypeError(Zu);for(H=0;H<G;H++,x++)H in ee&&Pn(v,x,ee[H])}else{if(x>=Ju)throw TypeError(Zu);Pn(v,x++,ee)}return v.length=x,v}});var Kg=ft.filter,Jg=Li("filter"),Zg=qr("filter");tt({target:"Array",proto:!0,forced:!Jg||!Zg},{filter:function(l){return Kg(this,l,arguments.length>1?arguments[1]:void 0)}});var Qg=ft.find,Ma="find",Qu=!0,e_=qr(Ma);Ma in[]&&Array(1)[Ma](function(){Qu=!1}),tt({target:"Array",proto:!0,forced:Qu||!e_},{find:function(l){return Qg(this,l,arguments.length>1?arguments[1]:void 0)}}),ei(Ma);var ed=q("iterator"),td=!1;try{var t_=0,rd={next:function(){return{done:!!t_++}},return:function(){td=!0}};rd[ed]=function(){return this},Array.from(rd,function(){throw 2})}catch(p){}var Us=function(p,l){if(!l&&!td)return!1;var c=!1;try{var v={};v[ed]=function(){return{next:function(){return{done:c=!0}}}},p(v)}catch(x){}return c},r_=!Us(function(p){Array.from(p)});tt({target:"Array",stat:!0,forced:r_},{from:Rn});var n_=Pr.includes,i_=qr("indexOf",{ACCESSORS:!0,1:0});tt({target:"Array",proto:!0,forced:!i_},{includes:function(l){return n_(this,l,arguments.length>1?arguments[1]:void 0)}}),ei("includes");var a_=ft.map,o_=Li("map"),s_=qr("map");tt({target:"Array",proto:!0,forced:!o_||!s_},{map:function(l){return a_(this,l,arguments.length>1?arguments[1]:void 0)}});var Ws=function(p,l,c){var v,x;return va&&typeof(v=l.constructor)=="function"&&v!==c&&N(x=v.prototype)&&x!==c.prototype&&va(p,x),p},qs=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,Na="["+qs+"]",l_=RegExp("^"+Na+Na+"*"),c_=RegExp(Na+Na+"*$"),Vs=function(p){return function(l){var c=String(E(l));return p&1&&(c=c.replace(l_,"")),p&2&&(c=c.replace(c_,"")),c}},nd={start:Vs(1),end:Vs(2),trim:Vs(3)},u_=rr.f,d_=F.f,f_=z.f,p_=nd.trim,Wi="Number",xn=n[Wi],Da=xn.prototype,h_=w(mt(Da))==Wi,id=function(p){var l=m(p,!1),c,v,x,M,H,U,G,ee;if(typeof l=="string"&&l.length>2){if(l=p_(l),c=l.charCodeAt(0),c===43||c===45){if(v=l.charCodeAt(2),v===88||v===120)return NaN}else if(c===48){switch(l.charCodeAt(1)){case 66:case 98:x=2,M=49;break;case 79:case 111:x=8,M=55;break;default:return+l}for(H=l.slice(2),U=H.length,G=0;G<U;G++)if(ee=H.charCodeAt(G),ee<48||ee>M)return NaN;return parseInt(H,x)}}return+l};if(mr(Wi,!xn(" 0o1")||!xn("0b1")||xn("+0x1"))){for(var jn=function(l){var c=arguments.length<1?0:l,v=this;return v instanceof jn&&(h_?i(function(){Da.valueOf.call(v)}):w(v)!=Wi)?Ws(new xn(id(c)),v,jn):id(c)},ad=a?u_(xn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Gs=0,Ba;ad.length>Gs;Gs++)b(xn,Ba=ad[Gs])&&!b(jn,Ba)&&f_(jn,Ba,d_(xn,Ba));jn.prototype=Da,Da.constructor=jn,Ve(n,Wi,jn)}var m_=i(function(){X(1)});tt({target:"Object",stat:!0,forced:m_},{keys:function(l){return X(ot(l))}});var od=function(p){if(ds(p))throw TypeError("The method doesn't accept regular expressions");return p},g_=q("match"),sd=function(p){var l=/./;try{"/./"[p](l)}catch(c){try{return l[g_]=!1,"/./"[p](l)}catch(v){}}return!1};tt({target:"String",proto:!0,forced:!sd("includes")},{includes:function(l){return!!~String(E(this)).indexOf(od(l),arguments.length>1?arguments[1]:void 0)}});var v_=!i(function(){return Object.isExtensible(Object.preventExtensions({}))}),Fn=t(function(p){var l=z.f,c=Me("meta"),v=0,x=Object.isExtensible||function(){return!0},M=function(ie){l(ie,c,{value:{objectID:"O"+ ++v,weakData:{}}})},H=function(ie,J){if(!N(ie))return typeof ie=="symbol"?ie:(typeof ie=="string"?"S":"P")+ie;if(!b(ie,c)){if(!x(ie))return"F";if(!J)return"E";M(ie)}return ie[c].objectID},U=function(ie,J){if(!b(ie,c)){if(!x(ie))return!0;if(!J)return!1;M(ie)}return ie[c].weakData},G=function(ie){return v_&&ee.REQUIRED&&x(ie)&&!b(ie,c)&&M(ie),ie},ee=p.exports={REQUIRED:!1,fastKey:H,getWeakData:U,onFreeze:G};Se[c]=!0}),ox=Fn.REQUIRED,sx=Fn.fastKey,lx=Fn.getWeakData,cx=Fn.onFreeze,ja=t(function(p){var l=function(v,x){this.stopped=v,this.result=x},c=p.exports=function(v,x,M,H,U){var G=Pe(x,M,H?2:1),ee,ie,J,te,be,Oe,Ne;if(U)ee=v;else{if(ie=Ea(v),typeof ie!="function")throw TypeError("Target is not iterable");if(ou(ie)){for(J=0,te=Gt(v.length);te>J;J++)if(be=H?G(L(Ne=v[J])[0],Ne[1]):G(v[J]),be&&be instanceof l)return be;return new l(!1)}ee=ie.call(v)}for(Oe=ee.next;!(Ne=Oe.call(ee)).done;)if(be=au(ee,G,Ne.value,H),typeof be=="object"&&be&&be instanceof l)return be;return new l(!1)};c.stop=function(v){return new l(!0,v)}}),b_=function(p,l,c){var v=p.indexOf("Map")!==-1,x=p.indexOf("Weak")!==-1,M=v?"set":"add",H=n[p],U=H&&H.prototype,G=H,ee={},ie=function(Be){var He=U[Be];Ve(U,Be,Be=="add"?function(it){return He.call(this,it===0?0:it),this}:Be=="delete"?function(rt){return x&&!N(rt)?!1:He.call(this,rt===0?0:rt)}:Be=="get"?function(it){return x&&!N(it)?void 0:He.call(this,it===0?0:it)}:Be=="has"?function(it){return x&&!N(it)?!1:He.call(this,it===0?0:it)}:function(it,et){return He.call(this,it===0?0:it,et),this})};if(mr(p,typeof H!="function"||!(x||U.forEach&&!i(function(){new H().entries().next()}))))G=c.getConstructor(l,p,v,M),Fn.REQUIRED=!0;else if(mr(p,!0)){var J=new G,te=J[M](x?{}:-0,1)!=J,be=i(function(){J.has(1)}),Oe=Us(function(Be){new H(Be)}),Ne=!x&&i(function(){for(var Be=new H,He=5;He--;)Be[M](He,He);return!Be.has(-0)});Oe||(G=l(function(Be,He){Ni(Be,G,p);var rt=Ws(new H,Be,G);return He!=null&&ja(He,rt[M],rt,v),rt}),G.prototype=U,U.constructor=G),(be||Ne)&&(ie("delete"),ie("has"),v&&ie("get")),(Ne||te)&&ie(M),x&&U.clear&&delete U.clear}return ee[p]=G,tt({global:!0,forced:G!=H},ee),ye(G,p),x||c.setStrong(G,p,v),G},Fa=Fn.getWeakData,y_=Ie.set,w_=Ie.getterFor,k_=ft.find,x_=ft.findIndex,C_=0,za=function(p){return p.frozen||(p.frozen=new ld)},ld=function(){this.entries=[]},Ys=function(p,l){return k_(p.entries,function(c){return c[0]===l})};ld.prototype={get:function(p){var l=Ys(this,p);if(l)return l[1]},has:function(p){return!!Ys(this,p)},set:function(p,l){var c=Ys(this,p);c?c[1]=l:this.entries.push([p,l])},delete:function(p){var l=x_(this.entries,function(c){return c[0]===p});return~l&&this.entries.splice(l,1),!!~l}};var cd={getConstructor:function(p,l,c,v){var x=p(function(U,G){Ni(U,x,l),y_(U,{type:l,id:C_++,frozen:void 0}),G!=null&&ja(G,U[v],U,c)}),M=w_(l),H=function(U,G,ee){var ie=M(U),J=Fa(L(G),!0);return J===!0?za(ie).set(G,ee):J[ie.id]=ee,U};return ji(x.prototype,{delete:function(U){var G=M(this);if(!N(U))return!1;var ee=Fa(U);return ee===!0?za(G).delete(U):ee&&b(ee,G.id)&&delete ee[G.id]},has:function(G){var ee=M(this);if(!N(G))return!1;var ie=Fa(G);return ie===!0?za(ee).has(G):ie&&b(ie,ee.id)}}),ji(x.prototype,c?{get:function(G){var ee=M(this);if(N(G)){var ie=Fa(G);return ie===!0?za(ee).get(G):ie?ie[ee.id]:void 0}},set:function(G,ee){return H(this,G,ee)}}:{add:function(G){return H(this,G,!0)}}),x}},ux=t(function(p){var l=Ie.enforce,c=!n.ActiveXObject&&"ActiveXObject"in n,v=Object.isExtensible,x,M=function(te){return function(){return te(this,arguments.length?arguments[0]:void 0)}},H=p.exports=b_("WeakMap",M,cd);if(ge&&c){x=cd.getConstructor(M,"WeakMap",!0),Fn.REQUIRED=!0;var U=H.prototype,G=U.delete,ee=U.has,ie=U.get,J=U.set;ji(U,{delete:function(te){if(N(te)&&!v(te)){var be=l(this);return be.frozen||(be.frozen=new x),G.call(this,te)||be.frozen.delete(te)}return G.call(this,te)},has:function(be){if(N(be)&&!v(be)){var Oe=l(this);return Oe.frozen||(Oe.frozen=new x),ee.call(this,be)||Oe.frozen.has(be)}return ee.call(this,be)},get:function(be){if(N(be)&&!v(be)){var Oe=l(this);return Oe.frozen||(Oe.frozen=new x),ee.call(this,be)?ie.call(this,be):Oe.frozen.get(be)}return ie.call(this,be)},set:function(be,Oe){if(N(be)&&!v(be)){var Ne=l(this);Ne.frozen||(Ne.frozen=new x),ee.call(this,be)?J.call(this,be,Oe):Ne.frozen.set(be,Oe)}else J.call(this,be,Oe);return this}})}}),S_=ft.every,T_=In("every"),E_=qr("every");tt({target:"Array",proto:!0,forced:!T_||!E_},{every:function(l){return S_(this,l,arguments.length>1?arguments[1]:void 0)}}),tt({target:"Object",stat:!0,forced:Object.assign!==Di},{assign:Di});var ud="\u200B\x85\u180E",A_=function(p){return i(function(){return!!qs[p]()||ud[p]()!=ud||qs[p].name!==p})},$_=nd.trim;tt({target:"String",proto:!0,forced:A_("trim")},{trim:function(){return $_(this)}});var O_=ft.some,I_=In("some"),P_=qr("some");tt({target:"Array",proto:!0,forced:!I_||!P_},{some:function(l){return O_(this,l,arguments.length>1?arguments[1]:void 0)}});var R_=function(p){if(typeof p!="number"&&w(p)!="Number")throw TypeError("Incorrect invocation");return+p},Xs="".repeat||function(l){var c=String(E(this)),v="",x=Nt(l);if(x<0||x==1/0)throw RangeError("Wrong number of repetitions");for(;x>0;(x>>>=1)&&(c+=c))x&1&&(v+=c);return v},dd=1 .toFixed,fd=Math.floor,fi=function(p,l,c){return l===0?c:l%2===1?fi(p,l-1,c*p):fi(p*p,l/2,c)},L_=function(p){for(var l=0,c=p;c>=4096;)l+=12,c/=4096;for(;c>=2;)l+=1,c/=2;return l},M_=dd&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!i(function(){dd.call({})});tt({target:"Number",proto:!0,forced:M_},{toFixed:function(l){var c=R_(this),v=Nt(l),x=[0,0,0,0,0,0],M="",H="0",U,G,ee,ie,J=function(Oe,Ne){for(var Be=-1,He=Ne;++Be<6;)He+=Oe*x[Be],x[Be]=He%1e7,He=fd(He/1e7)},te=function(Oe){for(var Ne=6,Be=0;--Ne>=0;)Be+=x[Ne],x[Ne]=fd(Be/Oe),Be=Be%Oe*1e7},be=function(){for(var Oe=6,Ne="";--Oe>=0;)if(Ne!==""||Oe===0||x[Oe]!==0){var Be=String(x[Oe]);Ne=Ne===""?Be:Ne+Xs.call("0",7-Be.length)+Be}return Ne};if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(M="-",c=-c),c>1e-21)if(U=L_(c*fi(2,69,1))-69,G=U<0?c*fi(2,-U,1):c/fi(2,U,1),G*=4503599627370496,U=52-U,U>0){for(J(0,G),ee=v;ee>=7;)J(1e7,0),ee-=7;for(J(fi(10,ee,1),0),ee=U-1;ee>=23;)te(1<<23),ee-=23;te(1<<ee),J(1,1),te(2),H=be()}else J(0,G),J(1<<-U,0),H=be()+Xs.call("0",v);return v>0?(ie=H.length,H=M+(ie<=v?"0."+Xs.call("0",v-ie)+H:H.slice(0,ie-v)+"."+H.slice(ie-v))):H=M+H,H}});var N_=d.f,pd=function(p){return function(l){for(var c=O(l),v=X(c),x=v.length,M=0,H=[],U;x>M;)U=v[M++],(!a||N_.call(c,U))&&H.push(p?[U,c[U]]:c[U]);return H}},hd={entries:pd(!0),values:pd(!1)},D_=hd.entries;tt({target:"Object",stat:!0},{entries:function(l){return D_(l)}});var B_=hd.values;tt({target:"Object",stat:!0},{values:function(l){return B_(l)}}),tt({target:"Number",stat:!0},{isNaN:function(l){return l!=l}});var md=F.f,j_=i(function(){md(1)}),F_=!a||j_;tt({target:"Object",stat:!0,forced:F_,sham:!a},{getOwnPropertyDescriptor:function(l,c){return md(O(l),c)}}),tt({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(l){for(var c=O(l),v=F.f,x=lr(c),M={},H=0,U,G;x.length>H;)G=v(c,U=x[H++]),G!==void 0&&Pn(M,U,G);return M}}),Sa("match",1,function(p,l,c){return[function(x){var M=E(this),H=x==null?void 0:x[p];return H!==void 0?H.call(x,M):new RegExp(x)[p](String(M))},function(v){var x=c(l,v,this);if(x.done)return x.value;var M=L(v),H=String(this);if(!M.global)return ni(M,H);var U=M.unicode;M.lastIndex=0;for(var G=[],ee=0,ie;(ie=ni(M,H))!==null;){var J=String(ie[0]);G[ee]=J,J===""&&(M.lastIndex=us(H,Gt(M.lastIndex),U)),ee++}return ee===0?null:G}]});function z_(p,l){if(!(p instanceof l))throw new TypeError("Cannot call a class as a function")}function gd(p,l){for(var c=0;c<l.length;c++){var v=l[c];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function H_(p,l,c){return l&&gd(p.prototype,l),c&&gd(p,c),p}function U_(p,l,c){return l in p?Object.defineProperty(p,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):p[l]=c,p}function _d(p,l){var c=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);l&&(v=v.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),c.push.apply(c,v)}return c}function vd(p){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?_d(Object(c),!0).forEach(function(v){U_(p,v,c[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(c)):_d(Object(c)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(c,v))})}return p}var bd={addCSS:!0,thumbWidth:15,watch:!0};function W_(p,l){return function(){return Array.from(document.querySelectorAll(l)).includes(this)}.call(p,l)}function q_(p,l){if(p&&l){var c=new Event(l,{bubbles:!0});p.dispatchEvent(c)}}var qi=function(l){return l!=null?l.constructor:null},Ks=function(l,c){return!!(l&&c&&l instanceof c)},yd=function(l){return l==null},wd=function(l){return qi(l)===Object},V_=function(l){return qi(l)===Number&&!Number.isNaN(l)},kd=function(l){return qi(l)===String},G_=function(l){return qi(l)===Boolean},Y_=function(l){return qi(l)===Function},xd=function(l){return Array.isArray(l)},Cd=function(l){return Ks(l,NodeList)},X_=function(l){return Ks(l,Element)},K_=function(l){return Ks(l,Event)},J_=function(l){return yd(l)||(kd(l)||xd(l)||Cd(l))&&!l.length||wd(l)&&!Object.keys(l).length},Ar={nullOrUndefined:yd,object:wd,number:V_,string:kd,boolean:G_,function:Y_,array:xd,nodeList:Cd,element:X_,event:K_,empty:J_};function Z_(p){var l="".concat(p).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return l?Math.max(0,(l[1]?l[1].length:0)-(l[2]?+l[2]:0)):0}function Q_(p,l){if(1>l){var c=Z_(l);return parseFloat(p.toFixed(c))}return Math.round(p/l)*l}var ev=function(){function p(l,c){z_(this,p),Ar.element(l)?this.element=l:Ar.string(l)&&(this.element=document.querySelector(l)),Ar.element(this.element)&&Ar.empty(this.element.rangeTouch)&&(this.config=vd({},bd,{},c),this.init())}return H_(p,[{key:"init",value:function(){p.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){p.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(c){var v=this,x=c?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(M){v.element[x](M,function(H){return v.set(H)},!1)})}},{key:"get",value:function(c){if(!p.enabled||!Ar.event(c))return null;var v,x=c.target,M=c.changedTouches[0],H=parseFloat(x.getAttribute("min"))||0,U=parseFloat(x.getAttribute("max"))||100,G=parseFloat(x.getAttribute("step"))||1,ee=x.getBoundingClientRect(),ie=100/ee.width*(this.config.thumbWidth/2)/100;return 0>(v=100/ee.width*(M.clientX-ee.left))?v=0:100<v&&(v=100),50>v?v-=(100-2*v)*ie:50<v&&(v+=2*(v-50)*ie),H+Q_(v/100*(U-H),G)}},{key:"set",value:function(c){p.enabled&&Ar.event(c)&&!c.target.disabled&&(c.preventDefault(),c.target.value=this.get(c),q_(c.target,c.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(c){var v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},x=null;if(Ar.empty(c)||Ar.string(c)?x=Array.from(document.querySelectorAll(Ar.string(c)?c:'input[type="range"]')):Ar.element(c)?x=[c]:Ar.nodeList(c)?x=Array.from(c):Ar.array(c)&&(x=c.filter(Ar.element)),Ar.empty(x))return null;var M=vd({},bd,{},v);if(Ar.string(c)&&M.watch){var H=new MutationObserver(function(U){Array.from(U).forEach(function(G){Array.from(G.addedNodes).forEach(function(ee){Ar.element(ee)&&W_(ee,c)&&new p(ee,M)})})});H.observe(document.body,{childList:!0,subtree:!0})}return x.map(function(U){return new p(U,v)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),p}(),Ha=n.Promise,Sd=q("species"),Td=function(p){var l=Mt(p),c=z.f;a&&l&&!l[Sd]&&c(l,Sd,{configurable:!0,get:function(){return this}})},Ed=/(iphone|ipod|ipad).*applewebkit/i.test(wa),Js=n.location,Zs=n.setImmediate,Qs=n.clearImmediate,Ad=n.process,$d=n.MessageChannel,el=n.Dispatch,tl=0,Vi={},Od="onreadystatechange",zn,rl,nl,il=function(p){if(Vi.hasOwnProperty(p)){var l=Vi[p];delete Vi[p],l()}},al=function(p){return function(){il(p)}},Id=function(p){il(p.data)},Pd=function(p){n.postMessage(p+"",Js.protocol+"//"+Js.host)};(!Zs||!Qs)&&(Zs=function(l){for(var c=[],v=1;arguments.length>v;)c.push(arguments[v++]);return Vi[++tl]=function(){(typeof l=="function"?l:Function(l)).apply(void 0,c)},zn(tl),tl},Qs=function(l){delete Vi[l]},w(Ad)=="process"?zn=function(p){Ad.nextTick(al(p))}:el&&el.now?zn=function(p){el.now(al(p))}:$d&&!Ed?(rl=new $d,nl=rl.port2,rl.port1.onmessage=Id,zn=Pe(nl.postMessage,nl,1)):n.addEventListener&&typeof postMessage=="function"&&!n.importScripts&&!i(Pd)&&Js.protocol!=="file:"?(zn=Pd,n.addEventListener("message",Id,!1)):Od in I("script")?zn=function(p){de.appendChild(I("script"))[Od]=function(){de.removeChild(this),il(p)}}:zn=function(p){setTimeout(al(p),0)});var Rd={set:Zs,clear:Qs},tv=F.f,rv=Rd.set,Ld=n.MutationObserver||n.WebKitMutationObserver,ol=n.process,sl=n.Promise,Md=w(ol)=="process",Nd=tv(n,"queueMicrotask"),Dd=Nd&&Nd.value,Gi,Hn,Yi,pi,ll,cl,ul,Bd;Dd||(Gi=function(){var p,l;for(Md&&(p=ol.domain)&&p.exit();Hn;){l=Hn.fn,Hn=Hn.next;try{l()}catch(c){throw Hn?pi():Yi=void 0,c}}Yi=void 0,p&&p.enter()},Md?pi=function(){ol.nextTick(Gi)}:Ld&&!Ed?(ll=!0,cl=document.createTextNode(""),new Ld(Gi).observe(cl,{characterData:!0}),pi=function(){cl.data=ll=!ll}):sl&&sl.resolve?(ul=sl.resolve(void 0),Bd=ul.then,pi=function(){Bd.call(ul,Gi)}):pi=function(){rv.call(n,Gi)});var jd=Dd||function(p){var l={fn:p,next:void 0};Yi&&(Yi.next=l),Hn||(Hn=l,pi()),Yi=l},nv=function(p){var l,c;this.promise=new p(function(v,x){if(l!==void 0||c!==void 0)throw TypeError("Bad Promise constructor");l=v,c=x}),this.resolve=Le(l),this.reject=Le(c)},iv=function(p){return new nv(p)},dl={f:iv},Fd=function(p,l){if(L(p),N(l)&&l.constructor===p)return l;var c=dl.f(p),v=c.resolve;return v(l),c.promise},av=function(p,l){var c=n.console;c&&c.error&&(arguments.length===1?c.error(p):c.error(p,l))},fl=function(p){try{return{error:!1,value:p()}}catch(l){return{error:!0,value:l}}},zd=Rd.set,ov=q("species"),on="Promise",Hd=Ie.get,sv=Ie.set,lv=Ie.getterFor(on),Dr=Ha,Ud=n.TypeError,pl=n.document,Ua=n.process,Wd=Mt("fetch"),hi=dl.f,cv=hi,Xi=w(Ua)=="process",uv=!!(pl&&pl.createEvent&&n.dispatchEvent),qd="unhandledrejection",dv="rejectionhandled",Vd=0,Gd=1,fv=2,hl=1,Yd=2,Wa,Xd,Kd,Jd,Ki=mr(on,function(){var p=ne(Dr)!==String(Dr);if(!p&&(xa===66||!Xi&&typeof PromiseRejectionEvent!="function"))return!0;if(xa>=51&&/native code/.test(Dr))return!1;var l=Dr.resolve(1),c=function(x){x(function(){},function(){})},v=l.constructor={};return v[ov]=c,!(l.then(function(){})instanceof c)}),pv=Ki||!Us(function(p){Dr.all(p).catch(function(){})}),Zd=function(p){var l;return N(p)&&typeof(l=p.then)=="function"?l:!1},ml=function(p,l,c){if(!l.notified){l.notified=!0;var v=l.reactions;jd(function(){for(var x=l.value,M=l.state==Gd,H=0;v.length>H;){var U=v[H++],G=M?U.ok:U.fail,ee=U.resolve,ie=U.reject,J=U.domain,te,be,Oe;try{G?(M||(l.rejection===Yd&&mv(p,l),l.rejection=hl),G===!0?te=x:(J&&J.enter(),te=G(x),J&&(J.exit(),Oe=!0)),te===U.promise?ie(Ud("Promise-chain cycle")):(be=Zd(te))?be.call(te,ee,ie):ee(te)):ie(x)}catch(Ne){J&&!Oe&&J.exit(),ie(Ne)}}l.reactions=[],l.notified=!1,c&&!l.rejection&&hv(p,l)})}},Qd=function(p,l,c){var v,x;uv?(v=pl.createEvent("Event"),v.promise=l,v.reason=c,v.initEvent(p,!1,!0),n.dispatchEvent(v)):v={promise:l,reason:c},(x=n["on"+p])?x(v):p===qd&&av("Unhandled promise rejection",c)},hv=function(p,l){zd.call(n,function(){var c=l.value,v=ef(l),x;if(v&&(x=fl(function(){Xi?Ua.emit("unhandledRejection",c,p):Qd(qd,p,c)}),l.rejection=Xi||ef(l)?Yd:hl,x.error))throw x.value})},ef=function(p){return p.rejection!==hl&&!p.parent},mv=function(p,l){zd.call(n,function(){Xi?Ua.emit("rejectionHandled",p):Qd(dv,p,l.value)})},mi=function(p,l,c,v){return function(x){p(l,c,x,v)}},gi=function(p,l,c,v){l.done||(l.done=!0,v&&(l=v),l.value=c,l.state=fv,ml(p,l,!0))},gl=function(p,l,c,v){if(!l.done){l.done=!0,v&&(l=v);try{if(p===c)throw Ud("Promise can't be resolved itself");var x=Zd(c);x?jd(function(){var M={done:!1};try{x.call(c,mi(gl,p,M,l),mi(gi,p,M,l))}catch(H){gi(p,M,H,l)}}):(l.value=c,l.state=Gd,ml(p,l,!1))}catch(M){gi(p,{done:!1},M,l)}}};Ki&&(Dr=function(l){Ni(this,Dr,on),Le(l),Wa.call(this);var c=Hd(this);try{l(mi(gl,this,c),mi(gi,this,c))}catch(v){gi(this,c,v)}},Wa=function(l){sv(this,{type:on,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Vd,value:void 0})},Wa.prototype=ji(Dr.prototype,{then:function(l,c){var v=lv(this),x=hi(eu(this,Dr));return x.ok=typeof l=="function"?l:!0,x.fail=typeof c=="function"&&c,x.domain=Xi?Ua.domain:void 0,v.parent=!0,v.reactions.push(x),v.state!=Vd&&ml(this,v,!1),x.promise},catch:function(p){return this.then(void 0,p)}}),Xd=function(){var p=new Wa,l=Hd(p);this.promise=p,this.resolve=mi(gl,p,l),this.reject=mi(gi,p,l)},dl.f=hi=function(p){return p===Dr||p===Kd?new Xd(p):cv(p)},typeof Ha=="function"&&(Jd=Ha.prototype.then,Ve(Ha.prototype,"then",function(l,c){var v=this;return new Dr(function(x,M){Jd.call(v,x,M)}).then(l,c)},{unsafe:!0}),typeof Wd=="function"&&tt({global:!0,enumerable:!0,forced:!0},{fetch:function(l){return Fd(Dr,Wd.apply(n,arguments))}}))),tt({global:!0,wrap:!0,forced:Ki},{Promise:Dr}),ye(Dr,on,!1),Td(on),Kd=Mt(on),tt({target:on,stat:!0,forced:Ki},{reject:function(l){var c=hi(this);return c.reject.call(void 0,l),c.promise}}),tt({target:on,stat:!0,forced:Ki},{resolve:function(l){return Fd(this,l)}}),tt({target:on,stat:!0,forced:pv},{all:function(l){var c=this,v=hi(c),x=v.resolve,M=v.reject,H=fl(function(){var U=Le(c.resolve),G=[],ee=0,ie=1;ja(l,function(J){var te=ee++,be=!1;G.push(void 0),ie++,U.call(c,J).then(function(Oe){be||(be=!0,G[te]=Oe,--ie||x(G))},M)}),--ie||x(G)});return H.error&&M(H.value),v.promise},race:function(l){var c=this,v=hi(c),x=v.reject,M=fl(function(){var H=Le(c.resolve);ja(l,function(U){H.call(c,U).then(v.resolve,x)})});return M.error&&x(M.value),v.promise}});var gv=F.f,tf="".startsWith,_v=Math.min,rf=sd("startsWith"),vv=!rf&&!!function(){var p=gv(String.prototype,"startsWith");return p&&!p.writable}();tt({target:"String",proto:!0,forced:!vv&&!rf},{startsWith:function(l){var c=String(E(this));od(l);var v=Gt(_v(arguments.length>1?arguments[1]:void 0,c.length)),x=String(l);return tf?tf.call(c,x,v):c.slice(v,v+x.length)===x}});var _i=function(l){return l!==null&&typeof l!="undefined"?l.constructor:null},sn=function(l,c){return Boolean(l&&c&&l instanceof c)},_l=function(l){return l===null||typeof l=="undefined"},nf=function(l){return _i(l)===Object},bv=function(l){return _i(l)===Number&&!Number.isNaN(l)},qa=function(l){return _i(l)===String},yv=function(l){return _i(l)===Boolean},af=function(l){return _i(l)===Function},of=function(l){return Array.isArray(l)},wv=function(l){return sn(l,WeakMap)},sf=function(l){return sn(l,NodeList)},kv=function(l){return sn(l,Element)},xv=function(l){return _i(l)===Text},Cv=function(l){return sn(l,Event)},Sv=function(l){return sn(l,KeyboardEvent)},Tv=function(l){return sn(l,window.TextTrackCue)||sn(l,window.VTTCue)},Ev=function(l){return sn(l,TextTrack)||!_l(l)&&qa(l.kind)},Av=function(l){return sn(l,Promise)&&af(l.then)},lf=function(l){return _l(l)||(qa(l)||of(l)||sf(l))&&!l.length||nf(l)&&!Object.keys(l).length},$v=function(l){if(sn(l,window.URL))return!0;if(!qa(l))return!1;var c=l;(!l.startsWith("http://")||!l.startsWith("https://"))&&(c="http://".concat(l));try{return!lf(new URL(c).hostname)}catch(v){return!1}},fe={nullOrUndefined:_l,object:nf,number:bv,string:qa,boolean:yv,function:af,array:of,weakMap:wv,nodeList:sf,element:kv,textNode:xv,event:Cv,keyboardEvent:Sv,cue:Tv,track:Ev,promise:Av,url:$v,empty:lf},vl=function(){var p=document.createElement("span"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c=Object.keys(l).find(function(v){return p.style[v]!==void 0});return fe.string(c)?l[c]:!1}();function cf(p,l){setTimeout(function(){try{p.hidden=!0,p.offsetHeight,p.hidden=!1}catch(c){}},l)}var Cr={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},uf=function(p){return function(l,c,v,x){Le(c);var M=ot(l),H=k(M),U=Gt(M.length),G=p?U-1:0,ee=p?-1:1;if(v<2)for(;;){if(G in H){x=H[G],G+=ee;break}if(G+=ee,p?G<0:U<=G)throw TypeError("Reduce of empty array with no initial value")}for(;p?G>=0:U>G;G+=ee)G in H&&(x=c(x,H[G],G,M));return x}},Ov={left:uf(!1),right:uf(!0)},Iv=Ov.left,Pv=In("reduce"),Rv=qr("reduce",{1:0});tt({target:"Array",proto:!0,forced:!Pv||!Rv},{reduce:function(l){return Iv(this,l,arguments.length,arguments.length>1?arguments[1]:void 0)}});function Lv(p){return JSON.parse(JSON.stringify(p))}function df(p,l){return l.split(".").reduce(function(c,v){return c&&c[v]},p)}function dr(){for(var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length,c=new Array(l>1?l-1:0),v=1;v<l;v++)c[v-1]=arguments[v];if(!c.length)return p;var x=c.shift();return fe.object(x)?(Object.keys(x).forEach(function(M){fe.object(x[M])?(Object.keys(p).includes(M)||Object.assign(p,Fs({},M,{})),dr(p[M],x[M])):Object.assign(p,Fs({},M,x[M]))}),dr.apply(void 0,[p].concat(c))):p}function ff(p,l){var c=p.length?p:[p];Array.from(c).reverse().forEach(function(v,x){var M=x>0?l.cloneNode(!0):l,H=v.parentNode,U=v.nextSibling;M.appendChild(v),U?H.insertBefore(M,U):H.appendChild(M)})}function bl(p,l){!fe.element(p)||fe.empty(l)||Object.entries(l).filter(function(c){var v=yr(c,2),x=v[1];return!fe.nullOrUndefined(x)}).forEach(function(c){var v=yr(c,2),x=v[0],M=v[1];return p.setAttribute(x,M)})}function vt(p,l,c){var v=document.createElement(p);return fe.object(l)&&bl(v,l),fe.string(c)&&(v.innerText=c),v}function Mv(p,l){!fe.element(p)||!fe.element(l)||l.parentNode.insertBefore(p,l.nextSibling)}function pf(p,l,c,v){!fe.element(l)||l.appendChild(vt(p,c,v))}function vn(p){if(fe.nodeList(p)||fe.array(p)){Array.from(p).forEach(vn);return}!fe.element(p)||!fe.element(p.parentNode)||p.parentNode.removeChild(p)}function Va(p){if(!!fe.element(p))for(var l=p.childNodes.length;l>0;)p.removeChild(p.lastChild),l-=1}function Ga(p,l){return!fe.element(l)||!fe.element(l.parentNode)||!fe.element(p)?null:(l.parentNode.replaceChild(p,l),p)}function ln(p,l){if(!fe.string(p)||fe.empty(p))return{};var c={},v=dr({},l);return p.split(",").forEach(function(x){var M=x.trim(),H=M.replace(".",""),U=M.replace(/[[\]]/g,""),G=U.split("="),ee=yr(G,1),ie=ee[0],J=G.length>1?G[1].replace(/["']/g,""):"",te=M.charAt(0);switch(te){case".":fe.string(v.class)?c.class="".concat(v.class," ").concat(H):c.class=H;break;case"#":c.id=M.replace("#","");break;case"[":c[ie]=J;break}}),dr(v,c)}function Un(p,l){if(!!fe.element(p)){var c=l;fe.boolean(c)||(c=!p.hidden),p.hidden=c}}function Ft(p,l,c){if(fe.nodeList(p))return Array.from(p).map(function(x){return Ft(x,l,c)});if(fe.element(p)){var v="toggle";return typeof c!="undefined"&&(v=c?"add":"remove"),p.classList[v](l),p.classList.contains(l)}return!1}function Ya(p,l){return fe.element(p)&&p.classList.contains(l)}function Wn(p,l){var c=Element,v=c.prototype;function x(){return Array.from(document.querySelectorAll(l)).includes(this)}var M=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||x;return M.call(p,l)}function Nv(p,l){var c=Element,v=c.prototype;function x(){var H=this;do{if(Wn.matches(H,l))return H;H=H.parentElement||H.parentNode}while(H!==null&&H.nodeType===1);return null}var M=v.closest||x;return M.call(p,l)}function vi(p){return this.elements.container.querySelectorAll(p)}function pr(p){return this.elements.container.querySelector(p)}function yl(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!fe.element(p)||(p.focus({preventScroll:!0}),l&&Ft(p,this.config.classNames.tabFocus))}var hf={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},sr={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(l,c,v){var x=Cr.isIPhone&&v&&sr.playsinline,M=sr[l]||c!=="html5",H=M&&sr.rangeInput&&(l!=="video"||!Cr.isIPhone||x);return{api:M,ui:H}},pip:function(){return Cr.isIPhone?!1:!!(fe.function(vt("video").webkitSetPresentationMode)||document.pictureInPictureEnabled&&!vt("video").disablePictureInPicture)}(),airplay:fe.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(l){if(fe.empty(l))return!1;var c=l.split("/"),v=yr(c,1),x=v[0],M=l;if(!this.isHTML5||x!==this.type)return!1;Object.keys(hf).includes(M)&&(M+='; codecs="'.concat(hf[l],'"'));try{return Boolean(M&&this.media.canPlayType(M).replace(/no/,""))}catch(H){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:function(){var p=document.createElement("input");return p.type="range",p.type==="range"}(),touch:"ontouchstart"in document.documentElement,transitions:vl!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Dv=function(){var p=!1;try{var l=Object.defineProperty({},"passive",{get:function(){return p=!0,null}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(c){}return p}();function bi(p,l,c){var v=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,H=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(!(!p||!("addEventListener"in p)||fe.empty(l)||!fe.function(c))){var U=l.split(" "),G=H;Dv&&(G={passive:M,capture:H}),U.forEach(function(ee){v&&v.eventListeners&&x&&v.eventListeners.push({element:p,type:ee,callback:c,options:G}),p[x?"addEventListener":"removeEventListener"](ee,c,G)})}}function zt(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;bi.call(this,p,l,c,!0,v,x)}function Xa(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;bi.call(this,p,l,c,!1,v,x)}function wl(p){var l=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",v=arguments.length>2?arguments[2]:void 0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,H=function U(){Xa(p,c,U,x,M);for(var G=arguments.length,ee=new Array(G),ie=0;ie<G;ie++)ee[ie]=arguments[ie];v.apply(l,ee)};bi.call(this,p,c,H,!0,x,M)}function gt(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!(!fe.element(p)||fe.empty(l))){var x=new CustomEvent(l,{bubbles:c,detail:di(di({},v),{},{plyr:this})});p.dispatchEvent(x)}}function Bv(){this&&this.eventListeners&&(this.eventListeners.forEach(function(p){var l=p.element,c=p.type,v=p.callback,x=p.options;l.removeEventListener(c,v,x)}),this.eventListeners=[])}function jv(){var p=this;return new Promise(function(l){return p.ready?setTimeout(l,0):zt.call(p,p.elements.container,"ready",l)}).then(function(){})}function cn(p){fe.promise(p)&&p.then(null,function(){})}function mf(p){if(!fe.array(p)&&(!fe.string(p)||!p.includes(":")))return!1;var l=fe.array(p)?p:p.split(":");return l.map(Number).every(fe.number)}function gf(p){if(!fe.array(p)||!p.every(fe.number))return null;var l=yr(p,2),c=l[0],v=l[1],x=function H(U,G){return G===0?U:H(G,U%G)},M=x(c,v);return[c/M,v/M]}function kl(p){var l=function(U){return mf(U)?U.split(":").map(Number):null},c=l(p);if(c===null&&(c=l(this.config.ratio)),c===null&&!fe.empty(this.embed)&&fe.array(this.embed.ratio)&&(c=this.embed.ratio),c===null&&this.isHTML5){var v=this.media,x=v.videoWidth,M=v.videoHeight;c=gf([x,M])}return c}function Cn(p){if(!this.isVideo)return{};var l=this.elements.wrapper,c=kl.call(this,p),v=fe.array(c)?c:[0,0],x=yr(v,2),M=x[0],H=x[1],U=100/M*H;if(l.style.paddingBottom="".concat(U,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var G=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),ee=(G-U)/(G/50);this.media.style.transform="translateY(-".concat(ee,"%)")}else this.isHTML5&&l.classList.toggle(this.config.classNames.videoFixedRatio,c!==null);return{padding:U,ratio:c}}var qn={getSources:function(){var l=this;if(!this.isHTML5)return[];var c=Array.from(this.media.querySelectorAll("source"));return c.filter(function(v){var x=v.getAttribute("type");return fe.empty(x)?!0:sr.mime.call(l,x)})},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:qn.getSources.call(this).map(function(l){return Number(l.getAttribute("size"))}).filter(Boolean)},setup:function(){if(!!this.isHTML5){var l=this;l.options.speed=l.config.speed.options,fe.empty(this.config.ratio)||Cn.call(l),Object.defineProperty(l.media,"quality",{get:function(){var v=qn.getSources.call(l),x=v.find(function(M){return M.getAttribute("src")===l.source});return x&&Number(x.getAttribute("size"))},set:function(v){if(l.quality!==v){if(l.config.quality.forced&&fe.function(l.config.quality.onChange))l.config.quality.onChange(v);else{var x=qn.getSources.call(l),M=x.find(function(te){return Number(te.getAttribute("size"))===v});if(!M)return;var H=l.media,U=H.currentTime,G=H.paused,ee=H.preload,ie=H.readyState,J=H.playbackRate;l.media.src=M.getAttribute("src"),(ee!=="none"||ie)&&(l.once("loadedmetadata",function(){l.speed=J,l.currentTime=U,G||cn(l.play())}),l.media.load())}gt.call(l,l.media,"qualitychange",!1,{quality:v})}}})}},cancelRequests:function(){!this.isHTML5||(vn(qn.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function xl(p){return fe.array(p)?p.filter(function(l,c){return p.indexOf(l)===c}):p}function Fv(p,l){return!fe.array(p)||!p.length?null:p.reduce(function(c,v){return Math.abs(v-l)<Math.abs(c-l)?v:c})}var zv=z.f,Hv=rr.f,Uv=Ie.set,Wv=q("match"),un=n.RegExp,Cl=un.prototype,Ji=/a/g,Sl=/a/g,Tl=new un(Ji)!==Ji,El=as.UNSUPPORTED_Y,qv=a&&mr("RegExp",!Tl||El||i(function(){return Sl[Wv]=!1,un(Ji)!=Ji||un(Sl)==Sl||un(Ji,"i")!="/a/i"}));if(qv){for(var bn=function(l,c){var v=this instanceof bn,x=ds(l),M=c===void 0,H;if(!v&&x&&l.constructor===bn&&M)return l;Tl?x&&!M&&(l=l.source):l instanceof bn&&(M&&(c=is.call(l)),l=l.source),El&&(H=!!c&&c.indexOf("y")>-1,H&&(c=c.replace(/y/g,"")));var U=Ws(Tl?new un(l,c):un(l,c),v?this:Cl,bn);return El&&H&&Uv(U,{sticky:H}),U},Vv=function(p){p in bn||zv(bn,p,{configurable:!0,get:function(){return un[p]},set:function(l){un[p]=l}})},_f=Hv(un),vf=0;_f.length>vf;)Vv(_f[vf++]);Cl.constructor=bn,bn.prototype=Cl,Ve(n,"RegExp",bn)}Td("RegExp");function Gv(p){return"".concat(p,"-").concat(Math.floor(Math.random()*1e4))}function Al(p){for(var l=arguments.length,c=new Array(l>1?l-1:0),v=1;v<l;v++)c[v-1]=arguments[v];return fe.empty(p)?p:p.toString().replace(/{(\d+)}/g,function(x,M){return c[M].toString()})}function Yv(p,l){return p===0||l===0||Number.isNaN(p)||Number.isNaN(l)?0:(p/l*100).toFixed(2)}var Zi=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return l.replace(new RegExp(c.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),v.toString())},bf=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return l.toString().replace(/\w\S*/g,function(c){return c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()})};function Xv(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=p.toString();return l=Zi(l,"-"," "),l=Zi(l,"_"," "),l=bf(l),Zi(l," ","")}function Kv(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=p.toString();return l=Xv(l),l.charAt(0).toLowerCase()+l.slice(1)}function Jv(p){var l=document.createDocumentFragment(),c=document.createElement("div");return l.appendChild(c),c.innerHTML=p,l.firstChild.innerText}function Zv(p){var l=document.createElement("div");return l.appendChild(p),l.innerHTML}var yf={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},wr={get:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(fe.empty(l)||fe.empty(c))return"";var v=df(c.i18n,l);if(fe.empty(v))return Object.keys(yf).includes(l)?yf[l]:"";var x={"{seektime}":c.seekTime,"{title}":c.title};return Object.entries(x).forEach(function(M){var H=yr(M,2),U=H[0],G=H[1];v=Zi(v,U,G)}),v}},wf=function(){function p(l){Dn(this,p),this.enabled=l.config.storage.enabled,this.key=l.config.storage.key}return Bn(p,[{key:"get",value:function(c){if(!p.supported||!this.enabled)return null;var v=window.localStorage.getItem(this.key);if(fe.empty(v))return null;var x=JSON.parse(v);return fe.string(c)&&c.length?x[c]:x}},{key:"set",value:function(c){if(!(!p.supported||!this.enabled)&&!!fe.object(c)){var v=this.get();fe.empty(v)&&(v={}),dr(v,c),window.localStorage.setItem(this.key,JSON.stringify(v))}}}],[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var c="___test";return window.localStorage.setItem(c,c),window.localStorage.removeItem(c),!0}catch(v){return!1}}}]),p}();function Qi(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"text";return new Promise(function(c,v){try{var x=new XMLHttpRequest;if(!("withCredentials"in x))return;x.addEventListener("load",function(){if(l==="text")try{c(JSON.parse(x.responseText))}catch(M){c(x.responseText)}else c(x.response)}),x.addEventListener("error",function(){throw new Error(x.status)}),x.open("GET",p,!0),x.responseType=l,x.send()}catch(M){v(M)}})}function kf(p,l){if(!!fe.string(p)){var c="cache",v=fe.string(l),x=!1,M=function(){return document.getElementById(l)!==null},H=function(te,be){te.innerHTML=be,!(v&&M())&&document.body.insertAdjacentElement("afterbegin",te)};if(!v||!M()){var U=wf.supported,G=document.createElement("div");if(G.setAttribute("hidden",""),v&&G.setAttribute("id",l),U){var ee=window.localStorage.getItem("".concat(c,"-").concat(l));if(x=ee!==null,x){var ie=JSON.parse(ee);H(G,ie.content)}}Qi(p).then(function(J){fe.empty(J)||(U&&window.localStorage.setItem("".concat(c,"-").concat(l),JSON.stringify({content:J})),H(G,J))}).catch(function(){})}}}var Qv=Math.ceil,eb=Math.floor;tt({target:"Math",stat:!0},{trunc:function(l){return(l>0?eb:Qv)(l)}});var xf=function(l){return Math.trunc(l/60/60%60,10)},tb=function(l){return Math.trunc(l/60%60,10)},rb=function(l){return Math.trunc(l%60,10)};function Ka(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!fe.number(p))return Ka(void 0,l,c);var v=function(G){return"0".concat(G).slice(-2)},x=xf(p),M=tb(p),H=rb(p);return l||x>0?x="".concat(x,":"):x="","".concat(c&&p>0?"-":"").concat(x).concat(v(M),":").concat(v(H))}var Ze={getIconUrl:function(){var l=new URL(this.config.iconUrl,window.location),c=l.host!==window.location.host||Cr.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:c}},findElements:function(){try{return this.elements.controls=pr.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:vi.call(this,this.config.selectors.buttons.play),pause:pr.call(this,this.config.selectors.buttons.pause),restart:pr.call(this,this.config.selectors.buttons.restart),rewind:pr.call(this,this.config.selectors.buttons.rewind),fastForward:pr.call(this,this.config.selectors.buttons.fastForward),mute:pr.call(this,this.config.selectors.buttons.mute),pip:pr.call(this,this.config.selectors.buttons.pip),airplay:pr.call(this,this.config.selectors.buttons.airplay),settings:pr.call(this,this.config.selectors.buttons.settings),captions:pr.call(this,this.config.selectors.buttons.captions),fullscreen:pr.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=pr.call(this,this.config.selectors.progress),this.elements.inputs={seek:pr.call(this,this.config.selectors.inputs.seek),volume:pr.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:pr.call(this,this.config.selectors.display.buffer),currentTime:pr.call(this,this.config.selectors.display.currentTime),duration:pr.call(this,this.config.selectors.display.duration)},fe.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(l){return this.debug.warn("It looks like there is a problem with your custom controls HTML",l),this.toggleNativeControls(!0),!1}},createIcon:function(l,c){var v="http://www.w3.org/2000/svg",x=Ze.getIconUrl.call(this),M="".concat(x.cors?"":x.url,"#").concat(this.config.iconPrefix),H=document.createElementNS(v,"svg");bl(H,dr(c,{"aria-hidden":"true",focusable:"false"}));var U=document.createElementNS(v,"use"),G="".concat(M,"-").concat(l);return"href"in U&&U.setAttributeNS("http://www.w3.org/1999/xlink","href",G),U.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",G),H.appendChild(U),H},createLabel:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=wr.get(l,this.config),x=di(di({},c),{},{class:[c.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return vt("span",x,v)},createBadge:function(l){if(fe.empty(l))return null;var c=vt("span",{class:this.config.classNames.menu.value});return c.appendChild(vt("span",{class:this.config.classNames.menu.badge},l)),c},createButton:function(l,c){var v=this,x=dr({},c),M=Kv(l),H={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(function(G){Object.keys(x).includes(G)&&(H[G]=x[G],delete x[G])}),H.element==="button"&&!Object.keys(x).includes("type")&&(x.type="button"),Object.keys(x).includes("class")?x.class.split(" ").some(function(G){return G===v.config.classNames.control})||dr(x,{class:"".concat(x.class," ").concat(this.config.classNames.control)}):x.class=this.config.classNames.control,l){case"play":H.toggle=!0,H.label="play",H.labelPressed="pause",H.icon="play",H.iconPressed="pause";break;case"mute":H.toggle=!0,H.label="mute",H.labelPressed="unmute",H.icon="volume",H.iconPressed="muted";break;case"captions":H.toggle=!0,H.label="enableCaptions",H.labelPressed="disableCaptions",H.icon="captions-off",H.iconPressed="captions-on";break;case"fullscreen":H.toggle=!0,H.label="enterFullscreen",H.labelPressed="exitFullscreen",H.icon="enter-fullscreen",H.iconPressed="exit-fullscreen";break;case"play-large":x.class+=" ".concat(this.config.classNames.control,"--overlaid"),M="play",H.label="play",H.icon="play";break;default:fe.empty(H.label)&&(H.label=M),fe.empty(H.icon)&&(H.icon=l)}var U=vt(H.element);return H.toggle?(U.appendChild(Ze.createIcon.call(this,H.iconPressed,{class:"icon--pressed"})),U.appendChild(Ze.createIcon.call(this,H.icon,{class:"icon--not-pressed"})),U.appendChild(Ze.createLabel.call(this,H.labelPressed,{class:"label--pressed"})),U.appendChild(Ze.createLabel.call(this,H.label,{class:"label--not-pressed"}))):(U.appendChild(Ze.createIcon.call(this,H.icon)),U.appendChild(Ze.createLabel.call(this,H.label))),dr(x,ln(this.config.selectors.buttons[M],x)),bl(U,x),M==="play"?(fe.array(this.elements.buttons[M])||(this.elements.buttons[M]=[]),this.elements.buttons[M].push(U)):this.elements.buttons[M]=U,U},createRange:function(l,c){var v=vt("input",dr(ln(this.config.selectors.inputs[l]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":wr.get(l,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},c));return this.elements.inputs[l]=v,Ze.updateRangeFill.call(this,v),ev.setup(v),v},createProgress:function(l,c){var v=vt("progress",dr(ln(this.config.selectors.display[l]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},c));if(l!=="volume"){v.appendChild(vt("span",null,"0"));var x={played:"played",buffer:"buffered"}[l],M=x?wr.get(x,this.config):"";v.innerText="% ".concat(M.toLowerCase())}return this.elements.display[l]=v,v},createTime:function(l,c){var v=ln(this.config.selectors.display[l],c),x=vt("div",dr(v,{class:"".concat(v.class?v.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":wr.get(l,this.config)}),"00:00");return this.elements.display[l]=x,x},bindMenuItemShortcuts:function(l,c){var v=this;zt.call(this,l,"keydown keyup",function(x){if(!![32,38,39,40].includes(x.which)&&(x.preventDefault(),x.stopPropagation(),x.type!=="keydown")){var M=Wn(l,'[role="menuitemradio"]');if(!M&&[32,39].includes(x.which))Ze.showMenuPanel.call(v,c,!0);else{var H;x.which!==32&&(x.which===40||M&&x.which===39?(H=l.nextElementSibling,fe.element(H)||(H=l.parentNode.firstElementChild)):(H=l.previousElementSibling,fe.element(H)||(H=l.parentNode.lastElementChild)),yl.call(v,H,!0))}}},!1),zt.call(this,l,"keyup",function(x){x.which===13&&Ze.focusFirstMenuItem.call(v,null,!0)})},createMenuItem:function(l){var c=this,v=l.value,x=l.list,M=l.type,H=l.title,U=l.badge,G=U===void 0?null:U,ee=l.checked,ie=ee===void 0?!1:ee,J=ln(this.config.selectors.inputs[M]),te=vt("button",dr(J,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(J.class?J.class:"").trim(),"aria-checked":ie,value:v})),be=vt("span");be.innerHTML=H,fe.element(G)&&be.appendChild(G),te.appendChild(be),Object.defineProperty(te,"checked",{enumerable:!0,get:function(){return te.getAttribute("aria-checked")==="true"},set:function(Ne){Ne&&Array.from(te.parentNode.children).filter(function(Be){return Wn(Be,'[role="menuitemradio"]')}).forEach(function(Be){return Be.setAttribute("aria-checked","false")}),te.setAttribute("aria-checked",Ne?"true":"false")}}),this.listeners.bind(te,"click keyup",function(Oe){if(!(fe.keyboardEvent(Oe)&&Oe.which!==32)){switch(Oe.preventDefault(),Oe.stopPropagation(),te.checked=!0,M){case"language":c.currentTrack=Number(v);break;case"quality":c.quality=v;break;case"speed":c.speed=parseFloat(v);break}Ze.showMenuPanel.call(c,"home",fe.keyboardEvent(Oe))}},M,!1),Ze.bindMenuItemShortcuts.call(this,te,M),x.appendChild(te)},formatTime:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!fe.number(l))return l;var v=xf(this.duration)>0;return Ka(l,v,c)},updateTimeDisplay:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;!fe.element(l)||!fe.number(c)||(l.innerText=Ze.formatTime(c,v))},updateVolume:function(){!this.supported.ui||(fe.element(this.elements.inputs.volume)&&Ze.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),fe.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;!fe.element(l)||(l.value=c,Ze.updateRangeFill.call(this,l))},updateProgress:function(l){var c=this;if(!(!this.supported.ui||!fe.event(l))){var v=0,x=function(H,U){var G=fe.number(U)?U:0,ee=fe.element(H)?H:c.elements.display.buffer;if(fe.element(ee)){ee.value=G;var ie=ee.getElementsByTagName("span")[0];fe.element(ie)&&(ie.childNodes[0].nodeValue=G)}};if(l)switch(l.type){case"timeupdate":case"seeking":case"seeked":v=Yv(this.currentTime,this.duration),l.type==="timeupdate"&&Ze.setRange.call(this,this.elements.inputs.seek,v);break;case"playing":case"progress":x(this.elements.display.buffer,this.buffered*100);break}}},updateRangeFill:function(l){var c=fe.event(l)?l.target:l;if(!(!fe.element(c)||c.getAttribute("type")!=="range")){if(Wn(c,this.config.selectors.inputs.seek)){c.setAttribute("aria-valuenow",this.currentTime);var v=Ze.formatTime(this.currentTime),x=Ze.formatTime(this.duration),M=wr.get("seekLabel",this.config);c.setAttribute("aria-valuetext",M.replace("{currentTime}",v).replace("{duration}",x))}else if(Wn(c,this.config.selectors.inputs.volume)){var H=c.value*100;c.setAttribute("aria-valuenow",H),c.setAttribute("aria-valuetext","".concat(H.toFixed(1),"%"))}else c.setAttribute("aria-valuenow",c.value);!Cr.isWebkit||c.style.setProperty("--value","".concat(c.value/c.max*100,"%"))}},updateSeekTooltip:function(l){var c=this;if(!(!this.config.tooltips.seek||!fe.element(this.elements.inputs.seek)||!fe.element(this.elements.display.seekTooltip)||this.duration===0)){var v="".concat(this.config.classNames.tooltip,"--visible"),x=function(G){return Ft(c.elements.display.seekTooltip,v,G)};if(this.touch){x(!1);return}var M=0,H=this.elements.progress.getBoundingClientRect();if(fe.event(l))M=100/H.width*(l.pageX-H.left);else if(Ya(this.elements.display.seekTooltip,v))M=parseFloat(this.elements.display.seekTooltip.style.left,10);else return;M<0?M=0:M>100&&(M=100),Ze.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*M),this.elements.display.seekTooltip.style.left="".concat(M,"%"),fe.event(l)&&["mouseenter","mouseleave"].includes(l.type)&&x(l.type==="mouseenter")}},timeUpdate:function(l){var c=!fe.element(this.elements.display.duration)&&this.config.invertTime;Ze.updateTimeDisplay.call(this,this.elements.display.currentTime,c?this.duration-this.currentTime:this.currentTime,c),!(l&&l.type==="timeupdate"&&this.media.seeking)&&Ze.updateProgress.call(this,l)},durationUpdate:function(){if(!(!this.supported.ui||!this.config.invertTime&&this.currentTime)){if(this.duration>=Math.pow(2,32)){Un(this.elements.display.currentTime,!0),Un(this.elements.progress,!0);return}fe.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var l=fe.element(this.elements.display.duration);!l&&this.config.displayDuration&&this.paused&&Ze.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),l&&Ze.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),Ze.updateSeekTooltip.call(this)}},toggleMenuButton:function(l,c){Un(this.elements.settings.buttons[l],!c)},updateSetting:function(l,c,v){var x=this.elements.settings.panels[l],M=null,H=c;if(l==="captions")M=this.currentTrack;else{if(M=fe.empty(v)?this[l]:v,fe.empty(M)&&(M=this.config[l].default),!fe.empty(this.options[l])&&!this.options[l].includes(M)){this.debug.warn("Unsupported value of '".concat(M,"' for ").concat(l));return}if(!this.config[l].options.includes(M)){this.debug.warn("Disabled value of '".concat(M,"' for ").concat(l));return}}if(fe.element(H)||(H=x&&x.querySelector('[role="menu"]')),!!fe.element(H)){var U=this.elements.settings.buttons[l].querySelector(".".concat(this.config.classNames.menu.value));U.innerHTML=Ze.getLabel.call(this,l,M);var G=H&&H.querySelector('[value="'.concat(M,'"]'));fe.element(G)&&(G.checked=!0)}},getLabel:function(l,c){switch(l){case"speed":return c===1?wr.get("normal",this.config):"".concat(c,"&times;");case"quality":if(fe.number(c)){var v=wr.get("qualityLabel.".concat(c),this.config);return v.length?v:"".concat(c,"p")}return bf(c);case"captions":return Ut.getLabel.call(this);default:return null}},setQualityMenu:function(l){var c=this;if(!!fe.element(this.elements.settings.panels.quality)){var v="quality",x=this.elements.settings.panels.quality.querySelector('[role="menu"]');fe.array(l)&&(this.options.quality=xl(l).filter(function(U){return c.config.quality.options.includes(U)}));var M=!fe.empty(this.options.quality)&&this.options.quality.length>1;if(Ze.toggleMenuButton.call(this,v,M),Va(x),Ze.checkMenu.call(this),!!M){var H=function(G){var ee=wr.get("qualityBadge.".concat(G),c.config);return ee.length?Ze.createBadge.call(c,ee):null};this.options.quality.sort(function(U,G){var ee=c.config.quality.options;return ee.indexOf(U)>ee.indexOf(G)?1:-1}).forEach(function(U){Ze.createMenuItem.call(c,{value:U,list:x,type:v,title:Ze.getLabel.call(c,"quality",U),badge:H(U)})}),Ze.updateSetting.call(this,v,x)}}},setCaptionsMenu:function(){var l=this;if(!!fe.element(this.elements.settings.panels.captions)){var c="captions",v=this.elements.settings.panels.captions.querySelector('[role="menu"]'),x=Ut.getTracks.call(this),M=Boolean(x.length);if(Ze.toggleMenuButton.call(this,c,M),Va(v),Ze.checkMenu.call(this),!!M){var H=x.map(function(U,G){return{value:G,checked:l.captions.toggled&&l.currentTrack===G,title:Ut.getLabel.call(l,U),badge:U.language&&Ze.createBadge.call(l,U.language.toUpperCase()),list:v,type:"language"}});H.unshift({value:-1,checked:!this.captions.toggled,title:wr.get("disabled",this.config),list:v,type:"language"}),H.forEach(Ze.createMenuItem.bind(this)),Ze.updateSetting.call(this,c,v)}}},setSpeedMenu:function(){var l=this;if(!!fe.element(this.elements.settings.panels.speed)){var c="speed",v=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(function(M){return M>=l.minimumSpeed&&M<=l.maximumSpeed});var x=!fe.empty(this.options.speed)&&this.options.speed.length>1;Ze.toggleMenuButton.call(this,c,x),Va(v),Ze.checkMenu.call(this),x&&(this.options.speed.forEach(function(M){Ze.createMenuItem.call(l,{value:M,list:v,type:c,title:Ze.getLabel.call(l,"speed",M)})}),Ze.updateSetting.call(this,c,v))}},checkMenu:function(){var l=this.elements.settings.buttons,c=!fe.empty(l)&&Object.values(l).some(function(v){return!v.hidden});Un(this.elements.settings.menu,!c)},focusFirstMenuItem:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.elements.settings.popup.hidden){var v=l;fe.element(v)||(v=Object.values(this.elements.settings.panels).find(function(M){return!M.hidden}));var x=v.querySelector('[role^="menuitem"]');yl.call(this,x,c)}},toggleMenu:function(l){var c=this.elements.settings.popup,v=this.elements.buttons.settings;if(!(!fe.element(c)||!fe.element(v))){var x=c.hidden,M=x;if(fe.boolean(l))M=l;else if(fe.keyboardEvent(l)&&l.which===27)M=!1;else if(fe.event(l)){var H=fe.function(l.composedPath)?l.composedPath()[0]:l.target,U=c.contains(H);if(U||!U&&l.target!==v&&M)return}v.setAttribute("aria-expanded",M),Un(c,!M),Ft(this.elements.container,this.config.classNames.menu.open,M),M&&fe.keyboardEvent(l)?Ze.focusFirstMenuItem.call(this,null,!0):!M&&!x&&yl.call(this,v,fe.keyboardEvent(l))}},getMenuSize:function(l){var c=l.cloneNode(!0);c.style.position="absolute",c.style.opacity=0,c.removeAttribute("hidden"),l.parentNode.appendChild(c);var v=c.scrollWidth,x=c.scrollHeight;return vn(c),{width:v,height:x}},showMenuPanel:function(){var l=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(c));if(!!fe.element(x)){var M=x.parentNode,H=Array.from(M.children).find(function(ee){return!ee.hidden});if(sr.transitions&&!sr.reducedMotion){M.style.width="".concat(H.scrollWidth,"px"),M.style.height="".concat(H.scrollHeight,"px");var U=Ze.getMenuSize.call(this,x),G=function ee(ie){ie.target!==M||!["width","height"].includes(ie.propertyName)||(M.style.width="",M.style.height="",Xa.call(l,M,vl,ee))};zt.call(this,M,vl,G),M.style.width="".concat(U.width,"px"),M.style.height="".concat(U.height,"px")}Un(H,!0),Un(x,!1),Ze.focusFirstMenuItem.call(this,x,v)}},setDownloadUrl:function(){var l=this.elements.buttons.download;!fe.element(l)||l.setAttribute("href",this.download)},create:function(l){var c=this,v=Ze.bindMenuItemShortcuts,x=Ze.createButton,M=Ze.createProgress,H=Ze.createRange,U=Ze.createTime,G=Ze.setQualityMenu,ee=Ze.setSpeedMenu,ie=Ze.showMenuPanel;this.elements.controls=null,fe.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(x.call(this,"play-large"));var J=vt("div",ln(this.config.selectors.controls.wrapper));this.elements.controls=J;var te={class:"plyr__controls__item"};return xl(fe.array(this.config.controls)?this.config.controls:[]).forEach(function(be){if(be==="restart"&&J.appendChild(x.call(c,"restart",te)),be==="rewind"&&J.appendChild(x.call(c,"rewind",te)),be==="play"&&J.appendChild(x.call(c,"play",te)),be==="fast-forward"&&J.appendChild(x.call(c,"fast-forward",te)),be==="progress"){var Oe=vt("div",{class:"".concat(te.class," plyr__progress__container")}),Ne=vt("div",ln(c.config.selectors.progress));if(Ne.appendChild(H.call(c,"seek",{id:"plyr-seek-".concat(l.id)})),Ne.appendChild(M.call(c,"buffer")),c.config.tooltips.seek){var Be=vt("span",{class:c.config.classNames.tooltip},"00:00");Ne.appendChild(Be),c.elements.display.seekTooltip=Be}c.elements.progress=Ne,Oe.appendChild(c.elements.progress),J.appendChild(Oe)}if(be==="current-time"&&J.appendChild(U.call(c,"currentTime",te)),be==="duration"&&J.appendChild(U.call(c,"duration",te)),be==="mute"||be==="volume"){var He=c.elements.volume;if((!fe.element(He)||!J.contains(He))&&(He=vt("div",dr({},te,{class:"".concat(te.class," plyr__volume").trim()})),c.elements.volume=He,J.appendChild(He)),be==="mute"&&He.appendChild(x.call(c,"mute")),be==="volume"&&!Cr.isIos){var rt={max:1,step:.05,value:c.config.volume};He.appendChild(H.call(c,"volume",dr(rt,{id:"plyr-volume-".concat(l.id)})))}}if(be==="captions"&&J.appendChild(x.call(c,"captions",te)),be==="settings"&&!fe.empty(c.config.settings)){var it=vt("div",dr({},te,{class:"".concat(te.class," plyr__menu").trim(),hidden:""}));it.appendChild(x.call(c,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(l.id),"aria-expanded":!1}));var et=vt("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(l.id),hidden:""}),dt=vt("div"),Ht=vt("div",{id:"plyr-settings-".concat(l.id,"-home")}),Tt=vt("div",{role:"menu"});Ht.appendChild(Tt),dt.appendChild(Ht),c.elements.settings.panels.home=Ht,c.config.settings.forEach(function(kr){var Tn=vt("button",dr(ln(c.config.selectors.buttons.settings),{type:"button",class:"".concat(c.config.classNames.control," ").concat(c.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));v.call(c,Tn,kr),zt.call(c,Tn,"click",function(){ie.call(c,kr,!1)});var ra=vt("span",null,wr.get(kr,c.config)),Lf=vt("span",{class:c.config.classNames.menu.value});Lf.innerHTML=l[kr],ra.appendChild(Lf),Tn.appendChild(ra),Tt.appendChild(Tn);var na=vt("div",{id:"plyr-settings-".concat(l.id,"-").concat(kr),hidden:""}),eo=vt("button",{type:"button",class:"".concat(c.config.classNames.control," ").concat(c.config.classNames.control,"--back")});eo.appendChild(vt("span",{"aria-hidden":!0},wr.get(kr,c.config))),eo.appendChild(vt("span",{class:c.config.classNames.hidden},wr.get("menuBack",c.config))),zt.call(c,na,"keydown",function(Nl){Nl.which===37&&(Nl.preventDefault(),Nl.stopPropagation(),ie.call(c,"home",!0))},!1),zt.call(c,eo,"click",function(){ie.call(c,"home",!1)}),na.appendChild(eo),na.appendChild(vt("div",{role:"menu"})),dt.appendChild(na),c.elements.settings.buttons[kr]=Tn,c.elements.settings.panels[kr]=na}),et.appendChild(dt),it.appendChild(et),J.appendChild(it),c.elements.settings.popup=et,c.elements.settings.menu=it}if(be==="pip"&&sr.pip&&J.appendChild(x.call(c,"pip",te)),be==="airplay"&&sr.airplay&&J.appendChild(x.call(c,"airplay",te)),be==="download"){var Br=dr({},te,{element:"a",href:c.download,target:"_blank"});c.isHTML5&&(Br.download="");var Kr=c.config.urls.download;!fe.url(Kr)&&c.isEmbed&&dr(Br,{icon:"logo-".concat(c.provider),label:c.provider}),J.appendChild(x.call(c,"download",Br))}be==="fullscreen"&&J.appendChild(x.call(c,"fullscreen",te))}),this.isHTML5&&G.call(this,qn.getQualityOptions.call(this)),ee.call(this),J},inject:function(){var l=this;if(this.config.loadSprite){var c=Ze.getIconUrl.call(this);c.cors&&kf(c.url,"sprite-plyr")}this.id=Math.floor(Math.random()*1e4);var v=null;this.elements.controls=null;var x={id:this.id,seektime:this.config.seekTime,title:this.config.title},M=!0;fe.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,x)),this.config.controls||(this.config.controls=[]),fe.element(this.config.controls)||fe.string(this.config.controls)?v=this.config.controls:(v=Ze.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Ut.getLabel.call(this)}),M=!1);var H=function(Be){var He=Be;return Object.entries(x).forEach(function(rt){var it=yr(rt,2),et=it[0],dt=it[1];He=Zi(He,"{".concat(et,"}"),dt)}),He};M&&fe.string(this.config.controls)&&(v=H(v));var U;fe.string(this.config.selectors.controls.container)&&(U=document.querySelector(this.config.selectors.controls.container)),fe.element(U)||(U=this.elements.container);var G=fe.element(v)?"insertAdjacentElement":"insertAdjacentHTML";if(U[G]("afterbegin",v),fe.element(this.elements.controls)||Ze.findElements.call(this),!fe.empty(this.elements.buttons)){var ee=function(Be){var He=l.config.classNames.controlPressed;Object.defineProperty(Be,"pressed",{enumerable:!0,get:function(){return Ya(Be,He)},set:function(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ft(Be,He,it)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(function(Ne){fe.array(Ne)||fe.nodeList(Ne)?Array.from(Ne).filter(Boolean).forEach(ee):ee(Ne)})}if(Cr.isEdge&&cf(U),this.config.tooltips.controls){var ie=this.config,J=ie.classNames,te=ie.selectors,be="".concat(te.controls.wrapper," ").concat(te.labels," .").concat(J.hidden),Oe=vi.call(this,be);Array.from(Oe).forEach(function(Ne){Ft(Ne,l.config.classNames.hidden,!1),Ft(Ne,l.config.classNames.tooltip,!0)})}}};function Cf(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=p;if(l){var v=document.createElement("a");v.href=c,c=v.href}try{return new URL(c)}catch(x){return null}}function Sf(p){var l=new URLSearchParams;return fe.object(p)&&Object.entries(p).forEach(function(c){var v=yr(c,2),x=v[0],M=v[1];l.set(x,M)}),l}var Ut={setup:function(){if(!!this.supported.ui){if(!this.isVideo||this.isYouTube||this.isHTML5&&!sr.textTracks){fe.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ze.setCaptionsMenu.call(this);return}if(fe.element(this.elements.captions)||(this.elements.captions=vt("div",ln(this.config.selectors.captions)),Mv(this.elements.captions,this.elements.wrapper)),Cr.isIE&&window.URL){var l=this.media.querySelectorAll("track");Array.from(l).forEach(function(G){var ee=G.getAttribute("src"),ie=Cf(ee);ie!==null&&ie.hostname!==window.location.href.hostname&&["http:","https:"].includes(ie.protocol)&&Qi(ee,"blob").then(function(J){G.setAttribute("src",window.URL.createObjectURL(J))}).catch(function(){vn(G)})})}var c=navigator.languages||[navigator.language||navigator.userLanguage||"en"],v=xl(c.map(function(G){return G.split("-")[0]})),x=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();if(x==="auto"){var M=yr(v,1);x=M[0]}var H=this.storage.get("captions");if(fe.boolean(H)||(H=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:H,language:x,languages:v}),this.isHTML5){var U=this.config.captions.update?"addtrack removetrack":"removetrack";zt.call(this,this.media.textTracks,U,Ut.update.bind(this))}setTimeout(Ut.update.bind(this),0)}},update:function(){var l=this,c=Ut.getTracks.call(this,!0),v=this.captions,x=v.active,M=v.language,H=v.meta,U=v.currentTrackNode,G=Boolean(c.find(function(ee){return ee.language===M}));this.isHTML5&&this.isVideo&&c.filter(function(ee){return!H.get(ee)}).forEach(function(ee){l.debug.log("Track added",ee),H.set(ee,{default:ee.mode==="showing"}),ee.mode==="showing"&&(ee.mode="hidden"),zt.call(l,ee,"cuechange",function(){return Ut.updateCues.call(l)})}),(G&&this.language!==M||!c.includes(U))&&(Ut.setLanguage.call(this,M),Ut.toggle.call(this,x&&G)),Ft(this.elements.container,this.config.classNames.captions.enabled,!fe.empty(c)),fe.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ze.setCaptionsMenu.call(this)},toggle:function(l){var c=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!!this.supported.ui){var x=this.captions.toggled,M=this.config.classNames.captions.active,H=fe.nullOrUndefined(l)?!x:l;if(H!==x){if(v||(this.captions.active=H,this.storage.set({captions:H})),!this.language&&H&&!v){var U=Ut.getTracks.call(this),G=Ut.findTrack.call(this,[this.captions.language].concat(zs(this.captions.languages)),!0);this.captions.language=G.language,Ut.set.call(this,U.indexOf(G));return}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=H),Ft(this.elements.container,M,H),this.captions.toggled=H,Ze.updateSetting.call(this,"captions"),gt.call(this,this.media,H?"captionsenabled":"captionsdisabled")}setTimeout(function(){H&&c.captions.toggled&&(c.captions.currentTrackNode.mode="hidden")})}},set:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,v=Ut.getTracks.call(this);if(l===-1){Ut.toggle.call(this,!1,c);return}if(!fe.number(l)){this.debug.warn("Invalid caption argument",l);return}if(!(l in v)){this.debug.warn("Track not found",l);return}if(this.captions.currentTrack!==l){this.captions.currentTrack=l;var x=v[l],M=x||{},H=M.language;this.captions.currentTrackNode=x,Ze.updateSetting.call(this,"captions"),c||(this.captions.language=H,this.storage.set({language:H})),this.isVimeo&&this.embed.enableTextTrack(H),gt.call(this,this.media,"languagechange")}Ut.toggle.call(this,!0,c),this.isHTML5&&this.isVideo&&Ut.updateCues.call(this)},setLanguage:function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!fe.string(l)){this.debug.warn("Invalid language argument",l);return}var v=l.toLowerCase();this.captions.language=v;var x=Ut.getTracks.call(this),M=Ut.findTrack.call(this,[v]);Ut.set.call(this,x.indexOf(M),c)},getTracks:function(){var l=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=Array.from((this.media||{}).textTracks||[]);return v.filter(function(x){return!l.isHTML5||c||l.captions.meta.has(x)}).filter(function(x){return["captions","subtitles"].includes(x.kind)})},findTrack:function(l){var c=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=Ut.getTracks.call(this),M=function(ee){return Number((c.captions.meta.get(ee)||{}).default)},H=Array.from(x).sort(function(G,ee){return M(ee)-M(G)}),U;return l.every(function(G){return U=H.find(function(ee){return ee.language===G}),!U}),U||(v?H[0]:void 0)},getCurrentTrack:function(){return Ut.getTracks.call(this)[this.currentTrack]},getLabel:function(l){var c=l;return!fe.track(c)&&sr.textTracks&&this.captions.toggled&&(c=Ut.getCurrentTrack.call(this)),fe.track(c)?fe.empty(c.label)?fe.empty(c.language)?wr.get("enabled",this.config):l.language.toUpperCase():c.label:wr.get("disabled",this.config)},updateCues:function(l){if(!!this.supported.ui){if(!fe.element(this.elements.captions)){this.debug.warn("No captions element to render to");return}if(!fe.nullOrUndefined(l)&&!Array.isArray(l)){this.debug.warn("updateCues: Invalid input",l);return}var c=l;if(!c){var v=Ut.getCurrentTrack.call(this);c=Array.from((v||{}).activeCues||[]).map(function(U){return U.getCueAsHTML()}).map(Zv)}var x=c.map(function(U){return U.trim()}).join(`
`),M=x!==this.elements.captions.innerHTML;if(M){Va(this.elements.captions);var H=vt("span",ln(this.config.selectors.caption));H.innerHTML=x,this.elements.captions.appendChild(H),gt.call(this,this.media,"cuechange")}}}},Tf={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,premium:!1,referrerPolicy:null},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},$l={active:"picture-in-picture",inactive:"inline"},Sn={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ol={audio:"audio",video:"video"};function nb(p){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(p)?Sn.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(p)?Sn.vimeo:null}var Il=function(){},ib=function(){function p(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Dn(this,p),this.enabled=window.console&&l,this.enabled&&this.log("Debugging enabled")}return Bn(p,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Il}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Il}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Il}}]),p}(),ab=function(){function p(l){var c=this;Dn(this,p),this.player=l,this.prefix=p.prefix,this.property=p.property,this.scrollPosition={x:0,y:0},this.forceFallback=l.config.fullscreen.fallback==="force",this.player.elements.fullscreen=l.config.fullscreen.container&&Nv(this.player.elements.container,l.config.fullscreen.container),zt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),function(){c.onChange()}),zt.call(this.player,this.player.elements.container,"dblclick",function(v){fe.element(c.player.elements.controls)&&c.player.elements.controls.contains(v.target)||c.toggle()}),zt.call(this,this.player.elements.container,"keydown",function(v){return c.trapFocus(v)}),this.update()}return Bn(p,[{key:"onChange",value:function(){if(!!this.enabled){var c=this.player.elements.buttons.fullscreen;fe.element(c)&&(c.pressed=this.active),gt.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(c?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=c?"hidden":"",Ft(this.target,this.player.config.classNames.fullscreen.fallback,c),Cr.isIos){var v=document.head.querySelector('meta[name="viewport"]'),x="viewport-fit=cover";v||(v=document.createElement("meta"),v.setAttribute("name","viewport"));var M=fe.string(v.content)&&v.content.includes(x);c?(this.cleanupViewport=!M,M||(v.content+=",".concat(x))):this.cleanupViewport&&(v.content=v.content.split(",").filter(function(H){return H.trim()!==x}).join(","))}this.onChange()}},{key:"trapFocus",value:function(c){if(!(Cr.isIos||!this.active||c.key!=="Tab"||c.keyCode!==9)){var v=document.activeElement,x=vi.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),M=yr(x,1),H=M[0],U=x[x.length-1];v===U&&!c.shiftKey?(H.focus(),c.preventDefault()):v===H&&c.shiftKey&&(U.focus(),c.preventDefault())}}},{key:"update",value:function(){if(this.enabled){var c;this.forceFallback?c="Fallback (forced)":p.native?c="Native":c="Fallback",this.player.debug.log("".concat(c," fullscreen enabled"))}else this.player.debug.log("Fullscreen not supported and fallback disabled");Ft(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){!this.enabled||(Cr.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!p.native||this.forceFallback?this.toggleFallback(!0):this.prefix?fe.empty(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(!!this.enabled){if(Cr.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),cn(this.player.play());else if(!p.native||this.forceFallback)this.toggleFallback(!1);else if(!this.prefix)(document.cancelFullScreen||document.exitFullscreen).call(document);else if(!fe.empty(this.prefix)){var c=this.prefix==="moz"?"Cancel":"Exit";document["".concat(this.prefix).concat(c).concat(this.property)]()}}}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return p.native&&!this.forceFallback}},{key:"enabled",get:function(){return(p.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!p.native||this.forceFallback)return Ya(this.target,this.player.config.classNames.fullscreen.fallback);var c=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return c&&c.shadowRoot?c===this.target.getRootNode().host:c===this.target}},{key:"target",get:function(){return Cr.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(fe.function(document.exitFullscreen))return"";var c="",v=["webkit","moz","ms"];return v.some(function(x){return fe.function(document["".concat(x,"ExitFullscreen")])||fe.function(document["".concat(x,"CancelFullScreen")])?(c=x,!0):!1}),c}},{key:"property",get:function(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}}]),p}(),ob=Math.sign||function(l){return(l=+l)==0||l!=l?l:l<0?-1:1};tt({target:"Math",stat:!0},{sign:ob});function Ja(p){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return new Promise(function(c,v){var x=new Image,M=function(){delete x.onload,delete x.onerror,(x.naturalWidth>=l?c:v)(x)};Object.assign(x,{onload:M,onerror:M,src:p})})}var Jt={addStyleHook:function(){Ft(this.elements.container,this.config.selectors.container.replace(".",""),!0),Ft(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;l&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var l=this;if(this.listeners.media(),!this.supported.ui){this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),Jt.toggleNativeControls.call(this,!0);return}fe.element(this.elements.controls)||(Ze.inject.call(this),this.listeners.controls()),Jt.toggleNativeControls.call(this),this.isHTML5&&Ut.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Ze.updateVolume.call(this),Ze.timeUpdate.call(this),Jt.checkPlaying.call(this),Ft(this.elements.container,this.config.classNames.pip.supported,sr.pip&&this.isHTML5&&this.isVideo),Ft(this.elements.container,this.config.classNames.airplay.supported,sr.airplay&&this.isHTML5),Ft(this.elements.container,this.config.classNames.isIos,Cr.isIos),Ft(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(function(){gt.call(l,l.media,"ready")},0),Jt.setTitle.call(this),this.poster&&Jt.setPoster.call(this,this.poster,!1).catch(function(){}),this.config.duration&&Ze.durationUpdate.call(this)},setTitle:function(){var l=wr.get("play",this.config);if(fe.string(this.config.title)&&!fe.empty(this.config.title)&&(l+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(function(M){M.setAttribute("aria-label",l)}),this.isEmbed){var c=pr.call(this,"iframe");if(!fe.element(c))return;var v=fe.empty(this.config.title)?"video":this.config.title,x=wr.get("frameTitle",this.config);c.setAttribute("title",x.replace("{title}",v))}},togglePoster:function(l){Ft(this.elements.container,this.config.classNames.posterEnabled,l)},setPoster:function(l){var c=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return v&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",l),jv.call(this).then(function(){return Ja(l)}).catch(function(x){throw l===c.poster&&Jt.togglePoster.call(c,!1),x}).then(function(){if(l!==c.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(function(){return Object.assign(c.elements.poster.style,{backgroundImage:"url('".concat(l,"')"),backgroundSize:""}),Jt.togglePoster.call(c,!0),l}))},checkPlaying:function(l){var c=this;Ft(this.elements.container,this.config.classNames.playing,this.playing),Ft(this.elements.container,this.config.classNames.paused,this.paused),Ft(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(function(v){Object.assign(v,{pressed:c.playing}),v.setAttribute("aria-label",wr.get(c.playing?"pause":"play",c.config))}),!(fe.event(l)&&l.type==="timeupdate")&&Jt.toggleControls.call(this)},checkLoading:function(l){var c=this;this.loading=["stalled","waiting"].includes(l.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){Ft(c.elements.container,c.config.classNames.loading,c.loading),Jt.toggleControls.call(c)},this.loading?250:0)},toggleControls:function(l){var c=this.elements.controls;if(c&&this.config.hideControls){var v=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(l||this.loading||this.paused||c.pressed||c.hover||v))}},migrateStyles:function(){var l=this;Object.values(di({},this.media.style)).filter(function(c){return!fe.empty(c)&&c.startsWith("--plyr")}).forEach(function(c){l.elements.container.style.setProperty(c,l.media.style.getPropertyValue(c)),l.media.style.removeProperty(c)}),fe.empty(this.media.style)&&this.media.removeAttribute("style")}},sb=function(){function p(l){Dn(this,p),this.player=l,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return Bn(p,[{key:"handleKey",value:function(c){var v=this.player,x=v.elements,M=c.keyCode?c.keyCode:c.which,H=c.type==="keydown",U=H&&M===this.lastKey;if(!(c.altKey||c.ctrlKey||c.metaKey||c.shiftKey)&&!!fe.number(M)){var G=function(){v.currentTime=v.duration/10*(M-48)};if(H){var ee=document.activeElement;if(fe.element(ee)){var ie=v.config.selectors.editable,J=x.inputs.seek;if(ee!==J&&Wn(ee,ie)||c.which===32&&Wn(ee,'button, [role^="menuitem"]'))return}var te=[32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79];switch(te.includes(M)&&(c.preventDefault(),c.stopPropagation()),M){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:U||G();break;case 32:case 75:U||cn(v.togglePlay());break;case 38:v.increaseVolume(.1);break;case 40:v.decreaseVolume(.1);break;case 77:U||(v.muted=!v.muted);break;case 39:v.forward();break;case 37:v.rewind();break;case 70:v.fullscreen.toggle();break;case 67:U||v.toggleCaptions();break;case 76:v.loop=!v.loop;break}M===27&&!v.fullscreen.usingNative&&v.fullscreen.active&&v.fullscreen.toggle(),this.lastKey=M}else this.lastKey=null}}},{key:"toggleMenu",value:function(c){Ze.toggleMenu.call(this.player,c)}},{key:"firstTouch",value:function(){var c=this.player,v=c.elements;c.touch=!0,Ft(v.container,c.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(c){var v=this.player,x=v.elements;if(clearTimeout(this.focusTimer),!(c.type==="keydown"&&c.which!==9)){c.type==="keydown"&&(this.lastKeyDown=c.timeStamp);var M=function(){var G=v.config.classNames.tabFocus,ee=vi.call(v,".".concat(G));Ft(ee,G,!1)},H=c.timeStamp-this.lastKeyDown<=20;c.type==="focus"&&!H||(M(),c.type!=="focusout"&&(this.focusTimer=setTimeout(function(){var U=document.activeElement;!x.container.contains(U)||Ft(document.activeElement,v.config.classNames.tabFocus,!0)},10)))}}},{key:"global",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=this.player;v.config.keyboard.global&&bi.call(v,window,"keydown keyup",this.handleKey,c,!1),bi.call(v,document.body,"click",this.toggleMenu,c),wl.call(v,document.body,"touchstart",this.firstTouch),bi.call(v,document.body,"keydown focus blur focusout",this.setTabFocus,c,!1,!0)}},{key:"container",value:function(){var c=this.player,v=c.config,x=c.elements,M=c.timers;!v.keyboard.global&&v.keyboard.focused&&zt.call(c,x.container,"keydown keyup",this.handleKey,!1),zt.call(c,x.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",function(ee){var ie=x.controls;ie&&ee.type==="enterfullscreen"&&(ie.pressed=!1,ie.hover=!1);var J=["touchstart","touchmove","mousemove"].includes(ee.type),te=0;J&&(Jt.toggleControls.call(c,!0),te=c.touch?3e3:2e3),clearTimeout(M.controls),M.controls=setTimeout(function(){return Jt.toggleControls.call(c,!1)},te)});var H=function(ie,J,te){if(!(!c.isVimeo||c.config.vimeo.premium)){var be=c.elements.wrapper.firstChild,Oe=yr(ie,2),Ne=Oe[1],Be=kl.call(c),He=yr(Be,2),rt=He[0],it=He[1];be.style.maxWidth=te?"".concat(Ne/it*rt,"px"):null,be.style.margin=te?"0 auto":null}},U=function(ie){if(!ie)return Cn.call(c);var J=x.container.getBoundingClientRect(),te=J.width,be=J.height;return Cn.call(c,"".concat(te,":").concat(be))},G=function(){clearTimeout(M.resized),M.resized=setTimeout(U,50)};zt.call(c,x.container,"enterfullscreen exitfullscreen",function(ee){var ie=c.fullscreen,J=ie.target,te=ie.usingNative;if(J===x.container&&!(!c.isEmbed&&fe.empty(c.config.ratio))){var be=ee.type==="enterfullscreen",Oe=U(be),Ne=Oe.padding,Be=Oe.ratio;H(Be,Ne,be),te||(be?zt.call(c,window,"resize",G):Xa.call(c,window,"resize",G))}})}},{key:"media",value:function(){var c=this,v=this.player,x=v.elements;if(zt.call(v,v.media,"timeupdate seeking seeked",function(U){return Ze.timeUpdate.call(v,U)}),zt.call(v,v.media,"durationchange loadeddata loadedmetadata",function(U){return Ze.durationUpdate.call(v,U)}),zt.call(v,v.media,"ended",function(){v.isHTML5&&v.isVideo&&v.config.resetOnEnd&&(v.restart(),v.pause())}),zt.call(v,v.media,"progress playing seeking seeked",function(U){return Ze.updateProgress.call(v,U)}),zt.call(v,v.media,"volumechange",function(U){return Ze.updateVolume.call(v,U)}),zt.call(v,v.media,"playing play pause ended emptied timeupdate",function(U){return Jt.checkPlaying.call(v,U)}),zt.call(v,v.media,"waiting canplay seeked playing",function(U){return Jt.checkLoading.call(v,U)}),v.supported.ui&&v.config.clickToPlay&&!v.isAudio){var M=pr.call(v,".".concat(v.config.classNames.video));if(!fe.element(M))return;zt.call(v,x.container,"click",function(U){var G=[x.container,M];!G.includes(U.target)&&!M.contains(U.target)||v.touch&&v.config.hideControls||(v.ended?(c.proxy(U,v.restart,"restart"),c.proxy(U,function(){cn(v.play())},"play")):c.proxy(U,function(){cn(v.togglePlay())},"play"))})}v.supported.ui&&v.config.disableContextMenu&&zt.call(v,x.wrapper,"contextmenu",function(U){U.preventDefault()},!1),zt.call(v,v.media,"volumechange",function(){v.storage.set({volume:v.volume,muted:v.muted})}),zt.call(v,v.media,"ratechange",function(){Ze.updateSetting.call(v,"speed"),v.storage.set({speed:v.speed})}),zt.call(v,v.media,"qualitychange",function(U){Ze.updateSetting.call(v,"quality",null,U.detail.quality)}),zt.call(v,v.media,"ready qualitychange",function(){Ze.setDownloadUrl.call(v)});var H=v.config.events.concat(["keyup","keydown"]).join(" ");zt.call(v,v.media,H,function(U){var G=U.detail,ee=G===void 0?{}:G;U.type==="error"&&(ee=v.media.error),gt.call(v,x.container,U.type,!0,ee)})}},{key:"proxy",value:function(c,v,x){var M=this.player,H=M.config.listeners[x],U=fe.function(H),G=!0;U&&(G=H.call(M,c)),G!==!1&&fe.function(v)&&v.call(M,c)}},{key:"bind",value:function(c,v,x,M){var H=this,U=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,G=this.player,ee=G.config.listeners[M],ie=fe.function(ee);zt.call(G,c,v,function(J){return H.proxy(J,x,M)},U&&!ie)}},{key:"controls",value:function(){var c=this,v=this.player,x=v.elements,M=Cr.isIE?"change":"input";if(x.buttons.play&&Array.from(x.buttons.play).forEach(function(U){c.bind(U,"click",function(){cn(v.togglePlay())},"play")}),this.bind(x.buttons.restart,"click",v.restart,"restart"),this.bind(x.buttons.rewind,"click",v.rewind,"rewind"),this.bind(x.buttons.fastForward,"click",v.forward,"fastForward"),this.bind(x.buttons.mute,"click",function(){v.muted=!v.muted},"mute"),this.bind(x.buttons.captions,"click",function(){return v.toggleCaptions()}),this.bind(x.buttons.download,"click",function(){gt.call(v,v.media,"download")},"download"),this.bind(x.buttons.fullscreen,"click",function(){v.fullscreen.toggle()},"fullscreen"),this.bind(x.buttons.pip,"click",function(){v.pip="toggle"},"pip"),this.bind(x.buttons.airplay,"click",v.airplay,"airplay"),this.bind(x.buttons.settings,"click",function(U){U.stopPropagation(),U.preventDefault(),Ze.toggleMenu.call(v,U)},null,!1),this.bind(x.buttons.settings,"keyup",function(U){var G=U.which;if(!![13,32].includes(G)){if(G===13){Ze.focusFirstMenuItem.call(v,null,!0);return}U.preventDefault(),U.stopPropagation(),Ze.toggleMenu.call(v,U)}},null,!1),this.bind(x.settings.menu,"keydown",function(U){U.which===27&&Ze.toggleMenu.call(v,U)}),this.bind(x.inputs.seek,"mousedown mousemove",function(U){var G=x.progress.getBoundingClientRect(),ee=100/G.width*(U.pageX-G.left);U.currentTarget.setAttribute("seek-value",ee)}),this.bind(x.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",function(U){var G=U.currentTarget,ee=U.keyCode?U.keyCode:U.which,ie="play-on-seeked";if(!(fe.keyboardEvent(U)&&ee!==39&&ee!==37)){v.lastSeekTime=Date.now();var J=G.hasAttribute(ie),te=["mouseup","touchend","keyup"].includes(U.type);J&&te?(G.removeAttribute(ie),cn(v.play())):!te&&v.playing&&(G.setAttribute(ie,""),v.pause())}}),Cr.isIos){var H=vi.call(v,'input[type="range"]');Array.from(H).forEach(function(U){return c.bind(U,M,function(G){return cf(G.target)})})}this.bind(x.inputs.seek,M,function(U){var G=U.currentTarget,ee=G.getAttribute("seek-value");fe.empty(ee)&&(ee=G.value),G.removeAttribute("seek-value"),v.currentTime=ee/G.max*v.duration},"seek"),this.bind(x.progress,"mouseenter mouseleave mousemove",function(U){return Ze.updateSeekTooltip.call(v,U)}),this.bind(x.progress,"mousemove touchmove",function(U){var G=v.previewThumbnails;G&&G.loaded&&G.startMove(U)}),this.bind(x.progress,"mouseleave touchend click",function(){var U=v.previewThumbnails;U&&U.loaded&&U.endMove(!1,!0)}),this.bind(x.progress,"mousedown touchstart",function(U){var G=v.previewThumbnails;G&&G.loaded&&G.startScrubbing(U)}),this.bind(x.progress,"mouseup touchend",function(U){var G=v.previewThumbnails;G&&G.loaded&&G.endScrubbing(U)}),Cr.isWebkit&&Array.from(vi.call(v,'input[type="range"]')).forEach(function(U){c.bind(U,"input",function(G){return Ze.updateRangeFill.call(v,G.target)})}),v.config.toggleInvert&&!fe.element(x.display.duration)&&this.bind(x.display.currentTime,"click",function(){v.currentTime!==0&&(v.config.invertTime=!v.config.invertTime,Ze.timeUpdate.call(v))}),this.bind(x.inputs.volume,M,function(U){v.volume=U.target.value},"volume"),this.bind(x.controls,"mouseenter mouseleave",function(U){x.controls.hover=!v.touch&&U.type==="mouseenter"}),x.fullscreen&&Array.from(x.fullscreen.children).filter(function(U){return!U.contains(x.container)}).forEach(function(U){c.bind(U,"mouseenter mouseleave",function(G){x.controls.hover=!v.touch&&G.type==="mouseenter"})}),this.bind(x.controls,"mousedown mouseup touchstart touchend touchcancel",function(U){x.controls.pressed=["mousedown","touchstart"].includes(U.type)}),this.bind(x.controls,"focusin",function(){var U=v.config,G=v.timers;Ft(x.controls,U.classNames.noTransition,!0),Jt.toggleControls.call(v,!0),setTimeout(function(){Ft(x.controls,U.classNames.noTransition,!1)},0);var ee=c.touch?3e3:4e3;clearTimeout(G.controls),G.controls=setTimeout(function(){return Jt.toggleControls.call(v,!1)},ee)}),this.bind(x.inputs.volume,"wheel",function(U){var G=U.webkitDirectionInvertedFromDevice,ee=[U.deltaX,-U.deltaY].map(function(Ne){return G?-Ne:Ne}),ie=yr(ee,2),J=ie[0],te=ie[1],be=Math.sign(Math.abs(J)>Math.abs(te)?J:te);v.increaseVolume(be/50);var Oe=v.media.volume;(be===1&&Oe<1||be===-1&&Oe>0)&&U.preventDefault()},"volume",!1)}}]),p}(),lb=Li("splice"),cb=qr("splice",{ACCESSORS:!0,0:0,1:2}),ub=Math.max,db=Math.min,fb=9007199254740991,pb="Maximum allowed length exceeded";tt({target:"Array",proto:!0,forced:!lb||!cb},{splice:function(l,c){var v=ot(this),x=Gt(v.length),M=St(l,x),H=arguments.length,U,G,ee,ie,J,te;if(H===0?U=G=0:H===1?(U=0,G=x-M):(U=H-2,G=db(ub(Nt(c),0),x-M)),x+U-G>fb)throw TypeError(pb);for(ee=Re(v,G),ie=0;ie<G;ie++)J=M+ie,J in v&&Pn(ee,ie,v[J]);if(ee.length=G,U<G){for(ie=M;ie<x-G;ie++)J=ie+G,te=ie+U,J in v?v[te]=v[J]:delete v[te];for(ie=x;ie>x-G+U;ie--)delete v[ie-1]}else if(U>G)for(ie=x-G;ie>M;ie--)J=ie+G-1,te=ie+U-1,J in v?v[te]=v[J]:delete v[te];for(ie=0;ie<U;ie++)v[ie+M]=arguments[ie+2];return v.length=x-G+U,ee}});var hb=t(function(p,l){(function(c,v){p.exports=v()})(r,function(){var c=function(){},v={},x={},M={};function H(te,be){te=te.push?te:[te];var Oe=[],Ne=te.length,Be=Ne,He,rt,it,et;for(He=function(Ht,Tt){Tt.length&&Oe.push(Ht),Be--,Be||be(Oe)};Ne--;){if(rt=te[Ne],it=x[rt],it){He(rt,it);continue}et=M[rt]=M[rt]||[],et.push(He)}}function U(te,be){if(!!te){var Oe=M[te];if(x[te]=be,!!Oe)for(;Oe.length;)Oe[0](te,be),Oe.splice(0,1)}}function G(te,be){te.call&&(te={success:te}),be.length?(te.error||c)(be):(te.success||c)(te)}function ee(te,be,Oe,Ne){var Be=document,He=Oe.async,rt=(Oe.numRetries||0)+1,it=Oe.before||c,et=te.replace(/[\?|#].*$/,""),dt=te.replace(/^(css|img)!/,""),Ht,Tt;Ne=Ne||0,/(^css!|\.css$)/.test(et)?(Tt=Be.createElement("link"),Tt.rel="stylesheet",Tt.href=dt,Ht="hideFocus"in Tt,Ht&&Tt.relList&&(Ht=0,Tt.rel="preload",Tt.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(et)?(Tt=Be.createElement("img"),Tt.src=dt):(Tt=Be.createElement("script"),Tt.src=te,Tt.async=He===void 0?!0:He),Tt.onload=Tt.onerror=Tt.onbeforeload=function(Br){var Kr=Br.type[0];if(Ht)try{Tt.sheet.cssText.length||(Kr="e")}catch(kr){kr.code!=18&&(Kr="e")}if(Kr=="e"){if(Ne+=1,Ne<rt)return ee(te,be,Oe,Ne)}else if(Tt.rel=="preload"&&Tt.as=="style")return Tt.rel="stylesheet";be(te,Kr,Br.defaultPrevented)},it(te,Tt)!==!1&&Be.head.appendChild(Tt)}function ie(te,be,Oe){te=te.push?te:[te];var Ne=te.length,Be=Ne,He=[],rt,it;for(rt=function(dt,Ht,Tt){if(Ht=="e"&&He.push(dt),Ht=="b")if(Tt)He.push(dt);else return;Ne--,Ne||be(He)},it=0;it<Be;it++)ee(te[it],rt,Oe)}function J(te,be,Oe){var Ne,Be;if(be&&be.trim&&(Ne=be),Be=(Ne?Oe:be)||{},Ne){if(Ne in v)throw"LoadJS";v[Ne]=!0}function He(rt,it){ie(te,function(et){G(Be,et),rt&&G({success:rt,error:it},et),U(Ne,et)},Be)}if(Be.returnPromise)return new Promise(He);He()}return J.ready=function(be,Oe){return H(be,function(Ne){G(Oe,Ne)}),J},J.done=function(be){U(be,[])},J.reset=function(){v={},x={},M={}},J.isDefined=function(be){return be in v},J})});function Pl(p){return new Promise(function(l,c){hb(p,{success:l,error:c})})}function mb(p){if(fe.empty(p))return null;if(fe.number(Number(p)))return p;var l=/^.*(vimeo.com\/|video\/)(\d+).*/;return p.match(l)?RegExp.$2:p}function ea(p){p&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===p&&(this.media.paused=!p,gt.call(this,this.media,p?"play":"pause"))}var Rl={setup:function(){var l=this;Ft(l.elements.wrapper,l.config.classNames.embed,!0),l.options.speed=l.config.speed.options,Cn.call(l),fe.object(window.Vimeo)?Rl.ready.call(l):Pl(l.config.urls.vimeo.sdk).then(function(){Rl.ready.call(l)}).catch(function(c){l.debug.warn("Vimeo SDK (player.js) failed to load",c)})},ready:function(){var l=this,c=this,v=c.config.vimeo,x=v.premium,M=v.referrerPolicy,H=jg(v,["premium","referrerPolicy"]);x&&Object.assign(H,{controls:!1,sidedock:!1});var U=Sf(di({loop:c.config.loop.active,autoplay:c.autoplay,muted:c.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},H)),G=c.media.getAttribute("src");fe.empty(G)&&(G=c.media.getAttribute(c.config.attributes.embed.id));var ee=mb(G),ie=vt("iframe"),J=Al(c.config.urls.vimeo.iframe,ee,U);ie.setAttribute("src",J),ie.setAttribute("allowfullscreen",""),ie.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),fe.empty(M)||ie.setAttribute("referrerPolicy",M);var te=c.poster;if(x)ie.setAttribute("data-poster",te),c.media=Ga(ie,c.media);else{var be=vt("div",{class:c.config.classNames.embedContainer,"data-poster":te});be.appendChild(ie),c.media=Ga(be,c.media)}Qi(Al(c.config.urls.vimeo.api,ee),"json").then(function(et){if(!fe.empty(et)){var dt=new URL(et[0].thumbnail_large);dt.pathname="".concat(dt.pathname.split("_")[0],".jpg"),Jt.setPoster.call(c,dt.href).catch(function(){})}}),c.embed=new window.Vimeo.Player(ie,{autopause:c.config.autopause,muted:c.muted}),c.media.paused=!0,c.media.currentTime=0,c.supported.ui&&c.embed.disableTextTrack(),c.media.play=function(){return ea.call(c,!0),c.embed.play()},c.media.pause=function(){return ea.call(c,!1),c.embed.pause()},c.media.stop=function(){c.pause(),c.currentTime=0};var Oe=c.media.currentTime;Object.defineProperty(c.media,"currentTime",{get:function(){return Oe},set:function(dt){var Ht=c.embed,Tt=c.media,Br=c.paused,Kr=c.volume,kr=Br&&!Ht.hasPlayed;Tt.seeking=!0,gt.call(c,Tt,"seeking"),Promise.resolve(kr&&Ht.setVolume(0)).then(function(){return Ht.setCurrentTime(dt)}).then(function(){return kr&&Ht.pause()}).then(function(){return kr&&Ht.setVolume(Kr)}).catch(function(){})}});var Ne=c.config.speed.selected;Object.defineProperty(c.media,"playbackRate",{get:function(){return Ne},set:function(dt){c.embed.setPlaybackRate(dt).then(function(){Ne=dt,gt.call(c,c.media,"ratechange")}).catch(function(){c.options.speed=[1]})}});var Be=c.config.volume;Object.defineProperty(c.media,"volume",{get:function(){return Be},set:function(dt){c.embed.setVolume(dt).then(function(){Be=dt,gt.call(c,c.media,"volumechange")})}});var He=c.config.muted;Object.defineProperty(c.media,"muted",{get:function(){return He},set:function(dt){var Ht=fe.boolean(dt)?dt:!1;c.embed.setVolume(Ht?0:c.config.volume).then(function(){He=Ht,gt.call(c,c.media,"volumechange")})}});var rt=c.config.loop;Object.defineProperty(c.media,"loop",{get:function(){return rt},set:function(dt){var Ht=fe.boolean(dt)?dt:c.config.loop.active;c.embed.setLoop(Ht).then(function(){rt=Ht})}});var it;c.embed.getVideoUrl().then(function(et){it=et,Ze.setDownloadUrl.call(c)}).catch(function(et){l.debug.warn(et)}),Object.defineProperty(c.media,"currentSrc",{get:function(){return it}}),Object.defineProperty(c.media,"ended",{get:function(){return c.currentTime===c.duration}}),Promise.all([c.embed.getVideoWidth(),c.embed.getVideoHeight()]).then(function(et){var dt=yr(et,2),Ht=dt[0],Tt=dt[1];c.embed.ratio=[Ht,Tt],Cn.call(l)}),c.embed.setAutopause(c.config.autopause).then(function(et){c.config.autopause=et}),c.embed.getVideoTitle().then(function(et){c.config.title=et,Jt.setTitle.call(l)}),c.embed.getCurrentTime().then(function(et){Oe=et,gt.call(c,c.media,"timeupdate")}),c.embed.getDuration().then(function(et){c.media.duration=et,gt.call(c,c.media,"durationchange")}),c.embed.getTextTracks().then(function(et){c.media.textTracks=et,Ut.setup.call(c)}),c.embed.on("cuechange",function(et){var dt=et.cues,Ht=dt===void 0?[]:dt,Tt=Ht.map(function(Br){return Jv(Br.text)});Ut.updateCues.call(c,Tt)}),c.embed.on("loaded",function(){if(c.embed.getPaused().then(function(dt){ea.call(c,!dt),dt||gt.call(c,c.media,"playing")}),fe.element(c.embed.element)&&c.supported.ui){var et=c.embed.element;et.setAttribute("tabindex",-1)}}),c.embed.on("bufferstart",function(){gt.call(c,c.media,"waiting")}),c.embed.on("bufferend",function(){gt.call(c,c.media,"playing")}),c.embed.on("play",function(){ea.call(c,!0),gt.call(c,c.media,"playing")}),c.embed.on("pause",function(){ea.call(c,!1)}),c.embed.on("timeupdate",function(et){c.media.seeking=!1,Oe=et.seconds,gt.call(c,c.media,"timeupdate")}),c.embed.on("progress",function(et){c.media.buffered=et.percent,gt.call(c,c.media,"progress"),parseInt(et.percent,10)===1&&gt.call(c,c.media,"canplaythrough"),c.embed.getDuration().then(function(dt){dt!==c.media.duration&&(c.media.duration=dt,gt.call(c,c.media,"durationchange"))})}),c.embed.on("seeked",function(){c.media.seeking=!1,gt.call(c,c.media,"seeked")}),c.embed.on("ended",function(){c.media.paused=!0,gt.call(c,c.media,"ended")}),c.embed.on("error",function(et){c.media.error=et,gt.call(c,c.media,"error")}),setTimeout(function(){return Jt.build.call(c)},0)}};function gb(p){if(fe.empty(p))return null;var l=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;return p.match(l)?RegExp.$2:p}function ta(p){p&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===p&&(this.media.paused=!p,gt.call(this,this.media,p?"play":"pause"))}function _b(p){if(p.noCookie)return"https://www.youtube-nocookie.com";if(window.location.protocol==="http:")return"http://www.youtube.com"}var Za={setup:function(){var l=this;if(Ft(this.elements.wrapper,this.config.classNames.embed,!0),fe.object(window.YT)&&fe.function(window.YT.Player))Za.ready.call(this);else{var c=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){fe.function(c)&&c(),Za.ready.call(l)},Pl(this.config.urls.youtube.sdk).catch(function(v){l.debug.warn("YouTube API failed to load",v)})}},getTitle:function(l){var c=this,v=Al(this.config.urls.youtube.api,l);Qi(v).then(function(x){if(fe.object(x)){var M=x.title,H=x.height,U=x.width;c.config.title=M,Jt.setTitle.call(c),c.embed.ratio=[U,H]}Cn.call(c)}).catch(function(){Cn.call(c)})},ready:function(){var l=this,c=l.media&&l.media.getAttribute("id");if(!(!fe.empty(c)&&c.startsWith("youtube-"))){var v=l.media.getAttribute("src");fe.empty(v)&&(v=l.media.getAttribute(this.config.attributes.embed.id));var x=gb(v),M=Gv(l.provider),H=l.poster,U=vt("div",{id:M,"data-poster":H});l.media=Ga(U,l.media);var G=function(J){return"https://i.ytimg.com/vi/".concat(x,"/").concat(J,"default.jpg")};Ja(G("maxres"),121).catch(function(){return Ja(G("sd"),121)}).catch(function(){return Ja(G("hq"))}).then(function(ie){return Jt.setPoster.call(l,ie.src)}).then(function(ie){ie.includes("maxres")||(l.elements.poster.style.backgroundSize="cover")}).catch(function(){});var ee=l.config.youtube;l.embed=new window.YT.Player(M,{videoId:x,host:_b(ee),playerVars:dr({},{autoplay:l.config.autoplay?1:0,hl:l.config.hl,controls:l.supported.ui?0:1,disablekb:1,playsinline:l.config.fullscreen.iosNative?0:1,cc_load_policy:l.captions.active?1:0,cc_lang_pref:l.config.captions.language,widget_referrer:window?window.location.href:null},ee),events:{onError:function(J){if(!l.media.error){var te=J.data,be={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[te]||"An unknown error occured";l.media.error={code:te,message:be},gt.call(l,l.media,"error")}},onPlaybackRateChange:function(J){var te=J.target;l.media.playbackRate=te.getPlaybackRate(),gt.call(l,l.media,"ratechange")},onReady:function(J){if(!fe.function(l.media.play)){var te=J.target;Za.getTitle.call(l,x),l.media.play=function(){ta.call(l,!0),te.playVideo()},l.media.pause=function(){ta.call(l,!1),te.pauseVideo()},l.media.stop=function(){te.stopVideo()},l.media.duration=te.getDuration(),l.media.paused=!0,l.media.currentTime=0,Object.defineProperty(l.media,"currentTime",{get:function(){return Number(te.getCurrentTime())},set:function(He){l.paused&&!l.embed.hasPlayed&&l.embed.mute(),l.media.seeking=!0,gt.call(l,l.media,"seeking"),te.seekTo(He)}}),Object.defineProperty(l.media,"playbackRate",{get:function(){return te.getPlaybackRate()},set:function(He){te.setPlaybackRate(He)}});var be=l.config.volume;Object.defineProperty(l.media,"volume",{get:function(){return be},set:function(He){be=He,te.setVolume(be*100),gt.call(l,l.media,"volumechange")}});var Oe=l.config.muted;Object.defineProperty(l.media,"muted",{get:function(){return Oe},set:function(He){var rt=fe.boolean(He)?He:Oe;Oe=rt,te[rt?"mute":"unMute"](),gt.call(l,l.media,"volumechange")}}),Object.defineProperty(l.media,"currentSrc",{get:function(){return te.getVideoUrl()}}),Object.defineProperty(l.media,"ended",{get:function(){return l.currentTime===l.duration}});var Ne=te.getAvailablePlaybackRates();l.options.speed=Ne.filter(function(Be){return l.config.speed.options.includes(Be)}),l.supported.ui&&l.media.setAttribute("tabindex",-1),gt.call(l,l.media,"timeupdate"),gt.call(l,l.media,"durationchange"),clearInterval(l.timers.buffering),l.timers.buffering=setInterval(function(){l.media.buffered=te.getVideoLoadedFraction(),(l.media.lastBuffered===null||l.media.lastBuffered<l.media.buffered)&&gt.call(l,l.media,"progress"),l.media.lastBuffered=l.media.buffered,l.media.buffered===1&&(clearInterval(l.timers.buffering),gt.call(l,l.media,"canplaythrough"))},200),setTimeout(function(){return Jt.build.call(l)},50)}},onStateChange:function(J){var te=J.target;clearInterval(l.timers.playing);var be=l.media.seeking&&[1,2].includes(J.data);switch(be&&(l.media.seeking=!1,gt.call(l,l.media,"seeked")),J.data){case-1:gt.call(l,l.media,"timeupdate"),l.media.buffered=te.getVideoLoadedFraction(),gt.call(l,l.media,"progress");break;case 0:ta.call(l,!1),l.media.loop?(te.stopVideo(),te.playVideo()):gt.call(l,l.media,"ended");break;case 1:!l.config.autoplay&&l.media.paused&&!l.embed.hasPlayed?l.media.pause():(ta.call(l,!0),gt.call(l,l.media,"playing"),l.timers.playing=setInterval(function(){gt.call(l,l.media,"timeupdate")},50),l.media.duration!==te.getDuration()&&(l.media.duration=te.getDuration(),gt.call(l,l.media,"durationchange")));break;case 2:l.muted||l.embed.unMute(),ta.call(l,!1);break;case 3:gt.call(l,l.media,"waiting");break}gt.call(l,l.elements.container,"statechange",!1,{code:J.data})}}})}}},Ef={setup:function(){if(!this.media){this.debug.warn("No media element found!");return}Ft(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Ft(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Ft(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=vt("div",{class:this.config.classNames.video}),ff(this.media,this.elements.wrapper),this.elements.poster=vt("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?qn.setup.call(this):this.isYouTube?Za.setup.call(this):this.isVimeo&&Rl.setup.call(this)}},vb=function(l){l.manager&&l.manager.destroy(),l.elements.displayContainer&&l.elements.displayContainer.destroy(),l.elements.container.remove()},bb=function(){function p(l){var c=this;Dn(this,p),this.player=l,this.config=l.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(function(v,x){c.on("loaded",v),c.on("error",x)}),this.load()}return Bn(p,[{key:"load",value:function(){var c=this;!this.enabled||(!fe.object(window.google)||!fe.object(window.google.ima)?Pl(this.player.config.urls.googleIMA.sdk).then(function(){c.ready()}).catch(function(){c.trigger("error",new Error("Google IMA SDK failed to load"))}):this.ready())}},{key:"ready",value:function(){var c=this;this.enabled||vb(this),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(function(){c.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var c=this;this.elements.container=vt("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(v){return c.onAdsManagerLoaded(v)},!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(v){return c.onAdError(v)},!1),this.requestAds()}},{key:"requestAds",value:function(){var c=this.player.elements.container;try{var v=new google.ima.AdsRequest;v.adTagUrl=this.tagUrl,v.linearAdSlotWidth=c.offsetWidth,v.linearAdSlotHeight=c.offsetHeight,v.nonLinearAdSlotWidth=c.offsetWidth,v.nonLinearAdSlotHeight=c.offsetHeight,v.forceNonLinearFullSlot=!1,v.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(v)}catch(x){this.onAdError(x)}}},{key:"pollCountdown",value:function(){var c=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!v){clearInterval(this.countdownTimer),this.elements.container.removeAttribute("data-badge-text");return}var x=function(){var H=Ka(Math.max(c.manager.getRemainingTime(),0)),U="".concat(wr.get("advertisement",c.player.config)," - ").concat(H);c.elements.container.setAttribute("data-badge-text",U)};this.countdownTimer=setInterval(x,100)}},{key:"onAdsManagerLoaded",value:function(c){var v=this;if(!!this.enabled){var x=new google.ima.AdsRenderingSettings;x.restoreCustomPlaybackStateOnAdBreakComplete=!0,x.enablePreloading=!0,this.manager=c.getAdsManager(this.player,x),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(M){return v.onAdError(M)}),Object.keys(google.ima.AdEvent.Type).forEach(function(M){v.manager.addEventListener(google.ima.AdEvent.Type[M],function(H){return v.onAdEvent(H)})}),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var c=this;fe.empty(this.cuePoints)||this.cuePoints.forEach(function(v){if(v!==0&&v!==-1&&v<c.player.duration){var x=c.player.elements.progress;if(fe.element(x)){var M=100/c.player.duration*v,H=vt("span",{class:c.player.config.classNames.cues});H.style.left="".concat(M.toString(),"%"),x.appendChild(H)}}})}},{key:"onAdEvent",value:function(c){var v=this,x=this.player.elements.container,M=c.getAd(),H=c.getAdData(),U=function(ee){gt.call(v.player,v.player.media,"ads".concat(ee.replace(/_/g,"").toLowerCase()))};switch(U(c.type),c.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),M.isLinear()||(M.width=x.offsetWidth,M.height=x.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:H.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(H.adError.getMessage()));break}}},{key:"onAdError",value:function(c){this.cancel(),this.player.debug.warn("Ads error",c)}},{key:"listeners",value:function(){var c=this,v=this.player.elements.container,x;this.player.on("canplay",function(){c.addCuePoints()}),this.player.on("ended",function(){c.loader.contentComplete()}),this.player.on("timeupdate",function(){x=c.player.currentTime}),this.player.on("seeked",function(){var M=c.player.currentTime;fe.empty(c.cuePoints)||c.cuePoints.forEach(function(H,U){x<H&&H<M&&(c.manager.discardAdBreak(),c.cuePoints.splice(U,1))})}),window.addEventListener("resize",function(){c.manager&&c.manager.resize(v.offsetWidth,v.offsetHeight,google.ima.ViewMode.NORMAL)})}},{key:"play",value:function(){var c=this,v=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then(function(){c.manager.setVolume(c.player.volume),c.elements.displayContainer.initialize();try{c.initialized||(c.manager.init(v.offsetWidth,v.offsetHeight,google.ima.ViewMode.NORMAL),c.manager.start()),c.initialized=!0}catch(x){c.onAdError(x)}}).catch(function(){})}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,cn(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var c=this;this.managerPromise.then(function(){c.manager&&c.manager.destroy(),c.managerPromise=new Promise(function(v){c.on("loaded",v),c.player.debug.log(c.manager)}),c.initialized=!1,c.requestAds()}).catch(function(){})}},{key:"trigger",value:function(c){for(var v=this,x=arguments.length,M=new Array(x>1?x-1:0),H=1;H<x;H++)M[H-1]=arguments[H];var U=this.events[c];fe.array(U)&&U.forEach(function(G){fe.function(G)&&G.apply(v,M)})}},{key:"on",value:function(c,v){return fe.array(this.events[c])||(this.events[c]=[]),this.events[c].push(v),this}},{key:"startSafetyTimer",value:function(c,v){var x=this;this.player.debug.log("Safety timer invoked from: ".concat(v)),this.safetyTimer=setTimeout(function(){x.cancel(),x.clearSafetyTimer("startSafetyTimer()")},c)}},{key:"clearSafetyTimer",value:function(c){fe.nullOrUndefined(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(c)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var c=this.config;return this.player.isHTML5&&this.player.isVideo&&c.enabled&&(!fe.empty(c.publisherId)||fe.url(c.tagUrl))}},{key:"tagUrl",get:function(){var c=this.config;if(fe.url(c.tagUrl))return c.tagUrl;var v={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:c.publisherId},x="https://go.aniview.com/api/adserver6/vast/";return"".concat(x,"?").concat(Sf(v))}}]),p}(),yb=ft.findIndex,Qa="findIndex",Af=!0,wb=qr(Qa);Qa in[]&&Array(1)[Qa](function(){Af=!1}),tt({target:"Array",proto:!0,forced:Af||!wb},{findIndex:function(l){return yb(this,l,arguments.length>1?arguments[1]:void 0)}}),ei(Qa);var kb=Math.min,Ll=[].lastIndexOf,$f=!!Ll&&1/[1].lastIndexOf(1,-0)<0,xb=In("lastIndexOf"),Cb=qr("indexOf",{ACCESSORS:!0,1:0}),Sb=$f||!xb||!Cb,Of=Sb?function(l){if($f)return Ll.apply(this,arguments)||0;var c=O(this),v=Gt(c.length),x=v-1;for(arguments.length>1&&(x=kb(x,Nt(arguments[1]))),x<0&&(x=v+x);x>=0;x--)if(x in c&&c[x]===l)return x||0;return-1}:Ll;tt({target:"Array",proto:!0,forced:Of!==[].lastIndexOf},{lastIndexOf:Of});var Tb=function(l){var c=[],v=l.split(/\r\n\r\n|\n\n|\r\r/);return v.forEach(function(x){var M={},H=x.split(/\r\n|\n|\r/);H.forEach(function(U){if(fe.number(M.startTime)){if(!fe.empty(U.trim())&&fe.empty(M.text)){var ee=U.trim().split("#xywh="),ie=yr(ee,1);if(M.text=ie[0],ee[1]){var J=ee[1].split(","),te=yr(J,4);M.x=te[0],M.y=te[1],M.w=te[2],M.h=te[3]}}}else{var G=U.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);G&&(M.startTime=Number(G[1]||0)*60*60+Number(G[2])*60+Number(G[3])+Number("0.".concat(G[4])),M.endTime=Number(G[6]||0)*60*60+Number(G[7])*60+Number(G[8])+Number("0.".concat(G[9])))}}),M.text&&c.push(M)}),c},If=function(l,c){var v=c.width/c.height,x={};return l>v?(x.width=c.width,x.height=1/l*c.width):(x.height=c.height,x.width=l*c.height),x},Pf=function(){function p(l){Dn(this,p),this.player=l,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return Bn(p,[{key:"load",value:function(){var c=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(function(){!c.enabled||(c.render(),c.determineContainerAutoSizing(),c.loaded=!0)})}},{key:"getThumbnails",value:function(){var c=this;return new Promise(function(v){var x=c.player.config.previewThumbnails.src;if(fe.empty(x))throw new Error("Missing previewThumbnails.src config attribute");var M=function(){c.thumbnails.sort(function(ee,ie){return ee.height-ie.height}),c.player.debug.log("Preview thumbnails",c.thumbnails),v()};if(fe.function(x))x(function(G){c.thumbnails=G,M()});else{var H=fe.string(x)?[x]:x,U=H.map(function(G){return c.getThumbnail(G)});Promise.all(U).then(M)}})}},{key:"getThumbnail",value:function(c){var v=this;return new Promise(function(x){Qi(c).then(function(M){var H={frames:Tb(M),height:null,urlPrefix:""};!H.frames[0].text.startsWith("/")&&!H.frames[0].text.startsWith("http://")&&!H.frames[0].text.startsWith("https://")&&(H.urlPrefix=c.substring(0,c.lastIndexOf("/")+1));var U=new Image;U.onload=function(){H.height=U.naturalHeight,H.width=U.naturalWidth,v.thumbnails.push(H),x()},U.src=H.urlPrefix+H.frames[0].text})})}},{key:"startMove",value:function(c){if(!!this.loaded&&!(!fe.event(c)||!["touchmove","mousemove"].includes(c.type))&&!!this.player.media.duration){if(c.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var v=this.player.elements.progress.getBoundingClientRect(),x=100/v.width*(c.pageX-v.left);this.seekTime=this.player.media.duration*(x/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=c.pageX,this.elements.thumb.time.innerText=Ka(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(c){(fe.nullOrUndefined(c.button)||c.button===!1||c.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var c=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):wl.call(this.player,this.player.media,"timeupdate",function(){c.mouseDown||c.toggleScrubbingContainer(!1)})}},{key:"listeners",value:function(){var c=this;this.player.on("play",function(){c.toggleThumbContainer(!1,!0)}),this.player.on("seeked",function(){c.toggleThumbContainer(!1)}),this.player.on("timeupdate",function(){c.lastTime=c.player.media.currentTime})}},{key:"render",value:function(){this.elements.thumb.container=vt("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=vt("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var c=vt("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=vt("span",{},"00:00"),c.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(c),fe.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=vt("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var c=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var v=this.thumbnails[0].frames.findIndex(function(H){return c.seekTime>=H.startTime&&c.seekTime<=H.endTime}),x=v>=0,M=0;this.mouseDown||this.toggleThumbContainer(x),x&&(this.thumbnails.forEach(function(H,U){c.loadedImages.includes(H.frames[v].text)&&(M=U)}),v!==this.showingThumb&&(this.showingThumb=v,this.loadImage(M)))}},{key:"loadImage",value:function(){var c=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=this.showingThumb,M=this.thumbnails[v],H=M.urlPrefix,U=M.frames[x],G=M.frames[x].text,ee=H+G;if(!this.currentImageElement||this.currentImageElement.dataset.filename!==G){this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var ie=new Image;ie.src=ee,ie.dataset.index=x,ie.dataset.filename=G,this.showingThumbFilename=G,this.player.debug.log("Loading image: ".concat(ee)),ie.onload=function(){return c.showImage(ie,U,v,x,G,!0)},this.loadingImage=ie,this.removeOldImages(ie)}else this.showImage(this.currentImageElement,U,v,x,G,!1),this.currentImageElement.dataset.index=x,this.removeOldImages(this.currentImageElement)}},{key:"showImage",value:function(c,v,x,M,H){var U=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;this.player.debug.log("Showing thumb: ".concat(H,". num: ").concat(M,". qual: ").concat(x,". newimg: ").concat(U)),this.setImageSizeAndOffset(c,v),U&&(this.currentImageContainer.appendChild(c),this.currentImageElement=c,this.loadedImages.includes(H)||this.loadedImages.push(H)),this.preloadNearby(M,!0).then(this.preloadNearby(M,!1)).then(this.getHigherQuality(x,c,v,H))}},{key:"removeOldImages",value:function(c){var v=this;Array.from(this.currentImageContainer.children).forEach(function(x){if(x.tagName.toLowerCase()==="img"){var M=v.usingSprites?500:1e3;if(x.dataset.index!==c.dataset.index&&!x.dataset.deleting){x.dataset.deleting=!0;var H=v.currentImageContainer;setTimeout(function(){H.removeChild(x),v.player.debug.log("Removing thumb: ".concat(x.dataset.filename))},M)}}})}},{key:"preloadNearby",value:function(c){var v=this,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return new Promise(function(M){setTimeout(function(){var H=v.thumbnails[0].frames[c].text;if(v.showingThumbFilename===H){var U;x?U=v.thumbnails[0].frames.slice(c):U=v.thumbnails[0].frames.slice(0,c).reverse();var G=!1;U.forEach(function(ee){var ie=ee.text;if(ie!==H&&!v.loadedImages.includes(ie)){G=!0,v.player.debug.log("Preloading thumb filename: ".concat(ie));var J=v.thumbnails[0].urlPrefix,te=J+ie,be=new Image;be.src=te,be.onload=function(){v.player.debug.log("Preloaded thumb filename: ".concat(ie)),v.loadedImages.includes(ie)||v.loadedImages.push(ie),M()}}}),G||M()}},300)})}},{key:"getHigherQuality",value:function(c,v,x,M){var H=this;if(c<this.thumbnails.length-1){var U=v.naturalHeight;this.usingSprites&&(U=x.h),U<this.thumbContainerHeight&&setTimeout(function(){H.showingThumbFilename===M&&(H.player.debug.log("Showing higher quality thumb for: ".concat(M)),H.loadImage(c+1))},300)}}},{key:"toggleThumbContainer",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(x,c),!c&&v&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(v,c),c||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var v=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(v,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var x=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(x,"px")}}else{var c=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(c,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var c=this.player.elements.progress.getBoundingClientRect(),v=this.player.elements.container.getBoundingClientRect(),x=this.elements.thumb.container,M=v.left-c.left+10,H=v.right-c.left-x.clientWidth-10,U=this.mousePosX-c.left-x.clientWidth/2;U<M&&(U=M),U>H&&(U=H),x.style.left="".concat(U,"px")}},{key:"setScrubbingContainerSize",value:function(){var c=If(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),v=c.width,x=c.height;this.elements.scrubbing.container.style.width="".concat(v,"px"),this.elements.scrubbing.container.style.height="".concat(x,"px")}},{key:"setImageSizeAndOffset",value:function(c,v){if(!!this.usingSprites){var x=this.thumbContainerHeight/v.h;c.style.height="".concat(c.naturalHeight*x,"px"),c.style.width="".concat(c.naturalWidth*x,"px"),c.style.left="-".concat(v.x*x,"px"),c.style.top="-".concat(v.y*x,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){if(this.mouseDown){var c=If(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),v=c.height;return v}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(c){this.mouseDown?this.currentScrubbingImageElement=c:this.currentThumbnailImageElement=c}}]),p}(),Ml={insertElements:function(l,c){var v=this;fe.string(c)?pf(l,this.media,{src:c}):fe.array(c)&&c.forEach(function(x){pf(l,v.media,x)})},change:function(l){var c=this;if(!df(l,"sources.length")){this.debug.warn("Invalid source format");return}qn.cancelRequests.call(this),this.destroy.call(this,function(){c.options.quality=[],vn(c.media),c.media=null,fe.element(c.elements.container)&&c.elements.container.removeAttribute("class");var v=l.sources,x=l.type,M=yr(v,1),H=M[0],U=H.provider,G=U===void 0?Sn.html5:U,ee=H.src,ie=G==="html5"?x:"div",J=G==="html5"?{}:{src:ee};Object.assign(c,{provider:G,type:x,supported:sr.check(x,G,c.config.playsinline),media:vt(ie,J)}),c.elements.container.appendChild(c.media),fe.boolean(l.autoplay)&&(c.config.autoplay=l.autoplay),c.isHTML5&&(c.config.crossorigin&&c.media.setAttribute("crossorigin",""),c.config.autoplay&&c.media.setAttribute("autoplay",""),fe.empty(l.poster)||(c.poster=l.poster),c.config.loop.active&&c.media.setAttribute("loop",""),c.config.muted&&c.media.setAttribute("muted",""),c.config.playsinline&&c.media.setAttribute("playsinline","")),Jt.addStyleHook.call(c),c.isHTML5&&Ml.insertElements.call(c,"source",v),c.config.title=l.title,Ef.setup.call(c),c.isHTML5&&Object.keys(l).includes("tracks")&&Ml.insertElements.call(c,"track",l.tracks),(c.isHTML5||c.isEmbed&&!c.supported.ui)&&Jt.build.call(c),c.isHTML5&&c.media.load(),fe.empty(l.previewThumbnails)||(Object.assign(c.config.previewThumbnails,l.previewThumbnails),c.previewThumbnails&&c.previewThumbnails.loaded&&(c.previewThumbnails.destroy(),c.previewThumbnails=null),c.config.previewThumbnails.enabled&&(c.previewThumbnails=new Pf(c))),c.fullscreen.update()},!0)}};function Eb(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255;return Math.min(Math.max(p,l),c)}var Rf=function(){function p(l,c){var v=this;if(Dn(this,p),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=sr.touch,this.media=l,fe.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||fe.nodeList(this.media)||fe.array(this.media))&&(this.media=this.media[0]),this.config=dr({},Tf,p.defaults,c||{},function(){try{return JSON.parse(v.media.getAttribute("data-plyr-config"))}catch(ee){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ib(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",sr),fe.nullOrUndefined(this.media)||!fe.element(this.media)){this.debug.error("Setup failed: no suitable element passed");return}if(this.media.plyr){this.debug.warn("Target already setup");return}if(!this.config.enabled){this.debug.error("Setup failed: disabled by config");return}if(!sr.check().api){this.debug.error("Setup failed: no support");return}var x=this.media.cloneNode(!0);x.autoplay=!1,this.elements.original=x;var M=this.media.tagName.toLowerCase(),H=null,U=null;switch(M){case"div":if(H=this.media.querySelector("iframe"),fe.element(H)){if(U=Cf(H.getAttribute("src")),this.provider=nb(U.toString()),this.elements.container=this.media,this.media=H,this.elements.container.className="",U.search.length){var G=["1","true"];G.includes(U.searchParams.get("autoplay"))&&(this.config.autoplay=!0),G.includes(U.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=G.includes(U.searchParams.get("playsinline")),this.config.youtube.hl=U.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(fe.empty(this.provider)||!Object.keys(Sn).includes(this.provider)){this.debug.error("Setup failed: Invalid provider");return}this.type=Ol.video;break;case"video":case"audio":this.type=M,this.provider=Sn.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:this.debug.error("Setup failed: unsupported type");return}if(this.supported=sr.check(this.type,this.provider,this.config.playsinline),!this.supported.api){this.debug.error("Setup failed: no support");return}this.eventListeners=[],this.listeners=new sb(this),this.storage=new wf(this),this.media.plyr=this,fe.element(this.elements.container)||(this.elements.container=vt("div",{tabindex:0}),ff(this.media,this.elements.container)),Jt.migrateStyles.call(this),Jt.addStyleHook.call(this),Ef.setup.call(this),this.config.debug&&zt.call(this,this.elements.container,this.config.events.join(" "),function(ee){v.debug.log("event: ".concat(ee.type))}),this.fullscreen=new ab(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Jt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new bb(this)),this.isHTML5&&this.config.autoplay&&setTimeout(function(){return cn(v.play())},10),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Pf(this))}return Bn(p,[{key:"play",value:function(){var c=this;return fe.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(function(){return c.ads.play()}).catch(function(){return cn(c.media.play())}),this.media.play()):null}},{key:"pause",value:function(){return!this.playing||!fe.function(this.media.pause)?null:this.media.pause()}},{key:"togglePlay",value:function(c){var v=fe.boolean(c)?c:!this.playing;return v?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):fe.function(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(c){this.currentTime-=fe.number(c)?c:this.config.seekTime}},{key:"forward",value:function(c){this.currentTime+=fe.number(c)?c:this.config.seekTime}},{key:"increaseVolume",value:function(c){var v=this.media.muted?0:this.volume;this.volume=v+(fe.number(c)?c:0)}},{key:"decreaseVolume",value:function(c){this.increaseVolume(-c)}},{key:"toggleCaptions",value:function(c){Ut.toggle.call(this,c,!1)}},{key:"airplay",value:function(){sr.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(c){if(this.supported.ui&&!this.isAudio){var v=Ya(this.elements.container,this.config.classNames.hideControls),x=typeof c=="undefined"?void 0:!c,M=Ft(this.elements.container,this.config.classNames.hideControls,x);if(M&&fe.array(this.config.controls)&&this.config.controls.includes("settings")&&!fe.empty(this.config.settings)&&Ze.toggleMenu.call(this,!1),M!==v){var H=M?"controlshidden":"controlsshown";gt.call(this,this.media,H)}return!M}return!1}},{key:"on",value:function(c,v){zt.call(this,this.elements.container,c,v)}},{key:"once",value:function(c,v){wl.call(this,this.elements.container,c,v)}},{key:"off",value:function(c,v){Xa(this.elements.container,c,v)}},{key:"destroy",value:function(c){var v=this,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!!this.ready){var M=function(){document.body.style.overflow="",v.embed=null,x?(Object.keys(v.elements).length&&(vn(v.elements.buttons.play),vn(v.elements.captions),vn(v.elements.controls),vn(v.elements.wrapper),v.elements.buttons.play=null,v.elements.captions=null,v.elements.controls=null,v.elements.wrapper=null),fe.function(c)&&c()):(Bv.call(v),Ga(v.elements.original,v.elements.container),gt.call(v,v.elements.original,"destroyed",!0),fe.function(c)&&c.call(v.elements.original),v.ready=!1,setTimeout(function(){v.elements=null,v.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Jt.toggleNativeControls.call(this,!0),M()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&fe.function(this.embed.destroy)&&this.embed.destroy(),M()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(M),setTimeout(M,200))}}},{key:"supports",value:function(c){return sr.mime.call(this,c)}},{key:"isHTML5",get:function(){return this.provider===Sn.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Sn.youtube}},{key:"isVimeo",get:function(){return this.provider===Sn.vimeo}},{key:"isVideo",get:function(){return this.type===Ol.video}},{key:"isAudio",get:function(){return this.type===Ol.audio}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&this.currentTime===0)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(c){if(!!this.duration){var v=fe.number(c)&&c>0;this.media.currentTime=v?Math.min(c,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var c=this.media.buffered;return fe.number(c)?c:c&&c.length&&this.duration>0?c.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var c=parseFloat(this.config.duration),v=(this.media||{}).duration,x=!fe.number(v)||v===1/0?0:v;return c||x}},{key:"volume",set:function(c){var v=c,x=1,M=0;fe.string(v)&&(v=Number(v)),fe.number(v)||(v=this.storage.get("volume")),fe.number(v)||(v=this.config.volume),v>x&&(v=x),v<M&&(v=M),this.config.volume=v,this.media.volume=v,!fe.empty(c)&&this.muted&&v>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(c){var v=c;fe.boolean(v)||(v=this.storage.get("muted")),fe.boolean(v)||(v=this.config.muted),this.config.muted=v,this.media.muted=v},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||this.isAudio?!0:Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(c){var v=this,x=null;fe.number(c)&&(x=c),fe.number(x)||(x=this.storage.get("speed")),fe.number(x)||(x=this.config.speed.selected);var M=this.minimumSpeed,H=this.maximumSpeed;x=Eb(x,M,H),this.config.speed.selected=x,setTimeout(function(){v.media.playbackRate=x},0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,zs(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,zs(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(c){var v=this.config.quality,x=this.options.quality;if(!!x.length){var M=[!fe.empty(c)&&Number(c),this.storage.get("quality"),v.selected,v.default].find(fe.number),H=!0;if(!x.includes(M)){var U=Fv(x,M);this.debug.warn("Unsupported quality option: ".concat(M,", using ").concat(U," instead")),M=U,H=!1}v.selected=M,this.media.quality=M,H&&this.storage.set({quality:M})}},get:function(){return this.media.quality}},{key:"loop",set:function(c){var v=fe.boolean(c)?c:this.config.loop.active;this.config.loop.active=v,this.media.loop=v},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(c){Ml.change.call(this,c)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var c=this.config.urls.download;return fe.url(c)?c:this.source},set:function(c){!fe.url(c)||(this.config.urls.download=c,Ze.setDownloadUrl.call(this))}},{key:"poster",set:function(c){if(!this.isVideo){this.debug.warn("Poster can only be set for video");return}Jt.setPoster.call(this,c,!1).catch(function(){})},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var c=gf(kl.call(this));return fe.array(c)?c.join(":"):c},set:function(c){if(!this.isVideo){this.debug.warn("Aspect ratio can only be set for video");return}if(!fe.string(c)||!mf(c)){this.debug.error("Invalid aspect ratio specified (".concat(c,")"));return}this.config.ratio=c,Cn.call(this)}},{key:"autoplay",set:function(c){var v=fe.boolean(c)?c:this.config.autoplay;this.config.autoplay=v},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(c){Ut.set.call(this,c,!1)},get:function(){var c=this.captions,v=c.toggled,x=c.currentTrack;return v?x:-1}},{key:"language",set:function(c){Ut.setLanguage.call(this,c,!1)},get:function(){return(Ut.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(c){if(!!sr.pip){var v=fe.boolean(c)?c:!this.pip;fe.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(v?$l.active:$l.inactive),fe.function(this.media.requestPictureInPicture)&&(!this.pip&&v?this.media.requestPictureInPicture():this.pip&&!v&&document.exitPictureInPicture())}},get:function(){return sr.pip?fe.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===$l.active:null}}],[{key:"supported",value:function(c,v,x){return sr.check(c,v,x)}},{key:"loadSprite",value:function(c,v){return kf(c,v)}},{key:"setup",value:function(c){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=null;return fe.string(c)?x=Array.from(document.querySelectorAll(c)):fe.nodeList(c)?x=Array.from(c):fe.array(c)&&(x=c.filter(fe.element)),fe.empty(x)?null:x.map(function(M){return new p(M,v)})}}]),p}();return Rf.defaults=Lv(Tf),Rf})});window.frappe||(window.frappe={});frappe.provide=function(r){for(var t=r.split("."),e=window,n=0;n<t.length;n++){var i=t[n];e[i]||(e[i]={}),e=e[i]}return e};frappe.provide("locals");frappe.provide("frappe.flags");frappe.provide("frappe.settings");frappe.provide("frappe.utils");frappe.provide("frappe.ui.form");frappe.provide("frappe.modules");frappe.provide("frappe.templates");frappe.provide("frappe.test_data");frappe.provide("frappe.utils");frappe.provide("frappe.model");frappe.provide("frappe.user");frappe.provide("frappe.session");frappe.provide("frappe._messages");frappe.provide("locals.DocType");frappe.provide("frappe.listview_settings");frappe.provide("frappe.tour");frappe.provide("frappe.listview_parent_route");window.NEWLINE=`
`;window.TAB=9;window.UP_ARROW=38;window.DOWN_ARROW=40;window.cur_frm=null;frappe._=function(r,t,e=null){if(!r||typeof r!="string")return r;let n="",i=r;return e&&(n=frappe._messages[`${i}:${e}`]),n||(n=frappe._messages[i]||r),t&&typeof t=="object"&&(n=$.format(n,t)),n};window.__=frappe._;frappe.get_languages=function(){return frappe.languages||(frappe.languages=[],$.each(frappe.boot.lang_dict,function(r,t){frappe.languages.push({label:r,value:t})}),frappe.languages=frappe.languages.sort(function(r,t){return r.value<t.value?-1:1})),frappe.languages};(function(r){"use strict";var t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;function e(){}e.extend=function(n){var i=this.prototype,a=Object.create(i);for(var o in n)a[o]=typeof n[o]=="function"&&typeof i[o]=="function"&&t.test(n[o])?function(u,h){return function(){var d=this._super;this._super=i[u];var _=h.apply(this,arguments);return this._super=d,_}}(o,n[o]):n[o];var s=typeof a.init=="function"?a.hasOwnProperty("init")?a.init:function(){i.init.apply(this,arguments)}:function(){};return s.prototype=a,a.constructor=s,s.extend=e.extend,s},r.Class=e})(window);String.prototype.includes||(String.prototype.includes=function(r,t){"use strict";return typeof t!="number"&&(t=0),t+r.length>this.length?!1:this.indexOf(r,t)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,t){if(this==null)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if(n===0)return!1;for(var i=t|0,a=Math.max(i>=0?i:n-Math.abs(i),0);a<n;){if(e[a]===r)return!0;a++}return!1}});typeof String.prototype.trimLeft!="function"&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")});typeof String.prototype.trimRight!="function"&&(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")});typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},writable:!0,configurable:!0});frappe.require=function(r,t){return typeof r=="string"&&(r=[r]),r=r.map(e=>frappe.assets.bundled_asset(e)),new Promise(e=>{frappe.assets.execute(r,()=>{e(),t&&t()})})};frappe.assets={check:function(){if(window._version_number!=localStorage.getItem("_version_number")&&(frappe.assets.clear_local_storage(),console.log("Cleared App Cache.")),localStorage._last_load){var r=new Date-new Date(localStorage._last_load);(r<1e4||r>864e5)&&frappe.assets.clear_local_storage()}else frappe.assets.clear_local_storage();frappe.assets.init_local_storage()},init_local_storage:function(){localStorage._last_load=new Date,localStorage._version_number=window._version_number,frappe.boot&&(localStorage.metadata_version=frappe.boot.metadata_version)},clear_local_storage:function(){$.each(["_last_load","_version_number","metadata_version","page_info","last_visited"],function(t,e){localStorage.removeItem(e)});for(var r in localStorage)(r.indexOf("desk_assets:")===0||r.indexOf("_page:")===0||r.indexOf("_doctype:")===0||r.indexOf("preferred_breadcrumbs:")===0)&&localStorage.removeItem(r);console.log("localStorage cleared")},executed_:[],execute:function(r,t){for(var e=[],n=0,i=r.length;n<i;n++)frappe.assets.exists(r[n])||e.push(r[n]);e.length?frappe.assets.fetch(e,function(){frappe.assets.eval_assets(r,t)}):frappe.assets.eval_assets(r,t)},eval_assets:function(r,t){for(var e=0,n=r.length;e<n;e++){var i=r[e];frappe.assets.executed_.indexOf(i)===-1&&(frappe.assets.handler[frappe.assets.extn(i)](frappe.assets.get(i),i),frappe.assets.executed_.push(i))}t&&t()},exists:function(r){return frappe.assets.executed_.indexOf(r)!==-1?!0:frappe.boot.developer_mode?!1:!!frappe.assets.get(r)},fetch:function(r,t){frappe.call({type:"GET",method:"frappe.client.get_js",args:{items:r},callback:function(e){$.each(r,function(n,i){frappe.assets.add(i,e.message[n])}),t()},freeze:!0})},add:function(r,t){if("localStorage"in window)try{frappe.assets.set(r,t)}catch(e){frappe.assets.clear_local_storage(),frappe.assets.set(r,t)}},get:function(r){return localStorage.getItem("desk_assets:"+r)},set:function(r,t){localStorage.setItem("desk_assets:"+r,t)},extn:function(r){return r.indexOf("?")!=-1&&(r=r.split("?").slice(-1)[0]),r.split(".").slice(-1)[0]},handler:{js:function(r,t){frappe.dom.eval(r)},css:function(r,t){frappe.dom.set_style(r)}},bundled_asset(r,t=null){return!r.startsWith("/assets")&&r.includes(".bundle.")&&(r.endsWith(".css")&&t&&(r=`rtl_${r}`),r=frappe.boot.assets_json[r]||r),r}};function Nb(r,t){return r==null?r:(this.unkeyed_index=0,r.replace(/\{(\w*)\}/g,function(e,n){if(n===""&&(n=this.unkeyed_index,this.unkeyed_index++),n==+n)return t[n]!==void 0?t[n]:e}.bind(this)))}jQuery&&(jQuery.format=Nb);frappe.provide("frappe.form.formatters");frappe.form.link_formatters={};frappe.form.formatters={_right:function(r,t){return t&&(t.inline||t.only_value)?r:"<div style='text-align: right'>"+r+"</div>"},Data:function(r,t){return t&&t.options=="URL"?`<a href="${r}" title="Open Link" target="_blank">${r}</a>`:r==null?"":r},Autocomplete:function(r){return __(frappe.form.formatters.Data(r))},Select:function(r){return __(frappe.form.formatters.Data(r))},Float:function(r,t,e,n){var i=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||null;if(t.options&&t.options.trim())return t.precision=i,frappe.form.formatters.Currency(r,t,e,n);if(!(e||{}).always_show_decimals&&!is_null(r)){var a=cstr(r).split(".");(a[1]==null||cint(a[1])===0)&&(i=0)}return frappe.form.formatters._right(r==null||r===""?"":format_number(r,null,i),e)},Int:function(r,t,e){return frappe.form.formatters._right(r==null?"":cint(r),e)},Percent:function(r,t,e){let n=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||2;return frappe.form.formatters._right(flt(r,n)+"%",e)},Rating:function(r,t){let e="",n=t.options||5;return r=r*n,Array.from({length:cint(n)},(i,a)=>a+1).forEach(i=>{e+=`<svg class="icon icon-md" data-rating=${i} viewBox="0 0 24 24" fill="none">
				<path class="right-half ${i<=(r||0)?"star-click":""}" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half ${i<=(r||0)||i-.5==r?"star-click":""}" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`}),`<div class="rating">
			${e}
		</div>`},Currency:function(r,t,e,n){var i=frappe.meta.get_field_currency(t,n),a=t.precision||cint(frappe.boot.sysdefaults.currency_precision)||2;if(a>2){var o=cstr(r).split("."),s=o.length>1?o[1]:"";if(s.length<3||s.length<a){let u=frappe.model.get_value(":Currency",i,"fraction_units")||100;s.length<cstr(u).length&&(a=cstr(u).length-1)}}return r=r==null||r===""?"":format_currency(r,i,a),e&&e.only_value?r:frappe.form.formatters._right(r,e)},Check:function(r){return`<input type="checkbox" disabled
			class="disabled-${r?"selected":"deselected"}">`},Link:function(r,t,e,n){var i=t._options||t.options,a=r;let o=frappe.utils.get_link_title(i,r);return r&&r.match&&r.match(/^['"].*['"]$/)&&r.replace(/^.(.*).$/,"$1"),e&&(e.for_print||e.only_value)?o||r:(frappe.form.link_formatters[i]&&n&&i!==n.doctype&&(r=frappe.form.link_formatters[i](r,n,t)),r?r[0]=="'"&&r[r.length-1]=="'"?r.substring(1,r.length-1):t&&t.link_onclick?repl('<a onclick="%(onclick)s">%(value)s</a>',{onclick:t.link_onclick.replace(/"/g,"&quot;"),value:r}):t&&i&&frappe.model.can_read(i)?`<a
					href="/app/${encodeURIComponent(frappe.router.slug(i))}/${encodeURIComponent(a)}"
					data-doctype="${i}"
					data-name="${a}"
					data-value="${a}">
					${__(e&&e.label||o||r)}</a>`:o||r:"")},Date:function(r){return frappe.datetime.str_to_user?(r&&(r=frappe.datetime.str_to_user(r),r==="Invalid date"&&(r=null)),r||""):r},DateRange:function(r){return Array.isArray(r)?__("{0} to {1}",[frappe.datetime.str_to_user(r[0]),frappe.datetime.str_to_user(r[1])]):r||""},Datetime:function(r){return r?moment(frappe.datetime.convert_to_user_tz(r)).format(frappe.boot.sysdefaults.date_format.toUpperCase()+" "+frappe.boot.sysdefaults.time_format||"HH:mm:ss"):""},Text:function(r){if(r){for(var t=["<p","<div","<br","<table"],e=!1,n=0;n<t.length;n++)if(r.match(t[n])){e=!0;break}e||(r=frappe.utils.replace_newlines(r))}return frappe.form.formatters.Data(r)},Time:function(r){return r&&(r=frappe.datetime.str_to_user(r,!0)),r||""},Duration:function(r,t){if(r){let e=frappe.utils.get_duration_options(t);r=frappe.utils.get_formatted_duration(r,e)}return r||""},LikedBy:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,n){n&&(t+=frappe.avatar(n))}),t},Tag:function(r){var t="";return $.each((r||"").split(","),function(e,n){n&&(t+=`
				<span
					class="data-pill btn-xs align-center ellipsis"
					style="background-color: var(--control-bg); box-shadow: none; margin-right: 4px;"
					data-field="_user_tags" data-label="${n}'">
					${n}
				</span>`)}),t},Comment:function(r){return r},Assign:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,n){n&&(t+='<span class="label label-warning" 				style="margin-right: 7px;"				data-field="_assign">'+n+"</span>")}),t},SmallText:function(r){return frappe.form.formatters.Text(r)},TextEditor:function(r){let t=frappe.form.formatters.Text(r);try{$(t).find(".ql-editor").length||(t=`<div class="ql-editor read-mode">${t}</div>`)}catch(e){t=`<div class="ql-editor read-mode">${t}</div>`}return t},Code:function(r){return"<pre>"+(r==null?"":$("<div>").text(r).html())+"</pre>"},WorkflowState:function(r){var t=frappe.get_doc("Workflow State",r);return t?repl("<span class='label label-%(style)s' 				data-workflow-state='%(value)s'				style='padding-bottom: 4px; cursor: pointer;'>				<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>",{value:r,style:t.style.toLowerCase(),icon:t.icon}):"<span class='label'>"+r+"</span>"},Email:function(r){return $("<div></div>").text(r).html()},FileSize:function(r){return r>1048576?r=flt(flt(r)/1048576,1)+"M":r>1024&&(r=flt(flt(r)/1024,1)+"K"),r},TableMultiSelect:function(r,t,e){r=r||[];let i=frappe.get_meta(t.options).fields.find(o=>o.fieldtype==="Link");return r.map(o=>{let s=o[i.fieldname];return frappe.format(s,i,e,o)}).join(", ")},Color:r=>r?`<div>
			<div class="selected-color" style="background-color: ${r}"></div>
			<span class="color-value">${r}</span>
		</div>`:"",Icon:r=>r?`<div>
			<div class="selected-icon">${frappe.utils.icon(r,"md")}</div>
			<span class="icon-value">${r}</span>
		</div>`:""};frappe.form.get_formatter=function(r){return r||(r="Data"),frappe.form.formatters[r.replace(/ /g,"")]||frappe.form.formatters.Data};frappe.format=function(r,t,e,n){t||(t={fieldtype:"Data"}),t.fieldname=="_user_tags"&&(t.fieldtype="Tag");var i=t.fieldtype||"Data";i==="Dynamic Link"&&(i="Link",t._options=n?n[t.options]:null);var a=t.formatter||frappe.form.get_formatter(i),o=a(r,t,e,n);return typeof o=="string"&&(o=frappe.dom.remove_script_and_style(o)),o};frappe.get_format_helper=function(r){var t={get_formatted:function(e){var n=frappe.meta.get_docfield(r.doctype,e);return n||console.log("fieldname not found: "+e),frappe.format(r[e],n,{inline:1},r)}};return $.extend(t,r),t};frappe.form.link_formatters.User=function(r,t,e){return t&&(t.full_name||e&&t[`${e.fieldname}_full_name`])||r};frappe.provide("frappe.dom");frappe.dom={id_count:0,freeze_count:0,by_id:function(r){return document.getElementById(r)},get_unique_id:function(){let r="unique-"+frappe.dom.id_count;return frappe.dom.id_count++,r},set_unique_id:function(r){var t=$(r);if(t.attr("id"))return t.attr("id");var e="unique-"+frappe.dom.id_count;return t.attr("id",e),frappe.dom.id_count++,e},eval:function(r){if(!!r){var t=document.createElement("script");t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t)}},remove_script_and_style:function(r){let t=["script","style","noscript","title","meta","base","head"];if(!new RegExp(t.map(s=>`<${s}>.*<\\/${s}>`).join("|"),"s").test(r))return r;var n=document.createElement("div");n.innerHTML=r;var i=!1;t.forEach(function(s){var u=n.getElementsByTagName(s);for(o=u.length;o--;)i=!0,u[o].parentNode.removeChild(u[o])});for(var a=n.getElementsByTagName("link"),o=a.length;o--;)a[o].getAttribute("rel")=="stylesheet"&&(i=!0,a[o].parentNode.removeChild(a[o]));return i?n.innerHTML:r},is_element_in_viewport:function(r,t=0){typeof jQuery=="function"&&r instanceof jQuery&&(r=r[0]);var e=r.getBoundingClientRect();return e.top+t>=0&&e.left+t>=0&&e.bottom-t<=$(window).height()&&e.right-t<=$(window).width()},is_element_in_modal(r){return Boolean($(r).parents(".modal").length)},set_style:function(r,t){if(!!r){var e=document.createElement("style");if(e.type="text/css",t){var n=document.getElementById(t);n&&n.parentNode.removeChild(n),e.id=t}return e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(e),e}},add:function(r,t,e,n,i,a){r&&r.substr&&(r=frappe.dom.by_id(r));var o=document.createElement(t);return r&&r.appendChild(o),e&&(t.toLowerCase()=="img"?o.src=e:o.className=e),n&&frappe.dom.css(o,n),i&&(o.innerHTML=i),a&&(o.onclick=a),o},css:function(r,t){return r&&t&&$.extend(r.style,t),r},activate:function(r,t,e,n="active"){r.find(`.${e}.${n}`).removeClass(n),t.addClass(n)},freeze:function(r,t){if($("#freeze").length)$("#freeze").addClass("in");else{var e=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid)return cur_frm.cur_grid.toggle_view(),!1}).appendTo("#body");e.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:r||""})),setTimeout(function(){e.addClass("in")},1)}t&&$("#freeze").addClass(t),frappe.dom.freeze_count++},unfreeze:function(){if(!!frappe.dom.freeze_count&&(frappe.dom.freeze_count--,!frappe.dom.freeze_count))var r=$("#freeze").removeClass("in").remove()},save_selection:function(){if(window.getSelection){var r=window.getSelection();if(r.getRangeAt&&r.rangeCount){for(var t=[],e=0,n=r.rangeCount;e<n;++e)t.push(r.getRangeAt(e));return t}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restore_selection:function(r){if(r)if(window.getSelection){var t=window.getSelection();t.removeAllRanges();for(var e=0,n=r.length;e<n;++e)t.addRange(r[e])}else document.selection&&r.select&&r.select()},is_touchscreen:function(){return"ontouchstart"in window},handle_broken_images(r){$(r).find("img").on("error",t=>{$(t.currentTarget).addClass("no-image")})},scroll_to_bottom(r){let t=$(r);t.scrollTop(t[0].scrollHeight)},file_to_base64(r){return new Promise(t=>{let e=new FileReader;e.onload=function(){t(e.result)},e.readAsDataURL(r)})},scroll_to_section(r){setTimeout(()=>{let t=$(`a:contains("${r}")`);t.length&&(t.parent().hasClass("collapsed")&&t.click(),frappe.ui.scroll(t.parent().parent()))},200)},pixel_to_inches(r){let t=$('<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>');t.appendTo(document.body);let e=document.getElementById("dpi").offsetWidth,n=r/e;return t.remove(),n}};frappe.ellipsis=function(r,t){return t||(t=20),r=cstr(r),r.length>t&&(r=r.substr(0,t)+"..."),r};frappe.run_serially=function(r){var t=Promise.resolve();return r.forEach(e=>{e&&(t=t.then?t.then(e):Promise.resolve())}),t};frappe.load_image=(r,t,e,n=()=>{})=>{var i=new Image;i.onload=function(){t(this)},i.onerror=e,n(i),i.src=r};frappe.timeout=r=>new Promise(t=>{setTimeout(()=>t(),r*1e3)});frappe.scrub=function(r,t="_"){return r.replace(/ /g,t).toLowerCase()};frappe.unscrub=function(r){return frappe.model.unscrub(r)};frappe.get_data_pill=(r,t=null,e=null,n=null)=>{let i=$(`
		<button class="data-pill btn">
			<div class="flex align-center ellipsis">
				${n||""}
				<span class="pill-label ${n?"ml-2":""}">${r}</span>
			</div>
		</button>
	`);if(e){let a=$(`
			<span class="remove-btn cursor-pointer">
				${frappe.utils.icon("close","sm")}
			</span>
		`).click(()=>{e(t||r,i)});i.append(a)}return i};frappe.get_modal=function(r,t){return $(`<div class="modal fade" style="overflow: auto;" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="fill-width flex title-section">
						<span class="indicator hidden"></span>
						<h4 class="modal-title">${r}</h4>
					</div>
					<div class="modal-actions">
						<button class="btn btn-modal-minimize btn-link hide">
							${frappe.utils.icon("collapse")}
						</button>
						<button class="btn btn-modal-close btn-link" data-dismiss="modal">
							${frappe.utils.icon("close-alt","sm","close-alt")}
						</button>
					</div>
				</div>
				<div class="modal-body ui-front">${t}</div>
				<div class="modal-footer hide">
					<div class="custom-actions"></div>
					<div class="standard-actions">
						<button type="button" class="btn btn-secondary btn-sm hide btn-modal-secondary">
						</button>
						<button type="button" class="btn btn-primary btn-sm hide btn-modal-primary">
							${__("Confirm")}
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>`)};frappe.is_online=function(){return frappe.boot.developer_mode==1?!0:"onLine"in navigator?navigator.onLine:!0};$(window).on("online",function(){frappe.show_alert({indicator:"green",message:__("You are connected to internet.")})});$(window).on("offline",function(){frappe.show_alert({indicator:"orange",message:__("Connection lost. Some features might not work.")})});var to=class{constructor(t,e,n,i){this.layout=i,this.card_layout=n,this.parent=t,this.df=e||{},this.fields_list=[],this.fields_dict={},this.make(),this.df.label&&this.df.collapsible&&localStorage.getItem(e.css_class+"-closed")&&this.collapse(),this.row={wrapper:this.wrapper},this.refresh()}make(){let t=this.card_layout;this.wrapper=$(`<div class="row
				${this.df.is_dashboard_section?"form-dashboard-section":"form-section"}
				${t?"card-section":""}">
			`).appendTo(this.parent),this.layout&&this.layout.sections.push(this),this.df&&(this.df.label&&this.make_head(),this.df.description&&(this.description_wrapper=$(`<div class="col-sm-12 form-section-description">
						${__(this.df.description)}
					</div>`),this.wrapper.append(this.description_wrapper)),this.df.css_class&&this.wrapper.addClass(this.df.css_class),this.df.hide_border&&this.wrapper.toggleClass("hide-border",!0)),this.body=$('<div class="section-body">').appendTo(this.wrapper),this.df.body_html&&this.body.append(this.df.body_html)}make_head(){this.head=$(`
			<div class="section-head">
				${__(this.df.label)}
				<span class="ml-2 collapse-indicator mb-1"></span>
			</div>
		`),this.head.appendTo(this.wrapper),this.indicator=this.head.find(".collapse-indicator"),this.indicator.hide(),this.df.collapsible&&(this.collapse_link=this.head.on("click",()=>{this.collapse()}),this.set_icon(),this.indicator.show())}refresh(t){!this.df||(t=t||this.df.hidden||this.df.hidden_due_to_dependency,this.wrapper.toggleClass("hide-control",!!t))}collapse(t){!(this.head&&this.body)||(t===void 0&&(t=!this.body.hasClass("hide")),this.body.toggleClass("hide",t),this.head&&this.head.toggleClass("collapsed",t),this.set_icon(t),this.fields_list.forEach(e=>{e.df.fieldtype=="Signature"&&e.refresh()}),this.df.css_class&&localStorage.setItem(this.df.css_class+"-closed",t?"1":""))}set_icon(t){let e=t?"down":"up-line";this.indicator&&this.indicator.html(frappe.utils.icon(e,"sm","mb-1"))}is_collapsed(){return this.body.hasClass("hide")}has_missing_mandatory(){let t=!1;for(let e=0,n=this.fields_list.length;e<n;e++){let i=this.fields_list[e].df;if(i.reqd&&this.layout.doc[i.fieldname]==null){t=!0;break}}return t}hide(){this.on_section_toggle(!1)}show(){this.on_section_toggle(!0)}on_section_toggle(t){this.wrapper.toggleClass("hide-control",!t)}};var ro=class{constructor(t,e,n,i,a){this.parent=t,this.df=e||{},this.frm=n,this.doctype="User",this.label=this.df&&this.df.label,this.tabs_list=i,this.tabs_content=a,this.fields_list=[],this.fields_dict={},this.make(),this.refresh()}make(){let t=`${frappe.scrub(this.doctype,"-")}-${this.df.fieldname}`;this.parent=$(`
			<li class="nav-item">
				<a class="nav-link ${this.df.active?"active":""}" id="${t}-tab"
					data-toggle="tab"
					href="#${t}"
					role="tab"
					aria-controls="${this.label}">
						${__(this.label)}
				</a>
			</li>
		`).appendTo(this.tabs_list),this.wrapper=$(`<div class="tab-pane fade show ${this.df.active?"active":""}"
			id="${t}" role="tabpanel" aria-labelledby="${t}-tab">`).appendTo(this.tabs_content)}refresh(){if(!this.df)return;let t=this.df.hidden||this.df.hidden_due_to_dependency;!t&&this.frm&&!this.frm.get_perm(this.df.permlevel||0,"read")&&(t=!0),this.toggle(!t)}toggle(t){this.parent.toggleClass("hide",!t),this.wrapper.toggleClass("hide",!t),this.parent.toggleClass("show",t),this.wrapper.toggleClass("show",t),this.hidden=!t}show(){this.parent.show()}hide(){this.parent.hide()}set_active(){this.parent.find(".nav-link").tab("show"),this.wrapper.addClass("show")}is_active(){return this.wrapper.hasClass("active")}is_hidden(){this.wrapper.hasClass("hide")&&this.parent.hasClass("hide")}};var no=class{constructor(t,e){e||(e={}),this.df=e,this.section=t,this.make(),this.resize_all_columns()}make(){this.wrapper=$(`
			<div class="form-column">
				<form>
				</form>
			</div>
		`).appendTo(this.section.body).find("form").on("submit",function(){return!1}),this.df.label&&$(`
				<label class="control-label">
					${__(this.df.label)}
				</label>
			`).appendTo(this.wrapper)}resize_all_columns(){let t=cint(12/this.section.wrapper.find(".form-column").length);this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+t)}refresh(){this.section.refresh()}};frappe.ui.form.Layout=class{constructor(t){this.views={},this.pages=[],this.tabs=[],this.sections=[],this.fields_list=[],this.fields_dict={},$.extend(this,t)}make(){!this.parent&&this.body&&(this.parent=this.body),this.wrapper=$('<div class="form-layout">').appendTo(this.parent),this.message=$('<div class="form-message hidden"></div>').appendTo(this.wrapper),this.page=$('<div class="form-page"></div>').appendTo(this.wrapper),this.fields||(this.fields=this.get_doctype_fields()),this.is_tabbed_layout()&&this.setup_tabbed_layout(),this.setup_tab_events(),this.render()}setup_tabbed_layout(){$(`
			<div class="form-tabs-list">
				<ul class="nav form-tabs" id="form-tabs" role="tablist"></ul>
			</div>
		`).appendTo(this.page),this.tabs_list=this.page.find(".form-tabs"),this.tabs_content=$('<div class="form-tab-content tab-content"></div>').appendTo(this.page),this.setup_events()}show_empty_form_message(){this.wrapper.find(".frappe-control:visible").length||this.wrapper.find(".section-head.collapsed").length||this.show_message(__("This form does not have any input"))}get_doctype_fields(){let t=[this.get_new_name_field()];return this.doctype_layout?t=t.concat(this.get_fields_from_layout()):t=t.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype])),t}get_new_name_field(){return{parent:this.frm.doctype,fieldtype:"Data",fieldname:"__newname",reqd:1,hidden:1,label:__("Name"),get_status:function(t){return t.frm&&t.frm.is_new()&&t.frm.meta.autoname&&["prompt","name"].includes(t.frm.meta.autoname.toLowerCase())?"Write":"None"}}}get_fields_from_layout(){let t=[];for(let e of this.doctype_layout.fields){let n=copy_dict(frappe.meta.docfield_map[this.doctype][e.fieldname]);n.label=e.label,t.push(n)}return t}show_message(t,e){this.message_color&&this.message.removeClass(this.message_color),this.message_color=e&&["yellow","blue","red"].includes(e)?e:"blue",t?(t.substr(0,1)!=="<"&&(t="<div>"+t+"</div>"),this.message.removeClass("hidden").addClass(this.message_color),$(t).appendTo(this.message)):this.message.empty().addClass("hidden")}render(t){let e=t||this.fields;if(this.section=null,this.column=null,this.no_opening_section()&&!this.is_tabbed_layout()&&this.fields.unshift({fieldtype:"Section Break"}),this.is_tabbed_layout()){let n={label:__("Details"),fieldname:"details",fieldtype:"Tab Break"};(this.fields[1].fieldtype==="Tab Break"?this.fields[1]:null)||this.fields.splice(1,0,n)}e.forEach(n=>{switch(n.fieldtype){case"Fold":this.make_page(n);break;case"Section Break":this.make_section(n);break;case"Column Break":this.make_column(n);break;case"Tab Break":this.make_tab(n);break;default:this.make_field(n)}})}no_opening_section(){return this.fields[0]&&this.fields[0].fieldtype!="Section Break"||!this.fields.length}no_opening_tab(){return this.fields[1]&&this.fields[1].fieldtype!="Tab Break"||!this.fields.length}is_tabbed_layout(){return this.fields.find(t=>t.fieldtype==="Tab Break")}replace_field(t,e,n){if(e.fieldname=t,this.fields_dict[t]&&this.fields_dict[t].df){let i=this.init_field(e,n);this.fields_dict[t].$wrapper.remove(),this.fields_list.splice(this.fields_dict[t],1,i),this.fields_dict[t]=i,this.frm&&(i.perm=this.frm.perm),this.section.fields_list.splice(this.section.fields_dict[t],1,i),this.section.fields_dict[t]=i,this.refresh_fields([e])}}make_field(t,e,n){!this.section&&this.make_section(),!this.column&&this.make_column();let i=this.init_field(t,n);this.fields_list.push(i),this.fields_dict[t.fieldname]=i,this.frm&&(i.perm=this.frm.perm),this.section.fields_list.push(i),this.section.fields_dict[t.fieldname]=i,i.section=this.section,this.current_tab&&(i.tab=this.current_tab,this.current_tab.fields_list.push(i),this.current_tab.fields_dict[t.fieldname]=i)}init_field(t,e=!1){let n=frappe.ui.form.make_control({df:t,doctype:this.doctype,parent:this.column.wrapper.get(0),frm:this.frm,render_input:e,doc:this.doc,layout:this});return n.layout=this,n}make_page(t){let e=this,n=$('<div class="form-clickable-section text-center">				<a class="btn-fold h6 text-muted">'+__("Show more details")+"</a>			</div>").appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper),this.fold_btn=n.find(".btn-fold").on("click",function(){let i=$(this).parent().next();i.hasClass("hide")?($(this).removeClass("btn-fold").html(__("Hide details")),i.removeClass("hide"),frappe.utils.scroll_to($(this),!0,30),e.folded=!1):($(this).addClass("btn-fold").html(__("Show more details")),i.addClass("hide"),e.folded=!0)}),this.section=null,this.folded=!0}unfold(){this.fold_btn.trigger("click")}make_section(t){this.section=new to(this.current_tab?this.current_tab.wrapper:this.page,t,this.card_layout,this),t&&(this.fields_dict[t.fieldname]=this.section,this.fields_list.push(this.section)),this.column=null}make_column(t){this.column=new no(this.section,t),t&&t.fieldname&&this.fields_list.push(this.column)}make_tab(t){this.section=null;let e=new ro(this,t,this.frm,this.tabs_list,this.tabs_content);return this.current_tab=e,this.make_section({fieldtype:"Section Break"}),this.tabs.push(e),e}refresh(t){t&&(this.doc=t),this.frm&&this.wrapper.find(".empty-form-alert").remove(),this.attach_doc_and_docfields(!0),this.frm&&this.frm.wrapper&&$(this.frm.wrapper).trigger("refresh-fields"),this.refresh_dependency(),this.refresh_sections(),this.tabbed_layout&&this.refresh_tabs(),this.frm&&this.refresh_section_collapse(),document.activeElement&&document.activeElement.tagName=="INPUT"&&this.is_numeric_field_active()&&document.activeElement.select()}is_numeric_field_active(){let e=($(document.activeElement).closest(".frappe-control").data()||{}).fieldtype;return frappe.model.numeric_fieldtypes.includes(e)}refresh_sections(){this.wrapper.find(".form-section:not(.hide-control)").each(function(){let t=$(this).removeClass("empty-section visible-section");t.find(".frappe-control:not(.hide-control)").length?t.addClass("visible-section"):t.addClass("empty-section")})}refresh_tabs(){this.tabs.forEach(e=>{(!e.wrapper.hasClass("hide")||!e.parent.hasClass("hide"))&&(e.parent.removeClass("show hide"),e.wrapper.removeClass("show hide"),e.wrapper.find(".form-section:not(.hide-control, .empty-section), .form-dashboard-section:not(.hide-control, .empty-section)").length?e.toggle(!0):e.toggle(!1))});let t=this.tabs.filter(e=>!e.hidden);t&&t.length==1&&t[0].parent.toggleClass("hide show")}refresh_fields(t){let e=t.map(n=>{if(n.fieldname)return n.fieldname});this.fields_list.map(n=>{e.includes(n.df.fieldname)&&(n.refresh(),n.df.default&&n.set_input(n.df.default))})}add_fields(t){this.render(t),this.refresh_fields(t)}refresh_section_collapse(){if(!!(this.sections&&this.sections.length))for(let t=0;t<this.sections.length;t++){let e=this.sections[t],n=e.df;if(n&&n.collapsible){let i=!0;n.collapsible_depends_on&&(i=!this.evaluate_depends_on_value(n.collapsible_depends_on)),i&&e.has_missing_mandatory()&&(i=!1),e.collapse(i)}}}attach_doc_and_docfields(t){let e=this;for(let n=0,i=this.fields_list.length;n<i;n++){let a=this.fields_list[n];e.doc&&(a.doc=e.doc,a.doctype=e.doc.doctype,a.docname=e.doc.name,a.df=frappe.meta.get_docfield(e.doc.doctype,a.df.fieldname,e.doc.name)||a.df,e.frm&&(a.perm=e.frm.perm)),t&&a.df&&a.refresh&&a.refresh()}}refresh_section_count(){this.wrapper.find(".section-count-label:visible").each(function(t){$(this).html(t+1)})}setup_events(){this.tabs_list.off("click").on("click",".nav-link",t=>{t.preventDefault(),t.stopImmediatePropagation(),$(t.currentTarget).tab("show")})}setup_tab_events(){this.wrapper.on("keydown",t=>{if(t.which==9){let e=$(t.target),n=e.attr("data-doctype"),i=e.attr("data-fieldname");if(n)return this.handle_tab(n,i,t.shiftKey)}})}handle_tab(t,e,n){let i=null,a=null,o=this.fields_list,s=!1;if(t!=this.doctype){if(i=this.get_open_grid_row(),!i||!i.layout)return;o=i.layout.fields_list}for(let u=0,h=o.length;u<h;u++){if(o[u].df.fieldname==e){if(n){a?this.set_focus(a):$(this.primary_button).focus();break}if(u<h-1&&(s=this.focus_on_next_field(u,o)),s)break}this.is_visible(o[u])&&(a=o[u])}return s||(i?i.doc.idx==i.grid.grid_rows.length?i.toggle_view(!1,function(){i.grid.frm.layout.handle_tab(i.grid.df.parent,i.grid.df.fieldname)}):i.grid.grid_rows[i.doc.idx].toggle_view(!0):n||$(this.primary_button).focus()),!1}focus_on_next_field(t,e){for(let n=t+1,i=e.length;n<i;n++){let a=e[n];if(this.is_visible(a)){if(a.df.fieldtype==="Table")return a.grid.grid_rows&&a.grid.grid_rows.length||a.grid.add_new_row(),a.grid.grid_rows[0].show_form(),!0;if(!in_list(frappe.model.no_value_type,a.df.fieldtype))return this.set_focus(a),!0}}}is_visible(t){return t.disp_status==="Write"&&t.df&&"hidden"in t.df&&!t.df.hidden}set_focus(t){t.tab&&t.tab.set_active(),t.df.fieldtype=="Table"?t.grid.grid_rows.length?t.grid.grid_rows[0].toggle_view(!0):t.grid.add_new_row(1):t.editor?t.editor.set_focus():t.$input&&t.$input.focus()}get_open_grid_row(){return $(".grid-row-open").data("grid_row")}refresh_dependency(){let t=!1,e=this.fields_list.concat(this.tabs);for(let n in e){let i=e[n];if(i.df.depends_on||i.df.mandatory_depends_on||i.df.read_only_depends_on){t=!0;break}}if(!!t){for(let n=e.length-1;n>=0;n--){let i=e[n];i.guardian_has_value=!0,i.df.depends_on&&(i.guardian_has_value=this.evaluate_depends_on_value(i.df.depends_on),i.guardian_has_value?i.df.hidden_due_to_dependency&&(i.df.hidden_due_to_dependency=!1,i.refresh()):i.df.hidden_due_to_dependency||(i.df.hidden_due_to_dependency=!0,i.refresh())),i.df.mandatory_depends_on&&this.set_dependant_property(i.df.mandatory_depends_on,i.df.fieldname,"reqd"),i.df.read_only_depends_on&&this.set_dependant_property(i.df.read_only_depends_on,i.df.fieldname,"read_only")}this.refresh_section_count()}}set_dependant_property(t,e,n){let a=this.evaluate_depends_on_value(t)?1:0,o;this.frm?o=this.frm:(this.is_dialog||this.doctype==="Web Form")&&(o=this),o&&(this.doc&&this.doc.parent&&this.doc.parentfield?(o.setting_dependency=!0,o.set_df_property(this.doc.parentfield,n,a,this.doc.parent,e,this.doc.name),o.setting_dependency=!1,this.fields_dict[e]&&this.fields_dict[e].refresh()):o.set_df_property(e,n,a))}evaluate_depends_on_value(t){let e=null,n=this.doc;if(!n&&this.get_values&&(n=this.get_values(!0)),!n)return;let i=this.frm?this.frm.doc:this.doc||null;if(typeof t=="boolean")e=t;else if(typeof t=="function")e=t(n);else if(t.substr(0,5)=="eval:")try{e=frappe.utils.eval(t.substr(5),{doc:n,parent:i}),i&&i.istable&&t.includes("is_submittable")&&(e=!0)}catch(o){frappe.throw(__('Invalid "depends_on" expression'))}else if(t.substr(0,3)=="fn:"&&this.frm)e=this.frm.script_manager.trigger(t.substr(3),this.doctype,this.docname);else{var a=n[t];$.isArray(a)?e=!!a.length:e=!!a}return e}};frappe.provide("frappe.ui");frappe.ui.FieldGroup=class extends frappe.ui.form.Layout{constructor(t){super(t);this.dirty=!1,$.each(this.fields||[],function(e,n){!n.fieldname&&n.label&&(n.fieldname=n.label.replace(/ /g,"_").toLowerCase())}),this.values&&this.set_values(this.values)}make(){var t=this;this.fields&&(super.make(),this.refresh(),$.each(this.fields_list,(e,n)=>{if(!is_null(n.df.default)){let i=n.df.default;i==="Today"&&n.df.fieldtype==="Date"&&(i=frappe.datetime.get_today()),this.set_value(n.df.fieldname,i)}}),this.no_submit_on_enter||this.catch_enter_as_submit(),$(this.wrapper).find("input, select").on("change awesomplete-selectcomplete",()=>{this.dirty=!0,frappe.run_serially([()=>frappe.timeout(.1),()=>t.refresh_dependency()])}))}focus_on_first_input(){this.no_focus||$.each(this.fields_list,function(t,e){if(!in_list(["Date","Datetime","Time","Check"],e.df.fieldtype)&&e.set_focus)return e.set_focus(),!1})}catch_enter_as_submit(){var t=this;$(this.body).find('input[type="text"], input[type="password"], select').keypress(function(e){e.which==13&&t.has_primary_action&&(e.preventDefault(),t.get_primary_btn().trigger("click"))})}get_input(t){var e=this.fields_dict[t];return $(e.txt?e.txt:e.input)}get_field(t){return this.fields_dict[t]}get_values(t){var e={},n=[];for(var i in this.fields_dict){var a=this.fields_dict[i];if(a.get_value){var o=a.get_value();a.df.reqd&&is_null(typeof o=="string"?strip_html(o):o)&&n.push(__(a.df.label)),a.df.reqd&&a.df.fieldtype==="Text Editor"&&is_null(strip_html(cstr(o)))&&n.push(__(a.df.label)),is_null(o)||(e[a.df.fieldname]=o)}}return n.length&&!t?(frappe.msgprint({title:__("Missing Values Required"),message:__("Following fields have missing values:")+"<br><br><ul><li>"+n.join("<li>")+"</ul>",indicator:"orange"}),null):e}get_value(t){var e=this.fields_dict[t];return e&&(e.get_value?e.get_value():null)}set_value(t,e){return new Promise(n=>{var i=this.fields_dict[t];i?i.set_value(e).then(()=>{i.set_input(e),i.refresh(),this.refresh_dependency(),n()}):n()})}set_input(t,e){return this.set_value(t,e)}set_values(t){let e=[];for(var n in t)this.fields_dict[n]&&e.push(this.set_value(n,t[n]));return Promise.all(e)}clear(){for(var t in this.fields_dict){var e=this.fields_dict[t];e&&e.set_input&&e.set_input(e.df.default||"")}}set_df_property(t,e,n){let i=this.get_field(t);i.df[e]=n,i.refresh()}};frappe.provide("frappe.ui");window.cur_dialog=null;frappe.ui.open_dialogs=[];frappe.ui.Dialog=class extends frappe.ui.FieldGroup{constructor(t){super();this.display=!1,this.is_dialog=!0,$.extend(this,{animate:!0,size:null},t),this.make()}make(){this.$wrapper=frappe.get_modal("",""),this.static&&(this.$wrapper.modal({backdrop:"static",keyboard:!1}),this.get_close_btn().hide()),this.wrapper=this.$wrapper.find(".modal-dialog").get(0),this.size=="small"?$(this.wrapper).addClass("modal-sm"):this.size=="large"?$(this.wrapper).addClass("modal-lg"):this.size=="extra-large"&&$(this.wrapper).addClass("modal-xl"),this.make_head(),this.modal_body=this.$wrapper.find(".modal-body"),this.$body=$("<div></div>").appendTo(this.modal_body),this.body=this.$body.get(0),this.$message=$('<div class="hide modal-message"></div>').appendTo(this.modal_body),this.header=this.$wrapper.find(".modal-header"),this.footer=this.$wrapper.find(".modal-footer"),this.standard_actions=this.footer.find(".standard-actions"),this.custom_actions=this.footer.find(".custom-actions"),this.set_indicator(),super.make(),this.refresh_section_collapse(),this.action=this.action||{primary:{},secondary:{}},(this.primary_action||this.action.primary&&this.action.primary.onsubmit)&&this.set_primary_action(this.primary_action_label||this.action.primary.label||__("Submit",null,"Primary action in dialog"),this.primary_action||this.action.primary.onsubmit),this.secondary_action&&this.set_secondary_action(this.secondary_action),(this.secondary_action_label||this.action.secondary&&this.action.secondary.label)&&this.set_secondary_action_label(this.secondary_action_label||this.action.secondary.label),this.minimizable&&(this.header.find(".title-section").click(()=>this.is_minimized&&this.toggle_minimize()),this.get_minimize_btn().removeClass("hide").on("click",()=>this.toggle_minimize()));var t=this;this.$wrapper.on("hide.bs.modal",function(){t.display=!1,t.is_minimized=!1,t.hide_scrollbar(!1),frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===t&&(frappe.ui.open_dialogs.pop(),frappe.ui.open_dialogs.length?window.cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]:window.cur_dialog=null),t.onhide&&t.onhide(),t.on_hide&&t.on_hide()}).on("shown.bs.modal",function(){t.display=!0,window.cur_dialog=t,frappe.ui.open_dialogs.push(t),t.focus_on_first_input(),t.hide_scrollbar(!0),t.on_page_show&&t.on_page_show(),$(document).trigger("frappe.ui.Dialog:shown"),$(document).off("focusin.modal")}).on("scroll",function(){var e=$("input:focus");e.length&&["Date","Datetime","Time"].includes(e.attr("data-fieldtype"))&&e.blur()})}get_primary_btn(){return this.standard_actions.find(".btn-primary")}get_minimize_btn(){return this.$wrapper.find(".modal-header .btn-modal-minimize")}set_message(t){this.$message.removeClass("hide"),this.$body.addClass("hide"),this.$message.text(t)}clear_message(){this.$message.addClass("hide"),this.$body.removeClass("hide")}clear(){super.clear(),this.clear_message()}set_primary_action(t,e){this.footer.removeClass("hide"),this.has_primary_action=!0;var n=this;return this.get_primary_btn().removeClass("hide").html(t).click(function(){n.primary_action_fulfilled=!0;var i=n.get_values();!i||e&&e.apply(n,[i])})}set_secondary_action(t){this.footer.removeClass("hide"),this.get_secondary_btn().removeClass("hide").off("click").on("click",t)}set_secondary_action_label(t){this.get_secondary_btn().removeClass("hide").html(t)}disable_primary_action(){this.get_primary_btn().addClass("disabled")}enable_primary_action(){this.get_primary_btn().removeClass("disabled")}make_head(){this.set_title(this.title)}set_title(t){this.$wrapper.find(".modal-title").html(t)}set_indicator(){this.indicator&&this.header.find(".indicator").removeClass().addClass("indicator "+this.indicator)}show(){return this.animate?this.$wrapper.addClass("fade"):this.$wrapper.removeClass("fade"),this.$wrapper.modal("show"),this.$wrapper.removeClass("modal-minimize"),this.minimizable&&this.is_minimized&&($(".modal-backdrop").toggle(),this.is_minimized=!1),this.clear_message(),this.primary_action_fulfilled=!1,this.is_visible=!0,this}hide(){this.$wrapper.modal("hide"),this.is_visible=!1}get_close_btn(){return this.$wrapper.find(".btn-modal-close")}get_secondary_btn(){return this.standard_actions.find(".btn-modal-secondary")}no_cancel(){this.get_close_btn().toggle(!1)}cancel(){this.get_close_btn().trigger("click")}toggle_minimize(){$(".modal-backdrop").toggle();let t=this.$wrapper.closest(".modal").toggleClass("modal-minimize");t.attr("tabindex")?t.removeAttr("tabindex"):t.attr("tabindex",-1),this.is_minimized=!this.is_minimized;let e=this.is_minimized?"expand":"collapse";this.get_minimize_btn().html(frappe.utils.icon(e)),this.on_minimize_toggle&&this.on_minimize_toggle(this.is_minimized),this.header.find(".modal-title").toggleClass("cursor-pointer"),this.hide_scrollbar(!this.is_minimized)}hide_scrollbar(t){$("body").css("overflow",t?"hidden":"auto")}add_custom_action(t,e,n=null){this.footer.removeClass("hide");let i=$(`
			<button class="btn btn-secondary btn-sm ${n||""}">
				${t}
			</button>
		`);this.custom_actions.append(i),e&&i.click(e)}};frappe.ui.hide_open_dialog=()=>{window.cur_dialog&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide())};frappe.provide("frappe.messages");frappe.messages.waiting=function(r,t){return $(frappe.messages.get_waiting_message(t)).appendTo(r)};frappe.messages.get_waiting_message=function(r){return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">		<p class="text-center">%(msg)s</p></div>',{msg:r})};frappe.throw=function(r){throw typeof r=="string"&&(r={message:r,title:__("Error")}),r.indicator||(r.indicator="red"),frappe.msgprint(r),new Error(r.message)};frappe.confirm=function(r,t,e){var n=new frappe.ui.Dialog({title:__("Confirm",null,"Title of confirmation dialog"),primary_action_label:__("Yes",null,"Approve confirmation dialog"),primary_action:()=>{t&&t(),n.hide()},secondary_action_label:__("No",null,"Dismiss confirmation dialog"),secondary_action:()=>n.hide()});return n.$body.append(`<p class="frappe-confirm-message">${r}</p>`),n.show(),n.confirm_dialog=!0,e&&(n.onhide=()=>{n.primary_action_fulfilled||e()}),n};frappe.warn=function(r,t,e,n,i){let a=new frappe.ui.Dialog({title:r,indicator:"red",primary_action_label:n,primary_action:()=>{e&&e(),a.hide()},secondary_action_label:__("Cancel",null,"Secondary button in warning dialog"),secondary_action:()=>a.hide(),minimizable:i});return a.$body.append(`<div class="frappe-confirm-message">${t}</div>`),a.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),a.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),a.show(),a};frappe.prompt=function(r,t,e,n){typeof r=="string"&&(r=[{label:r,fieldname:"value",fieldtype:"Data",reqd:1}]),$.isArray(r)||(r=[r]);var i=new frappe.ui.Dialog({fields:r,title:e||__("Enter Value",null,"Title of prompt dialog")});return i.set_primary_action(n||__("Submit",null,"Primary action of prompt dialog"),function(){var a=i.get_values();!a||(i.hide(),t(a))}),i.show(),i};frappe.msgprint=function(r,t,e){if(!!r){if($.isPlainObject(r))var n=r;else if(typeof r=="string"&&r.substr(0,1)==="{")var n=JSON.parse(r);else var n={message:r,title:t};if(n.indicator||(n.indicator="blue"),n.as_list){let a=n.message.map(o=>`<li>${o}</li>`).join("");n.message=`<ul style="padding-left: 20px">${a}</ul>`}if(n.as_table){let a=n.message.map(o=>`<tr>${o.map(u=>`<td>${u}</td>`).join("")}</tr>`).join("");n.message=`<table class="table table-bordered" style="margin: 0;">${a}</table>`}if(n.message instanceof Array){let a=n.message,o=a.map(s=>JSON.parse(s)).filter(s=>s.raise_exception);o.length&&(a=o),a.forEach(function(s){frappe.msgprint(s)});return}if(n.alert||n.toast){frappe.show_alert(n);return}if(frappe.msg_dialog||(frappe.msg_dialog=new frappe.ui.Dialog({title:__("Message"),onhide:function(){frappe.msg_dialog.custom_onhide&&frappe.msg_dialog.custom_onhide(),frappe.msg_dialog.msg_area.empty()},minimizable:n.is_minimizable||e}),frappe.msg_dialog.msg_area=$('<div class="msgprint">').appendTo(frappe.msg_dialog.body),frappe.msg_dialog.clear=function(){frappe.msg_dialog.msg_area.empty()},frappe.msg_dialog.indicator=frappe.msg_dialog.header.find(".indicator")),n.primary_action){if(n.primary_action.server_action&&typeof n.primary_action.server_action=="string"&&(n.primary_action.action=()=>{frappe.call({method:n.primary_action.server_action,args:{args:n.primary_action.args},callback(){n.primary_action.hide_on_success&&frappe.hide_msgprint()}})}),n.primary_action.client_action&&typeof n.primary_action.client_action=="string"){let a=n.primary_action.client_action.split("."),o=window;for(let s of a)o=o[s];n.primary_action.action=()=>{typeof o=="function"&&o(n.primary_action.args)}}frappe.msg_dialog.set_primary_action(__(n.primary_action.label||n.primary_action_label||"Done"),n.primary_action.action)}else frappe.msg_dialog.has_primary_action&&(frappe.msg_dialog.get_primary_btn().addClass("hide"),frappe.msg_dialog.has_primary_action=!1);n.secondary_action&&(frappe.msg_dialog.set_secondary_action(n.secondary_action.action),frappe.msg_dialog.set_secondary_action_label(__(n.secondary_action.label||"Close"))),n.message==null&&(n.message=""),n.message.search(/<br>|<p>|<li>/)==-1&&(r=frappe.utils.replace_newlines(n.message));var i=!1;return n.clear?frappe.msg_dialog.msg_area.empty():i=frappe.msg_dialog.msg_area.html(),(n.title||!i)&&frappe.msg_dialog.set_title(n.title||__("Message",null,"Default title of the message dialog")),n.indicator?frappe.msg_dialog.indicator.removeClass().addClass("indicator "+n.indicator):frappe.msg_dialog.indicator.removeClass().addClass("hidden"),n.wide?frappe.msg_dialog.wrapper.classList.contains("msgprint-dialog")&&frappe.msg_dialog.wrapper.classList.remove("msgprint-dialog"):frappe.msg_dialog.wrapper.classList.add("msgprint-dialog"),i&&frappe.msg_dialog.msg_area.append("<hr>"),frappe.msg_dialog.msg_area.append(n.message),frappe.msg_dialog.$wrapper.css("z-index",2e3),frappe.msg_dialog.show(),frappe.msg_dialog}};window.msgprint=frappe.msgprint;frappe.hide_msgprint=function(r){frappe.msg_dialog&&frappe.msg_dialog.msg_area&&frappe.msg_dialog.msg_area.empty(),frappe.msg_dialog&&frappe.msg_dialog.$wrapper.is(":visible")&&(r&&frappe.msg_dialog.$wrapper.removeClass("fade"),frappe.msg_dialog.hide(),r&&frappe.msg_dialog.$wrapper.addClass("fade"))};frappe.update_msgprint=function(r){!frappe.msg_dialog||frappe.msg_dialog&&!frappe.msg_dialog.$wrapper.is(":visible")?frappe.msgprint(r):frappe.msg_dialog.msg_area.html(r)};frappe.verify_password=function(r){frappe.prompt({fieldname:"password",label:__("Enter your password"),fieldtype:"Password",reqd:1},function(t){frappe.call({method:"frappe.core.doctype.user.user.verify_password",args:{password:t.password},callback:function(e){e.exc||r()}})},__("Verify Password"),__("Verify"))};frappe.show_progress=(r,t,e=100,n,i=!1)=>{let a;return frappe.cur_progress&&frappe.cur_progress.title===r&&frappe.cur_progress.is_visible?a=frappe.cur_progress:(a=new frappe.ui.Dialog({title:r}),a.progress=$(`<div>
			<div class="progress">
				<div class="progress-bar"></div>
			</div>
			<p class="description text-muted small"></p>
		</div`).appendTo(a.body),a.progress_bar=a.progress.css({"margin-top":"10px"}).find(".progress-bar"),a.$wrapper.removeClass("fade"),a.show(),frappe.cur_progress=a),n&&a.progress.find(".description").text(n),a.percent=cint(flt(t)*100/e),a.progress_bar.css({width:a.percent+"%"}),i&&a.percent===100&&setTimeout(frappe.hide_progress,500),a};frappe.hide_progress=function(){frappe.cur_progress&&(frappe.cur_progress.hide(),frappe.cur_progress=null)};frappe.show_alert=frappe.toast=function(r,t=7,e={}){let n={orange:"solid-warning",yellow:"solid-warning",blue:"solid-info",green:"solid-success",red:"solid-error"};typeof r=="string"&&(r={message:r}),$("#dialog-container").length||$('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo("body");let i;r.indicator?i=n[r.indicator.toLowerCase()]||"solid-"+r.indicator:i="solid-info";let a=r.indicator||"blue",o=$(`
		<div class="alert desk-alert ${a}" role="alert">
			<div class="alert-message-container">
				<div class="alert-title-container">
					<div>${frappe.utils.icon(i,"lg")}</div>
					<div class="alert-message">${r.message}</div>
				</div>
				<div class="alert-subtitle">${r.subtitle||""}</div>
			</div>
			<div class="alert-body" style="display: none"></div>
			<a class="close">${frappe.utils.icon("close-alt")}</a>
		</div>
	`);return o.hide().appendTo("#alert-container").show(),r.body&&o.find(".alert-body").show().html(r.body),o.find(".close, button").click(function(){return o.addClass("out"),setTimeout(()=>o.remove(),800),!1}),Object.keys(e).map(s=>{o.find(`[data-action=${s}]`).on("click",e[s])}),t>2&&(t=t-.8),setTimeout(()=>(o.addClass("out"),setTimeout(()=>o.remove(),800),!1),t*1e3),o};Object.defineProperty(window,"show_alert",{get:function(){return console.warn("Please use `frappe.show_alert` instead of `show_alert`. It will be deprecated soon."),frappe.show_alert}});frappe.provide("frappe.ui.keys");var ao=new WeakMap,jf=[];frappe.ui.keys.shortcut_groups=ao;frappe.ui.keys.get_shortcut_group=r=>(ao.has(r)||ao.set(r,new frappe.ui.keys.AltShortcutGroup),ao.get(r));var Bf=!1,$r=null,Bl=$(document.body);frappe.ui.keys.bind_shortcut_group_event=()=>{if(Bf)return;Bf=!0;function r(){$r?($r.addClass("alt-pressed"),Bl.removeClass("alt-pressed")):(Bl.addClass("alt-pressed"),$r&&$r.removeClass("alt-pressed"))}function t(){$r&&$r.removeClass("alt-pressed"),Bl.removeClass("alt-pressed")}$(document).on("keydown",e=>{let n=(frappe.ui.keys.key_map[e.which]||"").toLowerCase();if(n==="alt"&&r(),!(e.shiftKey||e.ctrlKey||e.metaKey)&&n&&e.altKey){let i=Db(n);i&&(e.preventDefault(),i.$target[0].click()),r()}}),$(document).on("keyup",e=>{e.key==="Alt"&&t()}),$(document).on("mousemove",()=>{t()})};function Db(r){let t=jf.filter(n=>r in n.shortcuts_dict).map(n=>n.shortcuts_dict[r]).filter(n=>n.$target.is(":visible")),e=null;return $r&&$r.is(".open")&&(e=t.find(n=>$.contains($r[0],n.$target[0]))),e||(e=t.find(n=>$.contains(window.cur_page.page.page.wrapper[0],n.$target[0])),e)}frappe.ui.keys.AltShortcutGroup=class{constructor(){this.shortcuts_dict={},$r=null,this.bind_events(),frappe.ui.keys.bind_shortcut_group_event(),jf.push(this)}bind_events(){$(document).on("show.bs.dropdown",t=>{$r&&$r.removeClass("alt-pressed");let e=$(t.target);e.is(".dropdown, .btn-group")&&($r=e)}),$(document).on("hide.bs.dropdown",()=>{$r&&$r.removeClass("alt-pressed"),$r=null})}add(t,e){e||(e=t);let n=e.text().trim(),a=n.split("").find(s=>{s=s.toLowerCase();let u=s>="a"&&s<="z";return!this.is_taken(s)&&u});if(!a){e.attr("data-label",n);return}for(let s in this.shortcuts_dict){let u=this.shortcuts_dict[s];if(u.text===n){u.$target=t,u.$text_el=e,this.underline_text(u);return}}let o={$target:t,$text_el:e,letter:a,text:n};this.shortcuts_dict[a.toLowerCase()]=o,this.underline_text(o)}underline_text(t){t.$text_el.attr("data-label",t.text);let e=!1,n=t.text.split("").map(a=>(a===t.letter&&!e&&(a=`<span class="alt-underline">${a}</span>`,e=!0),a)).join("");n=t.$text_el.html().replace(t.text.trim(),n.trim()),t.$text_el.html(n)}is_taken(t){let e=frappe.ui.keys.standard_shortcuts.filter(n=>!n.page).some(n=>n.shortcut===`alt+${t}`);return t in this.shortcuts_dict||e}};frappe.provide("frappe.ui.keys.handlers");frappe.ui.keys.setup=function(){$(window).on("keydown",function(r){var t=frappe.ui.keys.get_key(r);if(frappe.ui.keys.handlers[t]){for(var e=null,n=0,i=frappe.ui.keys.handlers[t].length;n<i;n++){var a=frappe.ui.keys.handlers[t][n],o=a.apply(this,[r]);o===!1&&(e=o)}return e}})};var Vn=[];frappe.ui.keys.standard_shortcuts=Vn;frappe.ui.keys.add_shortcut=({shortcut:r,action:t,description:e,page:n,target:i,condition:a,ignore_inputs:o=!1}={})=>{if(i instanceof jQuery){let d=i;t=()=>{d[0].click()}}a||(a=()=>!0);let s=d=>{if(!($(document.activeElement).is("input, select, textarea, [contenteditable=true]")&&!o)&&!!a()&&(!n||n.wrapper.is(":visible"))){let w=t(d);(w||w===void 0)&&d.preventDefault()}};s.page=n,frappe.ui.keys.off(r,n),frappe.ui.keys.on(r,s);let u=Vn.findIndex(d=>d.shortcut===r),h={shortcut:r,action:t,description:e,page:n,condition:a};u===-1?Vn.push(h):Vn[u]=h};frappe.ui.keys.show_keyboard_shortcut_dialog=()=>{if(frappe.ui.keys.is_dialog_shown)return;let r=Vn.filter(u=>!u.page),t=Vn.filter(u=>u.page&&u.page===window.cur_page.page.page),e=Vn.filter(u=>u.page&&u.page===window.cur_page.page.frm);function n(u,h){if(!u.length)return"";let d=u.filter(_=>_.condition?_.condition():!0).map(_=>{let g=_.shortcut.split("+").map(frappe.utils.to_title_case).join("+");return frappe.utils.is_mac()&&(g=g.replace("Ctrl","\u2318")),`<tr>
					<td width="40%"><kbd>${g}</kbd></td>
					<td width="60%">${_.description||""}</td>
				</tr>`}).join("");return d=`<h5 style="margin: 0;">${h}</h5>
			<table style="margin-top: 10px;" class="table table-bordered">
				${d}
			</table>`,d}let i=n(r,__("Global Shortcuts")),a=n(t,__("Page Shortcuts")),o=n(e,__("Grid Shortcuts")),s=new frappe.ui.Dialog({title:__("Keyboard Shortcuts"),on_hide(){frappe.ui.keys.is_dialog_shown=!1}});s.$body.append(i),s.$body.append(a),s.$body.append(o),s.$body.append(`
		<div class="text-muted">
			${__("Press Alt Key to trigger additional shortcuts in Menu and Sidebar")}
		</div>
	`),s.show(),frappe.ui.keys.is_dialog_shown=!0};frappe.ui.keys.get_key=function(r){var t=r.keyCode||r.which,e=frappe.ui.keys.key_map[t]||String.fromCharCode(t);return(r.ctrlKey||r.metaKey)&&(e="ctrl+"+e),r.shiftKey&&(e="shift+"+e),r.altKey&&(e="alt+"+e),r.altKey&&r.ctrlKey,e.toLowerCase()};frappe.ui.keys.on=function(r,t){frappe.ui.keys.handlers[r]||(frappe.ui.keys.handlers[r]=[]),frappe.ui.keys.handlers[r].push(t)};frappe.ui.keys.off=function(r,t){let e=frappe.ui.keys.handlers[r];!e||e.length===0||(frappe.ui.keys.handlers[r]=e.filter(n=>t?n.page!==t:!1))};frappe.ui.keys.add_shortcut({shortcut:"ctrl+s",action:function(r){return frappe.app.trigger_primary_action(),r.preventDefault(),!1},description:__("Trigger Primary Action"),ignore_inputs:!0});frappe.ui.keys.add_shortcut({shortcut:"ctrl+g",action:function(r){return $("#navbar-search").focus(),r.preventDefault(),!1},description:__("Open Awesomebar")});frappe.ui.keys.add_shortcut({shortcut:"ctrl+h",action:function(r){r.preventDefault(),$(".navbar-home img").click()},description:__("Navigate Home")});frappe.ui.keys.add_shortcut({shortcut:"alt+s",action:function(r){r.preventDefault(),$(".dropdown-navbar-user a").eq(0).click()},description:__("Open Settings")});frappe.ui.keys.add_shortcut({shortcut:"shift+/",action:function(){frappe.ui.keys.show_keyboard_shortcut_dialog()},description:__("Show Keyboard Shortcuts")});frappe.ui.keys.add_shortcut({shortcut:"alt+h",action:function(r){r.preventDefault(),$(".dropdown-help a").eq(0).click()},description:__("Open Help")});frappe.ui.keys.on("escape",function(r){Ff()});frappe.ui.keys.on("esc",function(r){Ff()});frappe.ui.keys.on("enter",function(r){window.cur_dialog&&cur_dialog.confirm_dialog&&cur_dialog.get_primary_btn().trigger("click")});frappe.ui.keys.on("ctrl+down",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_next()})});frappe.ui.keys.on("ctrl+up",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_prev()})});frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+r",action:function(){frappe.ui.toolbar.clear_cache()},description:__("Clear Cache and Reload")});frappe.ui.keys.key_map={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",91:"meta",18:"alt",27:"escape",37:"left",39:"right",38:"up",40:"down",32:"space",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",191:"/",188:"<",190:">"};"abcdefghijklmnopqrstuvwxyz".split("").forEach((r,t)=>{frappe.ui.keys.key_map[65+t]=r});frappe.ui.keyCode={ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32,BACKSPACE:8};function Ff(){var r=$(".grid-row-open");if(r.length){var t=r.data("grid_row");return t.toggle_view(!1),!1}if(cur_dialog&&!cur_dialog.no_cancel_flag)return cur_dialog.cancel(),!1}$(document).on("keydown",".dropdown-toggle",r=>{r.which===frappe.ui.keyCode.ESCAPE&&$(r.currentTarget).blur()});frappe.provide("frappe.ui");frappe.ui.color={get:function(r,t){return r&&t?this.get_color_shade(r,t):r?this.get_color_shade(r,"default"):frappe.ui.color_map},get_color:function(r){let t=Object.keys(frappe.ui.color_map);if(t.includes(r))return frappe.ui.color_map[r];console.warn(`'color_name' can be one of ${t} and not ${r}`)},get_color_map(){let r=["red","green","blue","dark-green","yellow","gray","purple","pink","orange"],t=["100","300","500","700"],e=getComputedStyle(document.body),n={};return r.forEach(i=>{n[i]=t.map(a=>e.getPropertyValue(`--${i}-${a}`).trim())}),n},get_color_shade:function(r,t){let e={default:2,light:1,"extra-light":0,dark:3};if(Object.keys(e).includes(t)){let n=this.get_color(r);return n?n[e[t]]:r}else console.warn(`'shade' can be one of ${Object.keys(e)} and not ${t}`)},all:function(){return Object.values(frappe.ui.color_map).reduce((r,t)=>r.concat(t),[])},names:function(){return Object.keys(frappe.ui.color_map)},is_standard:function(r){return r?r.startsWith("#")?this.all().includes(r):this.names().includes(r):!1},get_color_name:function(r){for(let t in frappe.ui.color_map)if(frappe.ui.color_map[t].includes(r))return t},get_contrast_color:function(r){if(!this.validate_hex(r))return;if(!this.is_standard(r))return this.brightness(r)<128?this.lighten(r,.5):this.lighten(r,-.5);let t=this.get_color_name(r);return this.get_color(t).indexOf(r)<=1?this.get(t,"dark"):this.get(t,"extra-light")},validate_hex:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)},lighten(r,t){var e=parseInt(r.slice(1),16),n=t<0?0:255,i=t<0?t*-1:t,a=e>>16,o=e>>8&255,s=e&255;return"#"+(16777216+(Math.round((n-a)*i)+a)*65536+(Math.round((n-o)*i)+o)*256+(Math.round((n-s)*i)+s)).toString(16).slice(1)},hex_to_rgb(r){r.startsWith("#")&&(r=r.substring(1));let t=parseInt(r.substring(0,2),16),e=parseInt(r.substring(2,4),16),n=parseInt(r.substring(4,6),16);return{r:t,g:e,b:n}},brightness(r){let t=this.hex_to_rgb(r);return(t.r*299+t.g*587+t.b*114)/1e3}};frappe.ui.color_map=frappe.ui.color.get_color_map();frappe.provide("frappe.ui");frappe.ui.Sidebar=class{constructor({wrapper:t,css_class:e}){this.wrapper=t,this.css_class=e,this.items={},this.make_dom()}make_dom(){this.wrapper.html(`
			<div class="${this.css_class} overlay-sidebar hidden-xs hidden-sm">
			</div>
		`),this.$sidebar=this.wrapper.find("."+this.css_class)}add_item(t,e,n=!1){let i,a;if(!e&&this.wrapper.find(".sidebar-menu").length===0?i=this.get_section():i=this.get_section(e),t instanceof jQuery)a=$("<li>"),t.appendTo(a);else{let s=`<li class=${n?"h6":""}>
				<a ${t.href?`href="${t.href}"`:""}>${t.label}</a>
			</li>`;a=$(s).click(()=>t.on_click&&t.on_click())}i.append(a),t.name&&(this.items[t.name]=a)}remove_item(t){this.items[t]&&this.items[t].remove()}get_section(t=""){let e=$(this.wrapper.find(`[data-section-heading="${t}"]`));if(e.length)return e;let n=t?`<li class="h6">${t}</li>`:"";return e=$(`
			<ul class="list-unstyled sidebar-menu" data-section-heading="${t||"default"}">
				${n}
			</ul>
		`),this.$sidebar.append(e),e}};frappe.ui.LinkPreview=class{constructor(){this.popovers_list=[],this.LINK_CLASSES='a[data-doctype], input[data-fieldtype="Link"], .popover',this.popover_timeout=null,this.setup_events()}setup_events(){$(document.body).on("mouseover",this.LINK_CLASSES,r=>{this.link_hovered=!0,this.element=$(r.currentTarget),this.is_link=this.element.get(0).tagName.toLowerCase()==="a",this.element.parents().find(".popover").length||(this.identify_doc(),this.popover=this.element.data("bs.popover"),this.name&&this.doctype&&this.setup_popover_control(r))}),this.handle_popover_hide()}identify_doc(){this.is_link?(this.doctype=this.element.attr("data-doctype"),this.name=this.element.attr("data-name"),this.href=this.element.attr("href")):(this.href=this.element.parents(".control-input-wrapper").find(".control-value a").attr("href"),this.doctype=this.element.attr("data-target"),this.name=this.element.val())}setup_popover_control(r){!(frappe.boot.link_preview_doctypes||[]).includes(this.doctype)||(this.element.on("change",()=>{this.new_popover=!0}),!this.popover||this.new_popover?this.data_timeout=setTimeout(()=>{this.create_popover(r)},100):this.popover_timeout=setTimeout(()=>{this.element.is(":focus")||this.show_popover(r)},1e3))}create_popover(r){this.new_popover=!1,!this.element.is(":focus")&&this.get_preview_data().then(t=>{t&&(this.popover_timeout&&clearTimeout(this.popover_timeout),this.popover_timeout=setTimeout(()=>{if(this.popover&&this.popover.options){let e=this.get_popover_html(t);this.popover.options.content=e}else this.init_preview_popover(t);this.show_popover(r)},1e3))})}show_popover(r){if(this.default_timeout=setTimeout(()=>{this.clear_all_popovers()},1e4),this.is_link)this.element.popover("show");else{var t=r.pageX;this.element.popover("show");var e=$(".popover").width();$(".control-field-popover").css("left",t-e/2+"px")}}handle_popover_hide(){$(document).on("mouseout",this.LINK_CLASSES,()=>{$(".popover:hover").length||(this.link_hovered=!1),this.link_hovered||(this.data_timeout&&clearTimeout(this.data_timeout),this.popover_timeout&&clearTimeout(this.popover_timeout),this.default_timeout&&clearTimeout(this.default_timeout),this.clear_all_popovers())}),frappe.router.on("change",()=>{this.clear_all_popovers()})}clear_all_popovers(){this.popovers_list.forEach(r=>r.hide())}get_preview_data(){return frappe.xcall("frappe.desk.link_preview.get_preview_data",{doctype:this.doctype,docname:this.name})}init_preview_popover(r){let t=this.get_popover_html(r);this.element.popover({container:"body",template:`
				<div class="link-preview-popover popover">
					<div class="arrow"></div>
					<div class="popover-body popover-content">
					</div>
				</div>
			`,html:!0,sanitizeFn:n=>n,content:t,trigger:"manual",placement:"top"}),$(this.element.data("bs.popover").tip).toggleClass("control-field-popover",this.is_link),this.popovers_list.push(this.element.data("bs.popover"))}get_popover_html(r){return this.href||(this.href=window.location.href),this.href&&this.href.includes(" ")&&(this.href=this.href.replace(new RegExp(" ","g"),"%20")),`
			<div class="preview-popover-header">
				<div class="preview-header">
					${this.get_image_html(r)}
					<div class="preview-name">
						<a href=${this.href}>${__(r.preview_title)}</a>
					</div>
					<div class="text-muted preview-title">${this.get_id_html(r)}</div>
				</div>
			</div>
			<hr>
			<div class="popover-body">
				${this.get_content_html(r)}
			</div>
		`}get_id_html(r){let t="";return r.preview_title!==r.name&&(t=`<a class="text-muted" href=${this.href}>${r.name}</a>`),t}get_image_html(r){return`<div class="preview-image">
			${frappe.get_avatar("avatar-medium",r.preview_title,r.preview_image)}
		</div>`}get_content_html(r){let t="";return Object.keys(r).forEach(e=>{if(!["preview_image","preview_title","name"].includes(e)){let n=frappe.ellipsis(r[e],280),i=e;t+=`
					<div class="preview-field">
						<div class="preview-label text-muted">${__(i)}</div>
						<div class="preview-value">${n}</div>
					</div>
				`}}),`<div class="preview-table">${t}</div>`}};frappe.provide("frappe.request");frappe.provide("frappe.request.error_handlers");frappe.request.url="/";frappe.request.ajax_count=0;frappe.request.waiting_for_ajax=[];frappe.request.logs={};frappe.xcall=function(r,t){return new Promise((e,n)=>{frappe.call({method:r,args:t,callback:i=>{e(i.message)},error:i=>{n(i.message)}})})};frappe.call=function(r){if(!frappe.is_online())return frappe.show_alert({indicator:"orange",message:__("Connection Lost"),subtitle:__("You are not connected to Internet. Retry after sometime.")},3),r.always&&r.always(),$.ajax();typeof arguments[0]=="string"&&(r={method:arguments[0],args:arguments[1],callback:arguments[2],headers:arguments[3]}),r.quiet&&(r.no_spinner=!0);var t=$.extend({},r.args);t.freeze&&(r.freeze=r.freeze||t.freeze,r.freeze_message=r.freeze_message||t.freeze_message),r.module&&r.page?t.cmd=r.module+".page."+r.page+"."+r.page+"."+r.method:r.doc?$.extend(t,{cmd:"run_doc_method",docs:frappe.get_doc(r.doc.doctype,r.doc.name),method:r.method,args:r.args}):r.method&&(t.cmd=r.method);var e=function(i,a){if(i.task_id)frappe.socketio.subscribe(i.task_id,r),r.queued&&r.queued(i);else if(r.callback)return r.callback(i,a)};let n=r.url;if(!n){if(n="/api/method/"+t.cmd,window.cordova){let i=frappe.request.url;i=i.slice(0,i.length-1),n=i+n}delete t.cmd}return r.debounce&&frappe.request.is_fresh(t,r.debounce)?Promise.resolve():frappe.request.call({type:r.type||"POST",args:t,success:e,error:r.error,always:r.always,btn:r.btn,freeze:r.freeze,freeze_message:r.freeze_message,headers:r.headers||{},error_handlers:r.error_handlers||{},async:r.async,silent:r.silent,url:n})};frappe.request.call=function(r){frappe.request.prepare(r);var t={200:function(i,a){r.success_callback&&r.success_callback(i,a.responseText)},401:function(i){frappe.app.session_expired_dialog&&frappe.app.session_expired_dialog.display?frappe.app.redirect_to_login():frappe.app.handle_session_expired()},404:function(i){frappe.flags.setting_original_route?frappe.app.redirect_to_login():frappe.msgprint({title:__("Not found"),indicator:"red",message:__("The resource you are looking for is not available")})},403:function(i){if(frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest")frappe.app.handle_session_expired();else if(i.responseJSON&&i.responseJSON._error_message)frappe.msgprint({title:__("Not permitted"),indicator:"red",message:i.responseJSON._error_message}),i.responseJSON._server_messages=null;else if(i.responseJSON&&i.responseJSON._server_messages){var a=JSON.parse(i.responseJSON._server_messages);if(a.indexOf(__("Not permitted"))!==-1)return}else frappe.msgprint({title:__("Not permitted"),indicator:"red",message:__("You do not have enough permissions to access this resource. Please contact your manager to get access.")})},508:function(i){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Please try again"),indicator:"red",message:__("Another transaction is blocking this one. Please try again in a few seconds.")})},413:function(i,a){frappe.msgprint({indicator:"red",title:__("File too big"),message:__("File size exceeded the maximum allowed size of {0} MB",[(frappe.boot.max_file_size||5242880)/1048576])})},417:function(i){var a=i.responseJSON;if(!a)try{a=JSON.parse(i.responseText)}catch(o){a=i.responseText}r.error_callback&&r.error_callback(a)},501:function(i,a){typeof i=="string"&&(i=JSON.parse(i)),r.error_callback&&r.error_callback(i,a.responseText)},500:function(i){frappe.utils.play_sound("error");try{r.error_callback&&r.error_callback(),frappe.request.report_error(i,r)}catch(a){frappe.request.report_error(i,r)}},504:function(i){frappe.msgprint(__("Request Timed Out")),r.error_callback&&r.error_callback()},502:function(i){frappe.msgprint(__("Internal Server Error"))}},e={QueryTimeoutError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Request Timeout"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})},QueryDeadlockError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Deadlock Occurred"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})}},n={url:r.url||frappe.request.url,data:r.args,type:r.type,dataType:r.dataType||"json",async:r.async,headers:Object.assign({"X-Frappe-CSRF-Token":frappe.csrf_token,Accept:"application/json","X-Frappe-CMD":r.args&&r.args.cmd||""||""},r.headers),cache:!1};return r.args&&r.args.doctype&&(n.headers["X-Frappe-Doctype"]=encodeURIComponent(r.args.doctype)),frappe.last_request=n.data,$.ajax(n).done(function(i,a,o){try{typeof i=="string"&&(i=JSON.parse(i)),(i.docs||i.docinfo)&&frappe.model.sync(i),i.__messages&&$.extend(frappe._messages,i.__messages),i._link_titles&&(frappe._link_titles||(frappe._link_titles={}),$.extend(frappe._link_titles,i._link_titles));var s=t[o.statusCode().status];s&&s(i,o)}catch(u){console.log("Unable to handle success response",i),console.trace(u)}}).always(function(i,a,o){try{if(typeof i=="string"&&(i=JSON.parse(i)),i.responseText){var o=i;i=JSON.parse(i.responseText)}}catch(s){i=null}frappe.request.cleanup(r,i),r.always&&r.always(i)}).fail(function(i,a){try{if(i.getResponseHeader("content-type")=="application/json"&&i.responseText){var o;try{o=JSON.parse(i.responseText)}catch(d){console.log("Unable to parse reponse text"),console.log(i.responseText),console.log(d)}if(o&&o.exception){var s=o.exception.split(".").at(-1).split(":").at(0),u=e[s];if(u){u(o);return}}}var h=t[i.statusCode().status];if(h){h(i);return}r.error_callback&&r.error_callback(i)}catch(d){console.log("Unable to handle failed response"),console.trace(d)}})};frappe.request.is_fresh=function(r,t){frappe.request.logs[r.cmd]||(frappe.request.logs[r.cmd]=[]);for(let e of frappe.request.logs[r.cmd])if(new Date-e.timestamp<t&&frappe.utils.deep_equal(r,e.args))return console.log("throttled"),!0;return frappe.request.logs[r.cmd].push({args:r,timestamp:new Date}),!1};frappe.request.prepare=function(r){$("body").attr("data-ajax-state","triggered"),r.btn&&$(r.btn).prop("disabled",!0),r.freeze&&frappe.dom.freeze(r.freeze_message);for(var t in r.args)r.args[t]&&($.isPlainObject(r.args[t])||$.isArray(r.args[t]))&&(r.args[t]=JSON.stringify(r.args[t]));if(!r.args.cmd&&!r.url)throw console.log(r),"Incomplete Request";r.success_callback=r.success,r.error_callback=r.error,delete r.success,delete r.error};frappe.request.cleanup=function(r,t){if(r.btn&&$(r.btn).prop("disabled",!1),$("body").attr("data-ajax-state","complete"),r.freeze&&frappe.dom.unfreeze(),t){if(t.session_expired||frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest"){frappe.app.handle_session_expired();return}let e=frappe.request.error_handlers[t.exc_type]||[],n=r.error_handlers?r.error_handlers[t.exc_type]:null,i=[].concat(e,n).filter(Boolean);t.exc_type&&i.forEach(a=>{a(t)}),t._server_messages&&!r.silent&&i.length===0&&(t._server_messages=JSON.parse(t._server_messages),frappe.hide_msgprint(),frappe.msgprint(t._server_messages)),t.exc&&(t.exc=JSON.parse(t.exc),t.exc instanceof Array?$.each(t.exc,function(a,o){o&&console.log(o)}):console.log(t.exc)),t._debug_messages&&(r.args&&(console.log("======== arguments ========"),console.log(r.args),console.log("========")),$.each(JSON.parse(t._debug_messages),function(a,o){console.log(o)}),console.log("======== response ========"),delete t._debug_messages,console.log(t),console.log("========"))}frappe.last_response=t};frappe.after_server_call=()=>frappe.request.ajax_count?new Promise(r=>{frappe.request.waiting_for_ajax.push(()=>{r()})}):null;frappe.after_ajax=function(r){return new Promise(t=>{if(frappe.request.ajax_count)frappe.request.waiting_for_ajax.push(()=>{if(r)return t(r());t()});else{if(r)return t(r());t()}})};frappe.request.report_error=function(r,t){var e=JSON.parse(r.responseText),n;if(e.exc){try{n=(JSON.parse(e.exc)||[]).join(`
`)}catch(s){n=e.exc}delete e.exc}else n="";let i=()=>{let s=h=>"```\n"+h+"\n```",u=["### App Versions",s(JSON.stringify(frappe.boot.versions,null,"	")),"### Route",s(frappe.get_route_str()),"### Trackeback",s(n),"### Request Data",s(JSON.stringify(t,null,"	")),"### Response Data",s(JSON.stringify(e,null,"	"))].join(`
`);frappe.utils.copy_to_clipboard(u)};var a=function(){var s=["<h5>Please type some additional information that could help us reproduce this issue:</h5>",'<div style="min-height: 100px; border: 1px solid #bbb; 				border-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>',"<hr>","<h5>App Versions</h5>","<pre>"+JSON.stringify(frappe.boot.versions,null,"	")+"</pre>","<h5>Route</h5>","<pre>"+frappe.get_route_str()+"</pre>","<hr>","<h5>Error Report</h5>","<pre>"+n+"</pre>","<hr>","<h5>Request Data</h5>","<pre>"+JSON.stringify(t,null,"	")+"</pre>","<hr>","<h5>Response JSON</h5>","<pre>"+JSON.stringify(e,null,"	")+"</pre>"].join(`
`),u=new frappe.views.CommunicationComposer({subject:"Error Report ["+frappe.datetime.nowdate()+"]",recipients:o,message:s,doc:{doctype:"User",name:frappe.session.user}});u.dialog.$wrapper.css("z-index",cint(frappe.msg_dialog.$wrapper.css("z-index"))+1)};if(n){var o=frappe.boot.error_report_email;t=frappe.request.cleanup_request_opts(t),frappe.error_dialog||(frappe.error_dialog=new frappe.ui.Dialog({title:__("Server Error"),primary_action_label:__("Report"),primary_action:()=>{o?a():frappe.msgprint(__("Support Email Address Not Specified")),frappe.error_dialog.hide()},secondary_action_label:__("Copy error to clipboard"),secondary_action:()=>{i(),frappe.error_dialog.hide()}}),frappe.error_dialog.wrapper.classList.add("msgprint-dialog"));let s=strip(n).split(`
`);frappe.error_dialog.$body.html(s[s.length-1]),frappe.error_dialog.show()}};frappe.request.cleanup_request_opts=function(r){var t=(r.args||{}).doc;return t&&(t=JSON.parse(t),$.each(Object.keys(t),function(e,n){n.indexOf("password")!==-1&&t[n]&&(t[n]="*****")}),r.args.doc=JSON.stringify(t)),r};frappe.request.on_error=function(r,t){frappe.request.error_handlers[r]=frappe.request.error_handlers[r]||[],frappe.request.error_handlers[r].push(t)};$(document).ajaxSend(function(){frappe.request.ajax_count++});$(document).ajaxComplete(function(){frappe.request.ajax_count--,frappe.request.ajax_count||($.each(frappe.request.waiting_for_ajax||[],function(r,t){t()}),frappe.request.waiting_for_ajax=[])});var PS=jr(zf());var Vf=jr(qf());frappe.provide("frappe.utils");Array.prototype.uniqBy||(Object.defineProperty(Array.prototype,"uniqBy",{value:function(r){var t={};return this.filter(function(e){var n=r(e);return n in t?!1:t[n]=!0})}}),Object.defineProperty(Array.prototype,"move",{value:function(r,t){this.splice(t,0,this.splice(r,1)[0])}}));Object.defineProperty(Object.prototype,"setDefault",{value:function(r,t){return r in this||(this[r]=t),this[r]},writable:!0});String.prototype.plural=function(r){let t={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},e={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},n={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","moose","series","species","money","rice","information","equipment"].indexOf(this.toLowerCase())>=0)return this;let a,o,s;for(a in n)if(r?(o=new RegExp(n[a]+"$","i"),s=a):(o=new RegExp(a+"$","i"),s=n[a]),o.test(this))return this.replace(o,s);let u;r?u=e:u=t;let h;for(h in u)if(o=new RegExp(h,"i"),o.test(this))return this.replace(o,u[h]);return this};Object.assign(frappe.utils,{get_random:function(r){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<r;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},get_file_link:function(r){return r=cstr(r),frappe.utils.is_url(r)?r:r.indexOf("/")===-1?"files/"+r:r},replace_newlines(r){return r?r.replace(/\n/g,"<br>"):""},is_html:function(r){return!(!r||r.indexOf("<br>")==-1&&r.indexOf("<p")==-1&&r.indexOf("<img")==-1&&r.indexOf("<div")==-1&&!r.includes("<span"))},is_mac:function(){return window.navigator.platform==="MacIntel"},is_xs:function(){return $(document).width()<768},is_sm:function(){return $(document).width()<991&&$(document).width()>=768},is_md:function(){return $(document).width()<1199&&$(document).width()>=991},is_json:function(r){try{JSON.parse(r)}catch(t){return!1}return!0},parse_json:function(r){let t="";try{t=JSON.parse(r)}catch(e){return r}return t},strip_whitespace:function(r){return(r||"").replace(/<p>\s*<\/p>/g,"").replace(/<br>(\s*<br>\s*)+/g,"<br><br>")},encode_tags:function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};function e(n){return t[n]||n}return r.replace(/[&<>]/g,e)},strip_original_content:function(r){var t=[],e=[],n=r.indexOf("<br>")===-1?`
`:"<br>";return $.each(r.split(n),function(i,a){var o=strip(a);o&&(o.substr(0,1)===">"||o.substr(0,4)==="&gt;")?e.push(a):(t=t.concat(e),t.push(a),e=[])}),t.join(n)},escape_html:function(r){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=/]/g,e=>t[e]||e)},unescape_html:function(r){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};return String(r).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;|&#x60;|&#x3D;/g,e=>t[e]||e)},html2text:function(r){let t=document.createElement("div");return t.innerHTML=r,t.textContent},is_url:function(r){return r.toLowerCase().substr(0,7)=="http://"||r.toLowerCase().substr(0,8)=="https://"},to_title_case:function(r,t=!1){let e=r.toLowerCase().replace(/(?:^|[\s-/])\w/g,function(i){return i.toUpperCase()}),n=t?" ":"";return e.replace(/-|_/g,n)},toggle_blockquote:function(r){if(!r)return r;var t=$("<div></div>").html(r);return t.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> 					\u2022 \u2022 \u2022 				</a></p>'),t.html()},scroll_to:function(r,t=!0,e,n,i,a=!1){if(frappe.flags.disable_auto_scroll)return;n=n||$("html, body");let o=0;r&&(o=typeof r=="number"?r-cint(e):this.get_scroll_position(r,e)),o<0&&(o=0),o!=n.scrollTop()&&(t?n.animate({scrollTop:o}).promise().then(()=>{a&&($(r).addClass("highlight"),document.addEventListener("click",function(){$(r).removeClass("highlight")},{once:!0})),i&&i()}):n.scrollTop(o))},get_scroll_position:function(r,t){let e=$(".navbar").height()+$(".page-head:visible").height()||$(".navbar").height();return $(r).offset().top-e-cint(t)},filter_dict:function(r,t){var e=[];return typeof t=="string"?[r[t]]:($.each(r,function(n,i){for(var a in t)if($.isArray(t[a])){if(t[a][0]=="in"){if(t[a][1].indexOf(i[a])==-1)return}else if(t[a][0]=="not in"){if(t[a][1].indexOf(i[a])!=-1)return}else if(t[a][0]=="<"){if(!(i[a]<t[a]))return}else if(t[a][0]=="<="){if(!(i[a]<=t[a]))return}else if(t[a][0]==">"){if(!(i[a]>t[a]))return}else if(t[a][0]==">="&&!(i[a]>=t[a]))return}else if(i[a]!=t[a])return;e.push(i)}),e)},comma_or:function(r){return frappe.utils.comma_sep(r," "+__("or")+" ")},comma_and:function(r){return frappe.utils.comma_sep(r," "+__("and")+" ")},comma_sep:function(r,t){return r instanceof Array?r.length==0?"":r.length==1?r[0]:r.slice(0,r.length-1).join(", ")+t+r.slice(-1)[0]:r},set_footnote:function(r,t,e){return r||(r=$('<div class="text-muted footnote-area level">').appendTo(t)),e?r.html(e):(r.remove(),r=null),r},get_args_dict_from_url:function(r){var t={};return $.each(decodeURIComponent(r).split("&"),function(e,n){n=n.split("="),t[n[0]]=n[1]}),t},get_url_from_dict:function(r){return $.map(r,function(t,e){return t!==null?encodeURIComponent(e)+"="+encodeURIComponent(t):null}).join("&")||""},validate_type:function(r,t){var e;switch(t){case"phone":e=/^([0-9 +_\-,.*#()]){1,20}$/;break;case"name":e=/^[\w][\w'-]*([ \w][\w'-]+)*$/;break;case"number":e=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":e=/^\d+$/;break;case"alphanum":e=/^\w+$/;break;case"email":e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;break;case"url":e=/^((([A-Za-z0-9.+-]+:(?:\/\/)?)(?:[-;:&=\+\,\w]@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/i;break;case"dateIso":e=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return r!==""?e.test(r):!1},guess_style:function(r,t,e){var n=t||"default",i="gray";return r&&(has_words(["Pending","Review","Medium","Not Approved"],r)?(n="warning",i="orange"):has_words(["Open","Urgent","High","Failed","Rejected","Error"],r)?(n="danger",i="red"):has_words(["Closed","Finished","Converted","Completed","Complete","Confirmed","Approved","Yes","Active","Available","Paid","Success"],r)?(n="success",i="green"):has_words(["Submitted"],r)&&(n="info",i="blue")),e?i:n},guess_colour:function(r){return frappe.utils.guess_style(r,null,!0)},get_indicator_color:function(r){return frappe.db.get_list("Workflow State",{filters:{name:r},fields:["name","style"]}).then(t=>{let e=t[0];if(!e.style)return frappe.utils.guess_colour(e.name);let n=e.style;return{Success:"green",Warning:"orange",Danger:"red",Primary:"blue"}[n]})},sort:function(r,t,e,n){if(!r||r.length<2)return r||[];var i={string:function(a,o){return cstr(a[t]).localeCompare(cstr(o[t]))},number:function(a,o){return flt(a[t])-flt(o[t])}};return e||(e=typeof r[0][t]=="string"?"string":"number"),r.sort(i[e]),n&&r.reverse(),r},unique:function(r){for(var t={},e=[],n=0,i=r.length;n<i;n++)r[n]in t||(t[r[n]]=null,e.push(r[n]));return e},remove_nulls:function(r){for(var t=[],e=0,n=r.length;e<n;e++)is_null(r[e])||t.push(r[e]);return t},all:function(r){for(var t=0,e=r.length;t<e;t++)if(!r[t])return!1;return!0},dict:function(r,t){var e=[];return $.each(t,function(n,i){var a={};$.each(r,function(o,s){a[s]=i[o]}),e.push(a)}),e},sum:function(r){return r.reduce(function(t,e){return flt(t)+flt(e)},0)},arrays_equal:function(r,t){if(!r||!t||r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if($.isArray(r[e])){if(!frappe.utils.arrays_equal(r[e],t[e]))return!1}else if(r[e]!==t[e])return!1;return!0},intersection:function(r,t){var e=0,n=0,i=new Array;for(r=[].concat(r).sort(),t=[].concat(t).sort();e<r.length&&n<t.length;)r[e]<t[n]?e++:(r[e]>t[n]||(i.push(r[e]),e++),n++);return i},resize_image:function(r,t,e,n){var i=new Image;e||(e=600),n||(n=400),i.src=r.result,i.onload=function(){var a=i.width,o=i.height;a>o?a>e&&(o*=e/a,a=e):o>n&&(a*=n/o,o=n);var s=document.createElement("canvas");s.width=a,s.height=o;var u=s.getContext("2d");u.drawImage(this,0,0,a,o);var h=s.toDataURL("image/jpeg");setTimeout(function(){t(h)},10)}},csv_to_array:function(r,t){t=t||",";for(var e=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],i=null;i=e.exec(r);){var a=i[1];a.length&&a!==t&&n.push([]);var o;i[2]?o=i[2].replace(new RegExp('""',"g"),'"'):o=i[3],n[n.length-1].push(o)}return n},warn_page_name_change:function(){frappe.msgprint(__("Note: Changing the Page Name will break previous URL to this page."))},notify:function(r,t,e,n){console.log("push notifications are evil and deprecated")},set_title:function(r){frappe._original_title=r,frappe._title_prefix&&(r=frappe._title_prefix+" "+r.replace(/<[^>]*>/g,"")),document.title=r;let t=frappe.router.get_sub_path();frappe.route_titles[t]=r},set_title_prefix:function(r){frappe._title_prefix=r,frappe.utils.set_title(frappe._original_title)},is_image_file:function(r){return r?(r=r.split("?")[0],/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(r)):!1},play_sound:function(r){try{if(frappe.boot.user.mute_sounds)return;var t=$("#sound-"+r)[0];t.volume=t.getAttribute("volume"),t.play()}catch(e){console.log("Cannot play sound",r,e)}},split_emails:function(r){var t=[];return r&&r.split(/[,\n](?=(?:[^"]|"[^"]*")*$)/g).forEach(function(e){e=e.trim(),e&&t.push(e)}),t},supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(r){return!1}}(),throttle:function(r,t,e){var n,i,a,o=null,s=0;e||(e={});let u=function(){s=e.leading===!1?0:Date.now(),o=null,a=r.apply(n,i),o||(n=i=null)};return function(){var h=Date.now();!s&&e.leading===!1&&(s=h);let d=t-(h-s);return n=this,i=arguments,d<=0||d>t?(o&&(clearTimeout(o),o=null),s=h,a=r.apply(n,i),o||(n=i=null)):!o&&e.trailing!==!1&&(o=setTimeout(u,d)),a}},debounce:function(r,t,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,e||r.apply(i,a)},s=e&&!n;clearTimeout(n),n=setTimeout(o,t),s&&r.apply(i,a)}},get_form_link:function(r,t,e=!1,n=null,i=null){n=n||t,t=encodeURIComponent(t);let a=`/app/${encodeURIComponent(r.toLowerCase().replace(/ /g,"-"))}/${t}`;return i&&(a+=frappe.utils.make_query_string(i)),e?`<a href="${a}">${n}</a>`:a},get_route_label(r){let t=r.split("/");return t[2]==="Report"||t[0]==="query-report"?__("{0} Report",[t[3]||t[1]]):t[0]==="List"?__("{0} List",[t[1]]):t[0]==="modules"?__("{0} Modules",[t[1]]):t[0]==="dashboard"?__("{0} Dashboard",[t[1]]):__(frappe.utils.to_title_case(t[0],!0))},report_column_total:function(r,t,e){return t.column.disable_total?"":r.length>0?t.column.fieldtype=="Percent"||e==="mean"?r.reduce((n,i)=>n+flt(i))/r.length:t.column.fieldtype=="Int"?r.reduce((n,i)=>n+cint(i)):frappe.model.is_numeric_field(t.column.fieldtype)?r.reduce((n,i)=>n+flt(i)):null:null},setup_search(r,t,e,n){let i=r.find('[data-element="search"]').show();i.focus().val("");let a=r.find(t).show();i.off("keyup").on("keyup",()=>{let o=i.val().toLowerCase();o=o.replace(/^\s+|\s+$/g,"");for(let s=0;s<a.length;s++){let u=a.eq(s).find(e),h=u.text().toLowerCase(),d="";n&&u.attr(n)&&(d=u.attr(n).toLowerCase()),h.includes(o)||d.includes(o)?a.eq(s).css("display",""):a.eq(s).css("display","none")}})},deep_equal(r,t){return(0,Vf.default)(r,t)},file_name_ellipsis(r,t){let e=t*2/3,n=t-e,i=r.split("."),a=i.pop(),o=i.join(""),s=o.slice(0,e),u=o.slice(-n);return o.length>t?`${s}...${u}.${a}`:r},get_decoded_string(r){let e=r.split(",")[1],n=atob(e);try{let i=escape(n);n=decodeURIComponent(i)}catch(i){}return n},copy_to_clipboard(r){let t=()=>{frappe.show_alert({indicator:"green",message:__("Copied to clipboard.")})};if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(r).then(t);else{let e=$("<textarea>");$("body").append(e),e.val(r).select(),document.execCommand("copy"),t(),e.remove()}},is_rtl(r=null){return["ar","he","fa","ps"].includes(r||frappe.boot.lang)},bind_actions_with_object(r,t){return $(r).off("click.class_actions"),$(r).on("click.class_actions","[data-action]",e=>{let n=$(e.currentTarget),i=n.data("action");t[i]&&t[i](e,n)}),r},eval(r,t={}){let e=Object.keys(t),n=Object.values(t);r=`let out = ${r}; return out`;try{return new Function(...e,r)(...n)}catch(i){throw console.log("Error evaluating the following expression:"),console.error(r),i}},get_browser(){let r=navigator.userAgent,t,e=r.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?(t=/\brv[ :]+(\d+)/g.exec(r)||[],{name:"IE",version:t[1]||""}):e[1]==="Chrome"&&(t=r.match(/\bOPR|Edge\/(\d+)/),t!=null)?{name:"Opera",version:t[1]}:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=r.match(/version\/(\d+)/i))!=null&&e.splice(1,1,t[1]),{name:e[0],version:e[1]})},get_formatted_duration(r,t=null){let e="";if(t||(t={hide_days:0,hide_seconds:0}),r){let n=frappe.utils.seconds_to_duration(r,t);n.days&&(e+=n.days+__("d",null,"Days (Field: Duration)")),n.hours&&(e+=e.length?" ":"",e+=n.hours+__("h",null,"Hours (Field: Duration)")),n.minutes&&(e+=e.length?" ":"",e+=n.minutes+__("m",null,"Minutes (Field: Duration)")),n.seconds&&(e+=e.length?" ":"",e+=n.seconds+__("s",null,"Seconds (Field: Duration)"))}return e},seconds_to_duration(r,t){let e=r>0?Math.floor:Math.ceil,n={days:e(r/86400),hours:e(r%86400/3600),minutes:e(r%3600/60),seconds:e(r%60)};return t&&t.hide_days&&(n.hours=e(r/3600),n.days=0),n},duration_to_seconds(r=0,t=0,e=0,n=0){let i=0;return r&&(i+=r*24*60*60),t&&(i+=t*60*60),e&&(i+=e*60),n&&(i+=n),i},get_duration_options:function(r){return{hide_days:r.hide_days,hide_seconds:r.hide_seconds}},get_number_system:function(r){let t={India:[{divisor:1e7,symbol:"Cr"},{divisor:1e5,symbol:"Lakh"}],"":[{divisor:1e12,symbol:"T"},{divisor:1e9,symbol:"B"},{divisor:1e6,symbol:"M"},{divisor:1e3,symbol:"K"}]};return Object.keys(t).includes(r)||(r=""),t[r]},map_defaults:{center:[19.08,72.8961],zoom:13,tiles:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},icon(r,t="sm",e="",n="",i=""){let a="";return typeof t=="object"?n+=` width: ${t.width}; height: ${t.height}`:a=`icon-${t}`,`<svg class="icon ${i} ${a}" style="${n}">
			<use class="${e}" href="#icon-${r}"></use>
		</svg>`},make_chart(r,t={}){let e={type:"bar",colors:["light-blue"],axisOptions:{xIsSeries:1,shortenYAxisNumbers:1,xAxisMode:"tick"}};for(let n in t)typeof e[n]=="object"&&typeof t[n]=="object"?e[n]=Object.assign(e[n],t[n]):e[n]=t[n];return new frappe.Chart(r,e)},generate_route(r){let t=r.type.toLowerCase();t==="doctype"&&(r.doctype=r.name);let e="";if(r.route)e=r.route;else if(r.link)e=strip(r.link,"#");else if(t==="doctype"){let n=frappe.router.slug(r.doctype);if(frappe.model.is_single(r.doctype))e=n;else switch(r.doc_view||(frappe.model.is_tree(r.doctype)?r.doc_view="Tree":r.doc_view="List"),r.doc_view){case"List":r.filters&&(frappe.route_options=r.filters),e=n;break;case"Tree":e=`${n}/view/tree`;break;case"Report Builder":e=`${n}/view/report`;break;case"Dashboard":e=`${n}/view/dashboard`;break;case"New":e=`${n}/new`;break;case"Calendar":e=`${n}/view/calendar/default`;break;default:frappe.throw({message:__("Not a valid view:")+r.doc_view,title:__("Unknown View")}),e=""}}else t==="report"?r.is_query_report?e="query-report/"+r.name:r.doctype?e=frappe.router.slug(r.doctype)+"/view/report/"+r.name:e="/report/"+r.name:t==="page"?e=r.name:t==="dashboard"&&(e=`dashboard-view/${r.name}`);return r.route_options&&(e+="?"+$.map(r.route_options,function(n,i){return encodeURIComponent(i)+"="+encodeURIComponent(n)}).join("&")),`/app/${e}`},shorten_number:function(r,t,e=4,n=2){if(String(r).match(/\d/g).length<e)return r.toString();let a=this.get_number_system(t),o=Math.abs(Math.round(r));for(let s of a)if(o>=s.divisor){let u=r/s.divisor;return u=this.get_number_of_decimals(u)>n?u.toFixed(n):u,u+" "+s.symbol}return r.toFixed(n)},get_number_of_decimals:function(r){return Math.floor(r)===r?0:r.toString().split(".")[1].length||0},build_summary_item(r){if(r.type=="separator")return $(`<div class="summary-separator">
				<div class="summary-value ${r.color?r.color.toLowerCase():"text-muted"}">${r.value}</div>
			</div>`);let t={fieldtype:r.datatype},e=null;r.datatype=="Currency"&&(t.options="currency",e={currency:r.currency});let n=frappe.format(r.value,t,{only_value:!0},e),i=r.indicator?r.indicator.toLowerCase():r.color?r.color.toLowerCase():"";return $(`<div class="summary-item">
			<span class="summary-label">${r.label}</span>
			<div class="summary-value ${i}">${n}</div>
		</div>`)},print(r,t,e,n,i){if(!window.open(frappe.urllib.get_full_url("/printview?doctype="+encodeURIComponent(r)+"&name="+encodeURIComponent(t)+"&trigger_print=1&format="+encodeURIComponent(e)+"&no_letterhead="+(n?"0":"1")+"&letterhead="+encodeURIComponent(n)+(i?"&_lang="+i:"")))){frappe.msgprint(__("Please enable pop-ups"));return}},get_clipboard_data(r){let t=r;return(t.clipboardData||window.clipboardData||t.originalEvent.clipboardData).getData("Text")},add_custom_button(r,t,e="",n="",i,a,o){i||(i="btn-secondary");let s=$(`<button class="btn ${i} btn-xs ${e}" title="${n}">${r}</button>`);s.click(u=>{u.stopPropagation(),t&&t(u)}),!o&&s.appendTo(a),o&&a.prepend(s)},sleep(r){return new Promise(t=>setTimeout(t,r))},parse_array(r){if(r&&r.length!==0)return r},range(r,t){t||(t=r,r=0);let e=[];for(let n=r;n<t;n++)e.push(n);return e},get_link_title(r,t){if(!(!r||!t||!frappe._link_titles))return frappe._link_titles[r+"::"+t]},add_link_title(r,t,e){!r||!t||(frappe._link_titles||(frappe._link_titles={}),frappe._link_titles[r+"::"+t]=e)},fetch_link_title(r,t){try{return frappe.xcall("frappe.desk.search.get_link_title",{doctype:r,docname:t}).then(e=>(frappe.utils.add_link_title(r,t,e),e))}catch(e){return console.log("Error while fetching link title."),console.log(e),Promise.resolve(t)}},only_allow_num_decimal(r){r.on("input",t=>{let e=$(t.target);e.val(e.val().replace(/[^0-9.]/g,"")),(t.which!=46||e.val().indexOf(".")!=-1)&&(t.which<48||t.which>57)&&t.preventDefault()})},string_to_boolean(r){switch(r.toLowerCase().trim()){case"t":case"true":case"y":case"yes":case"1":return!0;case"f":case"false":case"n":case"no":case"0":case null:return!1;default:return r}}});frappe.provide("frappe.utils");var jb={init(){this.jq=jQuery({})},trigger(r,t){!this.jq&&this.init(),this.jq.trigger(r,t)},once(r,t){!this.jq&&this.init(),this.jq.one(r,(e,n)=>t(n))},on(r,t){!this.jq&&this.init(),this.jq.bind(r,(e,n)=>t(n))},off(r,t){!this.jq&&this.init(),this.jq.unbind(r,(e,n)=>t(n))}};frappe.utils.make_event_emitter=function(r){return Object.assign(r,jb),r};frappe.provide("frappe.views");frappe.re_route={"#login":""};frappe.route_titles={};frappe.route_flags={};frappe.route_history=[];frappe.view_factory={};frappe.view_factories=[];frappe.route_options=null;frappe.route_hooks={};$(window).on("hashchange",function(r){if(window.location.hash&&!frappe.router.is_app_route(r.currentTarget.pathname)){let t=frappe.router.get_sub_path(window.location.hash);return frappe.router.push_state(t),!1}});window.addEventListener("popstate",r=>(frappe.router.route(),r.preventDefault(),!1));$("body").on("click","a",function(r){let t=n=>(r.preventDefault(),frappe.set_route(n),!1),e=r.currentTarget.getAttribute("href");if(!(r.currentTarget.getAttribute("onclick")||r.ctrlKey||r.metaKey||e==="#")){if(e==="")return t("/app");if(e&&e.startsWith("#"))return t(r.currentTarget.hash);if(frappe.router.is_app_route(r.currentTarget.pathname)){frappe.route_options={};let n=new URLSearchParams(r.currentTarget.search);for(let[i,a]of n)frappe.route_options[i]=a;return t(r.currentTarget.pathname+r.currentTarget.hash)}}});frappe.router={current_route:null,routes:{},factory_views:["form","list","report","tree","print","dashboard"],list_views:["list","kanban","report","calendar","tree","gantt","dashboard","image","inbox"],layout_mapped:{},is_app_route(r){if(r.substr(0,1)==="/"&&(r=r.substr(1)),r=r.split("/"),r[0])return r[0]==="app"},setup(){for(let r of frappe.boot.user.can_read)this.routes[this.slug(r)]={doctype:r};if(frappe.boot.doctype_layouts)for(let r of frappe.boot.doctype_layouts)this.routes[this.slug(r.name)]={doctype:r.document_type,doctype_layout:r.name}},route(){if(!frappe.app)return;let r=this.get_sub_path();this.re_route(r)||(this.current_sub_path=r,this.current_route=this.parse(),this.set_history(r),this.render(),this.set_title(r),this.trigger("change"))},parse(r){return r=this.get_sub_path_string(r).split("/"),r?(r=$.map(r,this.decode_component),this.set_route_options_from_url(r),this.convert_to_standard_route(r)):[]},convert_to_standard_route(r){let t=r[1]&&`${r[1]}-${frappe.user.name.toLowerCase()}`;return frappe.workspaces[r[0]]?r=["Workspaces",frappe.workspaces[r[0]].title]:r[0]=="private"&&frappe.workspaces[t]?r=["Workspaces","private",frappe.workspaces[t].title]:this.routes[r[0]]&&(r=this.set_doctype_route(r)),r},doctype_route_exist(r){return r=this.get_sub_path_string(r).split("/"),this.routes[r[0]]},set_doctype_route(r){let t=this.routes[r[0]];if(r[1])if(r[2]&&r[1]==="view")r=this.get_standard_route_for_list(r,t);else{let e=r[1];r.length>2&&(e=r.slice(1).join("/")),r=["Form",t.doctype,e]}else frappe.model.is_single(t.doctype)?r=["Form",t.doctype,t.doctype]:r=["List",t.doctype,"List"];return t.doctype_layout&&(this.doctype_layout=t.doctype_layout),r},get_standard_route_for_list(r,t){let e;return r[2].toLowerCase()==="tree"?e=["Tree",t.doctype]:(e=["List",t.doctype,frappe.utils.to_title_case(r[2])],r[3]&&e.push(...r.slice(3,r.length))),e},set_history(){frappe.route_history.push(this.current_route),frappe.ui.hide_open_dialog()},render(){this.current_route[0]?this.render_page():frappe.views.pageview.show("")},render_page(){let r=this.current_route,t=frappe.utils.to_title_case(r[0]);if(r[1]&&frappe.views[t+"Factory"])r[0]=t,frappe.view_factory[t]||(frappe.view_factory[t]=new frappe.views[t+"Factory"]),frappe.view_factory[t].show();else{let e=frappe.utils.xss_sanitise(r[0]);frappe.views.pageview&&frappe.views.pageview.show(e)}},re_route(r){if(frappe.re_route[r]!==void 0){let t=this.get_sub_path(frappe.re_route[r]);return t===this.current_sub_path?window.history.back():frappe.set_route(t),!0}},set_title(r){frappe.route_titles[r]&&frappe.utils.set_title(frappe.route_titles[r])},set_route(){let r=Array.from(arguments);return new Promise(t=>{r=this.get_route_from_arguments(r),r=this.convert_from_standard_route(r);let e=this.make_url(r);this.push_state(e),setTimeout(()=>{frappe.after_ajax&&frappe.after_ajax(()=>{t()})},100)}).finally(()=>frappe.route_flags={})},get_route_from_arguments(r){return r.length===1&&$.isArray(r[0])&&(r=r[0]),r.length===1&&r[0]&&r[0].includes("/")&&(r=$.map(r[0].split("/"),this.decode_component)),r&&r[0]==""&&r.shift(),r&&["desk","app"].includes(r[0])&&r.shift(),r},convert_from_standard_route(r){let t=r[0]?r[0].toLowerCase():"",e=r;return t==="list"?r[2]&&r[2]!=="list"&&!$.isPlainObject(r[2])?(e=[this.slug(r[1]),"view",r[2].toLowerCase()],r[3]&&e.push(...r.slice(3,r.length))):($.isPlainObject(r[2])&&(frappe.route_options=r[2]),e=[this.slug(r[1])]):t==="form"?(e=[this.slug(r[1])],r[2]&&e.push(r[2])):t==="tree"&&(e=[this.slug(r[1]),"view","tree"]),e},slug_parts(r){return r[0]&&this.factory_views.includes(r[0].toLowerCase())&&(r[0]=r[0].toLowerCase(),r[1]=this.slug(r[1])),r},make_url(r){let t=$.map(r,function(i){return $.isPlainObject(i)?(frappe.route_options=i,null):(i=String(i),i&&i.match(/[%'"#\s\t]/)&&(i=encodeURIComponent(i)),i)}).join("/"),n=frappe.workspaces[`home-${frappe.user.name.toLowerCase()}`]?"private/home":frappe.workspaces.home?"home":Object.keys(frappe.workspaces)[0];return"/app/"+(t||n)},push_state(r){if(window.location.pathname!==r){let t=frappe.route_flags.replace_route?"replaceState":"pushState";history[t](null,null,r),this.route()}},get_sub_path_string(r){return r||(r=window.location.pathname,r.includes("app#")&&(r=window.location.hash)),this.strip_prefix(r)},strip_prefix(r){return r.substr(0,1)=="/"&&(r=r.substr(1)),r.startsWith("app/")&&(r=r.substr(4)),r=="app"&&(r=r.substr(4)),r.substr(0,1)=="/"&&(r=r.substr(1)),r.substr(0,1)=="#"&&(r=r.substr(1)),r.substr(0,1)=="!"&&(r=r.substr(1)),r},get_sub_path(r){var t=this.get_sub_path_string(r);return r=$.map(t.split("/"),this.decode_component).join("/"),r},set_route_options_from_url(r){var t=r[r.length-1];if(t.indexOf("?")<t.indexOf("=")){let e=t.split("?");r[r.length-1]=e[0];let n=frappe.utils.get_query_params(e[1]);frappe.route_options=$.extend(frappe.route_options||{},n)}},decode_component(r){try{return decodeURIComponent(r)}catch(t){if(t instanceof URIError)return r;throw t}},slug(r){return r.toLowerCase().replace(/ /g,"-")}};frappe.get_route=()=>frappe.router.current_route;frappe.get_route_str=()=>frappe.router.current_route.join("/");frappe.set_route=function(){return frappe.router.set_route.apply(frappe.router,arguments)};frappe.get_prev_route=function(){return frappe.route_history&&frappe.route_history.length>1?frappe.route_history[frappe.route_history.length-2]:[]};frappe.set_re_route=function(){var r=frappe.router.get_sub_path();frappe.set_route.apply(null,arguments),frappe.re_route[r]=frappe.router.get_sub_path()};frappe.has_route_options=function(){return Boolean(Object.keys(frappe.route_options||{}).length)};frappe.utils.make_event_emitter(frappe.router);frappe.route_history_queue=[];var Fb=["Form","social","setup-wizard","recorder"],zb=frappe.utils.debounce(()=>{if(frappe.session.user==="Guest")return;let r=frappe.route_history_queue;!r.length||(frappe.route_history_queue=[],frappe.xcall("frappe.desk.doctype.route_history.route_history.deferred_insert",{routes:r}).catch(()=>{frappe.route_history_queue.concat(r)}))},1e4);frappe.router.on("change",()=>{let r=frappe.get_route();Hb(r)&&(frappe.route_history_queue.push({creation:frappe.datetime.now_datetime(),route:frappe.get_route_str()}),zb())});function Hb(r){return r[1]?!(r[0]==="List"&&!r[2]||Fb.includes(r[0])):!1}frappe.defaults={get_user_default:function(r){var t=frappe.boot.user.defaults,e=t[r];if(!e&&frappe.defaults.is_a_user_permission_key(r)&&(e=t[frappe.model.scrub(r)]),$.isArray(e)&&(e=e[0]),!!frappe.defaults.in_user_permission(r,e))return e},get_user_defaults:function(r){var t=frappe.boot.user.defaults,e=t[r];return frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[r]||t[frappe.model.scrub(r)]),$.isArray(e)||(e=[e]),e.filter(n=>{if(frappe.defaults.in_user_permission(r,n))return n}),e},get_global_default:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)&&(t=t[0]),t},get_global_defaults:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)||(t=[t]),t},set_default:function(r,t,e){return typeof t!="string"&&(t=JSON.stringify(t)),frappe.boot.user.defaults[r]=t,frappe.call({method:"frappe.client.set_default",args:{key:r,value:t},callback:e||function(n){}})},set_user_default_local:function(r,t){frappe.boot.user.defaults[r]=t},get_default:function(r){var t=frappe.boot.user.defaults,e=t[r];if(frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[frappe.model.scrub(r)]),!!frappe.defaults.in_user_permission(r,e)&&e)try{return JSON.parse(e)}catch(n){return e}},is_a_user_permission_key:function(r){return r.indexOf(":")===-1&&r!==frappe.model.scrub(r)},in_user_permission:function(r,t){let e=this.get_user_permissions()[frappe.model.unscrub(r)];return e&&e.length?e.some(i=>i.doc===t):!0},get_user_permissions:function(){return this._user_permissions||{}},update_user_permissions:function(){let r="frappe.core.doctype.user_permission.user_permission.get_user_permissions";frappe.call(r).then(t=>{t.message&&(this._user_permissions=Object.assign({},t.message))})}};frappe.RoleEditor=class{constructor(r,t,e){this.frm=t,this.wrapper=r,this.disable=e;let n=this.frm.doc.roles.map(a=>a.role);this.multicheck=frappe.ui.form.make_control({parent:r,df:{fieldname:"roles",fieldtype:"MultiCheck",select_all:!0,columns:3,get_data:()=>frappe.xcall("frappe.core.doctype.user.user.get_all_roles").then(a=>a.map(o=>({label:__(o),value:o,checked:n.includes(o)}))),on_change:()=>{this.set_roles_in_table(),this.frm.dirty()}},render_input:!0});let i=this.multicheck.make_checkboxes;this.multicheck.make_checkboxes=()=>{i.call(this.multicheck),this.multicheck.$wrapper.find(".label-area").click(a=>{let o=$(a.target).data("unit");o&&this.show_permissions(o),a.preventDefault()})}}set_enable_disable(){$(this.wrapper).find('input[type="checkbox"]').attr("disabled",!!this.disable)}show_permissions(r){return this.perm_dialog||this.make_perm_dialog(),$(this.perm_dialog.body).empty(),frappe.xcall("frappe.core.doctype.user.user.get_perm_info",{role:r}).then(t=>{let e=$(this.perm_dialog.body);t.length?(e.append(`
						<table class="user-perm">
							<thead>
								<tr>
									<th> ${__("Document Type")} </th>
									<th> ${__("Level")} </th>
									${frappe.perm.rights.map(n=>`<th> ${frappe.unscrub(n)}</th>`).join("")}
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					`),t.forEach(n=>{e.find("tbody").append(`
							<tr>
								<td>${n.parent}</td>
								<td>${n.permlevel}</td>
								${frappe.perm.rights.map(i=>`<td class="text-muted bold">${n[i]?frappe.utils.icon("check","xs"):"-"}</td>`).join("")}
							</tr>
						`)})):e.append(`<div class="text-muted text-center padding">
						${__("{0} role does not have permission on any doctype",[r])}
					</div>`),this.perm_dialog.set_title(r),this.perm_dialog.show()})}make_perm_dialog(){this.perm_dialog=new frappe.ui.Dialog({title:__("Role Permissions")}),this.perm_dialog.$wrapper.find(".modal-dialog").css("width","1200px").css("max-width","80vw")}show(){let r=this.frm.doc.roles.map(t=>t.role);this.multicheck.selected_options=r,this.multicheck.refresh_input(),this.set_enable_disable()}set_roles_in_table(){let r=this.frm.doc.roles||[],t=this.multicheck.get_checked_options();r.map(e=>{t.includes(e.role)||frappe.model.clear_doc(e.doctype,e.name)}),t.map(e=>{if(!r.find(n=>n.role===e)){let n=frappe.model.add_child(this.frm.doc,"Has Role","roles");n.role=e}})}get_roles(){return{checked_roles:this.multicheck.get_checked_options(),unchecked_roles:this.multicheck.get_unchecked_options()}}};frappe.ModuleEditor=class{constructor(t,e){this.frm=t,this.wrapper=e;let n=this.frm.doc.block_modules.map(i=>i.module);this.multicheck=frappe.ui.form.make_control({parent:e,df:{fieldname:"block_modules",fieldtype:"MultiCheck",select_all:!0,columns:3,get_data:()=>this.frm.doc.__onload.all_modules.map(i=>({label:__(i),value:i,checked:!n.includes(i)})),on_change:()=>{this.set_modules_in_table(),this.frm.dirty()}},render_input:!0})}show(){let t=this.frm.doc.block_modules.map(n=>n.module),e=this.frm.doc.__onload.all_modules;this.multicheck.selected_options=e.filter(n=>!t.includes(n)),this.multicheck.refresh_input()}set_modules_in_table(){let t=this.frm.doc.block_modules||[],e=this.multicheck.get_unchecked_options();t.map(n=>{e.includes(n.module)||frappe.model.clear_doc(n.doctype,n.name)}),e.map(n=>{if(!t.find(i=>i.module===n)){let i=frappe.model.add_child(this.frm.doc,"Block Module","block_modules");i.module=n}})}};frappe.template={compiled:{},debug:{}};frappe.template.compile=function(r,t){var e=t||r;if(!frappe.template.compiled[e]){let a=function(o,s,u,h,d){var _=frappe.utils.get_random(3),g=frappe.utils.get_random(3);return"{% for (var "+_+"=0, "+g+"="+u+".length; "+_+"<"+g+"; "+_+"++) { var "+s+" = "+u+"["+_+"]; "+s+"._index = "+_+"; %}"};var i=a;r.indexOf("'")!==-1&&r.replace(/'/g,"\\'"),r=r.replace(/{{/g,"{%=").replace(/}}/g,"%}"),r=r.replace(/{%\s?if\s?\s?not\s?([^\(][^%{]+)\s?%}/g,"{% if (! $1) { %}"),r=r.replace(/{%\s?if\s?([^\(][^%{]+)\s?%}/g,"{% if ($1) { %}"),r=r.replace(/{%\s?for\s([a-z._]+)\sin\s([a-z._]+)\s?%}/g,a),r=r.replace(/{%\s?endif\s?%}/g,"{% }; %}"),r=r.replace(/{%\s?else\s?%}/g,"{% } else { %}"),r=r.replace(/{%\s?endfor\s?%}/g,"{% }; %}");var n=`var _p=[],print=function(){_p.push.apply(_p,arguments)};with(obj){
_p.push('`+r.replace(/[\r\t\n]/g," ").split("{%").join("	").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("	").join(`');
`).split("%}").join(`
_p.push('`).split("\r").join("\\'")+"');}return _p.join('');";frappe.template.debug[t]=n;try{frappe.template.compiled[e]=new Function("obj",n)}catch(o){console.log("Error in Template:"),console.log(n),o.lineNumber&&(console.log("Error in Line "+o.lineNumber+", Col "+o.columnNumber+":"),console.log(n.split(`
`)[o.lineNumber-1]))}}return frappe.template.compiled[e]};frappe.render=function(r,t,e){return frappe.template.compile(r,e)(t)};frappe.render_template=function(r,t){if(r.indexOf(" ")!==-1)var e=r;else var e=frappe.templates[r];return t===void 0&&(t={}),e||frappe.throw(`Template <b>${r}</b> not found.`),frappe.render(e,t,r)};frappe.render_grid=function(r){r.grid&&(r.columns=r.grid.getColumns(),r.data=r.grid.getData().getItems()),r.print_settings&&r.print_settings.orientation&&r.print_settings.orientation.toLowerCase()==="landscape"&&(r.landscape=!0),r.landscape==null&&(r.columns&&r.columns.length>10?r.landscape=!0:r.landscape=!1),r.content||(r.content=frappe.render_template(r.template||"print_grid",r)),r.base_url=frappe.urllib.get_base_url(),r.print_css=frappe.boot.print_css,r.lang=r.lang||frappe.boot.lang,r.layout_direction=r.layout_direction||frappe.utils.is_rtl()?"rtl":"ltr";var t=frappe.render_template("print_template",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()},frappe.render_tree=function(r){r.base_url=frappe.urllib.get_base_url(),r.landscape=!1,r.print_css=frappe.boot.print_css,r.print_format_css_path=frappe.assets.bundled_asset("print_format.bundle.css");var t=frappe.render_template("print_tree",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()};frappe.render_pdf=function(r,t={}){var e=new FormData;e.append("html",r),t.orientation&&e.append("orientation",t.orientation);var n=new Blob([],{type:"text/xml"});e.append("blob",n);var i=new XMLHttpRequest;i.open("POST","/api/method/frappe.utils.print_format.report_to_pdf"),i.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token),i.responseType="arraybuffer",i.onload=function(a){if(this.status===200){var o=new Blob([a.currentTarget.response],{type:"application/pdf"}),s=URL.createObjectURL(o);window.open(s)}},i.send(e)};frappe.templates.page=`<div class="page-head flex">
	<div class="container">
		<div class="row flex align-center page-head-content justify-between">
			<div class="col-md-4 col-sm-6 col-xs-8 page-title">
				<!-- <div class="title-image hide hidden-md hidden-lg"></div> -->
				<!-- title -->
				<span class="sidebar-toggle-btn">
					<svg class="icon icon-md sidebar-toggle-placeholder">
						<use xlink:href="#icon-menu"></use>
					</svg>
					<span class="sidebar-toggle-icon">
						<svg class="icon icon-md">
							<use xlink:href="#icon-sidebar-collapse">
							</use>
						</svg>
					</span>
				</span>
				<div class="flex fill-width title-area">
					<div>
						<div class="flex">
							<h3 class="ellipsis title-text"></h3>
							<span class="indicator-pill whitespace-nowrap"></span>
						</div>
						<div class="ellipsis sub-heading hide text-muted"></div>
					</div>
					<button class="btn btn-default more-button hide">
						<svg class="icon icon-sm">
							<use xlink:href="#icon-dot-horizontal">
							</use>
						</svg>
					</button>
				</div>
			</div>
			<div class="flex col page-actions justify-content-end">
				<!-- buttons -->
				<div class="custom-actions hide hidden-xs hidden-md"></div>
				<div class="standard-actions flex">
					<span class="page-icon-group hide hidden-xs hidden-sm"></span>
					<div class="menu-btn-group hide">
						<button type="button" class="btn btn-default icon-btn" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="menu-btn-group-label">
									<svg class="icon icon-sm">
										<use xlink:href="#icon-dot-horizontal">
										</use>
									</svg>
								</span>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
					</div>
					<button class="btn btn-secondary btn-default btn-sm hide"></button>
					<div class="actions-btn-group hide">
						<button type="button" class="btn btn-primary btn-sm" data-toggle="dropdown" aria-expanded="false">
							<span class="hidden-xs">
								<span class="actions-btn-group-label">{%= __("Actions") %}</span>
								<svg class="icon icon-xs">
									<use xlink:href="#icon-select">
									</use>
								</svg>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					<button class="btn btn-primary btn-sm hide primary-action"></button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container page-body">
	<div class="page-toolbar hide">
		<div class="container">
		</div>
	</div>
	<div class="page-wrapper">
		<div class="page-content">
			<div class="workflow-button-area btn-group pull-right hide"></div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>`;frappe.ui.make_app_page=function(r){return r.parent.page=new frappe.ui.Page(r),r.parent.page};frappe.ui.pages={};frappe.ui.Page=class{constructor(t){$.extend(this,t),this.set_document_title=!0,this.buttons={},this.fields_dict={},this.views={},this.make(),frappe.ui.pages[frappe.get_route_str()]=this}make(){this.wrapper=$(this.parent),this.add_main_section(),this.setup_scroll_handler(),this.setup_sidebar_toggle()}setup_scroll_handler(){let t=0;window.addEventListener("scroll",frappe.utils.throttle(()=>{$(".page-head").toggleClass("drop-shadow",!!document.documentElement.scrollTop);let e=document.documentElement.scrollTop;e>0&&t<=e?$(".page-head").css("top","-15px"):$(".page-head").css("top","var(--navbar-height)"),t=e}),500)}get_empty_state(t,e,n){return $(`<div class="page-card-container">
			<div class="page-card">
				<div class="page-card-head">
					<span class="indicator blue">
						${t}</span>
				</div>
				<p>${e}</p>
				<div>
					<button class="btn btn-primary btn-sm">${n}</button>
				</div>
			</div>
		</div>`)}load_lib(t){frappe.require(this.required_libs,t)}add_main_section(){$(frappe.render_template("page",{})).appendTo(this.wrapper),this.single_column?this.add_view("main",'<div class="row layout-main">					<div class="col-md-12 layout-main-section-wrapper">						<div class="layout-main-section"></div>						<div class="layout-footer hide"></div>					</div>				</div>'):this.add_view("main",`
				<div class="row layout-main">
					<div class="col-lg-2 layout-side-section"></div>
					<div class="col layout-main-section-wrapper">
						<div class="layout-main-section"></div>
						<div class="layout-footer hide"></div>
					</div>
				</div>
			`),this.setup_page()}setup_page(){this.$title_area=this.wrapper.find(".title-area"),this.$sub_title_area=this.wrapper.find("h6"),this.title&&this.set_title(this.title),this.icon&&this.get_main_icon(this.icon),this.body=this.main=this.wrapper.find(".layout-main-section"),this.container=this.wrapper.find(".page-body"),this.sidebar=this.wrapper.find(".layout-side-section"),this.footer=this.wrapper.find(".layout-footer"),this.indicator=this.wrapper.find(".indicator-pill"),this.page_actions=this.wrapper.find(".page-actions"),this.btn_primary=this.page_actions.find(".primary-action"),this.btn_secondary=this.page_actions.find(".btn-secondary"),this.menu=this.page_actions.find(".menu-btn-group .dropdown-menu"),this.menu_btn_group=this.page_actions.find(".menu-btn-group"),this.actions=this.page_actions.find(".actions-btn-group .dropdown-menu"),this.actions_btn_group=this.page_actions.find(".actions-btn-group"),this.standard_actions=this.page_actions.find(".standard-actions"),this.custom_actions=this.page_actions.find(".custom-actions"),this.page_form=$('<div class="page-form row hide"></div>').prependTo(this.main),this.inner_toolbar=this.custom_actions,this.icon_group=this.page_actions.find(".page-icon-group"),this.make_page&&this.make_page(),this.card_layout&&this.main.addClass("frappe-card");let t=this.menu_btn_group.find("button");t.attr("title",__("Menu")).tooltip({delay:{show:600,hide:100}}),frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(t,t.find(".menu-btn-group-label"));let e=this.actions_btn_group.find("button");frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(e,e.find(".actions-btn-group-label"))}setup_sidebar_toggle(){let t=$(".page-head").find(".sidebar-toggle-btn"),e=this.wrapper.find(".layout-side-section");this.disable_sidebar_toggle||!e.length?t.remove():(t.attr("title",__("Toggle Sidebar")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.click(()=>{frappe.utils.is_xs()||frappe.utils.is_sm()?this.setup_overlay_sidebar():e.toggle(),$(document.body).trigger("toggleSidebar"),this.update_sidebar_icon()}))}setup_overlay_sidebar(){let t=this.sidebar.find(".overlay-sidebar").addClass("opened");$('<div class="close-sidebar">').hide().appendTo(this.sidebar).fadeIn();let e=$("html").css("overflow-y","hidden");this.sidebar.find(".close-sidebar").on("click",i=>n(i)),this.sidebar.on("click","button:not(.dropdown-toggle)",i=>n(i));let n=()=>{e.css("overflow-y",""),this.sidebar.find("div.close-sidebar").fadeOut(()=>{t.removeClass("opened").find(".dropdown-toggle").removeClass("text-muted")})}}update_sidebar_icon(){let e=$(".page-head").find(".sidebar-toggle-btn").find(".sidebar-toggle-icon"),n=this.wrapper.find(".layout-side-section"),i=$(n).is(":visible");e.html(frappe.utils.icon(i?"sidebar-collapse":"sidebar-expand","md"))}set_indicator(t,e){this.clear_indicator().removeClass("hide").html(`<span>${t}</span>`).addClass(e)}add_action_icon(t,e,n="",i){let a=$(`
			<button class="text-muted btn btn-default ${n} icon-btn">
				${frappe.utils.icon(t)}
			</button>
		`);return a.appendTo(this.icon_group.removeClass("hide")),a.click(e),a.attr("title",__(i||frappe.unscrub(t))).tooltip({delay:{show:600,hide:100},trigger:"hover"}),a}clear_indicator(){return this.indicator.removeClass().addClass("indicator-pill whitespace-nowrap hide")}get_icon_label(t,e){let n=t,i="xs";return typeof t=="object"&&(n=t.icon,i=t.size||"xs"),`${t?frappe.utils.icon(n,i):""} <span class="hidden-xs"> ${__(e)} </span>`}set_action(t,e){let n=this;e.icon&&(e.label=this.get_icon_label(e.icon,e.label)),this.clear_action_of(t),t.removeClass("hide").prop("disabled",!1).html(e.label).on("click",function(){let a=e.click.apply(this,[t]);n.btn_disable_enable(t,a)}),e.working_label&&t.attr("data-working-label",e.working_label);let i=t.find("span");frappe.ui.keys.get_shortcut_group(this).add(t,i.length?i:t)}set_primary_action(t,e,n,i){return this.set_action(this.btn_primary,{label:t,click:e,icon:n,working_label:i}),this.btn_primary}set_secondary_action(t,e,n,i){return this.set_action(this.btn_secondary,{label:t,click:e,icon:n,working_label:i}),this.btn_secondary}clear_action_of(t){t.addClass("hide").unbind("click").removeAttr("data-working-label")}clear_primary_action(){this.clear_action_of(this.btn_primary)}clear_secondary_action(){this.clear_action_of(this.btn_secondary)}clear_actions(){this.clear_primary_action(),this.clear_secondary_action()}clear_custom_actions(){this.custom_actions.addClass("hide").empty()}clear_icons(){this.icon_group.addClass("hide").empty()}add_menu_item(t,e,n,i){return this.add_dropdown_item({label:t,click:e,standard:n,parent:this.menu,shortcut:i})}add_custom_menu_item(t,e,n,i,a,o=null){return this.add_dropdown_item({label:e,click:n,standard:i,parent:t,shortcut:a,icon:o})}clear_menu(){this.clear_btn_group(this.menu)}show_menu(){this.menu_btn_group.removeClass("hide")}hide_menu(){this.menu_btn_group.addClass("hide")}show_icon_group(){this.icon_group.removeClass("hide")}hide_icon_group(){this.icon_group.addClass("hide")}show_actions_menu(){this.actions_btn_group.removeClass("hide")}hide_actions_menu(){this.actions_btn_group.addClass("hide")}add_action_item(t,e,n){return this.add_dropdown_item({label:t,click:e,standard:n,parent:this.actions})}add_actions_menu_item(t,e,n,i){return this.add_dropdown_item({label:t,click:e,standard:n,shortcut:i,parent:this.actions,show_parent:!1})}clear_actions_menu(){this.clear_btn_group(this.actions)}add_dropdown_item({label:t,click:e,standard:n,parent:i,shortcut:a,show_parent:o=!0,icon:s=null}){o&&i.parent().removeClass("hide");let u=this.is_in_group_button_dropdown(i,"li > a.grey-link",t);if(u)return u;let h,d="";if(s&&(d=`<span class="menu-item-icon">${frappe.utils.icon(s)}</span>`),a){let _=this.prepare_shortcut_obj(a,e,t);h=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${d}
						<span class="menu-item-label">${t}</span>
						<kbd class="pull-right">
							<span>${_.shortcut_label}</span>
						</kbd>
					</a>
				</li>
			`),frappe.ui.keys.add_shortcut(_)}else h=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${d}
						<span class="menu-item-label">${t}</span>
					</a>
				</li>
			`);return u=h.find("a").on("click",e),n?h.appendTo(i):(this.divider=i.find(".dropdown-divider"),this.divider.length||(this.divider=$('<li class="dropdown-divider user-action"></li>').prependTo(i)),h.addClass("user-action").insertBefore(this.divider)),frappe.ui.keys.get_shortcut_group(i.get(0)).add(u,u.find(".menu-item-label")),u}prepare_shortcut_obj(t,e,n){let i;return typeof t=="string"?i={shortcut:t}:i=t,frappe.utils.is_mac()?i.shortcut_label=i.shortcut.replace("Ctrl","\u2318"):i.shortcut_label=i.shortcut,i.shortcut=i.shortcut.toLowerCase(),i.action||(i.action=e),i.description||(i.description=n),i.page=this,i}is_in_group_button_dropdown(t,e,n){if(e||(e="li"),!n||!t)return!1;let i=$(t).find(`${e}:contains('${n}')`).filter(function(){let a=$(this).html();return $(a).attr("data-label")===n});return i.length>0&&i}clear_btn_group(t){t.empty(),t.parent().addClass("hide")}add_divider(){return $('<li class="dropdown-divider"></li>').appendTo(this.menu)}get_or_add_inner_group_button(t){var e=this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`);return e.length||(e=$(`<div class="inner-group-button" data-label="${encodeURIComponent(t)}">
					<button type="button" class="btn btn-default ellipsis" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						${t}
						${frappe.utils.icon("select","xs")}
					</button>
					<div role="menu" class="dropdown-menu"></div>
				</div>`).appendTo(this.inner_toolbar)),e}get_inner_group_button(t){return this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`)}set_inner_btn_group_as_primary(t){this.get_or_add_inner_group_button(t).find("button").removeClass("btn-default").addClass("btn-primary")}btn_disable_enable(t,e){e&&e.then?(t.prop("disabled",!0),e.then(()=>{t.prop("disabled",!1)})):e&&e.always&&(t.prop("disabled",!0),e.always(()=>{t.prop("disabled",!1)}))}add_inner_button(t,e,n,i="default"){var a=this;let o=function(){let u=$(this),h=e();a.btn_disable_enable(u,h)};if(n){var s=this.get_or_add_inner_group_button(n);if($(this.inner_toolbar).removeClass("hide"),!this.is_in_group_button_dropdown(s.find(".dropdown-menu"),"a",t))return $(`<a class="dropdown-item" href="#" onclick="return false;" data-label="${encodeURIComponent(t)}">${t}</a>`).on("click",o).appendTo(s.find(".dropdown-menu"))}else{let u=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);return u.length==0&&(u=$(`<button data-label="${encodeURIComponent(t)}" class="btn btn-${i} ellipsis">
					${__(t)}
				</button>`),u.on("click",o),u.appendTo(this.inner_toolbar.removeClass("hide"))),u}}remove_inner_button(t,e){if(typeof t=="string"&&(t=[t]),t=t.map(i=>__(i)),e){var n=this.get_inner_group_button(__(e));n.length&&n.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`).remove(),n.find(".dropdown-item").length===0&&n.remove()}else this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`).remove()}change_inner_button_type(t,e,n){let i;if(e){var a=this.get_inner_group_button(__(e));a.length&&(i=a.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`))}else i=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);i&&i.removeClass().addClass(`btn btn-${n} ellipsis`)}add_inner_message(t){let e=$(`<span class='inner-page-message text-muted small'>${t}</div>`);return this.inner_toolbar.find(".inner-page-message").remove(),this.inner_toolbar.removeClass("hide").prepend(e),e}clear_inner_toolbar(){this.inner_toolbar.empty().addClass("hide")}add_sidebar_item(t,e,n,i){var a=this.sidebar.find(".sidebar-menu.standard-actions"),o=$("<li>"),s=$("<a>").html(t).on("click",e).appendTo(o);return n?o.insertAfter(a.find(n)):i?o.prependTo(a):o.appendTo(a),s}clear_user_actions(){this.menu.find(".user-action").remove()}get_title_area(){return this.$title_area}set_title(t,e=null,n=!0,i=""){t||(t=""),n&&(t=strip_html(t)),this.title=t,frappe.utils.set_title(i||t),e&&(t=`${frappe.utils.icon(e)} ${t}`);let a=this.$title_area.find(".title-text");a.html(t),a.attr("title",this.title)}set_title_sub(t){this.$sub_title_area.html(t).toggleClass("hide",!t)}get_main_icon(t){return this.$title_area.find(".title-icon").html('<i class="'+t+' fa-fw"></i> ').toggle(!0)}add_help_button(t){}add_button(t,e,n){n||(n={});let i=$(`<button
			class="btn ${n.btn_class||"btn-default"} ${n.btn_size||"btn-sm"} ellipsis">
				${n.icon?frappe.utils.icon(n.icon):""}
				${t}
		</button>`);return this.add_menu_item(t,e,!1).parent().addClass("hidden-xl"),i.appendTo(this.custom_actions),i.on("click",e),this.custom_actions.removeClass("hide"),i}add_custom_button_group(t,e,n){let i=`<span class="hidden-xs">
			<span class="custom-btn-group-label">${__(t)}</span>
			${frappe.utils.icon("select","xs")}
		</span>`;e&&(i=`<span class="hidden-xs">
				${frappe.utils.icon(e)}
				<span class="custom-btn-group-label">${__(t)}</span>
				${frappe.utils.icon("select","xs")}
			</span>
			<span class="visible-xs">
				${frappe.utils.icon(e)}
			</span>`);let a=$(`
			<div class="custom-btn-group">
				<button type="button" class="btn btn-default btn-sm ellipsis" data-toggle="dropdown" aria-expanded="false">
					${i}
				</button>
				<ul class="dropdown-menu" role="menu"></ul>
			</div>
		`);return n||(n=this.custom_actions),n.removeClass("hide").append(a),a.find(".dropdown-menu")}add_dropdown_button(t,e,n,i){frappe.ui.toolbar.add_dropdown_button(t,e,n,i)}add_label(t){return this.show_form(),$("<label class='col-md-1 page-only-label'>"+t+" </label>").appendTo(this.page_form)}add_select(t,e){var n=this.add_field({label:t,fieldtype:"Select"});return n.$wrapper.find("select").empty().add_options(e)}add_data(t){var e=this.add_field({label:t,fieldtype:"Data"});return e.$wrapper.find("input").attr("placeholder",t)}add_date(t,e){var n=this.add_field({label:t,fieldtype:"Date",default:e});return n.$wrapper.find("input").attr("placeholder",t)}add_check(t){return $("<div class='checkbox'><label><input type='checkbox'>"+t+"</label></div>").appendTo(this.page_form).find("input")}add_break(){this.page_form.append('<div class="clearfix invisible-xs"></div>')}add_field(t,e){this.show_form(),t.placeholder||(t.placeholder=t.label),t.input_class="input-xs";var n=frappe.ui.form.make_control({df:t,parent:e||this.page_form,only_input:t.fieldtype!="Check"});if(n.refresh(),$(n.wrapper).addClass("col-md-2").attr("title",__(t.label)).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.fieldtype!="HTML")return n.$input||n.make_input(),n.$input.attr("placeholder",__(t.label)),t.fieldtype==="Check"&&$(n.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8"),t.fieldtype=="Button"&&($(n.wrapper).find(".page-control-label").html("&nbsp;"),n.$input.addClass("btn-xs").css({width:"100%","margin-top":"-1px"})),t.default&&n.set_input(t.default),this.fields_dict[t.fieldname||t.label]=n,n}clear_fields(){this.page_form.empty()}show_form(){this.page_form.removeClass("hide")}hide_form(){this.page_form.addClass("hide")}get_form_values(){var t={};for(let e in this.fields_dict){let n=this.fields_dict[e];t[e]=n.get_value()}return t}add_view(t,e){let n=e;return typeof e=="string"&&(n=$(e)),this.views[t]=n.appendTo($(this.wrapper).find(".page-content")),this.current_view?this.views[t].toggle(!1):this.current_view=this.views[t],this.views[t]}set_view(t){this.current_view_name!==t&&(this.current_view&&this.current_view.toggle(!1),this.current_view=this.views[t],this.previous_view_name=this.current_view_name,this.current_view_name=t,this.views[t].toggle(!0),this.wrapper.trigger("view-change"))}};frappe.provide("frappe.ui");frappe.ui.Slide=class{constructor(t=null){$.extend(this,t),this.setup()}setup(){this.$wrapper=$('<div class="slide-wrapper hidden"></div>').attr({"data-slide-id":this.id,"data-slide-name":this.name}).appendTo(this.parent)}make(){this.before_load&&this.before_load(this),this.$body=$(`<div class="slide-body">
			<div class="content text-center">
				<h1 class="title slide-title">${__(this.title)}</h1>
			</div>
			<div class="form-wrapper">
				<div class="form"></div>
				<div class="add-more text-center" style="margin-top: 5px;">
					<button class="form-more-btn hide btn btn-default btn-xs">
						<span>Add More</span>
					</button>
				</div>
			</div>
		</div>`).appendTo(this.$wrapper),this.$content=this.$body.find(".content"),this.$form=this.$body.find(".form"),this.$primary_btn=this.slides_footer.find(".primary"),this.$form_wrapper=this.$body.find(".form-wrapper"),this.image_src&&this.$content.append($(`<img src="${this.image_src}" style="margin: 20px;">`)),this.help&&this.$content.append($(`<p class="slide-help">${__(this.help)}</p>`)),this.reqd_fields=[],this.refresh(),this.made=!0}refresh(){this.render_parent_dots(),this.done?this.setup_done_state():this.setup_form()}setup_form(){this.form=new frappe.ui.FieldGroup({fields:this.get_atomic_fields(),body:this.$form[0],no_submit_on_enter:!0}),this.form.make(),this.add_more&&this.bind_more_button(),this.set_reqd_fields(),this.onload&&this.onload(this),this.set_reqd_fields()}setup_done_state(){}get_atomic_fields(){var t=JSON.parse(JSON.stringify(this.fields));return this.add_more&&(this.count=1,t=t.map((e,n)=>(e.fieldname&&(e.fieldname+="_1"),n===1&&this.mandatory_entry&&(e.reqd=1),e.static||e.label&&e.label,e))),t}set_reqd_fields(){var t=this.form.fields_dict;this.reqd_fields=[],Object.keys(t).map(e=>{t[e].df.reqd&&this.reqd_fields.push(t[e])})}set_values(){return this.values=this.form.get_values(),!(this.values===null||this.validate&&!this.validate())}bind_more_button(){this.$more=this.$body.find(".form-more-btn"),this.$more.removeClass("hide").on("click",()=>{this.count++;var t=JSON.parse(JSON.stringify(this.fields));this.form.add_fields(t.map(e=>(e.fieldname&&(e.fieldname+="_"+this.count),e.static||e.label&&e.label,e.reqd=0,e))),this.count===this.max_count&&this.$more.addClass("hide")})}resetup_primary_button(){this.unbind_primary_action(),this.bind_fields_to_action_btn(),this.reset_action_button_state(),this.bind_primary_action()}bind_fields_to_action_btn(){var t=this;this.reqd_fields.map(e=>{e.$wrapper.on("change input click",()=>{t.reset_action_button_state()}),e.$wrapper.on("keydown","input",n=>{n.key=="Enter"&&t.reset_action_button_state()})})}reset_action_button_state(){var t=this.reqd_fields.filter(e=>!e.get_value());t.length?this.slides_footer.find(".action").addClass("disabled"):this.slides_footer.find(".action").removeClass("disabled")}unbind_primary_action(){this.slides_footer.find(".primary").off()}bind_primary_action(){this.slides_footer.find(".primary").on("click.primary_action",()=>{this.primary_action()})}is_last_slide(){return this.id===this.parent[0].children.length-1}before_show(){}show_slide(){this.$wrapper.removeClass("hidden"),this.before_show(),this.resetup_primary_button(),this.done?this.$primary_btn.hide():(this.$body.find(".form-control").first().focus(),this.$primary_btn.show())}hide_slide(){this.$wrapper.addClass("hidden")}get_input(t){return this.form.get_input(t)}get_field(t){return this.form.get_field(t)}get_value(t){return this.form.get_value(t)}destroy(){this.$body.remove()}primary_action(){}};frappe.ui.Slides=class{constructor({parent:t=null,slides:e=[],slide_class:n=null,unidirectional:i=0,done_state:a=0,before_load:o=null,on_update:s=null}){this.parent=t,this.slides=e,this.slide_class=n,this.unidirectional=i,this.done_state=a,this.before_load=o,this.on_update=s,this.page_name="setup-wizard",this.slide_dict={},this.made_slide_ids=[],this.values={},this.make()}make(){this.$slide_progress=$("<div>").addClass("slides-progress text-center text-extra-muted").appendTo(this.parent),this.container=$("<div>").addClass("slides-wrapper").attr({tabindex:-1}).appendTo(this.parent),this.$body=$("<div>").addClass("slide-container").appendTo(this.container),this.$footer=$("<div>").addClass("slide-footer").appendTo(this.container),this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.before_load&&this.before_load(this.$footer),this.setup(),this.show_slide(0)}setup(){this.slides.map((t,e)=>{this.slide_dict[e]?this.made_slide_ids.includes(e+"")&&(this.slide_dict[e].done=!1,this.slide_dict[e].destroy(),this.slide_dict[e].make()):(this.slide_dict[e]=new this.slide_class($.extend(this.slides[e],{parent:this.$body,slides_footer:this.$footer,render_parent_dots:this.render_progress_dots.bind(this),id:e})),this.unidirectional||this.slide_dict[e].make())})}refresh(t){this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.show_hide_prev_next(t),this.$body.find(".form-control").first().focus()}render_progress_dots(){this.$slide_progress.empty(),this.slides.map((t,e)=>{let n=$(`<div class="slide-step">
				<div class="slide-step-indicator"></div>
				<div class="slide-step-complete">${frappe.utils.icon("tick","xs")}</div>
			</div>`).attr({"data-step-id":e});this.done_state&&(this.slide_dict[e]&&this.slide_dict[e].done||t.done)&&n.addClass("step-success"),this.unidirectional&&e===this.current_id&&n.addClass("active"),this.$slide_progress.append(n)}),this.completed=0,this.slides.map((t,e)=>{this.slide_dict[e]?this.slide_dict[e].done&&this.completed++:t.done&&this.completed++}),this.on_update&&this.on_update(this.completed,this.slides.length),this.unidirectional||this.bind_progress_dots()}make_prev_next_complete_buttons(){this.$footer.empty(),$(`<div class="row">
			<div class="col-sm-4 text-left prev-div">
				<button class="prev-btn btn btn-secondary btn-sm" tabindex="0">${__("Previous",null,"Go to previous slide")}</button>
			</div>
			<div class="col-sm-8 text-right next-div">
				<button class="complete-btn btn btn-sm primary">${__("Complete Setup",null,"Finish the setup wizard")}</button>
				<button class="next-btn btn btn-default btn-sm" tabindex="0">${__("Next",null,"Go to next slide")}</button>
			</div>
		</div>`).appendTo(this.$footer),this.$prev_btn=this.$footer.find(".prev-btn").attr("tabIndex",0).on("click",()=>this.show_slide(this.current_id-1)),this.$next_btn=this.$footer.find(".next-btn").attr("tabIndex",0).on("click",()=>{this.done_state&&(this.slide&&(this.slide.done=!0),this.current_slide&&(this.current_slide.done=!0)),(!this.unidirectional||this.unidirectional&&this.current_slide.set_values())&&this.show_slide(this.current_id+1)}),this.$complete_btn=this.$footer.find(".complete-btn").attr("tabIndex",0)}bind_progress_dots(){var t=this;this.$slide_progress.find(".fa-circle").addClass("link").on("click",function(){let e=$(this).attr("data-step-id");t.show_slide(e)})}before_show_slide(){return!0}show_slide(t){t=cint(t),!(!this.before_show_slide()||this.current_slide&&this.current_id===t)&&(this.update_values(),this.current_slide&&this.current_slide.hide_slide(),this.unidirectional&&!this.slide_dict[t].made&&this.slide_dict[t].make(),this.current_id=t,this.current_slide=this.slide_dict[t],this.current_slide.show_slide(),this.refresh(t))}destroy_slide(t){this.slide_dict[t]&&this.slide_dict[t].destroy(),this.slide_dict[t]=null}on_update(t,e){}show_hide_prev_next(t){t===0?this.$prev_btn.hide():this.$prev_btn.show(),t+1===this.slides.length?this.$next_btn.hide():this.$next_btn.show()}get_values(){var t={};return $.each(this.slide_dict,function(e,n){n.values&&$.extend(t,n.values)}),t}update_values(){this.values=$.extend(this.values,this.get_values())}};frappe.find={page_primary_action:()=>$(".page-actions:visible .btn-primary"),field:(r,t)=>new Promise(e=>{let n=$(`[data-fieldname="${r}"] :input`);t?(n.val(t).trigger("change"),frappe.after_ajax(()=>{e(n)})):e(n)})};frappe.ui.IconBar=class{constructor(t,e){this.parent=t,this.buttons={},this.make(e)}make(t){this.$wrapper=$('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);for(var e=0;e<t;e++)this.get_group(e+1)}get_group(t){var e=this.$wrapper.find(".iconbar-"+t+" ul");return e.length||(e=$('<div class="iconbar iconbar-'+t+' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul")),e}add_btn(t,e,n,i){var a=this.get_group(t),o=$('<li><i class="'+e+'"></i></li>').appendTo(a).on("click",function(){return i.apply(this),!1});return o.find("i").attr("title",n).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show(),o}hide(t){t?(this.$wrapper.find(".iconbar-"+t).addClass("hide"),this.check_if_all_hidden()):this.$wrapper.addClass("hide").trigger("hidden")}show(t){t?(this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show()):this.$wrapper.hasClass("hide")&&this.$wrapper.removeClass("hide").trigger("shown")}clear(t){var e=this;this.$wrapper.find(".iconbar-"+t).addClass("hide").find("ul").empty(),this.check_if_all_hidden()}check_if_all_hidden(){this.$wrapper.find(".iconbar:visible").length||this.hide()}};frappe.ui.form.LinkSelector=class{constructor(t){$.extend(this,t);var e=this;this.doctype!="[Select]"?frappe.model.with_doctype(this.doctype,function(n){e.make()}):this.make()}make(){var t=this;this.start=0,this.dialog=new frappe.ui.Dialog({title:__("Select {0}",[this.doctype=="[Select]"?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %")},{fieldtype:"HTML",fieldname:"results"},{fieldtype:"Button",fieldname:"more",label:__("More"),click:()=>{t.start+=20,t.search()}}],primary_action_label:__("Search"),primary_action:function(){t.start=0,t.search()}}),this.txt&&this.dialog.fields_dict.txt.set_input(this.txt),this.dialog.get_input("txt").on("keypress",function(e){e.which===13&&(t.start=0,t.search())}),this.dialog.show(),this.search()}search(){var t={txt:this.dialog.fields_dict.txt.get_value(),searchfield:"name",start:this.start},e=this;this.target.set_custom_query&&this.target.set_custom_query(t),this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query&&$.extend(t,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc)),frappe.link_search(this.doctype,t,function(n){var i=e.dialog.fields_dict.results.$wrapper;if(t.start===0&&i.empty(),n.values.length?$.each(n.values,function(o,s){var u=$(repl('<div class="row link-select-row">						<div class="col-xs-4">							<b><a href="#">%(name)s</a></b></div>						<div class="col-xs-8">							<span class="text-muted">%(values)s</span></div>						</div>',{name:s[0],values:s.splice(1).join(", ")})).appendTo(i);u.find("a").attr("data-value",s[0]).click(function(){var h=$(this).attr("data-value");return e.target.is_grid?e.set_in_grid(h).then(()=>e.search()):(e.target.doctype?e.target.parse_validate_and_set_in_model(h):(e.target.set_input(h),e.target.$input.trigger("change")),e.dialog.hide()),!1})}):$('<p><br><span class="text-muted">'+__("No Results")+"</span>"+(frappe.model.can_create(e.doctype)?'<br><br><a class="new-doc btn btn-default btn-sm">'+__("Create a new {0}",[__(e.doctype)])+"</a>":"")+"</p>").appendTo(i).find(".new-doc").click(function(){frappe.new_doc(e.doctype)}),n.values.length<20){var a=e.dialog.fields_dict.more.$wrapper;a.hide()}},this.dialog.get_primary_btn())}set_in_grid(t){return new Promise(e=>{if(this.qty_fieldname)frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty",default:1,reqd:1},n=>{if(!(this.target.frm.doc[this.target.df.fieldname]||[]).some(a=>{if(a[this.fieldname]===t)return frappe.model.set_value(a.doctype,a.name,this.qty_fieldname,n.qty).then(()=>{frappe.show_alert(__("Added {0} ({1})",[t,a[this.qty_fieldname]])),e()}),!0})){let a=null;frappe.run_serially([()=>a=this.target.add_new_row(),()=>frappe.timeout(.1),()=>{let o={};return o[this.fieldname]=t,o[this.qty_fieldname]=n.qty,frappe.model.set_value(a.doctype,a.name,o)},()=>frappe.show_alert(__("Added {0} ({1})",[t,n.qty])),()=>e()])}},__("Set Quantity"),__("Set"));else if(this.dynamic_link_field){let n=this.target.add_new_row();frappe.model.set_value(n.doctype,n.name,this.dynamic_link_field,this.dynamic_link_reference),frappe.model.set_value(n.doctype,n.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} {1} added",[this.dynamic_link_reference,t])),e()})}else{let n=this.target.add_new_row();frappe.model.set_value(n.doctype,n.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} added",[t])),e()})}})}};frappe.link_search=function(r,t,e,n){t||(t={txt:""}),t.doctype=r,t.searchfield||(t.searchfield="name"),frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:t,callback:function(i){e&&e(i)},btn:n})};frappe.ui.form.MultiSelectDialog=class{constructor(t){Object.assign(this,t),this.for_select=this.doctype=="[Select]",this.for_select?this.init():frappe.model.with_doctype(this.doctype,()=>this.init())}init(){this.page_length=20,this.child_page_length=20,this.fields=this.get_fields(),this.make()}get_fields(){let t=this.get_primary_filters(),e=this.get_result_fields(),n=this.get_data_fields(),i=this.get_child_selection_fields();return[...t,...e,...n,...i]}get_result_fields(){let t=()=>{this.page_length+=20,this.get_results()};return[{fieldtype:"HTML",fieldname:"results_area"},{fieldtype:"Button",fieldname:"more_btn",label:__("More"),click:t.bind(this)}]}get_data_fields(){return this.data_fields&&this.data_fields.length?[{fieldtype:"Section Break"},...this.data_fields]:[]}get_child_selection_fields(){let t=[];if(this.allow_child_item_selection&&this.child_fieldname){let e=()=>{this.child_page_length+=20,this.show_child_results()};t.push({fieldtype:"HTML",fieldname:"child_selection_area"}),t.push({fieldtype:"Button",fieldname:"more_child_btn",hidden:1,label:__("More"),click:e.bind(this)})}return t}make(){let t=this.doctype.plural(),e=__("Select {0}",[this.for_select?__("value"):__(t)]);this.dialog=new frappe.ui.Dialog({title:e,fields:this.fields,size:this.size,primary_action_label:this.primary_action_label||__("Get Items"),secondary_action_label:__("Make {0}",[__(this.doctype)]),primary_action:()=>{let n=this.get_custom_filters(),i=cur_dialog.get_values(),a=this.get_selected_child_names(),o=[...this.get_checked_values(),...this.get_parent_name_of_selected_children()];this.action(o,Mr(Vt(Vt(Vt({},this.args),i),n),{filtered_children:a}))},secondary_action:this.make_new_document.bind(this)}),this.add_filters_group&&this.make_filter_area(),this.args={},this.setup_results(),this.bind_events(),this.get_results(),this.dialog.show()}make_new_document(t){t&&(this.set_route_options(),frappe.new_doc(this.doctype,!0))}set_route_options(){if(frappe.route_options={},Array.isArray(this.setters))for(let t of this.setters)frappe.route_options[t.fieldname]=this.dialog.fields_dict[t.fieldname].get_value()||void 0;else Object.keys(this.setters).forEach(t=>{frappe.route_options[t]=this.dialog.fields_dict[t].get_value()||void 0})}setup_results(){this.$parent=$(this.dialog.body),this.$wrapper=this.dialog.fields_dict.results_area.$wrapper.append(`<div class="results my-3"
			style="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>`),this.$results=this.$wrapper.find(".results"),this.$results.append(this.make_list_row())}show_child_results(){this.get_child_result().then(t=>{this.child_results=t.message||[],this.render_child_datatable(),this.$wrapper.addClass("hidden"),this.$child_wrapper.removeClass("hidden"),this.dialog.fields_dict.more_btn.$wrapper.hide()})}is_child_selection_enabled(){return this.dialog.fields_dict.allow_child_item_selection.get_value()}toggle_child_selection(){this.is_child_selection_enabled()?this.show_child_results():(this.child_results=[],this.get_results(),this.$wrapper.removeClass("hidden"),this.$child_wrapper.addClass("hidden"))}render_child_datatable(){this.child_datatable?setTimeout(()=>{this.child_datatable.rowmanager.checkMap=[],this.child_datatable.refresh(this.get_child_datatable_rows()),this.$child_wrapper.find(".dt-scrollable").css("height","300px"),this.$child_wrapper.find(".dt-scrollable").css("overflow-y","scroll")},500):this.setup_child_datatable()}get_child_datatable_columns(){return[this.doctype,...this.child_columns].map(e=>({name:frappe.unscrub(e),editable:!1}))}get_child_datatable_rows(){return this.child_results.length>this.child_page_length?this.dialog.fields_dict.more_child_btn.toggle(!0):this.dialog.fields_dict.more_child_btn.toggle(!1),this.child_results.slice(0,this.child_page_length).map(t=>Object.values(t).slice(1))}setup_child_datatable(){let t=this.get_child_datatable_columns(),e=this.get_child_datatable_rows();this.$child_wrapper=this.dialog.fields_dict.child_selection_area.$wrapper,this.$child_wrapper.addClass("my-3"),this.child_datatable=new frappe.DataTable(this.$child_wrapper.get(0),{columns:t,data:e,layout:"fluid",inlineFilters:!0,serialNoColumn:!1,checkboxColumn:!0,cellHeight:35,noDataMessage:__("No Data"),disableReorderColumn:!0}),this.$child_wrapper.find(".dt-scrollable").css("height","300px")}get_primary_filters(){let t=[],e=new Array(3);return e[0]=[{fieldtype:"Data",label:__("Name"),fieldname:"search_term"}],e[1]=[],e[2]=[],$.isArray(this.setters)?this.setters.forEach((n,i)=>{e[(i+1)%3].push(n)}):Object.keys(this.setters).forEach((n,i)=>{let a=frappe.meta.docfield_map[this.doctype][n];e[(i+1)%3].push({fieldtype:a.fieldtype,label:a.label,fieldname:n,options:a.options,default:this.setters[n]})}),Object.seal&&Object.seal(e),this.allow_child_item_selection&&(this.child_doctype=frappe.meta.get_docfield(this.doctype,this.child_fieldname).options,e[0].push({fieldtype:"Check",label:__("Select {0}",[this.child_doctype]),fieldname:"allow_child_item_selection",onchange:this.toggle_child_selection.bind(this)})),t=[...e[0],{fieldtype:"Column Break"},...e[1],{fieldtype:"Column Break"},...e[2],{fieldtype:"Section Break",fieldname:"primary_filters_sb"}],this.add_filters_group&&t.push({fieldtype:"HTML",fieldname:"filter_area"}),t}make_filter_area(){this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:this.doctype,on_change:()=>{this.is_child_selection_enabled()?this.show_child_results():this.get_results()}}),this.filter_group.wrapper.find(".apply-filters").hide()}get_custom_filters(){return this.add_filters_group&&this.filter_group?this.filter_group.get_filters().reduce((t,e)=>Object.assign(t,{[e[1]]:[e[2],e[3]]}),{}):{}}bind_events(){let t=this;this.$results.on("click",".list-item-container",function(e){!$(e.target).is(":checkbox")&&!$(e.target).is("a")&&$(this).find(":checkbox").trigger("click")}),this.$results.on("click",".list-item--head :checkbox",e=>{this.$results.find(".list-item-container .list-row-check").prop("checked",$(e.target).is(":checked"))}),this.$parent.find(".input-with-feedback").on("change",()=>{frappe.flags.auto_scroll=!1,this.is_child_selection_enabled()?this.show_child_results():this.get_results()}),this.$parent.find('[data-fieldtype="Data"]').on("input",()=>{var e=$(this);clearTimeout(e.data("timeout")),e.data("timeout",setTimeout(function(){frappe.flags.auto_scroll=!1,t.is_child_selection_enabled()?t.show_child_results():(t.empty_list(),t.get_results())},300))})}get_parent_name_of_selected_children(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,n,i)=>{if(n==1){let a=this.child_results[i].parent;e.includes(a)||e.push(a)}return e},[])}get_selected_child_names(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,n,i)=>{if(n==1){let a=this.child_results[i].name;e.push(a)}return e},[])}get_checked_values(){return this.$results.find(".list-item-container").map(function(){if($(this).find(".list-row-check:checkbox:checked").length>0)return $(this).attr("data-item-name")}).get()}get_checked_items(){let t=this.get_checked_values();return this.results.filter(e=>t.includes(e.name))}get_datatable_columns(){return this.get_query&&this.get_query().query&&this.columns?this.columns:Array.isArray(this.setters)?["name",...this.setters.map(t=>t.fieldname)]:["name",...Object.keys(this.setters)]}make_list_row(t={}){var e=this;let n=Object.keys(t).length===0,i="";this.get_datatable_columns().forEach(function(o){i+=`<div class="list-item__content ellipsis">
				${n?`<span class="ellipsis text-muted" title="${__(frappe.model.unscrub(o))}">${__(frappe.model.unscrub(o))}</span>`:o!=="name"?`<span class="ellipsis result-row" title="${__(t[o]||"")}">${__(t[o]||"")}</span>`:`<a href="${"/app/"+frappe.router.slug(e.doctype)+"/"+t[o]||""}" class="list-id ellipsis" title="${__(t[o]||"")}">
							${__(t[o]||"")}</a>`}
			</div>`});let a=$(`<div class="list-item">
			<div class="list-item__content" style="flex: 0 0 10px;">
				<input type="checkbox" class="list-row-check" data-item-name="${t.name}" ${t.checked?"checked":""}>
			</div>
			${i}
		</div>`);return n?a.addClass("list-item--head"):a=$(`<div class="list-item-container" data-item-name="${t.name}"></div>`).append(a),a}render_result_list(t,e=0,n=!0){var i=this,a=i.dialog.fields_dict.more_btn.$wrapper;if(!frappe.flags.auto_scroll&&n&&this.empty_list(),a.hide(),$(".modal-dialog .list-item--head").css("z-index",1),t.length===0)return;e&&a.show();let o=this.get_checked_values();t.filter(s=>!o.includes(s.name)).forEach(s=>{i.$results.append(i.make_list_row(s))}),this.$results.find(".list-item--head").css("z-index",1),frappe.flags.auto_scroll&&this.$results.animate({scrollTop:i.$results.prop("scrollHeight")},500)}empty_list(){let t=this.get_checked_items().map(e=>Mr(Vt({},e),{checked:!0}));this.$results.find(".list-item-container").remove(),this.render_result_list(t,0,!1)}get_filters_from_setters(){let t=this,e=(this.get_query?this.get_query().filters:{})||{},n=[];if($.isArray(this.setters))for(let i of this.setters)e[i.fieldname]=t.dialog.fields_dict[i.fieldname].get_value()||void 0,t.args[i.fieldname]=e[i.fieldname],n.push(i.fieldname);else Object.keys(this.setters).forEach(function(i){var a=t.dialog.fields_dict[i].get_value();t.dialog.fields_dict[i].df.fieldtype=="Data"&&a?e[i]=["like","%"+a+"%"]:(e[i]=a||void 0,t.args[i]=e[i],n.push(i))});return[e,n]}get_args_for_search(){let[t,e]=this.get_filters_from_setters(),n=this.get_custom_filters();return Object.assign(t,n),{doctype:this.doctype,txt:this.dialog.fields_dict.search_term.get_value(),filters:t,filter_fields:e,page_length:this.page_length+5,query:this.get_query?this.get_query().query:"",as_dict:1}}async perform_search(t){let e=await frappe.call({type:"GET",method:"frappe.desk.search.search_widget",no_spinner:!0,args:t}),n=e.values.length&&e.values.length>this.page_length?1:0;return[e,n]}async get_results(){let t=this.get_args_for_search(),[e,n]=await this.perform_search(t);n&&(e.values=e.values.splice(0,this.page_length)),this.results=[],e.values.length&&e.values.forEach(i=>{i.checked=0,this.results.push(i)}),this.render_result_list(this.results,n)}async get_filtered_parents_for_child_search(){let t=this.get_args_for_search();t.filter_fields=["name"];let[e,n]=await this.perform_search(t),i=[];return e.values.length&&(i=e.values.map(a=>a.name)),i}async add_parent_filters(t){let e=await this.get_filtered_parents_for_child_search();e.length&&t.push(["parent","in",e])}add_custom_child_filters(t){this.add_filters_group&&this.filter_group&&this.filter_group.get_filters().forEach(e=>{e[0]==this.child_doctype&&t.push([e[1],e[2],e[3]])})}async get_child_result(){let t=[["parentfield","=",this.child_fieldname]];return await this.add_parent_filters(t),this.add_custom_child_filters(t),frappe.call({method:"frappe.client.get_list",args:{doctype:this.child_doctype,filters:t,fields:["name","parent",...this.child_columns],parent:this.doctype,limit_page_length:this.child_page_length+5,order_by:"parent"}})}};frappe._.get_data_uri=r=>{let t=r.videoWidth,e=r.videoHeight,n=$("<canvas/>");return n[0].width=t,n[0].height=e,n[0].getContext("2d").drawImage(r,0,0,t,e),n[0].toDataURL("image/png")};function Ub(){let r=document.createElement("input");return r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("multiple",""),r}function Wb(r){return new Promise((t,e)=>{let n=new FileReader;n.onload=()=>t(n.result),n.onerror=e,n.readAsDataURL(r)})}frappe.ui.Capture=class{constructor(r={}){this.options=frappe.ui.Capture.OPTIONS,this.set_options(r),this.facing_mode="environment",this.images=[]}set_options(r){return this.options=Vt(Vt({},frappe.ui.Capture.OPTIONS),r),this}show(){this.build_dialog(),frappe.is_mobile()?this.show_for_mobile():this.show_for_desktop()}build_dialog(){let r=this;r.dialog=new frappe.ui.Dialog({title:this.options.title,animate:this.options.animate,fields:[{fieldtype:"HTML",fieldname:"capture"},{fieldtype:"HTML",fieldname:"total_count"}],on_hide:this.stop_media_stream()}),r.$template=$(frappe.ui.Capture.TEMPLATE);let t=r.dialog.get_field("capture");$(t.wrapper).html(r.$template),r.dialog.get_close_btn().on("click",()=>{r.hide()})}show_for_mobile(){let r=this;r.input||(r.input=Ub()),r.input.onchange=async()=>{for(let t of r.input.files){let e=await Wb(t);r.images.push(e)}r.render_preview(),r.dialog.show()},r.input.click()}show_for_desktop(){let r=this;this.render_stream().then(()=>{r.dialog.show()}).catch(t=>{throw r.options.error&&frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE,3),t})}render_stream(){let r=this,t={video:{facingMode:this.facing_mode}};return navigator.mediaDevices.getUserMedia(t).then(e=>{r.stream=e,r.dialog.custom_actions.empty(),r.dialog.get_primary_btn().off("click"),r.setup_take_photo_action(),r.setup_preview_action(),r.setup_toggle_camera(),r.$template.find(".fc-stream-container").show(),r.$template.find(".fc-preview-container").hide(),r.video=r.$template.find("video")[0],r.video.srcObject=r.stream,r.video.load(),r.video.play()})}render_preview(){this.stop_media_stream(),this.$template.find(".fc-stream-container").hide(),this.$template.find(".fc-preview-container").show(),this.dialog.get_primary_btn().off("click");let r="";this.images.forEach((t,e)=>{r+=`
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${e}">
					<span class="capture-remove-btn" data-idx="${e}">
						${frappe.utils.icon("close","lg")}
					</span>
					<img class="rounded" src="${t}" data-idx="${e}">
				</div>
			`}),this.$template.find(".fc-preview-container").empty(),$(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${r}
			</div>`),this.setup_capture_action(),this.setup_submit_action(),this.setup_remove_action(),this.update_count(),this.dialog.custom_actions.empty()}setup_take_photo_action(){let r=this;this.dialog.set_primary_action(__("Take Photo"),()=>{let t=frappe._.get_data_uri(r.video);r.images.push(t),r.setup_preview_action(),r.update_count()})}setup_preview_action(){let r=this;!this.images.length||(this.dialog.set_secondary_action_label(__("Preview")),this.dialog.set_secondary_action(()=>{r.dialog.get_primary_btn().off("click"),r.render_preview()}))}setup_remove_action(){let r=this;this.$template[0].getElementsByClassName("capture-remove-btn").forEach(e=>{e.onclick=()=>{let n=parseInt(e.getAttribute("data-idx"));r.images.splice(n,1),r.render_preview()}})}update_count(){let r=this.dialog.get_field("total_count"),t=`${__("Total Images")}: <b>${this.images.length}`;this.images.length===0&&(t=__("No Images")),$(r.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${t}</b></div>
			</div>
		`)}setup_toggle_camera(){let r=this;this.dialog.add_custom_action(__("Switch Camera"),()=>{r.facing_mode=r.facing_mode=="environment"?"user":"environment",frappe.show_alert({message:__("Switching Camera")}),r.stop_media_stream(),r.render_stream()},"btn-switch")}setup_capture_action(){let r=this;this.dialog.set_secondary_action_label(__("Capture")),this.dialog.set_secondary_action(()=>{frappe.is_mobile()?r.show_for_mobile():r.render_stream()})}setup_submit_action(){let r=this;this.dialog.set_primary_action(__("Submit"),()=>{r.hide(),r.callback&&r.callback(r.images)})}hide(){this.dialog&&this.dialog.hide(),this.stop_media_stream()}stop_media_stream(){this.stream&&this.stream.getTracks().forEach(r=>{r.stop()})}submit(r){this.callback=r}};frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1};frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera.");frappe.ui.Capture.TEMPLATE=`
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;frappe.provide("frappe.ui");frappe.ui.app_icon={get_html:function(r,t){var e=r.icon,n=r.color;e&&e.match(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g)&&(r.emoji=r.icon);var i="";return r.reverse&&(i="color: #36414C;"),n||(n="#4aa3df"),!e||r.emoji?e='<span class="inner" '+(r.reverse?'style="'+i+'"':"")+">"+(r.emoji||r._label[0].toUpperCase())+"</span>":e.split(".").slice(-1)[0]==="svg"?($.ajax({url:frappe.urllib.get_full_url(e),dataType:"text",async:!1,success:function(a){e=a}}),e='<object class="app-icon-svg">'+e+"</object>"):e='<i class="'+e+'" title="'+r._label+'" style="'+i+'"></i>','<div class="app-icon'+(t?" app-icon-small":"")+'" style="background-color: '+n+'" title="'+r._label+'">'+e+"</div>"}};frappe.provide("frappe.ui");frappe.ui.ThemeSwitcher=class{constructor(){this.setup_dialog(),this.refresh()}setup_dialog(){this.dialog=new frappe.ui.Dialog({title:__("Switch Theme")}),this.body=$('<div class="theme-grid"></div>').appendTo(this.dialog.$body),this.bind_events()}bind_events(){this.dialog.$wrapper.on("keydown",t=>{if(!this.themes)return;let e=frappe.ui.keys.get_key(t),n;if(e==="right")n=1;else if(e==="left")n=-1;else return;let i=this.themes.findIndex(o=>o.name===this.current_theme),a=this.themes[i+n];if(!!a)return a.$html.click(),!1})}refresh(){this.current_theme=document.documentElement.getAttribute("data-theme-mode")||"light",this.fetch_themes().then(()=>{this.render()})}fetch_themes(){return new Promise(t=>{this.themes=[{name:"light",label:__("Frappe Light"),info:__("Light Theme")},{name:"dark",label:__("Timeless Night"),info:__("Dark Theme")},{name:"automatic",label:__("Automatic"),info:__("Uses system's theme to switch between light and dark mode")}],t(this.themes)})}render(){this.themes.forEach(t=>{let e=this.get_preview_html(t);e.appendTo(this.body),t.$html=e})}get_preview_html(t){let e=t.name==="automatic",n=$(`<div class="${this.current_theme==t.name?"selected":""}">
			<div data-theme=${e?"light":t.name}
				data-is-auto-theme="${e}" title="${t.info}">
				<div class="background">
					<div>
						<div class="preview-check" data-theme=${e?"dark":t.name}>
							${frappe.utils.icon("tick","xs")}
						</div>
					</div>
					<div class="navbar"></div>
					<div class="p-2">
						<div class="toolbar">
							<span class="text"></span>
							<span class="primary"></span>
						</div>
						<div class="foreground"></div>
						<div class="foreground"></div>
					</div>
				</div>
			</div>
			<div class="mt-3 text-center">
				<h5 class="theme-title">${t.label}</h5>
			</div>
		</div>`);return n.on("click",()=>{this.current_theme!==t.name&&(this.themes.forEach(i=>{i.$html.removeClass("selected")}),n.addClass("selected"),this.toggle_theme(t.name))}),n}toggle_theme(t){this.current_theme=t.toLowerCase(),document.documentElement.setAttribute("data-theme-mode",this.current_theme),frappe.show_alert(__("Theme Changed"),3),frappe.xcall("frappe.core.doctype.user.user.switch_theme",{theme:toTitle(t)})}show(){this.dialog.show()}hide(){this.dialog.hide()}};frappe.ui.add_system_theme_switch_listener=()=>{frappe.ui.dark_theme_media_query.addEventListener("change",()=>{frappe.ui.set_theme()})};frappe.ui.dark_theme_media_query=window.matchMedia("(prefers-color-scheme: dark)");frappe.ui.set_theme=r=>{let t=document.documentElement,e=t.getAttribute("data-theme-mode");r||e==="automatic"&&(r=frappe.ui.dark_theme_media_query.matches?"dark":"light"),t.setAttribute("data-theme",r||e)};var n2=jr(Gf());frappe.db={get_list:function(r,t){return t||(t={}),t.doctype=r,t.fields||(t.fields=["name"]),"limit"in t||(t.limit=20),new Promise(e=>{frappe.call({method:"frappe.desk.reportview.get_list",args:t,type:"GET",callback:function(n){e(n.message)}})})},exists:function(r,t){return new Promise(e=>{frappe.db.get_value(r,{name:t},"name").then(n=>{n.message&&n.message.name?e(!0):e(!1)})})},get_value:function(r,t,e,n,i){return frappe.call({method:"frappe.client.get_value",type:"GET",args:{doctype:r,fieldname:e,filters:t,parent:i},callback:function(a){n&&n(a.message)}})},get_single_value:(r,t)=>new Promise(e=>{frappe.call({method:"frappe.client.get_single_value",args:{doctype:r,field:t},type:"GET"}).then(n=>e(n?n.message:null))}),set_value:function(r,t,e,n,i){return frappe.call({method:"frappe.client.set_value",args:{doctype:r,name:t,fieldname:e,value:n},callback:function(a){i&&i(a.message)}})},get_doc:function(r,t,e=null){return new Promise((n,i)=>{frappe.call({method:"frappe.client.get",type:"GET",args:{doctype:r,name:t,filters:e},callback:a=>{frappe.model.sync(a.message),n(a.message)}}).fail(i)})},insert:function(r){return frappe.xcall("frappe.client.insert",{doc:r})},delete_doc:function(r,t){return new Promise(e=>{frappe.call("frappe.client.delete",{doctype:r,name:t},n=>e(n.message))})},count:function(r,t={}){let e=t.filters||{},n=Array.isArray(e)&&e.some(a=>a[0]!==r),i=[];return frappe.xcall("frappe.desk.reportview.get_count",{doctype:r,filters:e,fields:i,distinct:n})},get_link_options(r,t="",e={}){return new Promise(n=>{frappe.call({type:"GET",method:"frappe.desk.search.search_link",args:{doctype:r,txt:t,filters:e},callback(i){n(i.results)}})})}};frappe.provide("frappe.meta.docfield_map");frappe.provide("frappe.meta.docfield_copy");frappe.provide("frappe.meta.docfield_list");frappe.provide("frappe.meta.doctypes");frappe.provide("frappe.meta.precision_map");frappe.get_meta=function(r){return locals.DocType?locals.DocType[r]:null};$.extend(frappe.meta,{sync:function(r){$.each(r.fields,function(t,e){frappe.meta.add_field(e)}),frappe.meta.sync_messages(r),r.__print_formats&&frappe.model.sync(r.__print_formats),r.__workflow_docs&&frappe.model.sync(r.__workflow_docs)},add_field:function(r){frappe.provide("frappe.meta.docfield_map."+r.parent),frappe.meta.docfield_map[r.parent][r.fieldname||r.label]=r,frappe.meta.docfield_list[r.parent]||(frappe.meta.docfield_list[r.parent]=[]);for(var t in frappe.meta.docfield_list[r.parent]){var e=frappe.meta.docfield_list[r.parent][t];if(r.fieldname==e.fieldname)return}frappe.meta.docfield_list[r.parent].push(r)},make_docfield_copy_for:function(r,t,e=null){var n=frappe.meta.docfield_copy;n[r]||(n[r]={}),n[r][t]||(n[r][t]={}),e=e||frappe.meta.docfield_list[r]||[];for(var i=0,a=e.length;i<a;i++){var o=e[i];n[r][t][o.fieldname||o.label]=copy_dict(o)}},get_field:function(r,t,e){var n=frappe.meta.get_docfield(r,t,e);return n||frappe.model.std_fields.every(function(i){return i.fieldname===t?(n=i,!1):!0}),n},get_docfield:function(r,t,e){var n=frappe.meta.get_docfield_copy(r,e);return n?n[t]:null},set_formatter:function(r,t,e,n){frappe.meta.get_docfield(r,t,e).formatter=n},set_indicator_formatter:function(r,t,e,n,i){frappe.meta.get_docfield(r,t,e).formatter=function(a,o,s,u){return repl('<span class="indicator %(color)s">%(name)s</span>',{color:i(),name:n()})}},get_docfields:function(r,t,e){var n=frappe.meta.get_docfield_copy(r,t),i=frappe.meta.sort_docfields(n);return e&&(i=frappe.utils.filter_dict(i,e)),i},get_linked_fields:function(r){return $.map(frappe.get_meta(r).fields,function(t){return t.fieldtype=="Link"?t.options:null})},get_fields_to_check_permissions:function(r){var t=$.map(frappe.meta.get_docfields(r,name),function(e){return e.fieldtype==="Link"&&e.ignore_user_permissions!==1?e:null});return t=t.concat({label:"Name",fieldname:name,options:r}),t},sort_docfields:function(r){return $.map(r,function(t){return t}).sort(function(t,e){return t.idx-e.idx})},get_docfield_copy:function(r,t){return t?(frappe.meta.docfield_copy[r]&&frappe.meta.docfield_copy[r][t]||frappe.meta.make_docfield_copy_for(r,t),frappe.meta.docfield_copy[r][t]):frappe.meta.docfield_map[r]},get_fieldnames:function(r,t,e){return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[r],e),function(n){return n.fieldname})},has_field:function(r,t){let e=frappe.meta.docfield_map[r];return e&&e[t]},get_table_fields:function(r){return $.map(frappe.meta.docfield_list[r],function(t){return frappe.model.table_fields.includes(t.fieldtype)?t:null})},get_doctype_for_field:function(r,t){var e=null;return in_list(frappe.model.std_fields_list,t)||frappe.meta.has_field(r,t)?e=r:(frappe.meta.get_table_fields(r).every(function(n){return frappe.meta.has_field(n.options,t)||in_list(frappe.model.child_table_field_list,t)?(e=n.options,!1):!0}),e||console.log(__("Warning: Unable to find {0} in any table related to {1}",[t,__(r)]))),e},get_parentfield:function(r,t){var e=(frappe.get_doc("DocType",r).fields||[]).filter(n=>frappe.model.table_fields.includes(n.fieldtype)&&n.options===t);if(!e.length)throw"parentfield not found for "+r+", "+t;return e[0].fieldname},get_label:function(r,t,e){var n={owner:__("Owner"),creation:__("Created On"),modified:__("Last Modified On"),idx:__("Idx"),name:__("Name"),modified_by:__("Last Modified By")};if(n[t])return n[t];var i=this.get_docfield(r,t,e);return(i?i.label:"")||t},get_print_sizes:function(){return["A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C5E","Comm10E","DLE","Executive","Folio","Ledger","Legal","Letter","Tabloid","Custom"]},get_print_formats:function(r){var t=["Standard"],e=locals.DocType[r].default_print_format;let n=frappe.model.get_doc(":Print Settings","Print Settings").enable_raw_printing;var i=frappe.get_list("Print Format",{doc_type:r}).sort(function(o,s){return o>s?1:-1});if($.each(i,function(o,s){!in_list(t,s.name)&&s.print_format_type!=="JS"&&(cint(n)||!s.raw_printing)&&t.push(s.name)}),e&&e!="Standard"){var a=t.indexOf(e);t.splice(a,1).sort(),t.unshift(e)}return t},sync_messages:function(r){r.__messages&&$.extend(frappe._messages,r.__messages)},get_field_currency:function(r,t){var e=frappe.boot.sysdefaults.currency;if(!t&&cur_frm&&(t=cur_frm.doc),r&&r.options)if(t&&r.options.indexOf(":")!=-1){var n=r.options.split(":");if(n.length==3){var i=t[n[1]];!i&&cur_frm&&(i=cur_frm.doc[n[1]]),e=frappe.model.get_value(n[0],i,n[2])||frappe.model.get_value(":"+n[0],i,n[2])||e}}else t&&t[r.options]?e=t[r.options]:cur_frm&&cur_frm.doc[r.options]&&(e=cur_frm.doc[r.options]);return e},get_field_precision:function(r,t){var e=null;if(r&&r.precision)e=cint(r.precision);else if(r&&r.fieldtype==="Currency"){if(e=cint(frappe.defaults.get_default("currency_precision")),!e){var n=get_number_format(),i=get_number_format_info(n);e=i.precision}}else e=cint(frappe.defaults.get_default("float_precision"))||3;return e}});Object.assign(frappe.model,{docinfo:{},sync:function(r){var t;if(!r.docs&&!r.docinfo&&(r={docs:r}),t=$.isPlainObject(r.docs),t&&(r.docs=[r.docs]),r.docs)for(var e=0,n=r.docs.length;e<n;e++){var i=r.docs[e];locals[i.doctype]&&locals[i.doctype][i.name]?frappe.model.update_in_locals(i):frappe.model.add_to_locals(i),i.__last_sync_on=new Date,i.doctype==="DocType"&&frappe.meta.sync(i),i.localname&&frappe.model.rename_after_save(i,e)}return frappe.model.sync_docinfo(r),r.docs},rename_after_save:(r,t)=>{frappe.model.new_names[r.localname]=r.name,$(document).trigger("rename",[r.doctype,r.localname,r.name]),delete locals[r.doctype][r.localname],t===0&&(frappe.model.docinfo[r.doctype][r.name]=frappe.model.docinfo[r.doctype][r.localname],frappe.model.docinfo[r.doctype][r.localname]=void 0)},sync_docinfo:r=>{if(r.docinfo){var t;r.docs?t=r.docs[0]:cur_frm&&(t=cur_frm.doc),t&&(frappe.model.docinfo[t.doctype]||(frappe.model.docinfo[t.doctype]={}),frappe.model.docinfo[t.doctype][t.name]=r.docinfo),Object.assign(frappe.boot.user_info,r.docinfo.user_info)}return r.docs},add_to_locals:function(r){locals[r.doctype]||(locals[r.doctype]={}),!r.name&&r.__islocal&&(r.parentfield||frappe.model.clear_doc(r),r.name=frappe.model.get_new_name(r.doctype),r.parentfield||frappe.provide("frappe.model.docinfo."+r.doctype+"."+r.name)),locals[r.doctype][r.name]=r;let t=frappe.get_meta(r.doctype);if(!(t?t.istable:r.parentfield))for(var n in r){var i=r[n];if($.isArray(i))for(var a=0,o=i.length;a<o;a++){var s=i[a];typeof s=="object"&&!s.parent&&(s.parent=r.name),frappe.model.add_to_locals(s)}}},update_in_locals:function(r){let t=locals[r.doctype][r.name],e=function(n,i){Object.keys(i).map(a=>{n[a]==null&&delete i[a]})};for(let n in r){let i=frappe.meta.get_field(r.doctype,n);if(i&&frappe.model.table_fields.includes(i.fieldtype)){r[n]instanceof Array||(r[n]=[]),t[n]instanceof Array||(t[n]=[]);for(let a=0;a<r[n].length;a++){let o=r[n][a],s=t[n][a];s?(locals[o.doctype]||(locals[o.doctype]={}),o.name||(o.name=frappe.model.get_new_name(r.doctype)),locals[o.doctype][o.name]||(delete locals[o.doctype][s.name],locals[o.doctype][o.name]=s),Object.assign(s,o),e(o,s)):(t[n].push(o),o.parent||(o.parent=r.name),frappe.model.add_to_locals(o))}if(t[n].length>r[n].length){for(let a=r[n].length;a<t[n].length;a++){let o=t[n][a];locals[o.doctype]&&locals[o.doctype][o.name]&&delete locals[o.doctype][o.name]}t[n].length=r[n].length}}else t[n]=r[n]}e(r,t)}});frappe.provide("frappe.model");$.extend(frappe.model,{new_names:{},new_name_count:{},get_new_doc:function(r,t,e,n){frappe.provide("locals."+r);var i={docstatus:0,doctype:r,name:frappe.model.get_new_name(r),__islocal:1,__unsaved:1,owner:frappe.session.user};if(frappe.model.set_default_values(i,t),t?($.extend(i,{parent:t.name,parentfield:e,parenttype:t.doctype}),t[e]||(t[e]=[]),i.idx=t[e].length+1,t[e].push(i)):frappe.provide("frappe.model.docinfo."+r+"."+i.name),frappe.model.add_to_locals(i),n&&frappe.model.create_mandatory_children(i),t||(i.__run_link_triggers=1),frappe.route_options&&frappe.route_options.name_field){var a=frappe.get_meta(r);a.autoname&&a.autoname.indexOf("field:")!==-1?i[a.autoname.substr(6)]=frappe.route_options.name_field:a.title_field&&(i[a.title_field]=frappe.route_options.name_field),delete frappe.route_options.name_field}return frappe.route_options&&!i.parent&&($.each(frappe.route_options,function(o,s){var u=frappe.meta.has_field(r,o);u&&in_list(["Link","Data","Select","Dynamic Link"],u.fieldtype)&&!u.no_copy&&(i[o]=s)}),frappe.route_options=null),i},make_new_doc_and_get_name:function(r,t){return frappe.model.get_new_doc(r,null,null,t).name},get_new_name:function(r){var t=frappe.model.new_name_count;return t[r]||(t[r]=0),t[r]++,frappe.router.slug(`new-${r}-${t[r]}`)},set_default_values:function(r,t){for(var e=r.doctype,n=frappe.meta.get_docfields(e),i=[],a=0;a<n.length;a++){var o=n[a];if(!in_list(frappe.model.no_value_type,o.fieldtype)&&r[o.fieldname]==null){if(o.no_default)continue;var s=frappe.model.get_default_value(o,r,t);s?(in_list(["Int","Check"],o.fieldtype)?s=cint(s):in_list(["Currency","Float"],o.fieldtype)&&(s=flt(s)),r[o.fieldname]=s,i.push(o.fieldname)):o.fieldtype=="Select"&&o.options&&typeof o.options=="string"&&!in_list(["[Select]","Loading..."],o.options)&&(r[o.fieldname]=o.options.split(`
`)[0])}}return i},create_mandatory_children:function(r){var t=frappe.get_meta(r.doctype);t&&t.istable||frappe.meta.get_docfields(r.doctype).forEach(function(e){e.fieldtype==="Table"&&e.reqd&&frappe.model.add_child(r,e.fieldname)})},get_default_value:function(r,t,e){var n="",i=frappe.defaults.get_user_permissions();let a=[],o=null,s=null;i&&({allowed_records:a,default_doc:o}=frappe.perm.filter_allowed_docs_for_doctype(i[r.options],t.doctype));var u=frappe.get_meta(t.doctype),h=r.fieldtype==="Link"&&!$.isEmptyObject(i)&&r.ignore_user_permissions!=1&&a.length;if(r.fieldtype==="Link"&&r.options!=="User")if(h&&o)s=o;else{if(!r.ignore_user_permissions){var d=frappe.defaults.get_user_defaults(r.options);d&&d.length===1&&(n=d[0])}n?!n&&r.remember_last_selected_value&&frappe.boot.user.last_selected_values&&(n=frappe.boot.user.last_selected_values[r.options]):n=frappe.defaults.get_user_default(r.fieldname);var _=n&&(!h||a.includes(n));_&&(s=n)}if(!s||r.default){let k=String(r.default);if(k=="__user"||k.toLowerCase()=="user")s=frappe.session.user;else if(k=="user_fullname")s=frappe.session.user_fullname;else if(k=="Today")s=frappe.datetime.get_today();else if((k||"").toLowerCase()==="now")s=frappe.datetime.now_datetime();else if(k[0]===":"){var g=frappe.model.get_default_from_boot_docs(r,t,e),w=!h||a.includes(g);w&&(s=g)}else if(r.fieldname===u.title_field)s="";else{var C=!h||a.includes(r.default);(r.fieldtype!=="Link"||r.options==="User"||C)&&(s=r.default)}}else r.fieldtype=="Time"&&(s=frappe.datetime.now_time());return r.__default_value=s,s},get_default_from_boot_docs:function(r,t,e){if(frappe.get_list(r.default).length>0){var n=r.default.slice(1).toLowerCase().replace(" ","_"),i=e?e[n]:frappe.defaults.get_user_default(n),a=i?frappe.get_doc(r.default,i):null;if(a&&a[r.fieldname])return a[r.fieldname]}},add_child:function(r,t,e,n){arguments.length===2&&(e=t,t=frappe.meta.get_field(r.doctype,e).options),n=n?n-.1:(r[e]||[]).length+1;var i=frappe.model.get_new_doc(t,r,e);if(i.idx=n,n!==cint(n))for(var a=r[e].sort(function(h,d){return h.idx-d.idx}),o=0,s=a.length;o<s;o++){var u=a[o];u.idx=o+1}return cur_frm&&cur_frm.doc==r&&cur_frm.dirty(),i},copy_doc:function(r,t,e,n){var i=["name","amended_from","amendment_date","cancel_reason"],a=frappe.model.get_new_doc(r.doctype,e,n);for(var o in r){var s=frappe.meta.get_docfield(r.doctype,o);if(s&&o.substr(0,2)!="__"&&!in_list(i,o)&&!(s&&!t&&cint(s.no_copy)==1)){var u=r[o]||[];if(frappe.model.table_fields.includes(s.fieldtype))for(var h=0,d=u.length;h<d;h++){var _=u[h];frappe.model.copy_doc(_,t,a,s.fieldname)}else a[o]=r[o]}}var g=frappe.session.user;return a.__islocal=1,a.docstatus=0,a.owner=g,a.creation="",a.modified_by=g,a.modified="",a.lft=null,a.rgt=null,a},open_mapped_doc:function(r){return r.frm&&r.frm.doc.__unsaved?frappe.throw(__("You have unsaved changes in this form. Please save before you continue.")):!r.source_name&&r.frm?r.source_name=r.frm.doc.name:!r.frm&&!r.source_name&&(r.source_name=null),frappe.call({type:"POST",method:"frappe.model.mapper.make_mapped_doc",args:{method:r.method,source_name:r.source_name,args:r.args||null,selected_children:r.frm?r.frm.get_selected():null},freeze:!0,freeze_message:r.freeze_message||"",callback:function(t){t.exc||(frappe.model.sync(t.message),r.run_link_triggers&&(frappe.get_doc(t.message.doctype,t.message.name).__run_link_triggers=!0),frappe.set_route("Form",t.message.doctype,t.message.name))}})}});frappe.create_routes={};frappe.new_doc=function(r,t,e){if(r==="File"){new frappe.ui.FileUploader({folder:t?t.folder:"Home"});return}return new Promise(n=>{t&&$.isPlainObject(t)&&(frappe.route_options=t),frappe.model.with_doctype(r,function(){frappe.create_routes[r]?frappe.set_route(frappe.create_routes[r]).then(()=>n()):frappe.ui.form.make_quick_entry(r,null,e).then(()=>n())})})};frappe.provide("frappe.perm");Object.assign(window,{READ:"read",WRITE:"write",CREATE:"create",DELETE:"delete",SUBMIT:"submit",CANCEL:"cancel",AMEND:"amend"});$.extend(frappe.perm,{rights:["select","read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share","set_user_permissions"],doctype_perm:{},has_perm:(r,t,e,n)=>{t||(t=0),frappe.perm.doctype_perm[r]||(frappe.perm.doctype_perm[r]=frappe.perm.get_perm(r));let i=frappe.perm.doctype_perm[r];if(!i||!i[t])return!1;let a=!!i[t][e];if(t===0&&a&&n){let o=frappe.model.get_docinfo(r,n.name);o&&!o.permissions[e]&&(a=!1)}return a},get_perm:(r,t)=>{let e=[{read:0,permlevel:0}],n=frappe.get_doc("DocType",r),i=frappe.session.user;if((i==="Administrator"||frappe.user_roles.includes("Administrator"))&&(e[0].read=1),!n)return e;if(e=frappe.perm.get_role_permissions(n),t){let a=frappe.model.get_docinfo(r,t.name);if(a&&a.permissions&&Object.keys(a.permissions).forEach(o=>{e[0][o]=a.permissions[o]}),$.isEmptyObject(e[0].if_owner)||(t.owner===i?$.extend(e[0],e[0].if_owner):$.each(e[0].if_owner,o=>{e[0].if_owner[o]&&(e[0][o]=0)})),a&&a.shared)for(let o=0;o<a.shared.length;o++){let s=a.shared[o];s.user===i&&(e[0].read=e[0].read||s.read,e[0].write=e[0].write||s.write,e[0].submit=e[0].submit||s.submit,e[0].share=e[0].share||s.share,s.read&&(e[0].email=frappe.boot.user.can_email.indexOf(r)!==-1?1:0,e[0].print=frappe.boot.user.can_print.indexOf(r)!==-1?1:0))}}return frappe.model.can_read(r)&&!e[0].read&&(e[0].read=1),e},get_role_permissions:r=>{let t=[{read:0,permlevel:0}];return(r.permissions||[]).forEach(e=>{let n=cint(e.permlevel);t[n]||(t[n]={},t[n].permlevel=n),frappe.user_roles.includes(e.role)&&frappe.perm.rights.forEach(i=>{let a=t[n][i]||e[i]||0;a&&(t[n][i]=a)})}),t=t.map(e=>e||{}),t},get_match_rules:(r,t)=>{let e=[];t||(t="read");let n=frappe.perm.get_perm(r),i=frappe.defaults.get_user_permissions();if(i&&!$.isEmptyObject(i)){let a={},o=frappe.meta.get_fields_to_check_permissions(r);$.each(o,(s,u)=>{let h=i[u.options]||[],d=frappe.perm.get_allowed_docs_for_doctype(h,r);d.length&&(a[u.label]=d)}),$.isEmptyObject(a)||e.push(a)}return n[0].if_owner&&n[0].read&&e.push({Owner:frappe.session.user}),e},get_field_display_status:(r,t,e,n)=>{if(!e&&t&&(e=frappe.perm.get_perm(t.doctype,t)),!e)return r&&(cint(r.hidden)||cint(r.hidden_due_to_dependency))?"None":"Write";r.permlevel||(r.permlevel=0);let i=e[r.permlevel],a="None";if(i&&(i.write&&!r.disabled?a="Write":i.read&&(a="Read")),n&&console.log("By Permission:"+a),cint(r.hidden)&&(a="None"),n&&console.log("By Hidden:"+a),cint(r.hidden_due_to_dependency)&&(a="None"),n&&console.log("By Hidden Due To Dependency:"+a),!t)return a;a==="Write"&&cint(t.docstatus)>0&&(a="Read"),n&&console.log("By Submit:"+a);let o=cint(r.allow_on_submit);return a==="Read"&&o&&cint(t.docstatus)===1&&i.write&&(a="Write"),n&&console.log("By Allow on Submit:"+a),a==="Read"&&cur_frm&&cur_frm.state_fieldname&&(cint(cur_frm.read_only)||in_list(cur_frm.states.update_fields,r.fieldname)||r.fieldname==cur_frm.state_fieldname)&&(a="Read"),n&&console.log("By Workflow:"+a),a==="Write"&&(cint(r.read_only)||r.fieldtype==="Read Only")&&(a="Read"),n&&console.log("By Read Only:"+a),a==="Write"&&r.set_only_once&&!t.__islocal&&(a="Read"),n&&console.log("By Set Only Once:"+a),a},is_visible:(r,t,e)=>(typeof r=="string"&&(r=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name)),frappe.perm.get_field_display_status(r,t,e)!=="None"),get_allowed_docs_for_doctype:(r,t)=>frappe.perm.filter_allowed_docs_for_doctype(r,t,!1),filter_allowed_docs_for_doctype:(r,t,e=!0)=>{let n=(r||[]).filter(a=>a.applicable_for===t||!a.applicable_for),i=n.map(a=>a.doc);if(e){let a=i.length===1?i:n.filter(o=>o.is_default).map(o=>o.doc);return{allowed_records:i,default_doc:a[0]}}else return i}});frappe.provide("frappe.workflow");frappe.workflow={state_fields:{},workflows:{},setup:function(r){var t=frappe.get_list("Workflow",{document_type:r});t.length?(frappe.workflow.workflows[r]=t[0],frappe.workflow.state_fields[r]=t[0].workflow_state_field):frappe.workflow.state_fields[r]=null},get_state_fieldname:function(r){return frappe.workflow.state_fields[r]===void 0&&frappe.workflow.setup(r),frappe.workflow.state_fields[r]},get_default_state:function(r,t){frappe.workflow.setup(r);var e=null;return $.each(frappe.workflow.workflows[r].states,function(n,i){if(cint(i.doc_status)===cint(t))return e=i.state,!1}),e},get_transitions:function(r){return frappe.workflow.setup(r.doctype),frappe.xcall("frappe.model.workflow.get_transitions",{doc:r})},get_document_state:function(r,t){return frappe.workflow.setup(r),frappe.get_children(frappe.workflow.workflows[r],"states",{state:t})[0]},is_self_approval_enabled:function(r){return frappe.workflow.workflows[r].allow_self_approval},is_read_only:function(r,t){var e=frappe.workflow.get_state_fieldname(r);if(e){var n=locals[r][t];if(!n||n.__islocal)return!1;var i=n[e]||frappe.workflow.get_default_state(r,n.docstatus),a=i?frappe.workflow.get_document_state(r,i)&&frappe.workflow.get_document_state(r,i).allow_edit:null;if(!frappe.user_roles.includes(a))return!0}return!1},get_update_fields:function(r){var t=$.unique($.map(frappe.workflow.workflows[r].states||[],function(e){return e.update_field}));return t},get_state(r){let t=this.get_state_fieldname(r.doctype),e=r[t];return e||(e=this.get_default_state(r.doctype,r.docstatus)),e},get_all_transitions(r){return frappe.workflow.workflows[r].transitions||[]},get_all_transition_actions(r){return this.get_all_transitions(r).map(e=>e.action)}};frappe.provide("frappe.model.user_settings");$.extend(frappe.model.user_settings,{get:function(r){return frappe.call("frappe.model.utils.user_settings.get",{doctype:r}).then(t=>JSON.parse(t.message||"{}"))},save:function(r,t,e){if(frappe.session.user==="Guest")return Promise.resolve();let n=frappe.model.user_settings[r]||{},i=$.extend(!0,{},n);$.isPlainObject(e)?(i[t]=i[t]||{},$.extend(i[t],e)):i[t]=e;let a=JSON.stringify(n),o=JSON.stringify(i);return a!==o?this.update(r,i):Promise.resolve(i)},remove:function(r,t){var e=frappe.model.user_settings[r]||{};return delete e[t],this.update(r,e)},update:function(r,t){return frappe.session.user==="Guest"?Promise.resolve():frappe.call({method:"frappe.model.utils.user_settings.save",args:{doctype:r,user_settings:t},callback:function(e){frappe.model.user_settings[r]=e.message}})}});frappe.get_user_settings=function(r,t){var e=frappe.model.user_settings[r]||{};return t&&(e=e[t]||{}),e};frappe.user_info=function(r){if(r||(r=frappe.session.user),frappe.boot.user_info&&frappe.boot.user_info[r])var t=frappe.boot.user_info[r];else var t={fullname:r||"Unknown"};return t.abbr=frappe.get_abbr(t.fullname),t.color=frappe.get_palette(t.fullname),t};frappe.provide("frappe.user");$.extend(frappe.user,{name:"Guest",full_name:function(r){return r===frappe.session.user?__("You",null,"Name of the current user. For example: You edited this 5 hours ago."):frappe.user_info(r).fullname},image:function(r){return frappe.user_info(r).image},abbr:function(r){return frappe.user_info(r).abbr},has_role:function(r){typeof r=="string"&&(r=[r]);for(var t in r)if((frappe.boot?frappe.boot.user.roles:["Guest"]).indexOf(r[t])!=-1)return!0},get_desktop_items:function(){var r=$.map(frappe.boot.allowed_modules,function(t){var e=t.module_name,n=frappe.modules[e]&&frappe.modules[e].type;if(frappe.boot.user.allow_modules.indexOf(e)===-1)return null;var i=null;return n==="module"?(frappe.boot.user.allow_modules.indexOf(e)!=-1||frappe.modules[e].is_help)&&(i=e):n==="page"?frappe.boot.allowed_pages.indexOf(frappe.modules[e].link)!=-1&&(i=e):n==="list"?frappe.model.can_read(frappe.modules[e]._doctype)&&(i=e):n==="view"?i=e:n==="setup"?(frappe.user.has_role("System Manager")||frappe.user.has_role("Administrator"))&&(i=e):i=e,i});return r},is_report_manager:function(){return frappe.user.has_role(["Administrator","System Manager","Report Manager"])},get_formatted_email:function(r){var t=frappe.user.full_name(r);if(t){var e="";return t.search(/[\[\]\\()<>@,:;".]/)!==-1&&(e='"'),repl("%(quote)s%(fullname)s%(quote)s <%(email)s>",{fullname:t,email:r,quote:e})}else return r},get_emails:()=>Object.keys(frappe.boot.user_info).map(r=>frappe.boot.user_info[r].email),toString:function(){return this.name}});frappe.session_alive=!0;$(document).bind("mousemove",function(){frappe.session_alive===!1&&$(document).trigger("session_alive"),frappe.session_alive=!0,frappe.session_alive_timeout&&clearTimeout(frappe.session_alive_timeout),frappe.session_alive_timeout=setTimeout("frappe.session_alive=false;",3e4)});var zl=jr(tp());frappe.avatar=function(r,t,e,n=null,i=!1,a=!1){let o;if(r)o=frappe.user_info(r);else{let u=e||frappe.get_cookie("full_name");o={image:n===null?frappe.get_cookie("user_image"):n,fullname:u,abbr:frappe.get_abbr(u),color:frappe.get_palette(u)}}e||(e=o.fullname);let s="";return a&&(t+=" filterable",s=`data-filter="_assign,like,%${r}%"`),frappe.get_avatar(t,e,n||o.image,i,s)};frappe.get_avatar=function(r,t,e=null,n,i){if(r||(r="avatar-small"),e){let a=window.cordova&&e.indexOf("http")===-1?frappe.base_url+e:e;return`<span class="avatar ${r}" title="${t}" ${i}>
				<span class="avatar-frame" style='background-image: url("${a}")'
					title="${t}"></span>
			</span>`}else{let a=frappe.get_abbr(t),o="";if(!n){let s=frappe.get_palette(t);o=`background-color: var(${s[0]}); color: var(${s[1]})`}return(r==="avatar-small"||r=="avatar-xs")&&(a=a.substr(0,1)),`<span class="avatar ${r}" title="${t}" ${i}>
			<div class="avatar-frame standard-image"
				style="${o}">
					${a}
			</div>
		</span>`}};frappe.avatar_group=function(r,t=4,e={}){let n="",i=r.slice(0,t),a=r.slice(t),o=e.css_class||"",s=i.map(h=>frappe.avatar(h,"avatar-small "+o,null,null,!1,e.filterable)).join("");a.length===1?s+=frappe.avatar(a[0],"avatar-small "+o,null,null,!1,e.filterable):a.length>1&&(s=`
			${s}
			<span class="avatar avatar-small ${o}">
				<div class="avatar-frame standard-image avatar-extra-count"
					title="${a.map(h=>frappe.user_info(h).fullname).join(", ")}">
					+${a.length}
				</div>
			</span>
		`),e.action_icon&&(n=`
			<span class="avatar avatar-small">
				<div class="avatar-frame avatar-action">
					${frappe.utils.icon(e.action_icon,"sm")}
				</div>
			</span>
		`);let u=$(`<div class="avatar-group ${e.align||"right"} ${e.overlap!=!1?"overlap":""}">
			${s}
			${n}
		</div>`);return u.find(".avatar-action").on("click",e.action),u};frappe.ui.scroll=function(r,t,e){var n=$(".navbar").height()+$(".page-head").height(),i=$(r).offset().top-n-cint(e);t?$("html, body").animate({scrollTop:i}):$(window).scrollTop(i)};frappe.palette=[["--orange-avatar-bg","--orange-avatar-color"],["--pink-avatar-bg","--pink-avatar-color"],["--blue-avatar-bg","--blue-avatar-color"],["--green-avatar-bg","--green-avatar-color"],["--dark-green-avatar-bg","--dark-green-avatar-color"],["--red-avatar-bg","--red-avatar-color"],["--yellow-avatar-bg","--yellow-avatar-color"],["--purple-avatar-bg","--purple-avatar-color"],["--gray-avatar-bg","--gray-avatar-color0"]];frappe.get_palette=function(r){var t=cint((parseInt((0,zl.default)(r).substr(4,2),16)+1)/5.33);return frappe.palette[t%8]};frappe.get_abbr=function(r,t){if(!r)return"";var e="";return $.each(r.split(" "),function(n,i){if(e.length>=(t||2))return!1;if(!i.trim().length)return!0;e+=i.trim()[0]}),e||"?"};frappe.gravatars={};frappe.get_gravatar=function(r,t=0){var e=t?"s="+t:"d=retro";return frappe.gravatars[r]||(frappe.gravatars[r]="https://secure.gravatar.com/avatar/"+(0,zl.default)(r)+"?"+e),frappe.gravatars[r]};window.repl=function(t,e){if(t==null)return"";for(var n in e)t=t.split("%("+n+")s").join(e[n]);return t};window.replace_all=function(r,t,e){return r.split(t).join(e)};window.strip_html=function(r){return cstr(r).replace(/<[^>]*>/g,"")};window.strip=function(r,t){if(r)return r=lstrip(r,t),r=rstrip(r,t),r};window.lstrip=function(t,e){e||(e=[`
`,"	"," "]);let n=t.substr(0,1);for(;in_list(e,n);)t=t.substr(1),n=t.substr(0,1);return t};window.rstrip=function(r,t){t||(t=[`
`,"	"," "]);let e=r.substr(r.length-1);for(;in_list(t,e);)r=r.substr(0,r.length-1),e=r.substr(r.length-1);return r};frappe.get_cookie=function(t){return frappe.get_cookies()[t]};frappe.get_cookies=function(){var t=document.cookie,e=0,n={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(t=RegExp.$1,e=1),e===0?t.split(/[,;]/).map(function(i){var a=i.split(/=/,2),o=decodeURIComponent(a[0].trimLeft()),s=a.length>1?decodeURIComponent(a[1].trimRight()):null;s&&s.charAt(0)==='"'&&(s=s.substr(1,s.length-2)),n[o]=s}):t.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(i,a){var o=i,s=a.charAt(0)==='"'?a.substr(1,-1).replace(/\\(.)/g,"$1"):a;n[o]=s}),n};frappe.is_mobile=function(){return $(document).width()<768};frappe.utils.xss_sanitise=function(r,t){let e=r,n={strategies:["html","js"]},i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/confirm\(.*\)|alert\(.*\)|prompt\(.*\)/gi;if(t=Object.assign({},n,t),t.strategies.includes("js")&&(e=e.replace(a,""),e=e.replace(o,"")),t.strategies.includes("html"))for(let s in i){let u=i[s],h=new RegExp(s,"g");e=e.replace(h,u)}return e};frappe.utils.sanitise_redirect=r=>{let t=(()=>n=>{function i(o){let s=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/img.exec(o);return s==null?"":s[1]}function a(o){return/^(?:[a-z]+:)?\/\//i.test(o)}return a(n)?i(location.href)!==i(n):!1})(),e=n=>{let i=/j[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?v[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?s[\s]*(&#x.{1,7})?c[\s]*(&#x.{1,7})?r[\s]*(&#x.{1,7})?i[\s]*(&#x.{1,7})?p[\s]*(&#x.{1,7})?t/gi;return n.replace(i,"")};return r=frappe.utils.strip_url(r),t(r)?"":e(frappe.utils.xss_sanitise(r,{strategies:["js"]}))};frappe.utils.strip_url=r=>r.replace(/^[^A-Za-z0-9(//)#]+/g,"");frappe.utils.new_auto_repeat_prompt=function(r){let t=[{fieldname:"frequency",fieldtype:"Select",label:__("Frequency"),reqd:1,options:[{label:__("Daily"),value:"Daily"},{label:__("Weekly"),value:"Weekly"},{label:__("Monthly"),value:"Monthly"},{label:__("Quarterly"),value:"Quarterly"},{label:__("Half-yearly"),value:"Half-yearly"},{label:__("Yearly"),value:"Yearly"}]},{fieldname:"start_date",fieldtype:"Date",label:__("Start Date"),reqd:1,default:frappe.datetime.nowdate()},{fieldname:"end_date",fieldtype:"Date",label:__("End Date")}];frappe.prompt(t,function(e){frappe.call({method:"frappe.automation.doctype.auto_repeat.auto_repeat.make_auto_repeat",args:{doctype:r.doc.doctype,docname:r.doc.name,frequency:e.frequency,start_date:e.start_date,end_date:e.end_date},callback:function(n){n.message&&(frappe.show_alert({message:__("Auto Repeat created for this document"),indicator:"green"}),r.reload_doc())}})},__("Auto Repeat"),__("Save"))};frappe.utils.get_page_view_count=function(r){return frappe.call("frappe.website.doctype.web_page_view.web_page_view.get_page_view_count",{path:r})};frappe.urllib={get_arg:function(r){r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+r+"=([^&#]*)",e=new RegExp(t),n=e.exec(window.location.href);return n==null?"":decodeURIComponent(n[1])},get_dict:function(){var r={},t=window.location.href.split("?")[1];if(!t||(t.indexOf("#")!=-1&&(t=t.split("#")[0]),!t))return r;t=t.split("&");for(var e=0;e<t.length;e++){var n=t[e].split("=");r[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return r},get_base_url:function(){var r=frappe.base_url||window.location.origin;return r.substr(r.length-1,1)=="/"&&(r=r.substr(0,r.length-1)),r},get_full_url:function(r){return r.indexOf("http://")===0||r.indexOf("https://")===0?r:r.substr(0,1)==="/"?frappe.urllib.get_base_url()+r:frappe.urllib.get_base_url()+"/"+r}};window.open_url_post=function(t,e,n){if(window.cordova){let u=t+"api/method/"+e.cmd+frappe.utils.make_query_string(e,!1);window.location.href=u}else{var i=document.createElement("form");i.action=t,i.method="POST",i.style.display="none",n&&(i.target="_blank"),e.csrf_token=frappe.csrf_token;for(var a in e){var o=document.createElement("textarea");o.name=a;var s=e[a];typeof s!="string"&&(s=JSON.stringify(s)),o.value=s,i.appendChild(o)}return document.body.appendChild(i),i.submit(),i}};window.get_url_arg=frappe.urllib.get_arg;window.get_url_dict=frappe.urllib.get_dict;function Hl(r,t){if(!r)return"";typeof r=="string"&&(r=frappe.datetime.convert_to_user_tz(r),r=new Date((r||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\.[0-9]*/,"")));let e=(new Date(frappe.datetime.now_datetime()).getTime()-r.getTime())/1e3,n=Math.floor(e/86400);if(isNaN(n)||n<0)return"";if(t)if(n==0){if(e<60)return __("now");if(e<3600)return __("{0} m",[Math.floor(e/60)]);if(e<86400)return __("{0} h",[Math.floor(e/3600)])}else return n<7?__("{0} d",[n]):n<31?__("{0} w",[Math.floor(n/7)]):n<365?__("{0} M",[Math.floor(n/30)]):__("{0} y",[Math.floor(n/365)]);else if(n==0){if(e<60)return __("just now");if(e<120)return __("1 minute ago");if(e<3600)return __("{0} minutes ago",[Math.floor(e/60)]);if(e<7200)return __("1 hour ago");if(e<86400)return __("{0} hours ago",[Math.floor(e/3600)])}else return n==1?__("yesterday"):n<7?__("{0} days ago",[n]):n<14?__("1 week ago"):n<31?__("{0} weeks ago",[Math.floor(n/7)]):n<62?__("1 month ago"):n<365?__("{0} months ago",[Math.floor(n/30)]):n<730?__("1 year ago"):__("{0} years ago",[Math.floor(n/365)])}frappe.provide("frappe.datetime");window.comment_when=function(r,t){var e=frappe.datetime.str_to_user?frappe.datetime.str_to_user(r):r;return'<span class="frappe-timestamp '+(t?" mini":"")+'" data-timestamp="'+r+'" title="'+e+'">'+Hl(r,t)+"</span>"};frappe.datetime.comment_when=comment_when;frappe.datetime.prettyDate=Hl;frappe.datetime.refresh_when=function(){jQuery&&$(".frappe-timestamp").each(function(){$(this).html(Hl($(this).attr("data-timestamp"),$(this).hasClass("mini")))})};setInterval(function(){frappe.datetime.refresh_when()},6e4);var ip=jr(np());frappe.provide("frappe.tools");frappe.tools.downloadify=function(r,t,e){if(t&&t.length&&!has_common(t,t)){frappe.msgprint(__("Export not allowed. You need {0} role to export.",[frappe.utils.comma_or(t)]));return}var n=e+".csv",i=frappe.tools.to_csv(r),a=document.createElement("a");if("download"in a){var o=new Blob([i],{type:"text/csv;charset=UTF-8"});a.href=URL.createObjectURL(o),a.download=n}else a.href="data:attachment/csv,"+encodeURIComponent(i),a.download=n,a.target="_blank";document.body.appendChild(a),a.click(),document.body.removeChild(a)};frappe.markdown=function(r){for(frappe.md2html||(frappe.md2html=new ip.default.Converter);r.substr(0,1)===`
`;)r=r.substr(1);for(var t=0,e=r.split(`
`)[0];[`
`,"	"].indexOf(e.substr(0,1))!==-1;)t++,e=e.substr(1);if(t&&t!=e.length){var n=[];$.each(r.split(`
`),function(i,a){n.push(a.substr(t))}),r=n.join(`
`)}return frappe.md2html.makeHtml(r)};frappe.tools.to_csv=function(r){var t=[];return $.each(r,function(e,n){n=$.map(n,function(i){return i==null&&(i=""),typeof i=="string"?'"'+$("<i>").html(i.replace(/"/g,'""')).text()+'"':i}),t.push(n.join(","))}),t.join(`
`)};frappe.provide("frappe.datetime");frappe.defaultDateFormat="YYYY-MM-DD";frappe.defaultTimeFormat="HH:mm:ss";frappe.defaultDatetimeFormat=frappe.defaultDateFormat+" "+frappe.defaultTimeFormat;moment.defaultFormat=frappe.defaultDateFormat;frappe.provide("frappe.datetime");$.extend(frappe.datetime,{convert_to_user_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},convert_to_system_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.user).clone().tz(frappe.boot.time_zone.system):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},is_system_time_zone:function(){return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?moment().tz(frappe.boot.time_zone.system).utcOffset()===moment().tz(frappe.boot.time_zone.user).utcOffset():!0},is_timezone_same:function(){return frappe.datetime.is_system_time_zone()},str_to_obj:function(r){return moment(r,frappe.defaultDatetimeFormat)._d},obj_to_str:function(r){return moment(r).locale("en").format()},obj_to_user:function(r){return moment(r).format(frappe.datetime.get_user_date_fmt().toUpperCase())},get_diff:function(r,t){return moment(r).diff(t,"days")},get_hour_diff:function(r,t){return moment(r).diff(t,"hours")},get_day_diff:function(r,t){return moment(r).diff(t,"days")},add_days:function(r,t){return moment(r).add(t,"days").format()},add_months:function(r,t){return moment(r).add(t,"months").format()},week_start:function(){return moment().startOf("week").format()},week_end:function(){return moment().endOf("week").format()},month_start:function(){return moment().startOf("month").format()},month_end:function(){return moment().endOf("month").format()},quarter_start:function(){return moment().startOf("quarter").format()},quarter_end:function(){return moment().endOf("quarter").format()},year_start:function(){return moment().startOf("year").format()},year_end:function(){return moment().endOf("year").format()},get_user_time_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.time_format||"HH:mm:ss"},get_user_date_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},get_user_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},str_to_user:function(r,t=!1){if(!r)return"";let e=frappe.datetime.get_user_date_fmt().toUpperCase(),n=frappe.datetime.get_user_time_fmt(),i=n;if(t)return moment(r,frappe.defaultTimeFormat).format(i);{let a=moment.tz(r,frappe.boot.time_zone.system);return typeof r!="string"||r.indexOf(" ")===-1?i=e:i=e+" "+n,a.clone().tz(frappe.boot.time_zone.user).format(i)}},get_datetime_as_string:function(r){return moment(r).format("YYYY-MM-DD HH:mm:ss")},user_to_str:function(r,t=!1){var e=frappe.datetime.get_user_time_fmt();if(t)return moment(r,e).format(frappe.defaultTimeFormat);var n=frappe.datetime.get_user_date_fmt().toUpperCase(),i="YYYY-MM-DD";return r.indexOf(" ")!==-1&&(n+=" "+e,i+=" HH:mm:ss"),moment(r,[n.replace("YYYY","YY"),n]).locale("en").format(i)},user_to_obj:function(r){return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(r))},global_date_format:function(r){var t=moment(r);return t._f&&t._f.indexOf("HH")!==-1?t.format("Do MMMM YYYY, h:mma"):t.format("Do MMMM YYYY")},now_date:function(r=!1){return frappe.datetime._date(frappe.defaultDateFormat,r)},now_time:function(r=!1){return frappe.datetime._date(frappe.defaultTimeFormat,r)},now_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r)},_date:function(r,t=!1){let e=frappe.boot.time_zone?frappe.boot.time_zone.user||frappe.boot.time_zone.system:frappe.sys_defaults.time_zone,n=moment.tz(e);return t?frappe.datetime.moment_to_date_obj(n):n.format(r)},moment_to_date_obj:function(r){let t=new Date,e=r.toArray();return t.setFullYear(e[0]),t.setMonth(e[1]),t.setDate(e[2]),t.setHours(e[3]),t.setMinutes(e[4]),t.setSeconds(e[5]),t.setMilliseconds(e[6]),t},nowdate:function(){return frappe.datetime.now_date()},get_today:function(){return frappe.datetime.now_date()},get_time:r=>moment(r).format("hh:mm A"),validate:function(r){return moment(r,[frappe.defaultDateFormat,frappe.defaultDatetimeFormat,frappe.defaultTimeFormat],!0).isValid()},get_first_day_of_the_week_index(){let r=frappe.sys_defaults.first_day_of_the_week||"Sunday";return moment.weekdays().indexOf(r)}});Object.defineProperties(window,{dateutil:{get:function(){return console.warn("Please use `frappe.datetime` instead of `dateutil`. It will be deprecated soon."),frappe.datetime},configurable:!0},date:{get:function(){return console.warn("Please use `frappe.datetime` instead of `date`. It will be deprecated soon."),frappe.datetime},configurable:!0},get_today:{get:function(){return console.warn("Please use `frappe.datetime.get_today` instead of `get_today`. It will be deprecated soon."),frappe.datetime.get_today},configurable:!0}});window.cstr=function(r){return r==null?"":r+""};window.cint=function(r,t){return r===!0?1:r===!1?0:(r=r+"",r!=="0"&&(r=lstrip(r,["0"])),r=parseInt(r),isNaN(r)&&(r=t===void 0?0:t),r)};window.toTitle=function(r){var t=r.split(" "),e=[];for(var n in t)e[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return e.join(" ")};window.is_null=function(r){if(r==null||cstr(r).trim()==="")return!0};window.copy_dict=function(r){var t={};for(var e in r)t[e]=r[e];return t};window.validate_email=function(r){return frappe.utils.validate_type(r,"email")};window.validate_phone=function(r){return frappe.utils.validate_type(r,"phone")};window.validate_name=function(r){return frappe.utils.validate_type(r,"name")};window.validate_url=function(r){return frappe.utils.validate_type(r,"url")};window.nth=function(r){r=cint(r);var t="th";return(r+"").substr(-1)=="1"&&(t="st"),(r+"").substr(-1)=="2"&&(t="nd"),(r+"").substr(-1)=="3"&&(t="rd"),r+t};window.has_words=function(r,t){if(!t)return!0;if(!r)return!1;for(var e=0,n=r.length;e<n;e++)if(t.indexOf(r[e])!=-1)return!0;return!1};window.has_common=function(r,t){if(!r||!t)return!1;for(var e=0,n=r.length;e<n;e++)if(in_list(t,r[e]))return!0;return!1};window.frappe||(window.frappe={});function so(r,t,e){if(r==null||r=="")return 0;if(!(typeof r=="number"||String(parseFloat(r))==r)){if(r=r+"",r.indexOf(" ")!=-1){var n=r.split(" ");r=isNaN(parseFloat(n[0]))?n.slice(n.length-1).join(" "):r}r=ap(r,e),r=parseFloat(r),isNaN(r)&&(r=0)}return r=parseFloat(r),t!=null?co(r,t):r}function ap(r,t){t||(t=lo());var e=Ul(t),n=new RegExp(e.group_sep==="."?"\\.":e.group_sep,"g");if(r=r.replace(n,""),e.decimal_str!=="."&&e.decimal_str!==""){var i=new RegExp(e.decimal_str,"g");r=r.replace(i,".")}return r}frappe.number_format_info={"#,###.##":{decimal_str:".",group_sep:","},"#.###,##":{decimal_str:",",group_sep:"."},"# ###.##":{decimal_str:".",group_sep:" "},"# ###,##":{decimal_str:",",group_sep:" "},"#'###.##":{decimal_str:".",group_sep:"'"},"#, ###.##":{decimal_str:".",group_sep:", "},"#,##,###.##":{decimal_str:".",group_sep:","},"#,###.###":{decimal_str:".",group_sep:","},"#.###":{decimal_str:"",group_sep:"."},"#,###":{decimal_str:"",group_sep:","}};window.format_number=function(r,t,e){t||(t=lo(),e==null&&(e=cint(frappe.defaults.get_default("float_precision"))||3));var n=Ul(t);e==null&&(e=n.precision),r=so(r,e,t);let i=!1;r<0&&(i=!0),r=Math.abs(r),r=r.toFixed(e);var a=r.split("."),o=n.group_sep?3:0;if(o){for(var s=a[0],u="",h=s.length%o,d=s.length;d>=0;d--){var _=replace_all(u,n.group_sep,"").length;t=="#,##,###.##"&&u.indexOf(",")!=-1&&(o=2,_+=1),u+=s.charAt(d),_&&!((_+1)%o)&&d!=0&&(u+=n.group_sep)}a[0]=u.split("").reverse().join("")}return a[0]+""==""&&(a[0]="0"),a[1]=a[1]&&n.decimal_str?n.decimal_str+a[1]:"",(i?"-":"")+a[0]+a[1]};function op(r,t,e){var n=lo(t),i=sp(t);return e===void 0&&(e=frappe.boot.sysdefaults.currency_precision||null),i?__(i)+" "+format_number(r,n,e):format_number(r,n,e)}function sp(r){return frappe.boot?frappe.boot.sysdefaults&&frappe.boot.sysdefaults.hide_currency_symbol=="Yes"?null:(r||(r=frappe.boot.sysdefaults.currency),frappe.model.get_value(":Currency",r,"symbol")||r):frappe.currency_symbols[r]}function lo(r){return frappe.boot&&frappe.boot.sysdefaults&&frappe.boot.sysdefaults.number_format||"#,###.##"}function Ul(r){var t=frappe.number_format_info[r];return t||(t={decimal_str:".",group_sep:","}),t.precision=r.split(t.decimal_str).slice(1)[0].length,t}function co(r,t){var e=r<0,n=cint(t),i=Math.pow(10,n),a=+(n?Math.abs(r)*i:Math.abs(r)).toFixed(8),o=Math.floor(a),s=a-o,u=!t&&s==.5?o%2==0?o:o+1:Math.round(a);return u=n?u/i:u,e?-u:u}function Vb(r,t){return co(r,t)}function Gb(r,t){if(cur_frm){t||(t=cur_frm.doc);var e=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name);return e||console.log(r+": could not find docfield in method precision()"),frappe.meta.get_field_precision(e,t)}else return frappe.boot.sysdefaults.float_precision}function Yb(r,t){return r.includes(t)}function lp(r,t,e){e=cint(e);var n=Math.pow(10,e);if(e)var i=r*n%(t*n)/n;else var i=r%t;return so(i,e)}function Xb(r,t,e){var n=so(frappe.model.get_value(":Currency",t,"smallest_currency_fraction_value"));if(n){var i=lp(r,n,e);i>n/2?r+=n-i:r-=i}else r=co(r);return r}function Kb(r,t){return op(r,t)}Object.assign(window,{flt:so,cint,strip_number_groups:ap,format_currency:op,fmt_money:Kb,get_currency_symbol:sp,get_number_format:lo,get_number_format_info:Ul,_round:co,roundNumber:Vb,precision:Gb,remainder:lp,round_based_on_smallest_currency_fraction:Xb,in_list:Yb});frappe.provide("frappe.help");frappe.help.youtube_id={};frappe.help.has_help=function(r){return frappe.help.youtube_id[r]};frappe.help.show=function(r){frappe.help.youtube_id[r]&&frappe.help.show_video(frappe.help.youtube_id[r])};frappe.help.show_video=function(r,t){if(frappe.utils.is_url(r)){let a='(?:youtube.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu.be/)([^"&?\\s]{11})';r=r.match(a)[1]}let e=new frappe.ui.Dialog({title:t||__("Help"),size:"large"}),n=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${r}"></div>`);n.appendTo(e.body),e.show(),e.$wrapper.addClass("video-modal");let i=new frappe.Plyr(n[0],{hideControls:!0,resetOnEnd:!0});e.onhide=()=>{i.destroy()}};$("body").on("click","a.help-link",function(){var r=$(this).attr("data-doctype");r&&frappe.help.show(r)});frappe.provide("frappe.help.help_links");frappe.help.help_links["data-import-tool"]=[{label:"Importing and Exporting Data",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/data/data-import-tool.html"}];frappe.help.help_links["modules/Setup"]=[{label:"Users and Permissions",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/"},{label:"Settings",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/settings/"},{label:"Data Management",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/data/"},{label:"Email",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/email/"},{label:"Printing",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/print/"}];frappe.help.help_links["List/User"]=[{label:"Adding Users",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/adding-users"},{label:"Rename User",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/articles/rename-user"}];frappe.help.help_links["permission-manager"]=[{label:"Role Permissions Manager",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/role-based-permissions"}];frappe.help.help_links["user-permissions"]=[{label:"User Permissions",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/user-permissions"}];frappe.help.help_links["Form/System Settings"]=[{label:"System Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/settings/system-settings"}];frappe.help.help_links["List/Email Account"]=[{label:"Email Account",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-account"}];frappe.help.help_links["List/Notification"]=[{label:"Notification",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-alerts"}];frappe.help.help_links["Form/Print Settings"]=[{label:"Print Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-settings"}];frappe.help.help_links["print-format-builder"]=[{label:"Print Format Builder",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-format-builder"}];frappe.provide("frappe.contacts");$.extend(frappe.contacts,{clear_address_and_contact:function(r){$(r.fields_dict.address_html.wrapper).html(""),r.fields_dict.contact_html&&$(r.fields_dict.contact_html.wrapper).html("")},render_address_and_contact:function(r){r.fields_dict.address_html&&"addr_list"in r.doc.__onload&&$(r.fields_dict.address_html.wrapper).html(frappe.render_template("address_list",r.doc.__onload)).find(".btn-address").on("click",function(){frappe.new_doc("Address")}),r.fields_dict.contact_html&&"contact_list"in r.doc.__onload&&$(r.fields_dict.contact_html.wrapper).html(frappe.render_template("contact_list",r.doc.__onload)).find(".btn-contact").on("click",function(){frappe.new_doc("Contact")})},get_last_doc:function(r){let e=frappe.route_history.slice().reverse().find(a=>a[0]==="Form"&&a[1]!==r.doctype),n=e&&e[1],i=e&&e[2];return e&&e.length>3&&(i=e.slice(2).join("/")),{doctype:n,docname:i}}});frappe.preview_email=function(r,t,e,n=!1,i=!1){return frappe.call({method:"frappe.email.email_body.get_email_html",args:{subject:"Test",template:r,args:t,header:e,with_container:n}}).then(a=>{var o=a.message;if(o=o.replace(/embed=/,"src="),i)return o;var s=frappe.msgprint({message:'<iframe width="100%" height="600px" style="border: none;"></iframe>',wide:!0});setTimeout(()=>{s.$wrapper.find("iframe").contents().find("html").html(o),s.$wrapper.find(".modal-dialog").css("width","70%")},1e3)})};frappe.provide("frappe.file_manager");frappe.file_manager=function(){let r=[],t=null,e=null;function n(o,s){r=o,t=s}function i(o){return new Promise((s,u)=>{if(r.length===0||!t){a(),s();return}e=o,frappe.call({method:"frappe.core.doctype.file.file.move_file",args:{file_list:r,new_parent:e,old_parent:t},callback:h=>{a(),s(h)}}).fail(u)})}function a(){r=[],t=null,e=null}return{cut:n,paste:i,get can_paste(){return Boolean(r.length>0&&t)},get old_folder(){return t},get files_to_move(){return r}}}();frappe.provide("frappe.ui");frappe.ui.DiffView=class{constructor(t,e,n){this.dialog=null,this.handler=null,this.doctype=t,this.fieldname=e,this.docname=n,this.dialog=this.make_dialog(),this.set_empty_state(),this.dialog.show()}make_dialog(){let t=()=>({query:"frappe.utils.diff.version_query",filters:{docname:this.docname,ref_doctype:this.doctype}}),e=()=>this.compute_diff();return new frappe.ui.Dialog({title:__("Compare Versions"),fields:[{label:__("From version"),fieldtype:"Link",fieldname:"from_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Column Break",fieldname:"cb"},{label:__("To version"),fieldtype:"Link",fieldname:"to_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Section Break",fieldname:"sb"},{label:__("Diff"),fieldtype:"HTML",fieldname:"diff"}],size:"extra-large"})}compute_diff(){let t=this.dialog.get_value("from_version"),e=this.dialog.get_value("to_version"),n=this.fieldname;t&&e?frappe.xcall("frappe.utils.diff.get_version_diff",{from_version:t,to_version:e,fieldname:n}).then(i=>{this.dialog.set_value("diff",this.prettify_diff(i))}):this.set_empty_state()}prettify_diff(t){let e="";return t.forEach(n=>{let i="";n.startsWith("+")?i="insert":n.startsWith("-")&&(i="delete"),e+=`<div class=${i}>${n}</div>`}),`<div class='diffview'>${e}</div>`}set_empty_state(){this.dialog.set_value("diff",__("Select two versions to view the diff."))}};frappe.provide("frappe.utils.datatable");frappe.utils.datatable.get_translations=function(){let r={};return r[frappe.boot.lang]={"Sort Ascending":__("Sort Ascending"),"Sort Descending":__("Sort Descending"),"Reset sorting":__("Reset sorting"),"Remove column":__("Remove column"),"No Data":__("No Data"),"{count} cells copied":{"1":__("{count} cell copied"),default:__("{count} cells copied")},"{count} rows selected":{"1":__("{count} row selected"),default:__("{count} rows selected")}},r};var Jb={name:"ProgressRing",props:{primary:String,secondary:String,radius:Number,progress:Number,stroke:Number},data(){let r=this.radius-this.stroke*2,t=r*2*Math.PI;return{normalizedRadius:r,circumference:t}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},cp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("svg",{attrs:{height:r.radius*2,width:r.radius*2}},[e("circle",{style:{stroke:r.secondary,strokeDashoffset:0},attrs:{"stroke-dasharray":r.circumference+" "+r.circumference,"stroke-width":r.stroke,fill:"transparent",r:r.normalizedRadius,cx:r.radius,cy:r.radius}}),r._v(" "),e("circle",{style:{stroke:r.primary,strokeDashoffset:r.strokeDashoffset},attrs:{"stroke-dasharray":r.circumference+" "+r.circumference,"stroke-width":r.stroke,fill:"transparent",r:r.normalizedRadius,cx:r.radius,cy:r.radius}}),r._v(" "),e("text",{style:{color:"var(--text-color)",fontSize:"var(--text-xs)",fontWeight:"var(--text-bold)"},attrs:{"dominant-baseline":"middle","text-anchor":"middle",x:r.radius,y:r.radius}},[r._v(`
		`+r._s(r.progress)+`%
	`)])])},Zb=[];cp._withStripped=!0;var Qb=function(r){!r||r("data-v-0f538d8f_0",{source:`
circle[data-v-0f538d8f] {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/ProgressRing.vue"],names:[],mappings:";AAsEA;CACA,mCAAA;CACA,yBAAA;CACA,yBAAA;AACA",file:"ProgressRing.vue",sourcesContent:[`<template>
	<svg :height="radius * 2" :width="radius * 2">
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: secondary,
				strokeDashoffset: 0
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: primary,
				strokeDashoffset: strokeDashoffset
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<text
			dominant-baseline="middle"
			text-anchor="middle"
			:x="radius"
			:y="radius"
			:style="{
				color: 'var(--text-color)',
				fontSize: 'var(--text-xs)',
				fontWeight: 'var(--text-bold)'
			}"
		>
			{{ progress }}%
		</text>
	</svg>
</template>
<script>
export default {
	name: "ProgressRing",
	props: {
		primary: String,
		secondary: String,
		radius: Number,
		progress: Number,
		stroke: Number
	},
	data() {
		const normalizedRadius = this.radius - this.stroke * 2;
		const circumference = normalizedRadius * 2 * Math.PI;

		return {
			normalizedRadius,
			circumference
		};
	},
	computed: {
		strokeDashoffset() {
			return (
				this.circumference - (this.progress / 100) * this.circumference
			);
		}
	}
};
<\/script>
<style scoped>
circle {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
</style>
`]},media:void 0})},ey="data-v-0f538d8f",ty=void 0,ry=!1;function ny(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<svg :height="radius * 2" :width="radius * 2">
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: secondary,
				strokeDashoffset: 0
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: primary,
				strokeDashoffset: strokeDashoffset
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<text
			dominant-baseline="middle"
			text-anchor="middle"
			:x="radius"
			:y="radius"
			:style="{
				color: 'var(--text-color)',
				fontSize: 'var(--text-xs)',
				fontWeight: 'var(--text-bold)'
			}"
		>
			{{ progress }}%
		</text>
	</svg>
</template>
<script>
export default {
	name: "ProgressRing",
	props: {
		primary: String,
		secondary: String,
		radius: Number,
		progress: Number,
		stroke: Number
	},
	data() {
		const normalizedRadius = this.radius - this.stroke * 2;
		const circumference = normalizedRadius * 2 * Math.PI;

		return {
			normalizedRadius,
			circumference
		};
	},
	computed: {
		strokeDashoffset() {
			return (
				this.circumference - (this.progress / 100) * this.circumference
			);
		}
	}
};
<\/script>
<style scoped>
circle {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Wl(){let r=Wl.styles||(Wl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var iy=ny({render:cp,staticRenderFns:Zb},Qb,Jb,ey,ry,ty,!1,Wl,void 0,void 0),up=iy;var ay={name:"FilePreview",props:["file"],components:{ProgressRing:up},data(){return{src:null,optimize:this.file.optimize}},mounted(){if(this.is_image&&window.FileReader){let r=new FileReader;r.onload=()=>this.src=r.result,r.readAsDataURL(this.file.file_obj)}},filters:{file_size(r){return frappe.form.formatters.FileSize(r)},file_name(r){return r}},computed:{private_icon(){return frappe.utils.icon(this.is_private?"lock":"unlock")},is_private(){return this.file.doc?this.file.doc.is_private:this.file.private},uploaded(){return this.file.request_succeeded},is_image(){return this.file.file_obj.type.startsWith("image")},is_optimizable(){let r=this.file.file_obj.type=="image/svg+xml";return this.is_image&&!r&&!this.uploaded&&!this.file.failed},is_cropable(){let r=["image/jpeg","image/png"];return!this.uploaded&&!this.file.uploading&&!this.file.failed&&r.includes(this.file.file_obj.type)},progress(){let r=Math.round(this.file.progress*100/this.file.total);return isNaN(r)&&(r=0),r}}},dp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-preview"},[e("div",{staticClass:"file-icon"},[r.is_image?e("img",{attrs:{src:r.src,alt:r.file.name}}):e("div",{staticClass:"fallback",domProps:{innerHTML:r._s(r.frappe.utils.icon("file","md"))}})]),r._v(" "),e("div",[e("div",[r.file.doc?e("a",{staticClass:"flex",attrs:{href:r.file.doc.file_url,target:"_blank"}},[e("span",{staticClass:"file-name"},[r._v(r._s(r._f("file_name")(r.file.name)))]),r._v(" "),e("div",{staticClass:"ml-2",domProps:{innerHTML:r._s(r.private_icon)}})]):e("span",{staticClass:"flex"},[e("span",{staticClass:"file-name"},[r._v(r._s(r._f("file_name")(r.file.name)))]),r._v(" "),e("button",{staticClass:"ml-2 btn-reset",attrs:{title:r.__("Toggle Public/Private")},on:{click:function(n){return r.$emit("toggle_private")}}},[e("div",{domProps:{innerHTML:r._s(r.private_icon)}})])])]),r._v(" "),e("div",[e("span",{staticClass:"file-size"},[r._v(`
				`+r._s(r._f("file_size")(r.file.file_obj.size))+`
			`)])]),r._v(" "),r.is_optimizable?e("label",{staticClass:"optimize-checkbox"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:r.optimize},on:{change:function(n){return r.$emit("toggle_optimize")}}}),r._v("Optimize")]):r._e(),r._v(" "),e("div",[r.file.error_message?e("span",{staticClass:"file-error text-danger"},[r._v(`
				`+r._s(r.file.error_message)+`
			`)]):r._e()])]),r._v(" "),e("div",{staticClass:"file-actions"},[e("ProgressRing",{directives:[{name:"show",rawName:"v-show",value:r.file.uploading&&!r.uploaded&&!r.file.failed,expression:"file.uploading && !uploaded && !file.failed"}],attrs:{primary:"var(--primary-color)",secondary:"var(--gray-200)",radius:24,progress:r.progress,stroke:3}}),r._v(" "),r.uploaded?e("div",{domProps:{innerHTML:r._s(r.frappe.utils.icon("solid-success","lg"))}}):r._e(),r._v(" "),r.file.failed?e("div",{domProps:{innerHTML:r._s(r.frappe.utils.icon("solid-error","lg"))}}):r._e(),r._v(" "),e("div",{staticClass:"file-action-buttons"},[r.is_cropable?e("button",{staticClass:"btn btn-crop muted",domProps:{innerHTML:r._s(r.frappe.utils.icon("crop","md"))},on:{click:function(n){return r.$emit("toggle_image_cropper")}}}):r._e(),r._v(" "),!r.uploaded&&!r.file.uploading&&!r.file.failed?e("button",{staticClass:"btn muted",domProps:{innerHTML:r._s(r.frappe.utils.icon("delete","md"))},on:{click:function(n){return r.$emit("remove")}}}):r._e()])],1)])},oy=[];dp._withStripped=!0;var sy=function(r){!r||r("data-v-681a589e_0",{source:`
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}
.file-preview + .file-preview {
	border-top-color: var(--border-color);
}
.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}
.file-preview:hover + .file-preview {
	border-top-color: transparent;
}
.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}
.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}
.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}
.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}
.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}
.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}
.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}
.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}
.muted {
	opacity: 0.5;
	transition: 0.3s;
}
.muted:hover {
	opacity: 1;
}
.optimize-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}
.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FilePreview.vue"],names:[],mappings:";AAyHA;CACA,aAAA;CACA,mBAAA;CACA,gBAAA;CACA,6BAAA;AACA;AAEA;CACA,qCAAA;AACA;AAEA;CACA,iCAAA;CACA,sCAAA;CACA,mCAAA;AACA;AAEA;CACA,6BAAA;AACA;AAEA;CACA,mCAAA;CACA,eAAA;CACA,gBAAA;CACA,gBAAA;CACA,8BAAA;CACA,cAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,iBAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,qCAAA;CACA,mCAAA;AACA;AAEA;CACA,2BAAA;CACA,6BAAA;CACA,wBAAA;CACA,oBAAA;CACA,qBAAA;CACA,4BAAA;CACA,gBAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;AACA;AAEA;CACA,WAAA;CACA,cAAA;CACA,iBAAA;CACA,kBAAA;AACA;AAEA;CACA,0BAAA;CACA,gBAAA;AACA;AAEA;CACA,aAAA;CACA,yBAAA;AACA;AAEA;CACA,YAAA;CACA,gBAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;CACA,aAAA;CACA,mBAAA;CACA,oBAAA;AACA;AAEA;CACA,yBAAA;CACA,6BAAA;AACA",file:"FilePreview.vue",sourcesContent:[`<template>
	<div class="file-preview">
		<div class="file-icon">
			<img
				v-if="is_image"
				:src="src"
				:alt="file.name"
			>
			<div class="fallback" v-else v-html="frappe.utils.icon('file', 'md')">
			</div>
		</div>
		<div>
			<div>
				<a class="flex" :href="file.doc.file_url" v-if="file.doc" target="_blank">
					<span class="file-name">{{ file.name | file_name }}</span>
					<div class="ml-2" v-html="private_icon"></div>
				</a>
				<span class="flex" v-else>
					<span class="file-name">{{ file.name | file_name }}</span>
					<button class="ml-2 btn-reset" @click="$emit('toggle_private')" :title="__('Toggle Public/Private')">
						<div v-html="private_icon"></div>
					</button>
				</span>
			</div>

			<div>
				<span class="file-size">
					{{ file.file_obj.size | file_size }}
				</span>
			</div>
			<label v-if="is_optimizable" class="optimize-checkbox"><input type="checkbox" :checked="optimize" @change="$emit('toggle_optimize')">Optimize</label>
			<div>
				<span v-if="file.error_message" class="file-error text-danger">
					{{ file.error_message }}
				</span>
			</div>
		</div>
		<div class="file-actions">
			<ProgressRing
				v-show="file.uploading && !uploaded && !file.failed"
				primary="var(--primary-color)"
				secondary="var(--gray-200)"
				:radius="24"
				:progress="progress"
				:stroke="3"
			/>
			<div v-if="uploaded" v-html="frappe.utils.icon('solid-success', 'lg')"></div>
			<div v-if="file.failed" v-html="frappe.utils.icon('solid-error', 'lg')"></div>
			<div class="file-action-buttons">
				<button v-if="is_cropable" class="btn btn-crop muted" @click="$emit('toggle_image_cropper')" v-html="frappe.utils.icon('crop', 'md')"></button>
				<button v-if="!uploaded && !file.uploading && !file.failed" class="btn muted" @click="$emit('remove')" v-html="frappe.utils.icon('delete', 'md')"></button>
			</div>
		</div>
	</div>
</template>

<script>
import ProgressRing from './ProgressRing.vue';
export default {
	name: 'FilePreview',
	props: ['file'],
	components: {
		ProgressRing
	},
	data() {
		return {
			src: null,
			optimize: this.file.optimize
		}
	},
	mounted() {
		if (this.is_image) {
			if (window.FileReader) {
				let fr = new FileReader();
				fr.onload = () => this.src = fr.result;
				fr.readAsDataURL(this.file.file_obj);
			}
		}
	},
	filters: {
		file_size(value) {
			return frappe.form.formatters.FileSize(value);
		},
		file_name(value) {
			return value;
			// return frappe.utils.file_name_ellipsis(value, 9);
		}
	},
	computed: {
		private_icon() {
			return frappe.utils.icon(this.is_private ? 'lock' : 'unlock');
		},
		is_private() {
			return this.file.doc ? this.file.doc.is_private : this.file.private;
		},
		uploaded() {
			return this.file.request_succeeded;
		},
		is_image() {
			return this.file.file_obj.type.startsWith('image');
		},
		is_optimizable() {
			let is_svg = this.file.file_obj.type == 'image/svg+xml';
			return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
		},
		is_cropable() {
			let croppable_types = ['image/jpeg', 'image/png'];
			return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
		},
		progress() {
			let value = Math.round((this.file.progress * 100) / this.file.total);
			if (isNaN(value)) {
				value = 0;
			}
			return value;
		}
	}
}
<\/script>

<style>
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}

.file-preview + .file-preview {
	border-top-color: var(--border-color);
}

.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}

.file-preview:hover + .file-preview {
	border-top-color: transparent;
}

.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}

.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}

.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}

.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}

.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}

.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}

.muted {
	opacity: 0.5;
	transition: 0.3s;
}

.muted:hover {
	opacity: 1;
}

.optimize-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}

.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
</style>
`]},media:void 0})},ly=void 0,cy=void 0,uy=!1;function dy(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div class="file-preview">
		<div class="file-icon">
			<img
				v-if="is_image"
				:src="src"
				:alt="file.name"
			>
			<div class="fallback" v-else v-html="frappe.utils.icon('file', 'md')">
			</div>
		</div>
		<div>
			<div>
				<a class="flex" :href="file.doc.file_url" v-if="file.doc" target="_blank">
					<span class="file-name">{{ file.name | file_name }}</span>
					<div class="ml-2" v-html="private_icon"></div>
				</a>
				<span class="flex" v-else>
					<span class="file-name">{{ file.name | file_name }}</span>
					<button class="ml-2 btn-reset" @click="$emit('toggle_private')" :title="__('Toggle Public/Private')">
						<div v-html="private_icon"></div>
					</button>
				</span>
			</div>

			<div>
				<span class="file-size">
					{{ file.file_obj.size | file_size }}
				</span>
			</div>
			<label v-if="is_optimizable" class="optimize-checkbox"><input type="checkbox" :checked="optimize" @change="$emit('toggle_optimize')">Optimize</label>
			<div>
				<span v-if="file.error_message" class="file-error text-danger">
					{{ file.error_message }}
				</span>
			</div>
		</div>
		<div class="file-actions">
			<ProgressRing
				v-show="file.uploading && !uploaded && !file.failed"
				primary="var(--primary-color)"
				secondary="var(--gray-200)"
				:radius="24"
				:progress="progress"
				:stroke="3"
			/>
			<div v-if="uploaded" v-html="frappe.utils.icon('solid-success', 'lg')"></div>
			<div v-if="file.failed" v-html="frappe.utils.icon('solid-error', 'lg')"></div>
			<div class="file-action-buttons">
				<button v-if="is_cropable" class="btn btn-crop muted" @click="$emit('toggle_image_cropper')" v-html="frappe.utils.icon('crop', 'md')"></button>
				<button v-if="!uploaded && !file.uploading && !file.failed" class="btn muted" @click="$emit('remove')" v-html="frappe.utils.icon('delete', 'md')"></button>
			</div>
		</div>
	</div>
</template>

<script>
import ProgressRing from './ProgressRing.vue';
export default {
	name: 'FilePreview',
	props: ['file'],
	components: {
		ProgressRing
	},
	data() {
		return {
			src: null,
			optimize: this.file.optimize
		}
	},
	mounted() {
		if (this.is_image) {
			if (window.FileReader) {
				let fr = new FileReader();
				fr.onload = () => this.src = fr.result;
				fr.readAsDataURL(this.file.file_obj);
			}
		}
	},
	filters: {
		file_size(value) {
			return frappe.form.formatters.FileSize(value);
		},
		file_name(value) {
			return value;
			// return frappe.utils.file_name_ellipsis(value, 9);
		}
	},
	computed: {
		private_icon() {
			return frappe.utils.icon(this.is_private ? 'lock' : 'unlock');
		},
		is_private() {
			return this.file.doc ? this.file.doc.is_private : this.file.private;
		},
		uploaded() {
			return this.file.request_succeeded;
		},
		is_image() {
			return this.file.file_obj.type.startsWith('image');
		},
		is_optimizable() {
			let is_svg = this.file.file_obj.type == 'image/svg+xml';
			return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
		},
		is_cropable() {
			let croppable_types = ['image/jpeg', 'image/png'];
			return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
		},
		progress() {
			let value = Math.round((this.file.progress * 100) / this.file.total);
			if (isNaN(value)) {
				value = 0;
			}
			return value;
		}
	}
}
<\/script>

<style>
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}

.file-preview + .file-preview {
	border-top-color: var(--border-color);
}

.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}

.file-preview:hover + .file-preview {
	border-top-color: transparent;
}

.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}

.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}

.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}

.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}

.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}

.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}

.muted {
	opacity: 0.5;
	transition: 0.3s;
}

.muted:hover {
	opacity: 1;
}

.optimize-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}

.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function ql(){let r=ql.styles||(ql.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var fy=dy({render:dp,staticRenderFns:oy},sy,ay,ly,uy,cy,!1,ql,void 0,void 0),fp=fy;var py={name:"TreeNode",props:["node","selected_node"],components:{TreeNode:()=>frappe.ui.components.TreeNode},computed:{icon(){let r={open:frappe.utils.icon("folder-open","md"),closed:frappe.utils.icon("folder-normal","md"),leaf:frappe.utils.icon("primitive-dot","xs"),search:frappe.utils.icon("search")};return this.node.by_search?r.search:this.node.is_leaf?r.leaf:this.node.open?r.open:r.closed}}},pp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"tree-node",class:{opened:r.node.open}},[e("span",{staticClass:"tree-link",class:{active:r.node.value===r.selected_node.value},attrs:{disabled:r.node.fetching},on:{click:function(n){return r.$emit("node-click",r.node)}}},[e("div",{domProps:{innerHTML:r._s(r.icon)}}),r._v(" "),e("a",{staticClass:"tree-label"},[r._v(r._s(r.node.label))])]),r._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:r.node.open,expression:"node.open"}],staticClass:"tree-children"},[r._l(r.node.children,function(n){return e("TreeNode",{key:n.value,attrs:{node:n,selected_node:r.selected_node},on:{"node-click":function(i){return r.$emit("node-click",i)},"load-more":function(i){return r.$emit("load-more",i)}}})}),r._v(" "),r.node.has_more_children?e("button",{staticClass:"btn btn-xs btn-load-more",attrs:{disabled:r.node.children_loading},on:{click:function(n){return r.$emit("load-more",r.node)}}},[r._v(`
			`+r._s(r.node.children_loading?r.__("Loading..."):r.__("Load more"))+`
		`)]):r._e()],2)])},hy=[];pp._withStripped=!0;var my=function(r){!r||r("data-v-23974a16_0",{source:`
.btn-load-more[data-v-23974a16] {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/TreeNode.vue"],names:[],mappings:";AAwDA;CACA,mBAAA;CACA,kBAAA;AACA",file:"TreeNode.vue",sourcesContent:[`<template>
	<div class="tree-node" :class="{ opened: node.open }">
		<span
			class="tree-link"
			@click="$emit('node-click', node)"
			:class="{ active: node.value === selected_node.value }"
			:disabled="node.fetching"
		>
			<div v-html="icon"></div>
			<a class="tree-label">{{ node.label }}</a>
		</span>
		<ul class="tree-children" v-show="node.open">
			<TreeNode
				v-for="n in node.children"
				:key="n.value"
				:node="n"
				:selected_node="selected_node"
				@node-click="n => $emit('node-click', n)"
				@load-more="n => $emit('load-more', n)"
			/>
			<button
				class="btn btn-xs btn-load-more"
				v-if="node.has_more_children"
				@click="$emit('load-more', node)"
				:disabled="node.children_loading"
			>
				{{ node.children_loading ? __("Loading...") : __("Load more") }}
			</button>
		</ul>
	</div>
</template>
<script>
export default {
	name: "TreeNode",
	props: ["node", "selected_node"],
	components: {
		TreeNode: () => frappe.ui.components.TreeNode
	},
	computed: {
		icon() {
			let icons = {
				open: frappe.utils.icon("folder-open", "md"),
				closed: frappe.utils.icon("folder-normal", "md"),
				leaf: frappe.utils.icon("primitive-dot", "xs"),
				search: frappe.utils.icon("search")
			};

			if (this.node.by_search) return icons.search;
			if (this.node.is_leaf) return icons.leaf;
			if (this.node.open) return icons.open;
			return icons.closed;
		}
	}
};
<\/script>
<style scoped>
.btn-load-more {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
</style>
`]},media:void 0})},gy="data-v-23974a16",_y=void 0,vy=!1;function by(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div class="tree-node" :class="{ opened: node.open }">
		<span
			class="tree-link"
			@click="$emit('node-click', node)"
			:class="{ active: node.value === selected_node.value }"
			:disabled="node.fetching"
		>
			<div v-html="icon"></div>
			<a class="tree-label">{{ node.label }}</a>
		</span>
		<ul class="tree-children" v-show="node.open">
			<TreeNode
				v-for="n in node.children"
				:key="n.value"
				:node="n"
				:selected_node="selected_node"
				@node-click="n => $emit('node-click', n)"
				@load-more="n => $emit('load-more', n)"
			/>
			<button
				class="btn btn-xs btn-load-more"
				v-if="node.has_more_children"
				@click="$emit('load-more', node)"
				:disabled="node.children_loading"
			>
				{{ node.children_loading ? __("Loading...") : __("Load more") }}
			</button>
		</ul>
	</div>
</template>
<script>
export default {
	name: "TreeNode",
	props: ["node", "selected_node"],
	components: {
		TreeNode: () => frappe.ui.components.TreeNode
	},
	computed: {
		icon() {
			let icons = {
				open: frappe.utils.icon("folder-open", "md"),
				closed: frappe.utils.icon("folder-normal", "md"),
				leaf: frappe.utils.icon("primitive-dot", "xs"),
				search: frappe.utils.icon("search")
			};

			if (this.node.by_search) return icons.search;
			if (this.node.is_leaf) return icons.leaf;
			if (this.node.open) return icons.open;
			return icons.closed;
		}
	}
};
<\/script>
<style scoped>
.btn-load-more {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Vl(){let r=Vl.styles||(Vl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var yy=by({render:pp,staticRenderFns:hy},my,py,gy,vy,_y,!1,Vl,void 0,void 0),hp=yy;var wy={name:"FileBrowser",components:{TreeNode:hp},data(){return{node:{label:__("Home"),value:"Home",children:[],children_start:0,children_loading:!1,is_leaf:!1,fetching:!1,fetched:!1,open:!1,filtered:!0},selected_node:{},search_text:"",page_length:10}},mounted(){this.toggle_node(this.node)},methods:{toggle_node(r){!r.fetched&&!r.is_leaf?(r.fetching=!0,r.children_start=0,r.children_loading=!1,this.get_files_in_folder(r.value,0).then(({files:t,has_more:e})=>{r.open=!0,r.children=t,r.fetched=!0,r.fetching=!1,r.children_start+=this.page_length,r.has_more_children=e})):(r.open=!r.open,this.select_node(r))},load_more(r){if(r.has_more_children){let t=r.children_start;r.children_loading=!0,this.get_files_in_folder(r.value,t).then(({files:e,has_more:n})=>{r.children=r.children.concat(e),r.children_start+=this.page_length,r.has_more_children=n,r.children_loading=!1})}},select_node(r){r.is_leaf&&(this.selected_node=r)},get_files_in_folder(r,t){return frappe.call("frappe.core.doctype.file.file.get_files_in_folder",{folder:r,start:t,page_length:this.page_length}).then(e=>{let{files:n=[],has_more:i=!1}=e.message||{};return n.sort((a,o)=>a.is_folder&&o.is_folder?a.modified<o.modified?-1:1:a.is_folder?-1:o.is_folder?1:0),n=n.map(a=>this.make_file_node(a)),{files:n,has_more:i}})},search_by_name:frappe.utils.debounce(function(){if(this.search_text===""){this.node=this.folder_node;return}this.search_text.length<3||frappe.call("frappe.core.doctype.file.file.get_files_by_search_text",{text:this.search_text}).then(r=>{let t=r.message||[];t=t.map(e=>this.make_file_node(e)),this.folder_node||(this.folder_node=this.node),this.node={label:__("Search Results"),value:"",children:t,by_search:!0,open:!0,filtered:!0}})},300),make_file_node(r){let t=r.file_name||r.name;return{label:frappe.utils.file_name_ellipsis(t,40),filename:t,file_url:r.file_url,value:r.name,is_leaf:!r.is_folder,fetched:!r.is_folder,children:[],children_loading:!1,children_start:0,open:!1,fetching:!1,filtered:!0}}}},mp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-browser"},[e("div",[e("a",{staticClass:"text-muted text-medium",attrs:{href:""},on:{click:function(n){return n.preventDefault(),r.$emit("hide-browser")}}},[r._v(`
			`+r._s(r.__("\u2190 Back to upload files"))+`
		`)])]),r._v(" "),e("div",{staticClass:"file-browser-list"},[e("div",{staticClass:"file-filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.search_text,expression:"search_text"}],staticClass:"form-control input-xs",attrs:{type:"search",placeholder:r.__("Search by filename or extension")},domProps:{value:r.search_text},on:{input:[function(n){n.target.composing||(r.search_text=n.target.value)},r.search_by_name]}})]),r._v(" "),e("TreeNode",{staticClass:"tree with-skeleton",attrs:{node:r.node,selected_node:r.selected_node},on:{"node-click":function(n){return r.toggle_node(n)},"load-more":function(n){return r.load_more(n)}}})],1)])},ky=[];mp._withStripped=!0;var xy=function(r){!r||r("data-v-0fedeac3_0",{source:`
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}
.file-filter {
	padding: 3px;
}
.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FileBrowser.vue"],names:[],mappings:";AAkLA;CACA,aAAA;CACA,gBAAA;CACA,gBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,cAAA;CACA,YAAA;CACA,eAAA;CACA,gBAAA;CACA,oBAAA;AACA",file:"FileBrowser.vue",sourcesContent:[`<template>
	<div class="file-browser">
		<div>
			<a
				href=""
				class="text-muted text-medium"
				@click.prevent="$emit('hide-browser')"
			>
				{{ __("\u2190 Back to upload files") }}
			</a>
		</div>
		<div class="file-browser-list">
			<div class="file-filter">
				<input
					type="search"
					class="form-control input-xs"
					:placeholder="__('Search by filename or extension')"
					v-model="search_text"
					@input="search_by_name"
				/>
			</div>
			<TreeNode
				class="tree with-skeleton"
				:node="node"
				:selected_node="selected_node"
				@node-click="n => toggle_node(n)"
				@load-more="n => load_more(n)"
			/>
		</div>
	</div>
</template>
<script>
import TreeNode from "./TreeNode.vue";

export default {
	name: "FileBrowser",
	components: {
		TreeNode
	},
	data() {
		return {
			node: {
				label: __("Home"),
				value: "Home",
				children: [],
				children_start: 0,
				children_loading: false,
				is_leaf: false,
				fetching: false,
				fetched: false,
				open: false,
				filtered: true
			},
			selected_node: {},
			search_text: "",
			page_length: 10
		};
	},
	mounted() {
		this.toggle_node(this.node);
	},
	methods: {
		toggle_node(node) {
			if (!node.fetched && !node.is_leaf) {
				node.fetching = true;
				node.children_start = 0;
				node.children_loading = false;
				this.get_files_in_folder(node.value, 0).then(
					({ files, has_more }) => {
						node.open = true;
						node.children = files;
						node.fetched = true;
						node.fetching = false;
						node.children_start += this.page_length;
						node.has_more_children = has_more;
					}
				);
			} else {
				node.open = !node.open;
				this.select_node(node);
			}
		},
		load_more(node) {
			if (node.has_more_children) {
				let start = node.children_start;
				node.children_loading = true;
				this.get_files_in_folder(node.value, start).then(
					({ files, has_more }) => {
						node.children = node.children.concat(files);
						node.children_start += this.page_length;
						node.has_more_children = has_more;
						node.children_loading = false;
					}
				);
			}
		},
		select_node(node) {
			if (node.is_leaf) {
				this.selected_node = node;
			}
		},
		get_files_in_folder(folder, start) {
			return frappe
				.call("frappe.core.doctype.file.file.get_files_in_folder", {
					folder,
					start,
					page_length: this.page_length
				})
				.then(r => {
					let { files = [], has_more = false } = r.message || {};
					files.sort((a, b) => {
						if (a.is_folder && b.is_folder) {
							return a.modified < b.modified ? -1 : 1;
						}
						if (a.is_folder) {
							return -1;
						}
						if (b.is_folder) {
							return 1;
						}
						return 0;
					});
					files = files.map(file => this.make_file_node(file));
					return { files, has_more };
				});
		},
		search_by_name: frappe.utils.debounce(function() {
			if (this.search_text === "") {
				this.node = this.folder_node;
				return;
			}
			if (this.search_text.length < 3) return;
			frappe
				.call(
					"frappe.core.doctype.file.file.get_files_by_search_text",
					{
						text: this.search_text
					}
				)
				.then(r => {
					let files = r.message || [];
					files = files.map(file => this.make_file_node(file));
					if (!this.folder_node) {
						this.folder_node = this.node;
					}
					this.node = {
						label: __("Search Results"),
						value: "",
						children: files,
						by_search: true,
						open: true,
						filtered: true
					};
				});
		}, 300),
		make_file_node(file) {
			let filename = file.file_name || file.name;
			let label = frappe.utils.file_name_ellipsis(filename, 40);
			return {
				label: label,
				filename: filename,
				file_url: file.file_url,
				value: file.name,
				is_leaf: !file.is_folder,
				fetched: !file.is_folder, // fetched if node is leaf
				children: [],
				children_loading: false,
				children_start: 0,
				open: false,
				fetching: false,
				filtered: true
			};
		}
	}
};
<\/script>

<style>
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}

.file-filter {
	padding: 3px;
}

.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
</style>
`]},media:void 0})},Cy=void 0,Sy=void 0,Ty=!1;function Ey(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div class="file-browser">
		<div>
			<a
				href=""
				class="text-muted text-medium"
				@click.prevent="$emit('hide-browser')"
			>
				{{ __("\u2190 Back to upload files") }}
			</a>
		</div>
		<div class="file-browser-list">
			<div class="file-filter">
				<input
					type="search"
					class="form-control input-xs"
					:placeholder="__('Search by filename or extension')"
					v-model="search_text"
					@input="search_by_name"
				/>
			</div>
			<TreeNode
				class="tree with-skeleton"
				:node="node"
				:selected_node="selected_node"
				@node-click="n => toggle_node(n)"
				@load-more="n => load_more(n)"
			/>
		</div>
	</div>
</template>
<script>
import TreeNode from "./TreeNode.vue";

export default {
	name: "FileBrowser",
	components: {
		TreeNode
	},
	data() {
		return {
			node: {
				label: __("Home"),
				value: "Home",
				children: [],
				children_start: 0,
				children_loading: false,
				is_leaf: false,
				fetching: false,
				fetched: false,
				open: false,
				filtered: true
			},
			selected_node: {},
			search_text: "",
			page_length: 10
		};
	},
	mounted() {
		this.toggle_node(this.node);
	},
	methods: {
		toggle_node(node) {
			if (!node.fetched && !node.is_leaf) {
				node.fetching = true;
				node.children_start = 0;
				node.children_loading = false;
				this.get_files_in_folder(node.value, 0).then(
					({ files, has_more }) => {
						node.open = true;
						node.children = files;
						node.fetched = true;
						node.fetching = false;
						node.children_start += this.page_length;
						node.has_more_children = has_more;
					}
				);
			} else {
				node.open = !node.open;
				this.select_node(node);
			}
		},
		load_more(node) {
			if (node.has_more_children) {
				let start = node.children_start;
				node.children_loading = true;
				this.get_files_in_folder(node.value, start).then(
					({ files, has_more }) => {
						node.children = node.children.concat(files);
						node.children_start += this.page_length;
						node.has_more_children = has_more;
						node.children_loading = false;
					}
				);
			}
		},
		select_node(node) {
			if (node.is_leaf) {
				this.selected_node = node;
			}
		},
		get_files_in_folder(folder, start) {
			return frappe
				.call("frappe.core.doctype.file.file.get_files_in_folder", {
					folder,
					start,
					page_length: this.page_length
				})
				.then(r => {
					let { files = [], has_more = false } = r.message || {};
					files.sort((a, b) => {
						if (a.is_folder && b.is_folder) {
							return a.modified < b.modified ? -1 : 1;
						}
						if (a.is_folder) {
							return -1;
						}
						if (b.is_folder) {
							return 1;
						}
						return 0;
					});
					files = files.map(file => this.make_file_node(file));
					return { files, has_more };
				});
		},
		search_by_name: frappe.utils.debounce(function() {
			if (this.search_text === "") {
				this.node = this.folder_node;
				return;
			}
			if (this.search_text.length < 3) return;
			frappe
				.call(
					"frappe.core.doctype.file.file.get_files_by_search_text",
					{
						text: this.search_text
					}
				)
				.then(r => {
					let files = r.message || [];
					files = files.map(file => this.make_file_node(file));
					if (!this.folder_node) {
						this.folder_node = this.node;
					}
					this.node = {
						label: __("Search Results"),
						value: "",
						children: files,
						by_search: true,
						open: true,
						filtered: true
					};
				});
		}, 300),
		make_file_node(file) {
			let filename = file.file_name || file.name;
			let label = frappe.utils.file_name_ellipsis(filename, 40);
			return {
				label: label,
				filename: filename,
				file_url: file.file_url,
				value: file.name,
				is_leaf: !file.is_folder,
				fetched: !file.is_folder, // fetched if node is leaf
				children: [],
				children_loading: false,
				children_start: 0,
				open: false,
				fetching: false,
				filtered: true
			};
		}
	}
};
<\/script>

<style>
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}

.file-filter {
	padding: 3px;
}

.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Gl(){let r=Gl.styles||(Gl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var Ay=Ey({render:mp,staticRenderFns:ky},xy,wy,Cy,Ty,Sy,!1,Gl,void 0,void 0),gp=Ay;var $y={name:"WebLink",data(){return{url:""}}},_p=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-web-link margin-bottom"},[e("a",{staticClass:"text-muted text-medium",attrs:{href:""},on:{click:function(n){return n.preventDefault(),r.$emit("hide-web-link")}}},[r._v(`
		`+r._s(r.__("\u2190 Back to upload files"))+`
	`)]),r._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.url,expression:"url"}],staticClass:"form-control",attrs:{type:"text",placeholder:r.__("Attach a web link")},domProps:{value:r.url},on:{input:function(n){n.target.composing||(r.url=n.target.value)}}})])])},Oy=[];_p._withStripped=!0;var Iy=function(r){!r||r("data-v-3d6cb693_0",{source:`
.file-web-link .input-group {
	margin-top: 10px;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/WebLink.vue"],names:[],mappings:";AA6BA;CACA,gBAAA;AACA",file:"WebLink.vue",sourcesContent:[`<template>
	<div class="file-web-link margin-bottom">
		<a href class="text-muted text-medium"
			@click.prevent="$emit('hide-web-link')"
		>
			{{ __('\u2190 Back to upload files') }}
		</a>
		<div class="input-group">
			<input
				type="text"
				class="form-control"
				:placeholder="__('Attach a web link')"
				v-model="url"
			>
		</div>
	</div>
</template>
<script>
export default {
	name: 'WebLink',
	data() {
		return {
			url: '',
		}
	}
}
<\/script>

<style>
.file-web-link .input-group {
	margin-top: 10px;
}
</style>
`]},media:void 0})},Py=void 0,Ry=void 0,Ly=!1;function My(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div class="file-web-link margin-bottom">
		<a href class="text-muted text-medium"
			@click.prevent="$emit('hide-web-link')"
		>
			{{ __('\u2190 Back to upload files') }}
		</a>
		<div class="input-group">
			<input
				type="text"
				class="form-control"
				:placeholder="__('Attach a web link')"
				v-model="url"
			>
		</div>
	</div>
</template>
<script>
export default {
	name: 'WebLink',
	data() {
		return {
			url: '',
		}
	}
}
<\/script>

<style>
.file-web-link .input-group {
	margin-top: 10px;
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Yl(){let r=Yl.styles||(Yl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var Ny=My({render:_p,staticRenderFns:Oy},Iy,$y,Py,Ly,Ry,!1,Yl,void 0,void 0),vp=Ny;var uo=class{constructor({pickerCallback:t,enabled:e,appId:n,developerKey:i,clientId:a}={}){this.scope=["https://www.googleapis.com/auth/drive.readonly"],this.pickerApiLoaded=!1,this.enabled=e,this.appId=n,this.pickerCallback=t,this.developerKey=i,this.clientId=a}loadPicker(){$.ajax({method:"GET",url:"https://apis.google.com/js/api.js",dataType:"script",cache:!0}).done(this.loadGapi.bind(this))}loadGapi(){frappe.boot.user.google_drive_token||gapi.load("auth",this.onAuthApiLoad.bind(this)),gapi.load("picker",this.onPickerApiLoad.bind(this))}onAuthApiLoad(){gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1},this.handleAuthResult.bind(this))}handleAuthResult(t){let e={popup_closed_by_user:__("Google Authentication was closed abruptly by the user")};if(t&&!t.error)frappe.boot.user.google_drive_token=t.access_token,this.createPicker();else{let n=e[t.error]||__("Google Authentication Error");frappe.throw(n)}}onPickerApiLoad(){this.pickerApiLoaded=!0,this.createPicker()}createPicker(){this.pickerApiLoaded&&frappe.boot.user.google_drive_token&&(this.view=new google.picker.DocsView(google.picker.ViewId.DOCS).setParent("root").setIncludeFolders(!0),this.picker=new google.picker.PickerBuilder().setAppId(this.appId).setDeveloperKey(this.developerKey).setOAuthToken(frappe.boot.user.google_drive_token).addView(this.view).setLocale(frappe.boot.lang).setCallback(this.pickerCallback).build(),this.picker.setVisible(!0),this.setupHide())}setupHide(){let t=$(".picker-dialog-bg");for(let e of t)e.onclick=()=>{this.picker.setVisible(!1),this.picker.Ob({action:google.picker.Action.CANCEL})}}};var yp=jr(bp()),Dy={name:"ImageCropper",props:["file","attach_doc_image"],data(){return{src:null,cropper:null,image:null}},mounted(){if(window.FileReader){let r=new FileReader;r.onload=()=>this.src=r.result,r.readAsDataURL(this.file.cropper_file)}aspect_ratio=this.attach_doc_image?1:NaN,crop_box=this.file.crop_box_data,this.image=this.$refs.image,this.image.onload=()=>{this.cropper=new yp.default(this.image,{zoomable:!1,scalable:!1,viewMode:1,data:crop_box,aspectRatio:aspect_ratio})}},computed:{crop_button_text(){return this.attach_doc_image?"Upload":"Crop"}},methods:{crop_image(){this.file.crop_box_data=this.cropper.getData();let r=this.cropper.getCroppedCanvas(),t=this.file.file_obj.type;r.toBlob(e=>{var n=new File([e],this.file.name,{type:e.type});this.file.file_obj=n,this.$emit("toggle_image_cropper"),this.attach_doc_image&&this.$emit("upload_after_crop")},t)}}},wp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",[e("div",[e("img",{ref:"image",attrs:{src:r.src,alt:r.file.name}})]),r._v(" "),e("br"),r._v(" "),e("div",{staticClass:"image-cropper-actions"},[r.attach_doc_image?r._e():e("button",{staticClass:"btn btn-sm margin-right",on:{click:function(n){return r.$emit("toggle_image_cropper")}}},[r._v("Back")]),r._v(" "),e("button",{staticClass:"btn btn-primary btn-sm margin-right",domProps:{innerHTML:r._s(r.crop_button_text)},on:{click:r.crop_image}})])])},By=[];wp._withStripped=!0;var jy=function(r){!r||r("data-v-73f300af_0",{source:`
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}
.image-cropper-actions {
	display: flex;
	justify-content: flex-end;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/ImageCropper.vue"],names:[],mappings:";AAqEA;CACA,cAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;CACA,yBAAA;AACA",file:"ImageCropper.vue",sourcesContent:[`<template>
	<div>
		<div>
			<img ref="image" :src="src" :alt="file.name"/>
		</div>
		<br/>
		<div class="image-cropper-actions">
			<button class="btn btn-sm margin-right" v-if="!attach_doc_image" @click="$emit('toggle_image_cropper')">Back</button>
			<button class="btn btn-primary btn-sm margin-right" @click="crop_image" v-html="crop_button_text"></button>
		</div>
	</div>
</template>

<script>
import Cropper from "cropperjs";
export default {
	name: "ImageCropper",
	props: ["file", "attach_doc_image"],
	data() {
		return {
			src: null,
			cropper: null,
			image: null
		};
	},
	mounted() {
		if (window.FileReader) {
			let fr = new FileReader();
			fr.onload = () => (this.src = fr.result);
			fr.readAsDataURL(this.file.cropper_file);
		}
		aspect_ratio = this.attach_doc_image ? 1 : NaN;
		crop_box = this.file.crop_box_data;
		this.image = this.$refs.image;
		this.image.onload = () => {
			this.cropper = new Cropper(this.image, {
				zoomable: false,
				scalable: false,
				viewMode: 1,
				data: crop_box,
				aspectRatio: aspect_ratio
			});
		};
	},
	computed: {
		crop_button_text() {
			return this.attach_doc_image ? "Upload" : "Crop";
		}
	},
	methods: {
		crop_image() {
			this.file.crop_box_data = this.cropper.getData();
			const canvas = this.cropper.getCroppedCanvas();
			const file_type = this.file.file_obj.type;
			canvas.toBlob(blob => {
				var cropped_file_obj = new File([blob], this.file.name, {
					type: blob.type
				});
				this.file.file_obj = cropped_file_obj;
				this.$emit("toggle_image_cropper");
				if(this.attach_doc_image) {
					this.$emit("upload_after_crop");
				}
			}, file_type);
		}
	}
};
<\/script>
<style>
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}

.image-cropper-actions {
	display: flex;
	justify-content: flex-end;
}
</style>
`]},media:void 0})},Fy=void 0,zy=void 0,Hy=!1;function Uy(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div>
		<div>
			<img ref="image" :src="src" :alt="file.name"/>
		</div>
		<br/>
		<div class="image-cropper-actions">
			<button class="btn btn-sm margin-right" v-if="!attach_doc_image" @click="$emit('toggle_image_cropper')">Back</button>
			<button class="btn btn-primary btn-sm margin-right" @click="crop_image" v-html="crop_button_text"></button>
		</div>
	</div>
</template>

<script>
import Cropper from "cropperjs";
export default {
	name: "ImageCropper",
	props: ["file", "attach_doc_image"],
	data() {
		return {
			src: null,
			cropper: null,
			image: null
		};
	},
	mounted() {
		if (window.FileReader) {
			let fr = new FileReader();
			fr.onload = () => (this.src = fr.result);
			fr.readAsDataURL(this.file.cropper_file);
		}
		aspect_ratio = this.attach_doc_image ? 1 : NaN;
		crop_box = this.file.crop_box_data;
		this.image = this.$refs.image;
		this.image.onload = () => {
			this.cropper = new Cropper(this.image, {
				zoomable: false,
				scalable: false,
				viewMode: 1,
				data: crop_box,
				aspectRatio: aspect_ratio
			});
		};
	},
	computed: {
		crop_button_text() {
			return this.attach_doc_image ? "Upload" : "Crop";
		}
	},
	methods: {
		crop_image() {
			this.file.crop_box_data = this.cropper.getData();
			const canvas = this.cropper.getCroppedCanvas();
			const file_type = this.file.file_obj.type;
			canvas.toBlob(blob => {
				var cropped_file_obj = new File([blob], this.file.name, {
					type: blob.type
				});
				this.file.file_obj = cropped_file_obj;
				this.$emit("toggle_image_cropper");
				if(this.attach_doc_image) {
					this.$emit("upload_after_crop");
				}
			}, file_type);
		}
	}
};
<\/script>
<style>
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}

.image-cropper-actions {
	display: flex;
	justify-content: flex-end;
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Jl(){let r=Jl.styles||(Jl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var Wy=Uy({render:wp,staticRenderFns:By},jy,Dy,Fy,Hy,zy,!1,Jl,void 0,void 0),kp=Wy;var qy={name:"FileUploader",props:{show_upload_button:{default:!0},disable_file_browser:{default:!1},allow_multiple:{default:!0},as_dataurl:{default:!1},doctype:{default:null},docname:{default:null},fieldname:{default:null},folder:{default:"Home"},method:{default:null},on_success:{default:null},restrictions:{default:()=>({max_file_size:null,max_number_of_files:null,allowed_file_types:[]})},attach_doc_image:{default:!1},upload_notes:{default:null}},components:{FilePreview:fp,FileBrowser:gp,WebLink:vp,ImageCropper:kp},data(){return{files:[],is_dragging:!1,currently_uploading:-1,show_file_browser:!1,show_web_link:!1,show_image_cropper:!1,crop_image_with_index:-1,trigger_upload:!1,close_dialog:!1,hide_dialog_footer:!1,allow_take_photo:!1,allow_web_link:!0,google_drive_settings:{enabled:!1}}},created(){this.allow_take_photo=window.navigator.mediaDevices,frappe.user_id!=="Guest"&&frappe.call({method:"frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",callback:r=>{r.exc||(this.google_drive_settings=r.message)}}),this.restrictions.max_file_size==null&&frappe.call("frappe.core.doctype.file.file.get_max_file_size").then(r=>{this.restrictions.max_file_size=Number(r.message)})},watch:{files(r,t){!this.allow_multiple&&r.length>1&&(this.files=[r[r.length-1]])}},computed:{upload_complete(){return this.files.length>0&&this.files.every(r=>r.total!==0&&r.progress===r.total)}},methods:{dragover(){this.is_dragging=!0},dragleave(){this.is_dragging=!1},dropfiles(r){this.is_dragging=!1,this.add_files(r.dataTransfer.files)},browse_files(){this.$refs.file_input.click()},on_file_input(r){this.add_files(this.$refs.file_input.files)},remove_file(r){this.files=this.files.filter(t=>t!==r)},toggle_image_cropper(r){this.crop_image_with_index=this.show_image_cropper?-1:r,this.hide_dialog_footer=!this.show_image_cropper,this.show_image_cropper=!this.show_image_cropper},toggle_all_private(){let r;this.files.filter(e=>e.private).length<this.files.length?r=!0:r=!1,this.files=this.files.map(e=>(e.private=r,e))},add_files(r){let t=Array.from(r).filter(this.check_restrictions).map(e=>{let n=e.type.startsWith("image");return{file_obj:e,cropper_file:e,crop_box_data:null,optimize:!!this.attach_doc_image,name:e.name,doc:null,progress:0,total:0,failed:!1,request_succeeded:!1,error_message:null,uploading:!1,private:!n}});this.files=this.files.concat(t),this.files.length!=0&&this.attach_doc_image&&this.toggle_image_cropper(0)},check_restrictions(r){let{max_file_size:t,allowed_file_types:e}=this.restrictions,n=r.type,i="."+r.name.split(".").pop(),a=!0,o=!0;return e.length&&(a=e.some(s=>s.includes("/")?r.type?r.type.match(s):!1:s[0]==="."?r.name.endsWith(s):!1)),t&&r.size!=null&&(o=r.size<t),a||(console.warn("File skipped because of invalid file type",r),frappe.show_alert({message:__('File "{0}" was skipped because of invalid file type',[r.name]),indicator:"orange"})),o||(console.warn("File skipped because of invalid file size",r.size,r),frappe.show_alert({message:__('File "{0}" was skipped because size exceeds {1} MB',[r.name,t/(1024*1024)]),indicator:"orange"})),a&&o},upload_files(){return this.show_file_browser?this.upload_via_file_browser():this.show_web_link?this.upload_via_web_link():this.as_dataurl?this.return_as_dataurl():frappe.run_serially(this.files.map((r,t)=>()=>this.upload_file(r,t)))},upload_via_file_browser(){let r=this.$refs.file_browser.selected_node;return r.value?(this.close_dialog=!0,this.upload_file({file_url:r.file_url})):(frappe.msgprint(__("Click on a file to select it.")),this.close_dialog=!0,Promise.reject())},upload_via_web_link(){let r=this.$refs.web_link.url;return r?(r=decodeURI(r),this.close_dialog=!0,this.upload_file({file_url:r})):(frappe.msgprint(__("Invalid URL")),this.close_dialog=!0,Promise.reject())},return_as_dataurl(){let r=this.files.map(t=>frappe.dom.file_to_base64(t.file_obj).then(e=>{t.dataurl=e,this.on_success&&this.on_success(t)}));return this.close_dialog=!0,Promise.all(r)},upload_file(r,t){return this.currently_uploading=t,new Promise((e,n)=>{let i=new XMLHttpRequest;i.upload.addEventListener("loadstart",o=>{r.uploading=!0}),i.upload.addEventListener("progress",o=>{o.lengthComputable&&(r.progress=o.loaded,r.total=o.total)}),i.upload.addEventListener("load",o=>{r.uploading=!1,e()}),i.addEventListener("error",o=>{r.failed=!0,n()}),i.onreadystatechange=()=>{if(i.readyState==XMLHttpRequest.DONE)if(i.status===200){r.request_succeeded=!0;let o=null,s=null;try{o=JSON.parse(i.responseText),o.message.doctype==="File"&&(s=o.message)}catch(u){o=i.responseText}r.doc=s,this.on_success&&this.on_success(s,o),t==this.files.length-1&&this.files.every(u=>u.request_succeeded)&&(this.close_dialog=!0)}else if(i.status===403){r.failed=!0;let o=JSON.parse(i.responseText);r.error_message=`Not permitted. ${o._error_message||""}`}else if(i.status===413)r.failed=!0,r.error_message="Size exceeds the maximum allowed file size.";else{r.failed=!0,r.error_message=i.status===0?"XMLHttpRequest Error":`${i.status} : ${i.statusText}`;let o=null;try{o=JSON.parse(i.responseText)}catch(s){}frappe.request.cleanup({},o)}},i.open("POST","/api/method/upload_file",!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token);let a=new FormData;r.file_obj&&a.append("file",r.file_obj,r.name),a.append("is_private",+r.private),a.append("folder",this.folder),r.file_url&&a.append("file_url",r.file_url),r.file_name&&a.append("file_name",r.file_name),this.doctype&&this.docname&&(a.append("doctype",this.doctype),a.append("docname",this.docname)),this.fieldname&&a.append("fieldname",this.fieldname),this.method&&a.append("method",this.method),r.optimize&&a.append("optimize",!0),this.attach_doc_image&&(a.append("max_width",200),a.append("max_height",200)),i.send(a)})},capture_image(){let r=new frappe.ui.Capture({animate:!1,error:!0});r.show(),r.submit(t=>{t.forEach(e=>{let n=`capture_${frappe.datetime.now_datetime().replaceAll(/[: -]/g,"_")}.png`;this.url_to_file(e,n,"image/png").then(i=>this.add_files([i]))})})},show_google_drive_picker(){this.close_dialog=!0,new uo(Vt({pickerCallback:t=>this.google_drive_callback(t)},this.google_drive_settings)).loadPicker()},google_drive_callback(r){r.action==google.picker.Action.PICKED?this.upload_file({file_url:r.docs[0].url,file_name:r.docs[0].name}):r.action==google.picker.Action.CANCEL&&cur_frm.attachments.new_attachment()},url_to_file(r,t,e){return fetch(r).then(n=>n.arrayBuffer()).then(n=>new File([n],t,{type:e}))}}},xp=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-uploader",on:{dragover:function(n){return n.preventDefault(),r.dragover(n)},dragleave:function(n){return n.preventDefault(),r.dragleave(n)},drop:function(n){return n.preventDefault(),r.dropfiles(n)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:r.files.length===0&&!r.show_file_browser&&!r.show_web_link,expression:"files.length === 0 && !show_file_browser && !show_web_link"}],staticClass:"file-upload-area"},[r.is_dragging?e("div",[r._v(`
			`+r._s(r.__("Drop files here"))+`
		`)]):e("div",[e("div",{staticClass:"text-center"},[r._v(`
				`+r._s(r.__("Drag and drop files here or upload from"))+`
			`)]),r._v(" "),e("div",{staticClass:"mt-2 text-center"},[e("button",{staticClass:"btn btn-file-upload",on:{click:r.browse_files}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"url(#paint0_linear)"}}),r._v(" "),e("path",{attrs:{d:"M13.5 22V19",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M16.5 22V19",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M10.5 22H19.5",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M7.5 16H22.5",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("defs",[e("linearGradient",{attrs:{id:"paint0_linear",x1:"0",y1:"0",x2:"0",y2:"30",gradientUnits:"userSpaceOnUse"}},[e("stop",{attrs:{"stop-color":"#2C9AF1"}}),r._v(" "),e("stop",{attrs:{offset:"1","stop-color":"#2490EF"}})],1)],1)]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("My Device")))])]),r._v(" "),e("input",{ref:"file_input",staticClass:"hidden",attrs:{type:"file",multiple:r.allow_multiple,accept:r.restrictions.allowed_file_types.join(", ")},on:{change:r.on_file_input}}),r._v(" "),r.disable_file_browser?r._e():e("button",{staticClass:"btn btn-file-upload",on:{click:function(n){r.show_file_browser=!0}}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#48BB74"}}),r._v(" "),e("path",{attrs:{d:"M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z",stroke:"white","stroke-miterlimit":"10","stroke-linecap":"square"}}),r._v(" "),e("path",{attrs:{d:"M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12",stroke:"white","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Library")))])]),r._v(" "),r.allow_web_link?e("button",{staticClass:"btn btn-file-upload",on:{click:function(n){r.show_web_link=!0}}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#ECAC4B"}}),r._v(" "),e("path",{attrs:{d:"M12.0469 17.9543L17.9558 12.0454",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Link")))])]):r._e(),r._v(" "),r.allow_take_photo?e("button",{staticClass:"btn btn-file-upload",on:{click:r.capture_image}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#CE315B"}}),r._v(" "),e("path",{attrs:{d:"M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z",stroke:"white","stroke-linejoin":"round"}}),r._v(" "),e("circle",{attrs:{cx:"15",cy:"16",r:"2.5",stroke:"white"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Camera")))])]):r._e(),r._v(" "),r.google_drive_settings.enabled?e("button",{staticClass:"btn btn-file-upload",on:{click:r.show_google_drive_picker}},[e("svg",{attrs:{width:"30",height:"30"}},[e("image",{attrs:{"xlink:href":"/assets/frappe/icons/social/google_drive.svg",width:"30",height:"30"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Google Drive")))])]):r._e()]),r._v(" "),e("div",{staticClass:"text-muted text-medium"},[r._v(`
				`+r._s(r.upload_notes)+`
			`)])])]),r._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:r.files.length&&!r.show_file_browser&&!r.show_web_link,expression:"files.length && !show_file_browser && !show_web_link"}],staticClass:"file-preview-area"},[r.show_image_cropper?r._e():e("div",{staticClass:"file-preview-container"},r._l(r.files,function(n,i){return e("FilePreview",{key:n.name,attrs:{file:n},on:{remove:function(a){return r.remove_file(n)},toggle_private:function(a){n.private=!n.private},toggle_optimize:function(a){n.optimize=!n.optimize},toggle_image_cropper:function(a){return r.toggle_image_cropper(i)}}})}),1),r._v(" "),r.show_upload_button&&r.currently_uploading===-1?e("div",{staticClass:"flex align-center"},[e("button",{staticClass:"btn btn-primary btn-sm margin-right",on:{click:r.upload_files}},[r.files.length===1?e("span",[r._v(`
					`+r._s(r.__("Upload file"))+`
				`)]):e("span",[r._v(`
					`+r._s(r.__("Upload {0} files",[r.files.length]))+`
				`)])]),r._v(" "),e("div",{staticClass:"text-muted text-medium"},[r._v(`
				`+r._s(r.__("Click on the lock icon to toggle public/private"))+`
			`)])]):r._e()]),r._v(" "),r.show_image_cropper?e("ImageCropper",{attrs:{file:r.files[r.crop_image_with_index],attach_doc_image:r.attach_doc_image},on:{toggle_image_cropper:function(n){return r.toggle_image_cropper(-1)},upload_after_crop:function(n){r.trigger_upload=!0}}}):r._e(),r._v(" "),r.show_file_browser&&!r.disable_file_browser?e("FileBrowser",{ref:"file_browser",on:{"hide-browser":function(n){r.show_file_browser=!1}}}):r._e(),r._v(" "),r.show_web_link?e("WebLink",{ref:"web_link",on:{"hide-web-link":function(n){r.show_web_link=!1}}}):r._e()],1)},Vy=[];xp._withStripped=!0;var Gy=function(r){!r||r("data-v-6f70ea55_0",{source:`
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}
.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FileUploader.vue"],names:[],mappings:";AAojBA;CACA,iBAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,2CAAA;CACA,mCAAA;CACA,eAAA;CACA,iCAAA;AACA;AAEA;CACA,6BAAA;CACA,YAAA;CACA,gBAAA;CACA,yBAAA;AACA",file:"FileUploader.vue",sourcesContent:[`<template>
	<div class="file-uploader"
		@dragover.prevent="dragover"
		@dragleave.prevent="dragleave"
		@drop.prevent="dropfiles"
	>
		<div
			class="file-upload-area"
			v-show="files.length === 0 && !show_file_browser && !show_web_link"
		>
			<div v-if="!is_dragging">
				<div class="text-center">
					{{ __('Drag and drop files here or upload from') }}
				</div>
				<div class="mt-2 text-center">
					<button class="btn btn-file-upload" @click="browse_files">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="url(#paint0_linear)"/>
							<path d="M13.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M16.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M10.5 22H19.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M7.5 16H22.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<defs>
							<linearGradient id="paint0_linear" x1="0" y1="0" x2="0" y2="30" gradientUnits="userSpaceOnUse">
							<stop stop-color="#2C9AF1"/>
							<stop offset="1" stop-color="#2490EF"/>
							</linearGradient>
							</defs>
						</svg>
						<div class="mt-1">{{ __('My Device') }}</div>
					</button>
					<input
						type="file"
						class="hidden"
						ref="file_input"
						@change="on_file_input"
						:multiple="allow_multiple"
						:accept="restrictions.allowed_file_types.join(', ')"
					>
					<button class="btn btn-file-upload" v-if="!disable_file_browser" @click="show_file_browser = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#48BB74"/>
							<path d="M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z" stroke="white" stroke-miterlimit="10" stroke-linecap="square"/>
							<path d="M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12" stroke="white" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Library') }}</div>
					</button>
					<button class="btn btn-file-upload" v-if="allow_web_link" @click="show_web_link = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#ECAC4B"/>
							<path d="M12.0469 17.9543L17.9558 12.0454" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Link') }}</div>
					</button>
					<button v-if="allow_take_photo" class="btn btn-file-upload" @click="capture_image">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#CE315B"/>
							<path d="M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z" stroke="white" stroke-linejoin="round"/>
							<circle cx="15" cy="16" r="2.5" stroke="white"/>
						</svg>
						<div class="mt-1">{{ __('Camera') }}</div>
					</button>
					<button v-if="google_drive_settings.enabled" class="btn btn-file-upload" @click="show_google_drive_picker">
						<svg width="30" height="30">
							<image xlink:href="/assets/frappe/icons/social/google_drive.svg" width="30" height="30"/>
						</svg>
						<div class="mt-1">{{ __('Google Drive') }}</div>
					</button>
				</div>
				<div class="text-muted text-medium">
					{{ upload_notes }}
				</div>
			</div>
			<div v-else>
				{{ __('Drop files here') }}
			</div>
		</div>
		<div class="file-preview-area" v-show="files.length && !show_file_browser && !show_web_link">
			<div class="file-preview-container" v-if="!show_image_cropper">
				<FilePreview
					v-for="(file, i) in files"
					:key="file.name"
					:file="file"
					@remove="remove_file(file)"
					@toggle_private="file.private = !file.private"
					@toggle_optimize="file.optimize = !file.optimize"
					@toggle_image_cropper="toggle_image_cropper(i)"
				/>
			</div>
			<div class="flex align-center" v-if="show_upload_button && currently_uploading === -1">
				<button
					class="btn btn-primary btn-sm margin-right"
					@click="upload_files"
				>
					<span v-if="files.length === 1">
						{{ __('Upload file') }}
					</span>
					<span v-else>
						{{ __('Upload {0} files', [files.length]) }}
					</span>
				</button>
				<div class="text-muted text-medium">
					{{ __('Click on the lock icon to toggle public/private') }}
				</div>
			</div>
		</div>
		<ImageCropper
			v-if="show_image_cropper"
			:file="files[crop_image_with_index]"
			:attach_doc_image="attach_doc_image"
			@toggle_image_cropper="toggle_image_cropper(-1)"
			@upload_after_crop="trigger_upload=true"
		/>
		<FileBrowser
			ref="file_browser"
			v-if="show_file_browser && !disable_file_browser"
			@hide-browser="show_file_browser = false"
		/>
		<WebLink
			ref="web_link"
			v-if="show_web_link"
			@hide-web-link="show_web_link = false"
		/>
	</div>
</template>

<script>
import FilePreview from './FilePreview.vue';
import FileBrowser from './FileBrowser.vue';
import WebLink from './WebLink.vue';
import GoogleDrivePicker from '../../integrations/google_drive_picker';
import ImageCropper from './ImageCropper.vue';

export default {
	name: 'FileUploader',
	props: {
		show_upload_button: {
			default: true
		},
		disable_file_browser: {
			default: false
		},
		allow_multiple: {
			default: true
		},
		as_dataurl: {
			default: false
		},
		doctype: {
			default: null
		},
		docname: {
			default: null
		},
		fieldname: {
			default: null
		},
		folder: {
			default: 'Home'
		},
		method: {
			default: null
		},
		on_success: {
			default: null
		},
		restrictions: {
			default: () => ({
				max_file_size: null, // 2048 -> 2KB
				max_number_of_files: null,
				allowed_file_types: [] // ['image/*', 'video/*', '.jpg', '.gif', '.pdf']
			})
		},
		attach_doc_image: {
			default: false
		},
		upload_notes: {
			default: null // "Images or video, upto 2MB"
		}
	},
	components: {
		FilePreview,
		FileBrowser,
		WebLink,
		ImageCropper
	},
	data() {
		return {
			files: [],
			is_dragging: false,
			currently_uploading: -1,
			show_file_browser: false,
			show_web_link: false,
			show_image_cropper: false,
			crop_image_with_index: -1,
			trigger_upload: false,
			close_dialog: false,
			hide_dialog_footer: false,
			allow_take_photo: false,
			allow_web_link: true,
			google_drive_settings: {
				enabled: false
			}
		}
	},
	created() {
		this.allow_take_photo = window.navigator.mediaDevices;
		if (frappe.user_id !== "Guest") {
			frappe.call({
				// method only available after login
				method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
				callback: (resp) => {
					if (!resp.exc) {
						this.google_drive_settings = resp.message;
					}
				}
			});
		}
		if (this.restrictions.max_file_size == null) {
			frappe.call('frappe.core.doctype.file.file.get_max_file_size')
				.then(res => {
					this.restrictions.max_file_size = Number(res.message);
				});
		}
	},
	watch: {
		files(newvalue, oldvalue) {
			if (!this.allow_multiple && newvalue.length > 1) {
				this.files = [newvalue[newvalue.length - 1]];
			}
		}
	},
	computed: {
		upload_complete() {
			return this.files.length > 0
				&& this.files.every(
					file => file.total !== 0 && file.progress === file.total);
		}
	},
	methods: {
		dragover() {
			this.is_dragging = true;
		},
		dragleave() {
			this.is_dragging = false;
		},
		dropfiles(e) {
			this.is_dragging = false;
			this.add_files(e.dataTransfer.files);
		},
		browse_files() {
			this.$refs.file_input.click();
		},
		on_file_input(e) {
			this.add_files(this.$refs.file_input.files);
		},
		remove_file(file) {
			this.files = this.files.filter(f => f !== file);
		},
		toggle_image_cropper(index) {
			this.crop_image_with_index = this.show_image_cropper ? -1 : index;
			this.hide_dialog_footer = !this.show_image_cropper;
			this.show_image_cropper = !this.show_image_cropper;
		},
		toggle_all_private() {
			let flag;
			let private_values = this.files.filter(file => file.private);
			if (private_values.length < this.files.length) {
				// there are some private and some public
				// set all to private
				flag = true;
			} else {
				// all are private, set all to public
				flag = false;
			}
			this.files = this.files.map(file => {
				file.private = flag;
				return file;
			});
		},
		add_files(file_array) {
			let files = Array.from(file_array)
				.filter(this.check_restrictions)
				.map(file => {
					let is_image = file.type.startsWith('image');
					return {
						file_obj: file,
						cropper_file: file,
						crop_box_data: null,
						optimize: this.attach_doc_image ? true : false,
						name: file.name,
						doc: null,
						progress: 0,
						total: 0,
						failed: false,
						request_succeeded: false,
						error_message: null,
						uploading: false,
						private: !is_image
					}
				});
			this.files = this.files.concat(files);
			if(this.files.length != 0 && this.attach_doc_image) {
				this.toggle_image_cropper(0);
			}
		},
		check_restrictions(file) {
			let { max_file_size, allowed_file_types } = this.restrictions;

			let mime_type = file.type;
			let extension = '.' + file.name.split('.').pop();

			let is_correct_type = true;
			let valid_file_size = true;

			if (allowed_file_types.length) {
				is_correct_type = allowed_file_types.some((type) => {
					// is this is a mime-type
					if (type.includes('/')) {
						if (!file.type) return false;
						return file.type.match(type);
					}

					// otherwise this is likely an extension
					if (type[0] === '.') {
						return file.name.endsWith(type);
					}
					return false;
				});
			}

			if (max_file_size && file.size != null) {
				valid_file_size = file.size < max_file_size;
			}

			if (!is_correct_type) {
				console.warn('File skipped because of invalid file type', file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because of invalid file type', [file.name]),
					indicator: 'orange'
				});
			}
			if (!valid_file_size) {
				console.warn('File skipped because of invalid file size', file.size, file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
					indicator: 'orange'
				});
			}

			return is_correct_type && valid_file_size;
		},
		upload_files() {
			if (this.show_file_browser) {
				return this.upload_via_file_browser();
			}
			if (this.show_web_link) {
				return this.upload_via_web_link();
			}
			if (this.as_dataurl) {
				return this.return_as_dataurl();
			}
			return frappe.run_serially(
				this.files.map(
					(file, i) =>
						() => this.upload_file(file, i)
				)
			);
		},
		upload_via_file_browser() {
			let selected_file = this.$refs.file_browser.selected_node;
			if (!selected_file.value) {
				frappe.msgprint(__('Click on a file to select it.'));
				this.close_dialog = true;
				return Promise.reject();
			}
			this.close_dialog = true;
			return this.upload_file({
				file_url: selected_file.file_url
			});
		},
		upload_via_web_link() {
			let file_url = this.$refs.web_link.url;
			if (!file_url) {
				frappe.msgprint(__('Invalid URL'));
				this.close_dialog = true;
				return Promise.reject();
			}
			file_url = decodeURI(file_url)
			this.close_dialog = true;
			return this.upload_file({
				file_url
			});
		},
		return_as_dataurl() {
			let promises = this.files.map(file =>
				frappe.dom.file_to_base64(file.file_obj)
					.then(dataurl => {
						file.dataurl = dataurl;
						this.on_success && this.on_success(file);
					})
			);
			this.close_dialog = true;
			return Promise.all(promises);
		},
		upload_file(file, i) {
			this.currently_uploading = i;

			return new Promise((resolve, reject) => {
				let xhr = new XMLHttpRequest();
				xhr.upload.addEventListener('loadstart', (e) => {
					file.uploading = true;
				})
				xhr.upload.addEventListener('progress', (e) => {
					if (e.lengthComputable) {
						file.progress = e.loaded;
						file.total = e.total;
					}
				})
				xhr.upload.addEventListener('load', (e) => {
					file.uploading = false;
					resolve();
				})
				xhr.addEventListener('error', (e) => {
					file.failed = true;
					reject();
				})
				xhr.onreadystatechange = () => {
					if (xhr.readyState == XMLHttpRequest.DONE) {
						if (xhr.status === 200) {
							file.request_succeeded = true;
							let r = null;
							let file_doc = null;
							try {
								r = JSON.parse(xhr.responseText);
								if (r.message.doctype === 'File') {
									file_doc = r.message;
								}
							} catch(e) {
								r = xhr.responseText;
							}

							file.doc = file_doc;

							if (this.on_success) {
								this.on_success(file_doc, r);
							}

							if (i == this.files.length - 1 && this.files.every(file => file.request_succeeded)) {
								this.close_dialog = true;
							}

						} else if (xhr.status === 403) {
							file.failed = true;
							let response = JSON.parse(xhr.responseText);
							file.error_message = \`Not permitted. \${response._error_message || ''}\`;

						} else if (xhr.status === 413) {
							file.failed = true;
							file.error_message = 'Size exceeds the maximum allowed file size.';

						} else {
							file.failed = true;
							file.error_message = xhr.status === 0 ? 'XMLHttpRequest Error' : \`\${xhr.status} : \${xhr.statusText}\`;

							let error = null;
							try {
								error = JSON.parse(xhr.responseText);
							} catch(e) {
								// pass
							}
							frappe.request.cleanup({}, error);
						}
					}
				}
				xhr.open('POST', '/api/method/upload_file', true);
				xhr.setRequestHeader('Accept', 'application/json');
				xhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);

				let form_data = new FormData();
				if (file.file_obj) {
					form_data.append('file', file.file_obj, file.name);
				}
				form_data.append('is_private', +file.private);
				form_data.append('folder', this.folder);

				if (file.file_url) {
					form_data.append('file_url', file.file_url);
				}

				if (file.file_name) {
					form_data.append('file_name', file.file_name);
				}

				if (this.doctype && this.docname) {
					form_data.append('doctype', this.doctype);
					form_data.append('docname', this.docname);
				}

				if (this.fieldname) {
					form_data.append('fieldname', this.fieldname);
				}

				if (this.method) {
					form_data.append('method', this.method);
				}

				if (file.optimize) {
					form_data.append('optimize', true);
				}

				if (this.attach_doc_image) {
					form_data.append('max_width', 200);
					form_data.append('max_height', 200);
				}

				xhr.send(form_data);
			});
		},
		capture_image() {
			const capture = new frappe.ui.Capture({
				animate: false,
				error: true
			});
			capture.show();
			capture.submit(data_urls => {
				data_urls.forEach(data_url => {
					let filename = \`capture_\${frappe.datetime.now_datetime().replaceAll(/[: -]/g, '_')}.png\`;
					this.url_to_file(data_url, filename, 'image/png').then((file) =>
						this.add_files([file])
					);
				});
			});
		},
		show_google_drive_picker() {
			this.close_dialog = true;
			let google_drive = new GoogleDrivePicker({
				pickerCallback: data => this.google_drive_callback(data),
				...this.google_drive_settings
			});
			google_drive.loadPicker();
		},
		google_drive_callback(data) {
			if (data.action == google.picker.Action.PICKED) {
				this.upload_file({
					file_url: data.docs[0].url,
					file_name: data.docs[0].name
				});
			} else if (data.action == google.picker.Action.CANCEL) {
				cur_frm.attachments.new_attachment()
			}
		},
		url_to_file(url, filename, mime_type) {
			return fetch(url)
					.then(res => res.arrayBuffer())
					.then(buffer => new File([buffer], filename, { type: mime_type }));
		},
	}
}
<\/script>
<style>
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}

.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
</style>
`]},media:void 0})},Yy=void 0,Xy=void 0,Ky=!1;function Jy(r,t,e,n,i,a,o,s,u,h){let d=(typeof e=="function"?e.options:e)||{};d.__file=`<template>
	<div class="file-uploader"
		@dragover.prevent="dragover"
		@dragleave.prevent="dragleave"
		@drop.prevent="dropfiles"
	>
		<div
			class="file-upload-area"
			v-show="files.length === 0 && !show_file_browser && !show_web_link"
		>
			<div v-if="!is_dragging">
				<div class="text-center">
					{{ __('Drag and drop files here or upload from') }}
				</div>
				<div class="mt-2 text-center">
					<button class="btn btn-file-upload" @click="browse_files">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="url(#paint0_linear)"/>
							<path d="M13.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M16.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M10.5 22H19.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M7.5 16H22.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<defs>
							<linearGradient id="paint0_linear" x1="0" y1="0" x2="0" y2="30" gradientUnits="userSpaceOnUse">
							<stop stop-color="#2C9AF1"/>
							<stop offset="1" stop-color="#2490EF"/>
							</linearGradient>
							</defs>
						</svg>
						<div class="mt-1">{{ __('My Device') }}</div>
					</button>
					<input
						type="file"
						class="hidden"
						ref="file_input"
						@change="on_file_input"
						:multiple="allow_multiple"
						:accept="restrictions.allowed_file_types.join(', ')"
					>
					<button class="btn btn-file-upload" v-if="!disable_file_browser" @click="show_file_browser = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#48BB74"/>
							<path d="M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z" stroke="white" stroke-miterlimit="10" stroke-linecap="square"/>
							<path d="M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12" stroke="white" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Library') }}</div>
					</button>
					<button class="btn btn-file-upload" v-if="allow_web_link" @click="show_web_link = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#ECAC4B"/>
							<path d="M12.0469 17.9543L17.9558 12.0454" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Link') }}</div>
					</button>
					<button v-if="allow_take_photo" class="btn btn-file-upload" @click="capture_image">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#CE315B"/>
							<path d="M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z" stroke="white" stroke-linejoin="round"/>
							<circle cx="15" cy="16" r="2.5" stroke="white"/>
						</svg>
						<div class="mt-1">{{ __('Camera') }}</div>
					</button>
					<button v-if="google_drive_settings.enabled" class="btn btn-file-upload" @click="show_google_drive_picker">
						<svg width="30" height="30">
							<image xlink:href="/assets/frappe/icons/social/google_drive.svg" width="30" height="30"/>
						</svg>
						<div class="mt-1">{{ __('Google Drive') }}</div>
					</button>
				</div>
				<div class="text-muted text-medium">
					{{ upload_notes }}
				</div>
			</div>
			<div v-else>
				{{ __('Drop files here') }}
			</div>
		</div>
		<div class="file-preview-area" v-show="files.length && !show_file_browser && !show_web_link">
			<div class="file-preview-container" v-if="!show_image_cropper">
				<FilePreview
					v-for="(file, i) in files"
					:key="file.name"
					:file="file"
					@remove="remove_file(file)"
					@toggle_private="file.private = !file.private"
					@toggle_optimize="file.optimize = !file.optimize"
					@toggle_image_cropper="toggle_image_cropper(i)"
				/>
			</div>
			<div class="flex align-center" v-if="show_upload_button && currently_uploading === -1">
				<button
					class="btn btn-primary btn-sm margin-right"
					@click="upload_files"
				>
					<span v-if="files.length === 1">
						{{ __('Upload file') }}
					</span>
					<span v-else>
						{{ __('Upload {0} files', [files.length]) }}
					</span>
				</button>
				<div class="text-muted text-medium">
					{{ __('Click on the lock icon to toggle public/private') }}
				</div>
			</div>
		</div>
		<ImageCropper
			v-if="show_image_cropper"
			:file="files[crop_image_with_index]"
			:attach_doc_image="attach_doc_image"
			@toggle_image_cropper="toggle_image_cropper(-1)"
			@upload_after_crop="trigger_upload=true"
		/>
		<FileBrowser
			ref="file_browser"
			v-if="show_file_browser && !disable_file_browser"
			@hide-browser="show_file_browser = false"
		/>
		<WebLink
			ref="web_link"
			v-if="show_web_link"
			@hide-web-link="show_web_link = false"
		/>
	</div>
</template>

<script>
import FilePreview from './FilePreview.vue';
import FileBrowser from './FileBrowser.vue';
import WebLink from './WebLink.vue';
import GoogleDrivePicker from '../../integrations/google_drive_picker';
import ImageCropper from './ImageCropper.vue';

export default {
	name: 'FileUploader',
	props: {
		show_upload_button: {
			default: true
		},
		disable_file_browser: {
			default: false
		},
		allow_multiple: {
			default: true
		},
		as_dataurl: {
			default: false
		},
		doctype: {
			default: null
		},
		docname: {
			default: null
		},
		fieldname: {
			default: null
		},
		folder: {
			default: 'Home'
		},
		method: {
			default: null
		},
		on_success: {
			default: null
		},
		restrictions: {
			default: () => ({
				max_file_size: null, // 2048 -> 2KB
				max_number_of_files: null,
				allowed_file_types: [] // ['image/*', 'video/*', '.jpg', '.gif', '.pdf']
			})
		},
		attach_doc_image: {
			default: false
		},
		upload_notes: {
			default: null // "Images or video, upto 2MB"
		}
	},
	components: {
		FilePreview,
		FileBrowser,
		WebLink,
		ImageCropper
	},
	data() {
		return {
			files: [],
			is_dragging: false,
			currently_uploading: -1,
			show_file_browser: false,
			show_web_link: false,
			show_image_cropper: false,
			crop_image_with_index: -1,
			trigger_upload: false,
			close_dialog: false,
			hide_dialog_footer: false,
			allow_take_photo: false,
			allow_web_link: true,
			google_drive_settings: {
				enabled: false
			}
		}
	},
	created() {
		this.allow_take_photo = window.navigator.mediaDevices;
		if (frappe.user_id !== "Guest") {
			frappe.call({
				// method only available after login
				method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
				callback: (resp) => {
					if (!resp.exc) {
						this.google_drive_settings = resp.message;
					}
				}
			});
		}
		if (this.restrictions.max_file_size == null) {
			frappe.call('frappe.core.doctype.file.file.get_max_file_size')
				.then(res => {
					this.restrictions.max_file_size = Number(res.message);
				});
		}
	},
	watch: {
		files(newvalue, oldvalue) {
			if (!this.allow_multiple && newvalue.length > 1) {
				this.files = [newvalue[newvalue.length - 1]];
			}
		}
	},
	computed: {
		upload_complete() {
			return this.files.length > 0
				&& this.files.every(
					file => file.total !== 0 && file.progress === file.total);
		}
	},
	methods: {
		dragover() {
			this.is_dragging = true;
		},
		dragleave() {
			this.is_dragging = false;
		},
		dropfiles(e) {
			this.is_dragging = false;
			this.add_files(e.dataTransfer.files);
		},
		browse_files() {
			this.$refs.file_input.click();
		},
		on_file_input(e) {
			this.add_files(this.$refs.file_input.files);
		},
		remove_file(file) {
			this.files = this.files.filter(f => f !== file);
		},
		toggle_image_cropper(index) {
			this.crop_image_with_index = this.show_image_cropper ? -1 : index;
			this.hide_dialog_footer = !this.show_image_cropper;
			this.show_image_cropper = !this.show_image_cropper;
		},
		toggle_all_private() {
			let flag;
			let private_values = this.files.filter(file => file.private);
			if (private_values.length < this.files.length) {
				// there are some private and some public
				// set all to private
				flag = true;
			} else {
				// all are private, set all to public
				flag = false;
			}
			this.files = this.files.map(file => {
				file.private = flag;
				return file;
			});
		},
		add_files(file_array) {
			let files = Array.from(file_array)
				.filter(this.check_restrictions)
				.map(file => {
					let is_image = file.type.startsWith('image');
					return {
						file_obj: file,
						cropper_file: file,
						crop_box_data: null,
						optimize: this.attach_doc_image ? true : false,
						name: file.name,
						doc: null,
						progress: 0,
						total: 0,
						failed: false,
						request_succeeded: false,
						error_message: null,
						uploading: false,
						private: !is_image
					}
				});
			this.files = this.files.concat(files);
			if(this.files.length != 0 && this.attach_doc_image) {
				this.toggle_image_cropper(0);
			}
		},
		check_restrictions(file) {
			let { max_file_size, allowed_file_types } = this.restrictions;

			let mime_type = file.type;
			let extension = '.' + file.name.split('.').pop();

			let is_correct_type = true;
			let valid_file_size = true;

			if (allowed_file_types.length) {
				is_correct_type = allowed_file_types.some((type) => {
					// is this is a mime-type
					if (type.includes('/')) {
						if (!file.type) return false;
						return file.type.match(type);
					}

					// otherwise this is likely an extension
					if (type[0] === '.') {
						return file.name.endsWith(type);
					}
					return false;
				});
			}

			if (max_file_size && file.size != null) {
				valid_file_size = file.size < max_file_size;
			}

			if (!is_correct_type) {
				console.warn('File skipped because of invalid file type', file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because of invalid file type', [file.name]),
					indicator: 'orange'
				});
			}
			if (!valid_file_size) {
				console.warn('File skipped because of invalid file size', file.size, file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
					indicator: 'orange'
				});
			}

			return is_correct_type && valid_file_size;
		},
		upload_files() {
			if (this.show_file_browser) {
				return this.upload_via_file_browser();
			}
			if (this.show_web_link) {
				return this.upload_via_web_link();
			}
			if (this.as_dataurl) {
				return this.return_as_dataurl();
			}
			return frappe.run_serially(
				this.files.map(
					(file, i) =>
						() => this.upload_file(file, i)
				)
			);
		},
		upload_via_file_browser() {
			let selected_file = this.$refs.file_browser.selected_node;
			if (!selected_file.value) {
				frappe.msgprint(__('Click on a file to select it.'));
				this.close_dialog = true;
				return Promise.reject();
			}
			this.close_dialog = true;
			return this.upload_file({
				file_url: selected_file.file_url
			});
		},
		upload_via_web_link() {
			let file_url = this.$refs.web_link.url;
			if (!file_url) {
				frappe.msgprint(__('Invalid URL'));
				this.close_dialog = true;
				return Promise.reject();
			}
			file_url = decodeURI(file_url)
			this.close_dialog = true;
			return this.upload_file({
				file_url
			});
		},
		return_as_dataurl() {
			let promises = this.files.map(file =>
				frappe.dom.file_to_base64(file.file_obj)
					.then(dataurl => {
						file.dataurl = dataurl;
						this.on_success && this.on_success(file);
					})
			);
			this.close_dialog = true;
			return Promise.all(promises);
		},
		upload_file(file, i) {
			this.currently_uploading = i;

			return new Promise((resolve, reject) => {
				let xhr = new XMLHttpRequest();
				xhr.upload.addEventListener('loadstart', (e) => {
					file.uploading = true;
				})
				xhr.upload.addEventListener('progress', (e) => {
					if (e.lengthComputable) {
						file.progress = e.loaded;
						file.total = e.total;
					}
				})
				xhr.upload.addEventListener('load', (e) => {
					file.uploading = false;
					resolve();
				})
				xhr.addEventListener('error', (e) => {
					file.failed = true;
					reject();
				})
				xhr.onreadystatechange = () => {
					if (xhr.readyState == XMLHttpRequest.DONE) {
						if (xhr.status === 200) {
							file.request_succeeded = true;
							let r = null;
							let file_doc = null;
							try {
								r = JSON.parse(xhr.responseText);
								if (r.message.doctype === 'File') {
									file_doc = r.message;
								}
							} catch(e) {
								r = xhr.responseText;
							}

							file.doc = file_doc;

							if (this.on_success) {
								this.on_success(file_doc, r);
							}

							if (i == this.files.length - 1 && this.files.every(file => file.request_succeeded)) {
								this.close_dialog = true;
							}

						} else if (xhr.status === 403) {
							file.failed = true;
							let response = JSON.parse(xhr.responseText);
							file.error_message = \`Not permitted. \${response._error_message || ''}\`;

						} else if (xhr.status === 413) {
							file.failed = true;
							file.error_message = 'Size exceeds the maximum allowed file size.';

						} else {
							file.failed = true;
							file.error_message = xhr.status === 0 ? 'XMLHttpRequest Error' : \`\${xhr.status} : \${xhr.statusText}\`;

							let error = null;
							try {
								error = JSON.parse(xhr.responseText);
							} catch(e) {
								// pass
							}
							frappe.request.cleanup({}, error);
						}
					}
				}
				xhr.open('POST', '/api/method/upload_file', true);
				xhr.setRequestHeader('Accept', 'application/json');
				xhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);

				let form_data = new FormData();
				if (file.file_obj) {
					form_data.append('file', file.file_obj, file.name);
				}
				form_data.append('is_private', +file.private);
				form_data.append('folder', this.folder);

				if (file.file_url) {
					form_data.append('file_url', file.file_url);
				}

				if (file.file_name) {
					form_data.append('file_name', file.file_name);
				}

				if (this.doctype && this.docname) {
					form_data.append('doctype', this.doctype);
					form_data.append('docname', this.docname);
				}

				if (this.fieldname) {
					form_data.append('fieldname', this.fieldname);
				}

				if (this.method) {
					form_data.append('method', this.method);
				}

				if (file.optimize) {
					form_data.append('optimize', true);
				}

				if (this.attach_doc_image) {
					form_data.append('max_width', 200);
					form_data.append('max_height', 200);
				}

				xhr.send(form_data);
			});
		},
		capture_image() {
			const capture = new frappe.ui.Capture({
				animate: false,
				error: true
			});
			capture.show();
			capture.submit(data_urls => {
				data_urls.forEach(data_url => {
					let filename = \`capture_\${frappe.datetime.now_datetime().replaceAll(/[: -]/g, '_')}.png\`;
					this.url_to_file(data_url, filename, 'image/png').then((file) =>
						this.add_files([file])
					);
				});
			});
		},
		show_google_drive_picker() {
			this.close_dialog = true;
			let google_drive = new GoogleDrivePicker({
				pickerCallback: data => this.google_drive_callback(data),
				...this.google_drive_settings
			});
			google_drive.loadPicker();
		},
		google_drive_callback(data) {
			if (data.action == google.picker.Action.PICKED) {
				this.upload_file({
					file_url: data.docs[0].url,
					file_name: data.docs[0].name
				});
			} else if (data.action == google.picker.Action.CANCEL) {
				cur_frm.attachments.new_attachment()
			}
		},
		url_to_file(url, filename, mime_type) {
			return fetch(url)
					.then(res => res.arrayBuffer())
					.then(buffer => new File([buffer], filename, { type: mime_type }));
		},
	}
}
<\/script>
<style>
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}

.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
</style>
`,d.render||(d.render=r.render,d.staticRenderFns=r.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),d._scopeId=n;{let _;if(t&&(_=o?function(g){t.call(this,h(g,this.$root.$options.shadowRoot))}:function(g){t.call(this,s(g))}),_!==void 0)if(d.functional){let g=d.render;d.render=function(C,k){return _.call(k),g(C,k)}}else{let g=d.beforeCreate;d.beforeCreate=g?[].concat(g,_):[_]}}return d}function Zl(){let r=Zl.styles||(Zl.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,i){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let a=t?i.media||"default":n,o=r[a]||(r[a]={ids:[],parts:[],element:void 0});if(!o.ids.includes(n)){let s=i.source,u=o.ids.length;if(o.ids.push(n),t&&(o.element=o.element||document.querySelector("style[data-group="+a+"]")),!o.element){let h=document.head||document.getElementsByTagName("head")[0],d=o.element=document.createElement("style");d.type="text/css",i.media&&d.setAttribute("media",i.media),t&&(d.setAttribute("data-group",a),d.setAttribute("data-next-index","0")),h.appendChild(d)}if(t&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(s),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let h=document.createTextNode(s),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(h,d[u]):o.element.appendChild(h)}}}}var Zy=Jy({render:xp,staticRenderFns:Vy},Gy,qy,Yy,Ky,Xy,!1,Zl,void 0,void 0),Cp=Zy;var fo=class{constructor({wrapper:t,method:e,on_success:n,doctype:i,docname:a,fieldname:o,files:s,folder:u,restrictions:h,upload_notes:d,allow_multiple:_,as_dataurl:g,disable_file_browser:w,attach_doc_image:C,frm:k}={}){k&&k.attachments.max_reached(!0),t?this.wrapper=t.get?t.get(0):t:this.make_dialog(),C&&(h.allowed_file_types=["image/jpeg","image/png"]),this.$fileuploader=new Vue({el:this.wrapper,render:E=>E(Cp,{props:{show_upload_button:!Boolean(this.dialog),doctype:i,docname:a,fieldname:o,method:e,folder:u,on_success:n,restrictions:h,upload_notes:d,allow_multiple:_,as_dataurl:g,disable_file_browser:w,attach_doc_image:C}})}),this.uploader=this.$fileuploader.$children[0],this.uploader.$watch("files",E=>{let O=E.every(N=>N.private);this.dialog&&this.dialog.set_secondary_action_label(O?__("Set all public"):__("Set all private"))},{deep:!0}),this.uploader.$watch("trigger_upload",E=>{E&&this.upload_files()}),this.uploader.$watch("close_dialog",E=>{E&&this.dialog&&this.dialog.hide()}),this.uploader.$watch("hide_dialog_footer",E=>{E?(this.dialog&&this.dialog.footer.addClass("hide"),this.dialog.$wrapper.data("bs.modal")._config.backdrop="static"):(this.dialog&&this.dialog.footer.removeClass("hide"),this.dialog.$wrapper.data("bs.modal")._config.backdrop=!0)}),s&&s.length&&this.uploader.add_files(s)}upload_files(){return this.dialog&&this.dialog.get_primary_btn().prop("disabled",!0),this.dialog&&this.dialog.get_secondary_btn().prop("disabled",!0),this.uploader.upload_files()}make_dialog(){this.dialog=new frappe.ui.Dialog({title:__("Upload"),primary_action_label:__("Upload"),primary_action:()=>this.upload_files(),secondary_action_label:__("Set all private"),secondary_action:()=>{this.uploader.toggle_all_private()}}),this.wrapper=this.dialog.body,this.dialog.show(),this.dialog.$wrapper.on("hidden.bs.modal",function(){$(this).data("bs.modal",null),$(this).remove()})}};frappe.provide("frappe.ui");frappe.ui.FileUploader=fo;frappe.provide("frappe.ui");frappe.ui.Tree=class{constructor({parent:r,label:t,root_value:e,icon_set:n,toolbar:i,expandable:a,with_skeleton:o=1,args:s,method:u,get_label:h,on_render:d,on_click:_}){$.extend(this,arguments[0]),e==null&&(this.root_value=t),this.setup_treenode_class(),this.nodes={},this.wrapper=$('<div class="tree">').appendTo(this.parent),o&&this.wrapper.addClass("with-skeleton"),n||(this.icon_set={open:frappe.utils.icon("folder-open","md"),closed:frappe.utils.icon("folder-normal","md"),leaf:frappe.utils.icon("primitive-dot","xs")}),this.setup_root_node()}get_nodes(r,t){var e=Object.assign({},this.args);return e.parent=r,e.is_root=t,new Promise(n=>{frappe.call({method:this.method,args:e,callback:i=>{this.on_get_node&&this.on_get_node(i.message),n(i.message)}})})}get_all_nodes(r,t,e){var n=Object.assign({},this.args);return n.label=e||r,n.parent=r,n.is_root=t,n.tree_method=this.method,new Promise(i=>{frappe.call({method:"frappe.desk.treeview.get_all_nodes",args:n,callback:a=>{this.on_get_node&&this.on_get_node(a.message,!0),i(a.message)}})})}setup_treenode_class(){let r=this;this.TreeNode=class{constructor({parent:t,label:e,parent_label:n,expandable:i,is_root:a,data:o}){$.extend(this,arguments[0]),this.loaded=0,this.expanded=0,this.parent_label&&(this.parent_node=r.nodes[this.parent_label]),r.nodes[this.label]=this,r.make_node_element(this),r.on_render&&r.on_render(this)}}}setup_root_node(){this.root_node=new this.TreeNode({parent:this.wrapper,label:this.label,parent_label:null,expandable:!0,is_root:!0,data:{value:this.root_value}}),this.expand_node(this.root_node,!1)}refresh(){this.selected_node.parent_node&&this.load_children(this.selected_node.parent_node,!0)}make_node_element(r){r.$tree_link=$('<span class="tree-link">').attr("data-label",r.label).data("node",r).appendTo(r.parent),r.$ul=$('<ul class="tree-children">').hide().appendTo(r.parent),this.make_icon_and_label(r),this.toolbar&&(r.$toolbar=this.get_toolbar(r).insertAfter(r.$tree_link))}add_node(r,t){var e=$('<li class="tree-node">');return new this.TreeNode({parent:e.appendTo(r.$ul),parent_label:r.label,label:t.value,title:t.title,expandable:t.expandable,data:t})}reload_node(r){this.load_children(r)}toggle(){this.get_selected_node().toggle()}get_selected_node(){return this.selected_node}set_selected_node(r){this.selected_node=r}load_children(r,t=!1){let e=r.label,n=r.data.value,i=r.is_root;t?frappe.run_serially([()=>this.get_all_nodes(n,i,e),a=>this.render_children_of_all_nodes(a),()=>this.set_selected_node(r)]):frappe.run_serially([()=>this.get_nodes(n,i),a=>this.render_node_children(r,a),()=>this.set_selected_node(r)])}render_children_of_all_nodes(r){r.map(t=>this.render_node_children(this.nodes[t.parent],t.data))}render_node_children(r,t){r.$ul.empty(),t&&$.each(t,(e,n)=>{var i=this.add_node(r,n);i.$tree_link.data("node-data",n).data("node",i)}),r.expanded=!1,r.loaded=!0,this.expand_node(r)}on_node_click(r){this.expand_node(r),frappe.dom.activate(this.wrapper,r.$tree_link,"tree-link"),r.$toolbar&&this.show_toolbar(r)}expand_node(r,t=!0){this.set_selected_node(r),t&&this.on_click&&this.on_click(r),r.expandable&&this.toggle_node(r),this.select_link(r),r.expanded=!r.expanded,r.parent.toggleClass("opened",r.expanded)}toggle_node(r){if(r.expandable&&this.get_nodes&&!r.loaded)return this.load_children(r);r.$ul&&(r.$ul.children().length&&r.$ul.toggle(!r.expanded),this.icon_set&&(r.expanded?r.$tree_link.find(".icon").parent().addClass("node-parent").html(this.icon_set.closed):r.$tree_link.find(".icon").parent().html(this.icon_set.open)))}select_link(r){this.wrapper.find(".selected").removeClass("selected"),r.$tree_link.toggleClass("selected")}show_toolbar(r){this.cur_toolbar&&$(this.cur_toolbar).hide(),this.cur_toolbar=r.$toolbar,r.$toolbar.show()}get_node_label(r){return this.get_label?this.get_label(r):r.title&&r.title!=r.label?__(r.title)+` <span class='text-muted'>(${r.label})</span>`:__(r.title||r.label)}make_icon_and_label(r){let t="";this.icon_set&&(r.expandable?t=`<span class="node-parent">${this.icon_set.closed}</span>`:t=`<span>${this.icon_set.leaf}</span>`),$(t).appendTo(r.$tree_link),$(`<a class="tree-label"> ${this.get_node_label(r)}</a>`).appendTo(r.$tree_link),r.$tree_link.on("click",()=>{setTimeout(()=>{this.on_node_click(r)},100)}),r.$tree_link.hover(function(){$(this).parent().addClass("hover-active")},function(){$(this).parent().removeClass("hover-active")})}get_toolbar(r){let t=$('<span class="tree-node-toolbar btn-group"></span>').hide();return Object.keys(this.toolbar).map(e=>{let n=this.toolbar[e];if(!!n.label&&!(n.condition&&!n.condition(r))){var i=n.get_label?n.get_label():n.label,a=$("<button class='btn btn-default btn-xs'></button>").html(i).addClass("tree-toolbar-button "+(n.btnClass||"")).appendTo(t);a.on("click",()=>{n.click(r)})}}),t}};frappe.provide("frappe.pages");frappe.provide("frappe.views");window.cur_page=null;frappe.views.Container=class{constructor(){this.container=$("#body").get(0),this.page=null,this.pagewidth=$(this.container).width(),this.pagemargin=50;var t=this;$(document).on("page-change",function(){var e=frappe.get_route_str();$("body").attr("data-route",e),$("body").attr("data-sidebar",t.has_sidebar()?1:0)}),$(document).bind("rename",function(e,n,i,a){frappe.breadcrumbs.rename(n,i,a)})}add_page(t){var e=$('<div class="content page-container"></div>').attr("id","page-"+t).attr("data-page-route",t).hide().appendTo(this.container).get(0);return e.label=t,frappe.pages[t]=e,e}change_to(t){if(cur_page=this,t.tagName)var e=t;else var e=frappe.pages[t];if(!e){console.log(__("Page not found")+": "+t);return}return window.cur_dialog&&cur_dialog.display&&!cur_dialog.keep_open&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide()),this.page&&this.page!=e&&($(this.page).hide(),$(this.page).trigger("hide")),(!this.page||this.page!=e)&&(this.page=e,$(this.page).show()),$(document).trigger("page-change"),this.page._route=frappe.router.get_sub_path(),$(this.page).trigger("show"),!this.page.disable_scroll_to_top&&frappe.utils.scroll_to(0),frappe.breadcrumbs.update(),this.page}has_sidebar(){var t=0,e=frappe.get_route_str();if(t=frappe.ui.pages[e]&&!frappe.ui.pages[e].single_column,!t){var n=e.split("/").slice(0,2).join("/");t=$(`.page-container[data-page-route="${n}"] .layout-side-section`).length?1:0}return t}};frappe.breadcrumbs={all:{},preferred:{File:"",Dashboard:"Customization","Dashboard Chart":"Customization","Dashboard Chart Source":"Customization"},module_map:{Core:"Settings",Email:"Settings",Custom:"Settings",Workflow:"Settings",Printing:"Settings",Setup:"Settings","Event Streaming":"Tools",Automation:"Tools"},set_doctype_module(r,t){localStorage["preferred_breadcrumbs:"+r]=t},get_doctype_module(r){return localStorage["preferred_breadcrumbs:"+r]},add(r,t,e){let n;typeof r=="object"?n=r:n={module:r,doctype:t,type:e},this.all[frappe.breadcrumbs.current_page()]=n,this.update()},current_page(){return frappe.get_route_str()},update(){var r=this.all[frappe.breadcrumbs.current_page()];if(this.clear(),!r)return this.toggle(!1);if(r.type==="Custom")this.set_custom_breadcrumbs(r);else{this.set_workspace_breadcrumb(r);let t=frappe.get_route()[0];t=t?t.toLowerCase():null,r.doctype&&["print","form"].includes(t)?(this.set_list_breadcrumb(r),this.set_form_breadcrumb(r,t)):r.doctype&&t==="list"?this.set_list_breadcrumb(r):r.doctype&&t=="dashboard-view"&&(this.set_list_breadcrumb(r),this.set_dashboard_breadcrumb(r))}this.toggle(!0)},set_custom_breadcrumbs(r){let t=`<li><a href="${r.route}">${r.label}</a></li>`;this.$breadcrumbs.append(t)},set_workspace_breadcrumb(r){r.workspace||this.set_workspace(r),r.workspace&&!r.module_info.blocked&&frappe.visible_modules.includes(r.module_info.module)&&$(`<li><a href="/app/${frappe.router.slug(r.workspace)}">${__(r.workspace)}</a></li>`).appendTo(this.$breadcrumbs)},set_workspace(r){this.setup_modules();var t=this.get_doctype_module(r.doctype);t?r.module=t:this.preferred[r.doctype]!==void 0&&(r.module=this.preferred[r.doctype]),r.module&&(this.module_map[r.module]&&(r.module=this.module_map[r.module]),r.module_info=frappe.get_module(r.module),r.module_info&&frappe.boot.module_page_map[r.module]&&(r.workspace=frappe.boot.module_page_map[r.module]))},set_list_breadcrumb(r){let t=r.doctype,e=frappe.get_doc("DocType",t);if(!(t==="User"&&!frappe.user.has_role("System Manager")||e&&e.issingle)){let n,i=frappe.router.slug(frappe.router.doctype_layout||t);if(frappe.boot.treeviews.indexOf(t)!==-1){let a=frappe.model.user_settings[t].last_view||"Tree";n=`${i}/view/${a}`}else n=i;$(`<li><a href="/app/${n}">${__(t)}</a></li>`).appendTo(this.$breadcrumbs)}},set_form_breadcrumb(r,t){let e=r.doctype,n=frappe.get_route()[2],i=`/app/${frappe.router.slug(e)}/${n}`;if($(`<li><a href="${i}">${__(n)}</a></li>`).appendTo(this.$breadcrumbs),t==="form"){let a=this.$breadcrumbs.find("li").last();a.addClass("disabled"),a.css("cursor","copy"),a.click(o=>{o.stopImmediatePropagation(),frappe.utils.copy_to_clipboard(a.text())})}},set_dashboard_breadcrumb(r){let t=r.doctype,e=frappe.get_route()[1],n=`/app/${frappe.router.slug(t)}/${e}`;$(`<li><a href="${n}">${__(e)}</a></li>`).appendTo(this.$breadcrumbs)},setup_modules(){frappe.visible_modules||(frappe.visible_modules=$.map(frappe.boot.allowed_workspaces,r=>r.module))},rename(r,t,e){var n=["Form",r,t].join("/"),i=["Form",r,e].join("/");this.all[i]=this.all[n],delete frappe.breadcrumbs.all[n],this.update()},clear(){this.$breadcrumbs=$("#navbar-breadcrumbs").empty()},toggle(r){r?$("body").addClass("no-breadcrumbs"):$("body").removeClass("no-breadcrumbs")}};frappe.provide("frappe.pages");frappe.provide("frappe.views");frappe.views.Factory=class{constructor(t){$.extend(this,t)}show(){this.route=frappe.get_route(),this.page_name=frappe.get_route_str(),!(this.before_show&&this.before_show()===!1)&&(frappe.pages[this.page_name]?(frappe.container.change_to(this.page_name),this.on_show&&this.on_show()):this.route[1]?this.make(this.route):frappe.show_not_found(this.route))}make_page(t,e){return frappe.make_page(t,e)}};frappe.make_page=function(r,t){t||(t=frappe.get_route_str());let e=frappe.container.add_page(t);return frappe.ui.make_app_page({parent:e,single_column:!r}),frappe.container.change_to(t),e};frappe.provide("frappe.views.pageview");frappe.provide("frappe.standard_pages");frappe.views.pageview={with_page:function(r,t){if(frappe.standard_pages[r]){frappe.pages[r]||frappe.standard_pages[r](),t();return}if(locals.Page&&locals.Page[r]&&locals.Page[r].script||r==window.page_name)t();else if(localStorage["_page:"+r]&&frappe.boot.developer_mode!=1)frappe.model.sync(JSON.parse(localStorage["_page:"+r])),t();else if(r)return frappe.call({method:"frappe.desk.desk_page.getpage",args:{name:r},callback:function(e){e.docs._dynamic_page||(localStorage["_page:"+r]=JSON.stringify(e.docs)),t()},freeze:!0})},show:function(r){r||(r=frappe.boot?frappe.boot.home_page:window.page_name),frappe.model.with_doctype("Page",function(){frappe.views.pageview.with_page(r,function(t){t&&t.exc?t["403"]||frappe.show_not_found(r):frappe.pages[r]||new frappe.views.Page(r),frappe.container.change_to(r)})})}};frappe.views.Page=class{constructor(t){this.name=t;var e=this;if(t==window.page_name)this.wrapper=document.getElementById("page-"+t),this.wrapper.label=document.title||window.page_name,this.wrapper.page_name=window.page_name,frappe.pages[window.page_name]=this.wrapper;else{if(this.pagedoc=locals.Page[this.name],!this.pagedoc){frappe.show_not_found(t);return}this.wrapper=frappe.container.add_page(this.name),this.wrapper.page_name=this.pagedoc.name,this.pagedoc.content&&(this.wrapper.innerHTML=this.pagedoc.content),frappe.dom.eval(this.pagedoc.__script||this.pagedoc.script||""),frappe.dom.set_style(this.pagedoc.style||""),frappe.breadcrumbs.add(this.pagedoc.module||null)}this.trigger_page_event("on_page_load"),$(this.wrapper).on("show",function(){window.cur_frm=null,e.trigger_page_event("on_page_show"),e.trigger_page_event("refresh")})}trigger_page_event(t){var e=this;e.wrapper[t]&&e.wrapper[t](e.wrapper)}};frappe.show_not_found=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! I could not find what you were looking for."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_not_permitted=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! You are not permitted to view this page."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_message_page=function(r){r.page_name||(r.page_name=frappe.get_route_str()),r.icon?r.img=repl('<span class="%(icon)s message-page-icon"></span> ',r):r.img&&(r.img=repl('<img src="%(img)s" class="message-page-image">',r));var t=frappe.pages[r.page_name]||frappe.container.add_page(r.page_name);$(t).html(repl('<div class="page message-page">			<div class="text-center message-page-content">				%(img)s				<p class="lead">%(message)s</p>				<a class="btn btn-default btn-sm btn-home" href="#">%(home)s</a>			</div>		</div>',{img:r.img||"",message:r.message||"",home:__("Home")})),frappe.container.change_to(r.page_name)};var I2=jr(Sp());frappe.provide("frappe.search");frappe.ui.Notifications=class{constructor(){this.tabs={},this.notification_settings=frappe.boot.notification_settings,this.make()}make(){this.dropdown=$(".navbar").find(".dropdown-notifications").removeClass("hidden"),this.dropdown_list=this.dropdown.find(".notifications-list"),this.header_items=this.dropdown_list.find(".header-items"),this.header_actions=this.dropdown_list.find(".header-actions"),this.body=this.dropdown_list.find(".notification-list-body"),this.panel_events=this.dropdown_list.find(".panel-events"),this.panel_notifications=this.dropdown_list.find(".panel-notifications"),this.user=frappe.session.user,this.setup_headers(),this.setup_dropdown_events()}setup_headers(){$(`<span class="notification-settings pull-right" data-action="go_to_settings">
			${frappe.utils.icon("setting-gear")}
		</span>`).on("click",n=>{n.stopImmediatePropagation(),this.dropdown.dropdown("hide"),frappe.set_route("Form","Notification Settings",frappe.session.user)}).appendTo(this.header_actions).attr("title",__("Notification Settings")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),$(`<span class="mark-all-read pull-right" data-action="mark_all_as_read">
			${frappe.utils.icon("mark-as-read")}
		</span>`).on("click",n=>this.mark_all_as_read(n)).appendTo(this.header_actions).attr("title",__("Mark all as read")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.categories=[{label:__("Notifications"),id:"notifications",view:Tp,el:this.panel_notifications},{label:__("Today's Events"),id:"todays_events",view:Ep,el:this.panel_events}];let t=n=>`<li class="notifications-category ${n.id=="notifications"?"active":""}"
					id="${n.id}"
					data-toggle="collapse"
				>${n.label}</li>`,e=$('<ul class="notification-item-tabs nav nav-tabs" role="tablist"></ul>');this.categories=this.categories.map(n=>(n.$tab=$(t(n)),n.$tab.on("click",i=>{i.stopImmediatePropagation(),this.switch_tab(n)}),e.append(n.$tab),n)),e.appendTo(this.header_items),this.categories.forEach(n=>{this.make_tab_view(n)}),this.switch_tab(this.categories[0])}switch_tab(t){this.categories.forEach(e=>{e.$tab.removeClass("active")}),t.$tab.addClass("active"),Object.keys(this.tabs).forEach(e=>this.tabs[e].hide()),this.tabs[t.id].show()}make_tab_view(t){let e=new t.view(t.el,this.dropdown,this.notification_settings);this.tabs[t.id]=e}mark_all_as_read(t){t.stopImmediatePropagation(),this.dropdown_list.find(".unread").removeClass("unread"),frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_all_as_read")}setup_dropdown_events(){this.dropdown.on("hide.bs.dropdown",t=>{let e=$(t.currentTarget).data("closable");return $(t.currentTarget).data("closable",!0),e}),this.dropdown.on("click",t=>{$(t.currentTarget).data("closable",!0)})}};frappe.ui.notifications={get_notification_config(){return frappe.xcall("frappe.desk.notifications.get_notification_info").then(r=>(frappe.ui.notifications.config=r,r))},show_open_count_list(r){frappe.ui.notifications.config?this.route_to_list_with_filters(r):this.get_notification_config().then(()=>{this.route_to_list_with_filters(r)})},route_to_list_with_filters(r){let t=frappe.ui.notifications.config.conditions[r];t&&$.isPlainObject(t)&&(frappe.route_options||(frappe.route_options={}),$.extend(frappe.route_options,t)),frappe.set_route("List",r)}};var Ql=class{constructor(t,e,n){this.wrapper=t,this.parent=e,this.settings=n,this.max_length=20,this.container=$("<div></div>").appendTo(this.wrapper),this.make()}show(){this.container.show()}hide(){this.container.hide()}},Tp=class extends Ql{make(){this.notifications_icon=this.parent.find(".notifications-icon"),this.notifications_icon.attr("title",__("Notifications")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.setup_notification_listeners(),this.get_notifications_list(this.max_length).then(t=>{this.dropdown_items=t,this.render_notifications_dropdown(),this.settings.seen==0&&this.toggle_notification_icon(!1)})}update_dropdown(){this.get_notifications_list(1).then(t=>{let e=t[0];this.dropdown_items.unshift(e),this.dropdown_items.length>this.max_length&&(this.container.find(".recent-notification").last().remove(),this.dropdown_items.pop()),this.insert_into_dropdown()})}change_activity_status(){this.container.find(".activity-status")&&this.container.find(".activity-status").replaceWith(`<a class="recent-item text-center text-muted"
					href="/app/List/Notification Log">
					<div class="full-log-btn">${__("View Full Log")}</div>
				</a>`)}mark_as_read(t,e){frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_as_read",{docname:t}).then(()=>{e.removeClass("unread")})}insert_into_dropdown(){let t=this.dropdown_items[0],e=this.get_dropdown_item_html(t);$(e).prependTo(this.container),this.change_activity_status()}get_dropdown_item_html(t){let e=this.get_item_link(t),n=t.read?"":"unread",i=t.subject,a=i.match(/<b class="subject-title">(.*?)<\/b>/);i=a?i.replace(a[1],frappe.ellipsis(strip_html(a[1]),100)):i;let o=frappe.datetime.comment_when(t.creation),s=`<div class="message">
			<div>${i}</div>
			<div class="notification-timestamp text-muted">
				${o}
			</div>
		</div>`,u=t.from_user,h=frappe.avatar(u,"avatar-medium user-avatar"),d=$(`<a class="recent-item notification-item ${n}"
				href="${e}"
				data-name="${t.name}"
			>
				<div class="notification-body">
					${h}
					${s}
				</div>
				<div class="mark-as-read" title="${__("Mark as Read")}">
				</div>
			</a>`);if(!t.read){let _=d.find(".mark-as-read");_.tooltip({delay:{show:600,hide:100},trigger:"hover"}),_.on("click",g=>{g.preventDefault(),g.stopImmediatePropagation(),this.mark_as_read(t.name,d)})}return d.on("click",()=>{!t.read&&this.mark_as_read(t.name,d),this.notifications_icon.trigger("click")}),d}render_notifications_dropdown(){this.settings&&!this.settings.enabled?this.container.html(`<li class="recent-item notification-item">
				<span class="text-muted">
					${__("Notifications Disabled")}
				</span></li>`):this.dropdown_items.length?(this.container.empty(),this.dropdown_items.forEach(t=>{this.container.append(this.get_dropdown_item_html(t))}),this.container.append(`<a class="list-footer"
					href="/app/List/Notification Log">
						<div class="full-log-btn">${__("See all Activity")}</div>
					</a>`)):this.container.append($(`<div class="notification-null-state">
					<div class="text-center">
						<img src="/assets/frappe/images/ui-states/notification-empty-state.svg" alt="Generic Empty State" class="null-state">
						<div class="title">${__("No New notifications")}</div>
						<div class="subtitle">
							${__("Looks like you haven\u2019t received any notifications.")}
					</div></div></div>`))}get_notifications_list(t){return frappe.db.get_list("Notification Log",{fields:["*"],limit:t,order_by:"creation desc"})}get_item_link(t){let e=t.type=="Alert"?"Notification Log":t.document_type,n=t.type=="Alert"?t.name:t.document_name;return frappe.utils.get_form_link(e,n)}toggle_notification_icon(t){this.notifications_icon.find(".notifications-seen").toggle(t),this.notifications_icon.find(".notifications-unseen").toggle(!t)}toggle_seen(t){frappe.call("frappe.desk.doctype.notification_settings.notification_settings.set_seen_value",{value:cint(t),user:frappe.session.user})}setup_notification_listeners(){frappe.realtime.on("notification",()=>{this.toggle_notification_icon(!1),this.update_dropdown()}),frappe.realtime.on("indicator_hide",()=>{this.toggle_notification_icon(!0)}),this.parent.on("show.bs.dropdown",()=>{this.toggle_seen(!0),this.notifications_icon.find(".notifications-unseen").is(":visible")&&(this.toggle_notification_icon(!0),frappe.call("frappe.desk.doctype.notification_log.notification_log.trigger_indicator_hide"))})}},Ep=class extends Ql{make(){let t=frappe.datetime.get_today();frappe.xcall("frappe.desk.doctype.event.event.get_events",{start:t,end:t}).then(e=>{this.render_events_html(e)})}render_events_html(t){let e="";if(t.length){let n=i=>{let a=__("All Day");if(!i.all_day){let u=frappe.datetime.get_time(i.starts_on),h=frappe.datetime.get_day_diff(i.ends_on,i.starts_on),d=frappe.datetime.get_time(i.ends_on);h>1&&(d=__("Rest of the day")),a=`${u} - ${d}`}let o="";i.particpants&&(o=frappe.avatar_group(i.particpants,3));let s="";return i.location&&(s=`, ${i.location}`),`<a class="recent-item event" href="/app/event/${i.name}">
					<div class="event-border" style="border-color: ${i.color}"></div>
					<div class="event-item">
						<div class="event-subject">${i.subject}</div>
						<div class="event-time">${a}${s}</div>
						${o}
					</div>
				</a>`};e=t.map(n).join("")}else e=`
				<div class="notification-null-state">
					<div class="text-center">
					<img src="/assets/frappe/images/ui-states/event-empty-state.svg" alt="Generic Empty State" class="null-state">
					<div class="title">${__("No Upcoming Events")}</div>
					<div class="subtitle">
						${__("There are no upcoming events for you.")}
				</div></div></div>
			`;this.container.html(e)}};frappe.provide("frappe.search");frappe.search.SearchDialog=class{constructor(r){$.extend(this,r),this.make()}make(){this.search_dialog=new frappe.ui.Dialog({minimizable:!0,size:"large"}),this.set_header(),this.$wrapper=$(this.search_dialog.$wrapper).addClass("search-dialog"),this.$body=$(this.search_dialog.body),this.$input=this.$wrapper.find(".search-input"),this.setup()}set_header(){this.search_dialog.header.addClass("search-header").find(".title-section").html(`<div class="input-group text-muted">
					<input type="text" class="form-control search-input">
				</div>
				<span class="search-icon">
					${frappe.utils.icon("search")}
				</span>`)}setup(){this.modal_state=0,this.current_keyword="",this.more_count=20,this.full_lists={},this.nav_lists={},this.init_search_objects(),this.bind_input(),this.bind_events()}init_search_objects(){this.searches={global_search:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:()=>__("No Results found"),get_results:(r,t)=>{let e=0,n=1e3,i=frappe.search.utils.get_nav_results(r);frappe.search.utils.get_global_results(r,e,n).then(a=>{i=i.concat(a),t(i,r)},a=>{console.error(a)})}},tags:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:r=>"<div>"+__("No documents found tagged with {0}",[r])+"</div>",get_results:(r,t)=>{var e=frappe.search.utils.get_nav_results(r);frappe.tags.utils.get_tag_results(r).then(n=>{e=e.concat(n),t(e,r)},n=>{console.error(n)})}}}}update(r){this.$wrapper.find(".loading-state").addClass("hide"),this.$body.append(r),this.$body.find(".search-results").length>1?(this.$body.find(".search-results").first().addClass("hide"),r.removeClass("hide"),this.$body.find(".search-results").first().remove()):r.removeClass("hide")}put_placeholder(r){var t=$(`<div class="row search-results hide">
			<div class="empty-state">
				<div class="text-center">
					<img src="/assets/frappe/images/ui-states/search-empty-state.svg"
						alt="Generic Empty State"
						class="null-state"
					>
					<div class="empty-state-text">${r}</div>
				</div>
			</div>
		</div>`);this.update(t)}bind_input(){this.$input.on("input",r=>{let t=$(r.currentTarget);clearTimeout(t.data("timeout")),t.data("timeout",setTimeout(()=>{if(this.$input.val()===this.current_keyword)return;let e=this.$input.val();e.length>1?this.get_results(e):(this.current_keyword="",this.put_placeholder(this.search.empty_state_text))},300))})}bind_events(){this.$body.on("click",".list-link",r=>{let t=$(r.currentTarget);this.$body.find(".search-sidebar").find(".list-link").removeClass("active selected"),t.addClass("active selected");let e=t.attr("data-category");this.$body.find(".results-area").empty().html(this.full_lists[e]),this.$body.find(".module-section-link").first().focus()}),this.$body.on("click",".section-more",r=>{let e=$(r.currentTarget).attr("data-category");this.$body.find(".search-sidebar").find('*[data-category="'+e+'"]').trigger("click")}),this.$body.on("click",".all-results-link",()=>{this.$body.find(".search-sidebar").find('*[data-category="All Results"]').trigger("click")}),this.$body.on("click",".list-more",r=>{let t=$(r.currentTarget),e=t.attr("data-category"),n=t.attr("data-search");var i=this.$body.find(".result").length;if(n==="Global")frappe.search.utils.get_global_results(this.current_keyword,i,this.more_count,e).then(a=>{a.length&&this.add_more_results(a)},a=>{console.error(a)});else{let a=this.nav_lists[e].slice(0,this.more_count);this.nav_lists[e].splice(0,this.more_count),this.add_more_results([{title:e,results:a}])}}),this.$body.on("click",".switch-to-global-search",()=>{this.search=this.searches.global_search,this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(this.current_keyword)})}init_search(r,t){this.search=this.searches[t],this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(r),this.search_dialog.show(),this.$input.val(r),setTimeout(()=>this.$input.select(),500)}get_results(r){this.current_keyword=r,this.$body.find(".empty-state").length>0?this.put_placeholder(__("Searching ...")):this.$wrapper.find(".loading-state").removeClass("hide"),this.current_keyword.charAt(0)==="#"?this.search=this.searches.tags:this.search=this.searches.global_search,this.search.get_results(r,this.parse_results.bind(this))}parse_results(r,t){r=r.filter(function(e){return e.results.length>0}),r.length>0?this.render_data(r):this.put_placeholder(this.search.no_results_status(t))}render_data(r){let t=$(frappe.render_template("search")).addClass("hide"),e=t.find(".search-sidebar").empty(),n='<li class="search-sidebar-item standard-sidebar-item list-link" data-category="{0}"><a><span class="ellipsis">{1}</span></a></li>';this.modal_state=0,this.full_lists={"All Results":$('<div class="results-summary"></div>')},this.nav_lists={},r.forEach(i=>{e.append($(__(n,[i.title,__(i.title)]))),this.add_section_to_summary(i.title,i.results),this.full_lists[i.title]=this.render_full_list(i.title,i.results,i.fetch_type)}),r.length>1&&e.prepend($(__(n,["All Results",__("All Results")]))),this.update(t.clone()),this.$body.find(".list-link").first().trigger("click")}render_full_list(r,t,e){let n=20,i=$(`<div class="results-summary">
			<div class="result-section full-list ${r}-section col-sm-12">
				<div class="result-title"> ${__(r)}</div>
				<div class="result-body">
				</div>
			</div>
		</div>`);return t.slice(0,n).forEach(a=>{i.find(".result-body").append(this.render_result(r,a))}),t.length>0&&(e==="Nav"&&(this.nav_lists[r]=t),t.length>n&&$(`<a class="list-more" data-search="${e}"
					data-category="${r}" data-count="${n}">
						${__("More")}
				</a>`).appendTo(i.find(".result-body"))),i}add_section_to_summary(r,t){let e=4,n="",i=o=>this.render_result(r,o);t.length>e&&(n=`<div>
				<a class="section-more" data-category="${r}">${__("More")}</a>
			</div>`),$(`<div class="col-sm-12 result-section" data-type="${r}">
			<div class="result-title">${__(r)}</div>
			<div class="result-body">
				${n}
			</div>
		</div>`).appendTo(this.full_lists["All Results"]).find(".result-body").prepend(t.slice(0,e).map(i))}get_link(r){let t="";return r.route?t=`href="/app/${r.route.join("/")}"`:r.data_path&&(t=`data-path=${r.data_path}"`),t}render_result(r,t){let e="";if(t.image!==void 0){let s=frappe.get_avatar("avatar-medium",t.label,t.image);e=`<a ${this.get_link(t)}>
				<div class="result-image">
					${s}
				</div>
			</a>`}let n=`<a ${this.get_link(t)} class="result-section-link">${t.label}</a>`,a=`<div class="result-text">
			${t.description?`<b>${n}</b><div class="description"> ${t.description} </div>`:n}
		</div>`,o=$(`<div class="result ${r}-result">
			${e}
			${a}
			${t.subtypes||""}
		</div>`);return t.description||this.handle_result_click(t,o),o}handle_result_click(r,t){r.route_options&&(frappe.route_options=r.route_options),t.on("click",()=>{if(r.onclick)r.onclick(r.match);else{var e=window.location.hash;frappe.set_route(r.route),window.location.hash==e&&frappe.router.route()}})}add_more_results(r){let t=$('<div class="more-results last"></div>');if(r[0].results&&r[0].results.forEach(e=>{t.append(this.render_result(r[0].title,e))}),this.$body.find(".list-more").before(t),r[0].results.length<this.more_count){this.$body.find(".list-more").hide();let e=this.$body.find(".result").length,n=$('<div class="results-status">'+e+" results found</div>");this.$body.find(".more-results:last").append(n)}this.$body.find(".more-results.last").slideDown(200,function(){})}};frappe.provide("frappe.tags");frappe.tags.utils={get_tags:function(r){r=r.slice(1);let t=[];for(let e in frappe.tags.tags){let n=frappe.tags.tags[e],i=frappe.search.utils.fuzzy_search(r,n);i&&t.push({type:"Tag",label:__("#{0}",[frappe.search.utils.bolden_match_part(__(n),r)]),value:__("#{0}",[__(n)]),index:1+i,match:n,onclick(){frappe.searchdialog.search.init_search("#".concat(n),"tags")}})}return t},fetch_tags(){frappe.call({method:"frappe.desk.doctype.tag.tag.get_tags_list_for_awesomebar",callback:function(r){r&&r.message&&(frappe.tags.tags=$.extend([],r.message))}})},get_tag_results:function(r){function t(e){var n=[],i,a;function o(u){return n.find(function(h){return h.title===u})}function s(u){var h=110,d=null;if(u.length>h)d=u.slice(0,h)+"...";else{var _=u.length;d=u.slice(0,_)+"..."}return d}return e.forEach(function(u){var h="";u.content&&(h=s(u.content)),i={label:u.name,value:u.name,description:h,route:["Form",u.doctype,u.name]},a=o(u.doctype),a?a.results.push(i):(a={title:u.doctype,results:[i],fetch_type:"Global"},n.push(a))}),n}return new Promise(function(e){frappe.call({method:"frappe.desk.doctype.tag.tag.get_documents_for_tag",args:{tag:r},callback:function(n){n.message?e(t(n.message)):e([])}})})}};frappe.templates.search=`<div class="search-results flex">
	<div class="col-md-3 col-sm-3 hidden-xs layout-side-section">
		<ul class="overlay-sidebar list-unstyled search-sidebar"></ul>
	</div>
	<div class="col-md-9 col-sm-9 layout-main-section results-area">

	</div>
</div>
`;frappe.provide("frappe.search");frappe.search.utils={setup_recent:function(){this.recent=JSON.parse(frappe.boot.user.recent||"[]")||[]},get_recent_pages:function(r){r===null&&(r="");var t=this,e=[],n=[];function i(a,o,s){a.forEach(function(u,h){var d=$.isArray(u)?u[0]:u;if(d=__(d||"").toLowerCase().replace(/-/g," "),o===d||d.indexOf(o)!==-1){var _=s(u);_&&($.isPlainObject(_)&&(_=[_]),_.forEach(function(g){g.match=u,g.recent=!0}),n=_.concat(n))}})}return t.recent.forEach(function(a,o){e.push([a[1],["Form",a[0],a[1]]])}),e=e.reverse(),frappe.route_history.forEach(function(a,o){a[0]==="Form"?e.push([a[2],a]):["List","Tree","Workspaces","query-report"].includes(a[0])||a[2]==="Report"?a[1]&&e.push([a[1],a]):a[0]&&e.push([frappe.route_titles[a.join("/")]||a[0],a])}),i(e,r,function(a){var o={route:a[1]};if(a[1][0]==="Form")a[1].length>2&&a[1][1]!==a[1][2]?(o.label=__(a[1][1])+" "+a[1][2].bold(),o.value=__(a[1][1])+" "+a[1][2]):(o.label=__(a[1][1]).bold(),o.value=__(a[1][1]));else if(["List","Tree","Workspaces","query-report"].includes(a[1][0])&&a[1].length>1){var s=a[1][0],u=s;s==="Workspaces"?u="Workspace":(s==="query-report"||a[1][2]==="Report")&&(u="Report"),o.label=__(`{0} ${u}`,[__(a[1][1]).bold()]),o.value=__(`{0} ${u}`,[__(a[1][1])])}else a[0]?(o.label=a[0].bold(),o.value=a[0]):console.log("Illegal match",a);return o.index=80,o}),n},get_frequent_links(){let r=[];return frappe.boot.frequently_visited_links.forEach(t=>{let e=frappe.utils.get_route_label(t.route);r.push({route:t.route,label:e,value:e,index:t.count})}),r.length?r:this.get_recent_pages("")},get_search_in_list:function(r){var t=this,e=[];if(in_list(r.split(" "),"in")&&r.slice(-2)!=="in"){var n=r.split(" in ");frappe.boot.user.can_read.forEach(function(i){if(frappe.boot.user.can_search.includes(i)){var a=t.fuzzy_search(n[1],i);a&&e.push({type:"In List",label:__("Find {0} in {1}",[__(n[0]),t.bolden_match_part(__(i),n[1])]),value:__("Find {0} in {1}",[__(n[0]),__(i)]),route_options:{name:["like","%"+n[0]+"%"]},index:1+a,route:["List",i]})}})}return e},get_creatables:function(r){var t=this,e=[],n=r.split(" ")[0];return n.toLowerCase()===__("new")&&frappe.boot.user.can_create.forEach(function(i){var a=t.fuzzy_search(r.substr(4),i);a&&e.push({type:"New",label:__("New {0}",[t.bolden_match_part(__(i),r.substr(4))]),value:__("New {0}",[__(i)]),index:1+a,match:i,onclick:function(){frappe.new_doc(i,!0)}})}),e},get_doctypes:function(r){var t=this,e=[],n,i,a=function(o,s,u){let h=o==="List"&&i.endsWith("List"),d=t.bolden_match_part(__(i),r);if(h)var _=d;else _=__(`{0} ${h?"":o}`,[d]);return{type:o,label:_,value:__(`{0} ${o}`,[i]),index:n+u,match:i,route:s}};return frappe.boot.user.can_read.forEach(function(o){if(n=t.fuzzy_search(r,o),n){if(i=o,in_list(frappe.boot.single_types,o))e.push(a("",["Form",o,o],.05));else if(frappe.boot.user.can_search.includes(o)){if(in_list(frappe.boot.user.can_create,o)){var s=o;e.push({type:"New",label:__("New {0}",[t.bolden_match_part(__(o),r)]),value:__("New {0}",[__(o)]),index:n+.015,match:o,onclick:function(){frappe.new_doc(s,!0)}})}in_list(frappe.boot.treeviews,o)?e.push(a("Tree",["Tree",o],.05)):(e.push(a("List",["List",o],.05)),frappe.model.can_get_report(o)&&e.push(a("Report",["List",o,"Report"],.04)))}}}),e},get_reports:function(r){var t=this,e=[],n;return Object.keys(frappe.boot.user.all_reports).forEach(function(i){var a=t.fuzzy_search(r,i);if(a>0){var o=frappe.boot.user.all_reports[i];o.report_type=="Report Builder"?n=["List",o.ref_doctype,"Report",i]:n=["query-report",i],e.push({type:"Report",label:__("Report {0}",[t.bolden_match_part(__(i),r)]),value:__("Report {0}",[__(i)]),index:a,route:n})}}),e},get_pages:function(r){var t=this,e=[];this.pages={},$.each(frappe.boot.page_info,function(i,a){t.pages[a.title]=a,a.name=i}),Object.keys(this.pages).forEach(function(i){if(!(i=="Hub"||i=="hub")){var a=t.fuzzy_search(r,i);if(a){var o=t.pages[i];e.push({type:"Page",label:__("Open {0}",[t.bolden_match_part(__(i),r)]),value:__("Open {0}",[__(i)]),match:i,index:a,route:[o.route||o.name]})}}});var n="Calendar";return __("calendar").indexOf(r.toLowerCase())===0&&e.push({type:"Calendar",value:__("Open {0}",[__(n)]),index:t.fuzzy_search(r,"Calendar"),match:n,route:["List","Event",n]}),n="Hub",__("hub").indexOf(r.toLowerCase())===0&&e.push({type:"Hub",value:__("Open {0}",[__(n)]),index:t.fuzzy_search(r,"Hub"),match:n,route:[n,"Item"]}),__("email inbox").indexOf(r.toLowerCase())===0&&e.push({type:"Inbox",value:__("Open {0}",[__("Email Inbox")]),index:t.fuzzy_search(r,"email inbox"),match:n,route:["List","Communication","Inbox"]}),e},get_workspaces:function(r){var t=this,e=[];return frappe.boot.allowed_workspaces.forEach(function(n){var i=t.fuzzy_search(r,n.name);if(i>0){var a={type:"Workspace",label:__("Open {0}",[t.bolden_match_part(__(n.name),r)]),value:__("Open {0}",[__(n.name)]),index:i,route:[frappe.router.slug(n.name)]};e.push(a)}}),e},get_dashboards:function(r){var t=this,e=[];return frappe.boot.dashboards.forEach(function(n){var i=t.fuzzy_search(r,n.name);if(i>0){var a={type:"Dashboard",label:__("{0} Dashboard",[t.bolden_match_part(__(n.name),r)]),value:__("{0} Dashboard",[__(n.name)]),index:i,route:["dashboard-view",n.name]};e.push(a)}}),e},get_global_results:function(r,t,e,n=""){var i=this;function a(o){var s=[],u,h;function d(g){return s.find(function(w){return w.title===g})}function _(g,w){for(var C=g.split(" ||| "),k=300,E=120,O=[],N=0,m="",y=0;y<C.length;y++){var b=C[y];if(b.toLowerCase().indexOf(r)!==-1){if(b.indexOf(" &&& ")!==-1)var S=b.indexOf(" &&& "),A=b.slice(S+5);else var S=b.indexOf(" : "),A=b.slice(S+3);if(A.length>E){var I="",T=A.indexOf(r);I+=T<E/2?A.slice(0,T):"..."+A.slice(T-E/2,T),I+=A.slice(T,T+E/2),I+=T+E/2<A.length?"...":"",A=I}var R=b.slice(0,S),B=k-N;if(N+=R.length+A.length+2,N<k)m='<span class="field-name text-muted">'+i.bolden_match_part(R,r)+": </span> "+i.bolden_match_part(A,r),O.indexOf(m)===-1&&w!==A&&O.push(m);else{R.length<B?(B-=R.length,m='<span class="field-name text-muted">'+i.bolden_match_part(R,r)+": </span> ",A=A.slice(0,B),A=A.slice(0,A.lastIndexOf(" "))+" ...",m+=i.bolden_match_part(A,r),O.push(m)):O.push("...");break}}}return O.join(", ")}return o.forEach(function(g){u={label:g.name,value:g.name,description:_(g.content,g.name),route:["Form",g.doctype,g.name]},(g.image||g.image===null)&&(u.image=g.image),h=d(g.doctype),h?h.results.push(u):(h={title:g.doctype,results:[u],fetch_type:"Global"},s.push(h))}),s}return new Promise(function(o,s){frappe.call({method:"frappe.utils.global_search.search",args:{text:r,start:t,limit:e,doctype:n},callback:function(u){u.message?o(a(u.message)):o([])}})})},get_nav_results:function(r){function t(o){var s=[],u=[];return o.forEach(function(h){if(h.route){h.route[0]==="List"&&h.route[2]&&h.route.splice(2);var d=h.route.join("/");if(s.indexOf(d)===-1)s.push(d),u.push(h);else{var _=s.indexOf(d);u[_].index>h.index&&(u[_]=h)}}else u.push(h)}),u.sort(function(h,d){return d.index-h.index})}var e=[],n=[],i=t(this.get_doctypes(r));i.forEach(function(o){o.type===""?n.push(o):e.push(o)});var a=r.split(" in ")[0];return[{title:__("Recents"),fetch_type:"Nav",results:t(this.get_recent_pages(r))},{title:__("Create a new ..."),fetch_type:"Nav",results:t(this.get_creatables(r))},{title:__("Lists"),fetch_type:"Nav",results:e},{title:__("Reports"),fetch_type:"Nav",results:t(this.get_reports(r))},{title:__("Administration"),fetch_type:"Nav",results:t(this.get_pages(r))},{title:__("Workspace"),fetch_type:"Nav",results:t(this.get_workspaces(r))},{title:__("Dashboard"),fetch_type:"Nav",results:t(this.get_dashboards(r))},{title:__("Setup"),fetch_type:"Nav",results:n},{title:__("Find '{0}' in ...",[a]),fetch_type:"Nav",results:t(this.get_search_in_list(r))}]},fuzzy_search:function(r,t){r=r||"";var e=__(t||""),n=e.replace(/-/g," "),i=e.length,a=r.length,o=a/i,s=3,u=2;if(a>i)return 0;if([e,n].includes(r)||[e,n].some(C=>C.toLowerCase().indexOf(r)===0))return 10+o;if(e.indexOf(r)!==-1&&r!==r.toLowerCase())return 9+o;if(e=e.toLowerCase(),r=r.toLowerCase(),e.indexOf(r)!==-1)return 8+o;var h=0,d=0;e:for(var _=0,g=0;_<a;_++){if(d!==0&&h++,h>s)return 0;var w=r.charCodeAt(_);for(d=0;g<i;){if(e.charCodeAt(g++)===w)continue e;if(++d>u)return 0}return 0}return h+d>0?(5+o)/(h+d):0},bolden_match_part:function(r,t){var e="";if(this.fuzzy_search(t,r)===0)return r;if(this.fuzzy_search(t,r)>6){var n=new RegExp("("+t+")","ig");return r.replace(n,"<mark>$1</mark>")}else{var i=r,r=r.toLowerCase(),a=r.length,t=t.toLowerCase();e:for(var o=0,s=0;o<t.length;o++){for(var u=t.charCodeAt(o);s<a;){if(r.charCodeAt(s)===u){var h=i.charAt(s);h===h.toLowerCase()?e+="<mark>"+t.charAt(o)+"</mark>":e+="<mark>"+t.charAt(o).toUpperCase()+"</mark>",s++;continue e}e+=i.charAt(s),s++}return i}return e+=i.slice(s),e}},get_executables(r){let t=[];return this.searchable_functions.forEach(e=>{let n=e.label.toLowerCase(),i=r.toLowerCase();(i===n||n.indexOf(i)===0)&&t.push({type:"Executable",value:this.bolden_match_part(__(e.label),i),index:this.fuzzy_search(i,n),match:e.label,onclick:()=>e.action.apply(this,e.args)})}),t},make_function_searchable(r,t=null,e=null){if(typeof r!="function")throw new Error("First argument should be a function");this.searchable_functions.push({label:t||r.name,action:r,args:e})},searchable_functions:[]};frappe.provide("frappe.ui.misc");frappe.ui.misc.about=function(){if(!frappe.ui.misc.about_dialog){var r=new frappe.ui.Dialog({title:__("Frappe Framework")});$(r.body).html(repl("<div>		<p>"+__("Open Source Applications for the Web")+"</p>  		<p><i class='fa fa-globe fa-fw'></i>			Website: <a href='https://frappeframework.com' target='_blank'>https://frappeframework.com</a></p>		<p><i class='fa fa-github fa-fw'></i>			Source: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>		<p><i class='fa fa-linkedin fa-fw'></i>			Linkedin: <a href='https://linkedin.com/company/frappe-tech' target='_blank'>https://linkedin.com/company/frappe-tech</a></p>		<p><i class='fa fa-facebook fa-fw'></i>			Facebook: <a href='https://facebook.com/erpnext' target='_blank'>https://facebook.com/erpnext</a></p>		<p><i class='fa fa-twitter fa-fw'></i>			Twitter: <a href='https://twitter.com/erpnext' target='_blank'>https://twitter.com/erpnext</a></p>		<hr>		<h4>Installed Apps</h4>		<div id='about-app-versions'>Loading versions...</div>		<hr>		<p class='text-muted'>&copy; Frappe Technologies Pvt. Ltd and contributors </p> 		</div>",frappe.app)),frappe.ui.misc.about_dialog=r,frappe.ui.misc.about_dialog.on_page_show=function(){frappe.versions?t(frappe.versions):frappe.call({method:"frappe.utils.change_log.get_versions",callback:function(e){t(e.message)}})};var t=function(e){var n=$("#about-app-versions").empty();$.each(Object.keys(e).sort(),function(i,a){var o=e[a];if(o.branch)var s=$.format("<p><b>{0}:</b> v{1} ({2})<br></p>",[o.title,o.branch_version||o.version,o.branch]);else var s=$.format("<p><b>{0}:</b> v{1}<br></p>",[o.title,o.version]);$(s).appendTo(n)}),frappe.versions=e}}frappe.ui.misc.about_dialog.show()};frappe.templates.navbar=`<header class="navbar navbar-expand sticky-top" role="navigation">
	<div class="container">
		<a class="navbar-brand navbar-home" href="/app">
			<img class="app-logo" style="width: {{ navbar_settings.logo_width || 24 }}px" src="{{ frappe.boot.app_logo_url }}">
		</a>
		<ul class="nav navbar-nav d-none d-sm-flex" id="navbar-breadcrumbs"></ul>
		<div class="collapse navbar-collapse justify-content-end">
			<form class="form-inline fill-width justify-content-end" role="search" onsubmit="return false;">
				<div class="input-group search-bar text-muted hidden">
					<input
						id="navbar-search"
						type="text"
						class="form-control"
						placeholder="{%= __("Search or type a command (Ctrl + G)") %}"
						aria-haspopup="true"
					>
					<span class="search-icon">
						<svg class="icon icon-sm"><use xlink:href="#icon-search"></use></svg>
					</span>
				</div>
			</form>
			<ul class="navbar-nav">
				<li class="nav-item dropdown dropdown-notifications dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span class="notifications-seen">
							<svg class="icon icon-md"><use href="#icon-notification"></use></svg>
						</span>
						<span class="notifications-unseen">
							<svg class="icon icon-md"><use href="#icon-notification-with-indicator"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu notifications-list dropdown-menu-right" role="menu">
						<div class="notification-list-header">
							<div class="header-items"></div>
							<div class="header-actions"></div>
						</div>
						<div class="notification-list-body">
							<div class="panel-notifications"></div>
							<div class="panel-events"></div>
						</div>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-message dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span>
							<svg class="icon icon-md"><use href="#icon-small-message"></use></svg>
						</span>
					</a>
				</li>
				<li class="vertical-bar d-none d-sm-block"></li>
				<li class="nav-item dropdown dropdown-help dropdown-mobile d-none d-lg-block">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ __("Help") }}
						<span>
							<svg class="icon icon-xs"><use href="#icon-small-down"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-help" role="menu">
						<div id="help-links"></div>
						<div class="dropdown-divider documentation-links"></div>
						{% for item in navbar_settings.help_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
				<li class="nav-item dropdown dropdown-navbar-user dropdown-mobile">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ avatar }}
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-user" role="menu">
						{% for item in navbar_settings.settings_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
			</ul>
		</div>
	</div>
</header>
`;frappe.provide("frappe.ui.toolbar");frappe.provide("frappe.search");frappe.ui.toolbar.Toolbar=class{constructor(){$("header").replaceWith(frappe.render_template("navbar",{avatar:frappe.avatar(frappe.session.user,"avatar-medium"),navbar_settings:frappe.boot.navbar_settings})),$(".dropdown-toggle").dropdown(),this.setup_awesomebar(),this.setup_notifications(),this.setup_help(),this.make()}make(){this.bind_events(),$(document).trigger("toolbar_setup")}bind_events(){$(document).on("page-change",function(){$("header .navbar .custom-menu").remove()}),$("#search-modal").on("shown.bs.modal",function(){var r=$(this);setTimeout(function(){r.find("#modal-search").focus()},300)}),$(".navbar-toggle-full-width").click(()=>{frappe.ui.toolbar.toggle_full_width()})}setup_help(){if(!frappe.boot.desk_settings.notifications){$(".navbar .vertical-bar").removeClass("d-sm-block"),$(".dropdown-help").removeClass("d-lg-block");return}frappe.provide("frappe.help"),frappe.help.show_results=t,this.search=new frappe.search.SearchDialog,frappe.provide("frappe.searchdialog"),frappe.searchdialog.search=this.search,$(".dropdown-help .dropdown-toggle").on("click",function(){$(".dropdown-help input").focus()}),$(".dropdown-help .dropdown-menu").on("click","input, button",function(e){e.stopPropagation()}),$("#input-help").on("keydown",function(e){e.which==13&&$(this).val("")}),$(document).on("page-change",function(){var e=$(".dropdown-help #help-links");e.html("");for(var n=frappe.get_route_str(),i=n.split("/"),a=[],o=0;o<i.length;o++){var s=n.split("/",o+1),u=s.join("/"),h=frappe.help.help_links[u]||[];a=$.merge(a,h)}a.length===0?e.next().hide():e.next().show();for(var o=0;o<a.length;o++){var d=a[o],_=d.url;$("<a>",{href:_,class:"dropdown-item",text:d.label,target:"_blank"}).appendTo(e)}$(".dropdown-help .dropdown-menu").on("click","a",t)});var r=frappe.get_modal("","");r.addClass("help-modal"),$(document).on("click",".help-modal a",t);function t(e){var n=e.target.href;n.indexOf("blob")>0&&window.open(n,"_blank");var i=$(e.target).attr("data-path");i&&e.preventDefault()}}setup_awesomebar(){frappe.boot.desk_settings.search_bar&&(new frappe.search.AwesomeBar().setup("#navbar-search"),frappe.search.utils.make_function_searchable(function(){frappe.set_route("List","Client Script")},__("Custom Script List")))}setup_notifications(){frappe.boot.desk_settings.notifications&&frappe.session.user!=="Guest"&&(this.notifications=new frappe.ui.Notifications)}};$.extend(frappe.ui.toolbar,{add_dropdown_button:function(r,t,e,n){var i=frappe.ui.toolbar.get_menu(r);return i.find("li:not(.custom-menu)").length&&!i.find(".divider").length&&frappe.ui.toolbar.add_menu_divider(i),$('<li class="custom-menu"><a><i class="fa-fw '+n+'"></i> '+t+"</a></li>").insertBefore(i.find(".divider")).find("a").click(function(){e.apply(this)})},get_menu:function(r){return $("#navbar-"+r.toLowerCase())},add_menu_divider:function(r){r=typeof r=="string"?frappe.ui.toolbar.get_menu(r):r,$('<li class="divider custom-menu"></li>').prependTo(r)},add_icon_link(r,t,e,n){let i=$(".navbar-right").get(0),a=$(`<li class="${n}">
			<a class="btn" href="${r}" title="${frappe.utils.to_title_case(n,!0)}" aria-haspopup="true" aria-expanded="true">
				<div>
					<i class="octicon ${t}"></i>
				</div>
			</a>
		</li>`).get(0);i.insertBefore(a,i.children[e])},toggle_full_width(){let r=JSON.parse(localStorage.container_fullwidth||"false");r=!r,localStorage.container_fullwidth=r,frappe.ui.toolbar.set_fullwidth_if_enabled(),$(document.body).trigger("toggleFullWidth")},set_fullwidth_if_enabled(){let r=JSON.parse(localStorage.container_fullwidth||"false");$(document.body).toggleClass("full-width",r)},show_shortcuts(r){return r.preventDefault(),frappe.ui.keys.show_keyboard_shortcut_dialog(),!1}});frappe.ui.toolbar.clear_cache=frappe.utils.throttle(function(){frappe.assets.clear_local_storage(),frappe.xcall("frappe.sessions.clear").then(r=>{frappe.show_alert({message:r,indicator:"info"}),location.reload(!0)})},1e4);frappe.ui.toolbar.show_about=function(){try{frappe.ui.misc.about()}catch(r){console.log(r)}return!1};frappe.ui.toolbar.route_to_user=function(){frappe.set_route("Form","User",frappe.session.user)};frappe.ui.toolbar.view_website=function(){let r=window.open();r.opener=null,r.location="/index"};frappe.ui.toolbar.setup_session_defaults=function(){let r=[];frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.get_session_default_values",callback:function(t){r=JSON.parse(t.message);let e=frappe.perm.get_perm("Session Default Settings");(in_list(frappe.user_roles,"System Manager")||e[0].read==1)&&(r[r.length]={fieldname:"settings",fieldtype:"Button",label:__("Settings"),click:()=>{frappe.set_route("Form","Session Default Settings","Session Default Settings")}}),frappe.prompt(r,function(n){r.forEach(function(i){n[i.fieldname]||(n[i.fieldname]="")}),frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.set_session_default_values",args:{default_values:n},callback:function(i){i.message=="success"?(frappe.show_alert({message:__("Session Defaults Saved"),indicator:"green"}),frappe.ui.toolbar.clear_cache()):frappe.show_alert({message:__("An error occurred while setting Session Defaults"),indicator:"red"})}})},__("Session Defaults"),__("Save"))}})};var po=jr($p());frappe.last_edited_communication={};var Op="<div>---</div>";frappe.views.CommunicationComposer=class{constructor(r){$.extend(this,r),this.doc||(this.doc=this.frm&&this.frm.doc||{}),this.make()}make(){let r=this;this.dialog=new frappe.ui.Dialog({title:this.title||this.subject||__("New Email"),no_submit_on_enter:!0,fields:this.get_fields(),primary_action_label:__("Send"),primary_action(){r.send_action()},secondary_action_label:__("Discard"),secondary_action(){r.dialog.hide(),r.clear_cache()},size:"large",minimizable:!0}),$(this.dialog.$wrapper.find(".form-section").get(0)).addClass("to_section"),this.prepare(),this.dialog.show(),this.frm&&$(document).trigger("form-typing",[this.frm])}get_fields(){let r=[{label:__("To"),fieldtype:"MultiSelect",reqd:0,fieldname:"recipients"},{fieldtype:"Button",label:frappe.utils.icon("down"),fieldname:"option_toggle_button",click:()=>{this.toggle_more_options()}},{fieldtype:"Section Break",hidden:1,fieldname:"more_options"},{label:__("CC"),fieldtype:"MultiSelect",fieldname:"cc"},{label:__("BCC"),fieldtype:"MultiSelect",fieldname:"bcc"},{label:__("Email Template"),fieldtype:"Link",options:"Email Template",fieldname:"email_template"},{fieldtype:"Section Break"},{label:__("Subject"),fieldtype:"Data",reqd:1,fieldname:"subject",length:524288},{label:__("Message"),fieldtype:"Text Editor",fieldname:"content",onchange:frappe.utils.debounce(this.save_as_draft.bind(this),300)},{fieldtype:"Section Break"},{label:__("Send me a copy"),fieldtype:"Check",fieldname:"send_me_a_copy",default:frappe.boot.user.send_me_a_copy},{label:__("Send Read Receipt"),fieldtype:"Check",fieldname:"send_read_receipt"},{label:__("Attach Document Print"),fieldtype:"Check",fieldname:"attach_document_print"},{label:__("Select Print Format"),fieldtype:"Select",fieldname:"select_print_format"},{label:__("Select Languages"),fieldtype:"Select",fieldname:"language_sel"},{fieldtype:"Column Break"},{label:__("Select Attachments"),fieldtype:"HTML",fieldname:"select_attachments"}],t=frappe.boot.email_accounts.filter(e=>!in_list(["All Accounts","Sent","Spam","Trash"],e.email_account)&&e.enable_outgoing);return t.length&&r.unshift({label:__("From"),fieldtype:"Select",reqd:1,fieldname:"sender",options:t.map(function(e){return e.email_id})}),r}toggle_more_options(r){r=r||this.dialog.fields_dict.more_options.df.hidden,this.dialog.set_df_property("more_options","hidden",!r);let t=frappe.utils.icon(r?"up-line":"down");this.dialog.get_field("option_toggle_button").set_label(t)}prepare(){this.setup_multiselect_queries(),this.setup_subject_and_recipients(),this.setup_print_language(),this.setup_print(),this.setup_attach(),this.setup_email(),this.setup_email_template(),this.setup_last_edited_communication(),this.set_values()}setup_multiselect_queries(){["recipients","cc","bcc"].forEach(r=>{this.dialog.fields_dict[r].get_data=()=>{let e=this.dialog.fields_dict[r].get_value().match(/[^,\s*]*$/)[0]||"";frappe.call({method:"frappe.email.get_contact_list",args:{txt:e},callback:n=>{this.dialog.fields_dict[r].set_data(n.message)}})}})}setup_subject_and_recipients(){if(this.subject=this.subject||"",!this.forward&&!this.recipients&&this.last_email&&(this.recipients=this.last_email.sender,this.cc=this.last_email.cc,this.bcc=this.last_email.bcc),!this.forward&&!this.recipients&&(this.recipients=this.frm&&this.frm.timeline.get_recipient()),!this.subject&&this.frm){let r=this.frm.timeline.get_last_email();r&&(this.subject=r.subject,this.recipients||(this.recipients=r.sender),strip(this.subject.toLowerCase().split(":")[0])!="re"&&(this.subject=__("Re: {0}",[this.subject]))),this.subject||(this.subject=this.frm.doc.name,this.frm.meta.subject_field&&this.frm.doc[this.frm.meta.subject_field]?this.subject=this.frm.doc[this.frm.meta.subject_field]:this.frm.meta.title_field&&this.frm.doc[this.frm.meta.title_field]&&(this.subject=this.frm.doc[this.frm.meta.title_field]));let t=`#${this.frm.doc.name}`;this.subject.includes(t)||(this.subject=`${this.subject} (${t})`)}this.frm&&!this.recipients&&(this.recipients=this.frm.doc[this.frm.email_field])}setup_email_template(){let r=this;this.dialog.fields_dict.email_template.df.onchange=()=>{let t=r.dialog.fields_dict.email_template.get_value();if(!t)return;function e(n){if(r.reply_added===t)return;let i=r.dialog.fields_dict.content,a=r.dialog.fields_dict.subject,o=i.get_value()||"";i.set_value(`${n.message}<br>${o}`),a.set_value(n.subject),r.reply_added=t}frappe.call({method:"frappe.email.doctype.email_template.email_template.get_email_template",args:{template_name:t,doc:r.doc,_lang:r.dialog.get_value("language_sel")},callback(n){e(n.message)}})}}setup_last_edited_communication(){this.frm?(this.doctype=this.frm.doctype,this.key=this.frm.docname):this.doctype=this.key="Inbox",this.last_email&&(this.key=this.key+":"+this.last_email.name),this.subject&&(this.key=this.key+":"+this.subject),this.dialog.on_hide=()=>{$.extend(this.get_last_edited_communication(!0),this.dialog.get_values(!0)),this.frm&&$(document).trigger("form-stopped-typing",[this.frm])}}get_last_edited_communication(r){return frappe.last_edited_communication[this.doctype]||(frappe.last_edited_communication[this.doctype]={}),(r||!frappe.last_edited_communication[this.doctype][this.key])&&(frappe.last_edited_communication[this.doctype][this.key]={}),frappe.last_edited_communication[this.doctype][this.key]}async set_values(){for(let t of["recipients","cc","bcc","sender"])await this.dialog.set_value(t,this[t]||"");let r=frappe.utils.html2text(this.subject)||"";if(await this.dialog.set_value("subject",r),await this.set_values_from_last_edited_communication(),await this.set_content(),this.frm&&!this.is_a_reply&&!this.content_set){let t=this.frm.meta.default_email_template||"";await this.dialog.set_value("email_template",t)}for(let t of["email_template","cc","bcc"])if(this.dialog.get_value(t)){this.toggle_more_options(!0);break}}async set_values_from_last_edited_communication(){if(this.txt||this.message)return;let r=this.get_last_edited_communication();!r.content||(r.email_template&&(await this.dialog.fields_dict.email_template.set_model_value(r.email_template),delete r.email_template),await this.dialog.set_values(r),this.content_set=!0)}selected_format(){return this.dialog.fields_dict.select_print_format.input.value||this.frm&&this.frm.meta.default_print_format||"Standard"}get_print_format(r){return r||(r=this.selected_format()),locals["Print Format"]&&locals["Print Format"][r]?locals["Print Format"][r]:{}}setup_print_language(){let r=this.dialog.fields_dict;this.lang_code=this.doc.language||this.get_print_format().default_print_language||frappe.boot.lang;let t=this;$(r.language_sel.input).change(function(){t.lang_code=this.value}),$(r.language_sel.input).empty().add_options(frappe.get_languages()),this.lang_code&&$(r.language_sel.input).val(this.lang_code)}setup_print(){let r=this.dialog.fields_dict;if($(r.attach_document_print.input).click(function(){$(r.select_print_format.wrapper).toggle($(this).prop("checked"))}),$(r.select_print_format.wrapper).toggle(!1),this.frm){let t=frappe.meta.get_print_formats(this.frm.meta.name);$(r.select_print_format.input).empty().add_options(t).val(t[0])}else $(r.attach_document_print.wrapper).toggle(!1)}setup_attach(){let r=this.dialog.fields_dict,t=$(r.select_attachments.wrapper);this.attachments||(this.attachments=[]);let e={folder:"Home/Attachments",on_success:n=>{this.attachments.push(n),this.render_attachment_rows(n)}};this.frm&&(e={doctype:this.frm.doctype,docname:this.frm.docname,folder:"Home/Attachments",on_success:n=>{this.frm.attachments.attachment_uploaded(n),this.render_attachment_rows(n)}}),$(`
			<label class="control-label">
				${__("Select Attachments")}
			</label>
			<div class='attach-list'></div>
			<p class='add-more-attachments'>
				<button class='btn btn-xs btn-default'>
					${frappe.utils.icon("small-add","xs")}&nbsp;
					${__("Add Attachment")}
				</button>
			</p>
		`).appendTo(t.empty()),t.find(".add-more-attachments button").on("click",()=>new frappe.ui.FileUploader(e)),this.render_attachment_rows()}render_attachment_rows(r){let t=this.dialog.fields_dict.select_attachments,e=$(t.wrapper).find(".attach-list");if(r)e.append(this.get_attachment_row(r,!0));else{let n=[];this.attachments&&this.attachments.length&&(n=n.concat(this.attachments)),this.frm&&(n=n.concat(this.frm.get_files())),n.length&&$.each(n,(i,a)=>{!a.file_name||e.find(`[data-file-name="${a.name}"]`).length||(a.file_url=frappe.urllib.get_full_url(a.file_url),e.append(this.get_attachment_row(a)))})}}get_attachment_row(r,t){return $(`<p class="checkbox flex">
			<label class="ellipsis" title="${r.file_name}">
				<input
					type="checkbox"
					data-file-name="${r.name}"
					${t?"checked":""}>
				</input>
				<span class="ellipsis">${r.file_name}</span>
			</label>
			&nbsp;
			<a href="${r.file_url}" target="_blank" class="btn-linkF">
				${frappe.utils.icon("link-url")}
			</a>
		</p>`)}setup_email(){let r=this.dialog.fields_dict;this.attach_document_print&&($(r.attach_document_print.input).click(),$(r.select_print_format.wrapper).toggle(!0)),$(r.send_me_a_copy.input).on("click",()=>{let t=r.send_me_a_copy.get_value();frappe.db.set_value("User",frappe.session.user,"send_me_a_copy",t),frappe.boot.user.send_me_a_copy=t})}send_action(){let r=this,t=r.dialog.get_primary_btn(),e=this.get_values();if(!e)return;let n=$.map($(r.dialog.wrapper).find("[data-file-name]:checked"),function(i){return $(i).attr("data-file-name")});e.attach_document_print?r.send_email(t,e,n,null,e.select_print_format||""):r.send_email(t,e,n)}get_values(){let r=this.dialog.get_values();for(let t=0,e=this.dialog.fields.length;t<e;t++){let n=this.dialog.fields[t];n.is_cc_checkbox&&(r[n.fieldname]&&(r.cc=(r.cc?r.cc+", ":"")+n.fieldname,r.bcc=(r.bcc?r.bcc+", ":"")+n.fieldname),delete r[n.fieldname])}return r}save_as_draft(){if(this.dialog&&this.frm){let r=this.dialog.get_value("content");r=r.split(Op)[0],po.default.setItem(this.frm.doctype+this.frm.docname,r).catch(t=>{t&&(console.log(t),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}}clear_cache(){this.delete_saved_draft(),this.get_last_edited_communication(!0)}delete_saved_draft(){this.dialog&&this.frm&&po.default.removeItem(this.frm.doctype+this.frm.docname).catch(r=>{r&&(console.log(r),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}send_email(r,t,e,n,i){let a=this;if(this.dialog.hide(),!t.recipients){frappe.msgprint(__("Enter Email Recipient(s)"));return}if(t.attach_document_print||(n=null,i=null),this.frm&&!frappe.model.can_email(this.doc.doctype,this.frm)){frappe.msgprint(__("You are not allowed to send emails related to this document"));return}return frappe.call({method:"frappe.core.doctype.communication.email.make",args:{recipients:t.recipients,cc:t.cc,bcc:t.bcc,subject:t.subject,content:t.content,doctype:a.doc.doctype,name:a.doc.name,send_email:1,print_html:n,send_me_a_copy:t.send_me_a_copy,print_format:i,sender:t.sender,sender_full_name:t.sender?frappe.user.full_name():void 0,email_template:t.email_template,attachments:e,_lang:a.lang_code,read_receipt:t.send_read_receipt,print_letterhead:a.is_print_letterhead_checked()},btn:r,callback(o){if(o.exc){if(frappe.msgprint(__("There were errors while sending email. Please try again.")),a.error)try{a.error(o)}catch(s){console.log(s)}}else if(frappe.utils.play_sound("email"),o.message.emails_not_sent_to&&frappe.msgprint(__("Email not sent to {0} (unsubscribed / disabled)",[frappe.utils.escape_html(o.message.emails_not_sent_to)])),a.clear_cache(),a.frm&&a.frm.reload_doc(),a.success)try{a.success(o)}catch(s){console.log(s)}}})}is_print_letterhead_checked(){return this.frm&&$(this.frm.wrapper).find(".form-print-wrapper").is(":visible")?$(this.frm.wrapper).find(".print-letterhead").prop("checked")?1:0:(frappe.model.get_doc(":Print Settings","Print Settings")||{with_letterhead:1}).with_letterhead?1:0}async set_content(){if(this.content_set)return;let r=this.txt||this.message||"";if(!r&&this.frm){let{doctype:t,docname:e}=this.frm;r=await po.default.getItem(t+e)||""}r&&(this.content_set=!0),r+=await this.get_signature(),this.is_a_reply&&(r+=this.get_earlier_reply()),await this.dialog.set_value("content",r)}async get_signature(){let r=frappe.boot.user.email_signature;return r||(r=(await frappe.db.get_value("Email Account",{default_outgoing:1,add_signature:1},"signature")).message.signature),r?(frappe.utils.is_html(r)||(r=r.replace(/\n/g,"<br>")),"<br>"+r):""}get_earlier_reply(){let r=this.last_email||this.frm&&this.frm.timeline.get_last_email(!0);if(!r)return"";let t=r.original_comment||r.content;t=this.html2text(t).replace(/\n/g,"<br>"),t.length>20*1024&&(t+="<div>"+__("Message clipped")+"</div>"+t,t=t.slice(0,20*1024));let e=frappe.datetime.global_date_format(r.communication_date||r.creation);return`
			<div><br></div>
			${Op||""}
			<p>
			${__("On {0}, {1} wrote:",[e,r.sender])}
			</p>
			<blockquote>
			${t}
			</blockquote>
		`}html2text(r){let t=document.createElement("div");return t.innerHTML=r.replace(/<\/div>/g,"<br></div>").replace(/<\/p>/g,"<br></p>").replace(/<br>/g,`
`),t.textContent.replace(/\n{3,}/g,`

`)}};frappe.views.TranslationManager=class{constructor(t){Object.assign(this,t),this.make()}make(){this.data=[],this.dialog=new frappe.ui.Dialog({fields:this.get_fields(),title:__("Translate {0}",[this.df.label]),no_submit_on_enter:!0,primary_action_label:__("Update Translations"),primary_action:t=>this.update_translations(t).then(()=>{this.dialog.hide(),this.data=[],frappe.msgprint({title:__("Success"),message:__("Successfully updated translations"),indicator:"green"})})}),this.get_translations_data().then(t=>{this.data.push(...t||[]),this.dialog.refresh(),this.dialog.show()})}get_fields(){var t=[{label:__("Source Text"),fieldname:"source",fieldtype:"Data",read_only:1,bold:1,default:this.source_text},{label:__("Translations"),fieldname:"translation_data",fieldtype:"Table",fields:[{label:"Language",fieldname:"language",fieldtype:"Link",options:"Language",in_list_view:1,columns:3},{label:"Translation",fieldname:"translation",fieldtype:"Text",in_list_view:1,columns:7}],data:this.data,get_data:()=>this.data}];return t}get_translations_data(){return frappe.db.get_list("Translation",{fields:["name","language","translated_text as translation"],filters:{source_text:strip_html(this.source_text)}})}update_translations({source:t,translation_data:e=[]}){let n={};return e.map(i=>{n[i.language]=i.translation}),frappe.call({method:"frappe.translate.update_translations_for_source",btn:this.dialog.get_primary_btn(),args:{source:t,translation_dict:n}}).fail(()=>{frappe.msgprint({title:__("Something went wrong"),message:__("Please try again"),indicator:"red"})})}};var Rp=jr(Ip()),Lp=jr(Pp());frappe.standard_pages.Workspaces=function(){var r=frappe.container.add_page("Workspaces");frappe.ui.make_app_page({parent:r,name:"Workspaces",title:__("Workspace")}),frappe.workspace=new frappe.views.Workspace(r),$(r).bind("show",function(){frappe.workspace.show()})};frappe.views.Workspace=class{constructor(t){this.wrapper=$(t),this.page=t.page,this.blocks=frappe.workspace_block.blocks,this.is_read_only=!0,this.pages={},this.sorted_public_items=[],this.sorted_private_items=[],this.current_page={},this.sidebar_items={public:{},private:{}},this.sidebar_categories=["My Workspaces","Public"],this.prepare_container(),this.setup_pages()}prepare_container(){let t=$(`
			<div class="list-sidebar overlay-sidebar hidden-xs hidden-sm">
				<div class="desk-sidebar list-unstyled sidebar-menu"></div>
			</div>
		`).appendTo(this.wrapper.find(".layout-side-section"));this.sidebar=t.find(".desk-sidebar"),this.body=this.wrapper.find(".layout-main-section")}async setup_pages(t){if(!this.discard&&this.create_page_skeleton(),!this.discard&&this.create_sidebar_skeleton(),this.sidebar_pages=this.discard?this.sidebar_pages:await this.get_pages(),this.cached_pages=$.extend(!0,{},this.sidebar_pages),this.all_pages=this.sidebar_pages.pages,this.has_access=this.sidebar_pages.has_access,this.all_pages.forEach(e=>{e.is_editable=!e.public||this.has_access}),this.public_pages=this.all_pages.filter(e=>e.public),this.private_pages=this.all_pages.filter(e=>!e.public),this.all_pages){frappe.workspaces={};for(let e of this.all_pages)frappe.workspaces[frappe.router.slug(e.name)]={title:e.title};this.make_sidebar(),t&&this.show()}}get_pages(){return frappe.xcall("frappe.desk.desktop.get_workspace_sidebar_items")}sidebar_item_container(t){return $(`
			<div class="sidebar-item-container ${t.is_editable?"is-draggable":""}" item-parent="${t.parent_page}" item-name="${t.title}" item-public="${t.public||0}">
				<div class="desk-sidebar-item standard-sidebar-item ${t.selected?"selected":""}">
					<a
						href="/app/${t.public?frappe.router.slug(t.title):"private/"+frappe.router.slug(t.title)}"
						class="item-anchor ${t.is_editable?"":"block-click"}" title="${__(t.title)}"
					>
						<span class="sidebar-item-icon" item-icon=${t.icon||"folder-normal"}>${frappe.utils.icon(t.icon||"folder-normal","md")}</span>
						<span class="sidebar-item-label">${__(t.title)}<span>
					</a>
					<div class="sidebar-item-control"></div>
				</div>
				<div class="sidebar-child-item nested-container"></div>
			</div>
		`)}make_sidebar(){this.sidebar.find(".standard-sidebar-section")[0]&&this.sidebar.find(".standard-sidebar-section").remove(),this.sidebar_categories.forEach(t=>{let e=this.public_pages.filter(n=>n.parent_page==""||n.parent_page==null);t!="Public"&&(e=this.private_pages.filter(n=>n.parent_page==""||n.parent_page==null)),this.build_sidebar_section(t,e)}),this.sidebar.find(".selected").length&&!frappe.dom.is_element_in_viewport(this.sidebar.find(".selected"))&&this.sidebar.find(".selected")[0].scrollIntoView(),this.remove_sidebar_skeleton()}build_sidebar_section(t,e){let n=$('<div class="standard-sidebar-section nested-container"></div>'),i=$(`<div class="standard-sidebar-label">
			<span>${frappe.utils.icon("small-down","xs")}</span>
			<span class="section-title">${__(t)}<span>
		</div>`).appendTo(n);this.prepare_sidebar(e,n,this.sidebar),i.on("click",a=>{let o=$(a.target).find("span use").attr("href")==="#icon-small-down"?"#icon-right":"#icon-small-down";$(a.target).find("span use").attr("href",o),$(a.target).parent().find(".sidebar-item-container").toggleClass("hidden")}),Object.keys(e).length===0&&n.addClass("hidden")}prepare_sidebar(t,e,n){t.forEach(i=>this.append_item(i,e)),e.appendTo(n)}append_item(t,e){let n=frappe.router.slug(t.title)==frappe.router.slug(this.get_page_to_show().name)&&t.public==this.get_page_to_show().public;t.selected=n,n&&(this.current_page={name:t.title,public:t.public});let i=this.sidebar_item_container(t),a=i.find(".sidebar-item-control");this.add_sidebar_actions(t,a);let s=(t.public?this.public_pages:this.private_pages).filter(u=>u.parent_page==t.title);if(s.length>0){let u=i.find(".sidebar-child-item");u.addClass("hidden"),this.prepare_sidebar(s,u,i)}i.appendTo(e),this.sidebar_items[t.public?"public":"private"][t.title]=i,i.parent().hasClass("hidden")&&n&&i.parent().toggleClass("hidden"),this.add_drop_icon(t,a,i)}add_drop_icon(t,e,n){let i="small-down";n.find(`[item-name="${this.current_page.name}"]`).length&&(i="small-up");let a=n.find(".sidebar-child-item"),o=$(`<span class="drop-icon hidden">${frappe.utils.icon(i,"sm")}</span>`).appendTo(e);(t.public?this.public_pages:this.private_pages).some(u=>u.parent_page==t.title)&&o.removeClass("hidden"),o.on("click",()=>{let u=o.find("use").attr("href")==="#icon-small-down"?"#icon-small-up":"#icon-small-down";o.find("use").attr("href",u),a.toggleClass("hidden")})}show(){if(!this.all_pages){setTimeout(()=>this.show(),100);return}let t=this.get_page_to_show();this.page.set_title(`${__(t.name)}`),this.update_selected_sidebar(this.current_page,!1),this.update_selected_sidebar(t,!0),this.show_page(t)}update_selected_sidebar(t,e){let n=t.public?"public":"private";if(this.sidebar&&this.sidebar_items[n]&&this.sidebar_items[n][t.name]){let i=this.sidebar_items[n][t.name],o=(t.public?this.public_pages:this.private_pages).find(s=>s.title==t.name);e?(i[0].firstElementChild.classList.add("selected"),o&&(o.selected=!0),i.parent().hasClass("hidden")&&i.parent().removeClass("hidden"),this.current_page={name:t.name,public:t.public},localStorage.current_page=t.name,localStorage.is_current_page_public=t.public):(i[0].firstElementChild.classList.remove("selected"),o&&(o.selected=!1))}}get_data(t){return frappe.call("frappe.desk.desktop.get_desktop_page",{page:t}).then(e=>{if(this.page_data=e.message,this.pages[t.name]&&delete this.pages[t.name],this.pages[t.name]=e.message,!(!this.page_data||Object.keys(this.page_data).length===0)&&!(this.page_data.charts&&this.page_data.charts.items.length===0))return frappe.dashboard_utils.get_dashboard_settings().then(n=>{if(n){let i=n.chart_config?JSON.parse(n.chart_config):{};this.page_data.charts.items.map(a=>{a.chart_settings=i[a.chart_name]||{}}),this.pages[t.name]=this.page_data}})})}get_page_to_show(){let t;localStorage.current_page&&this.all_pages.filter(i=>i.title==localStorage.current_page).length!=0?t={name:localStorage.current_page,public:localStorage.is_current_page_public=="true"}:Object.keys(this.all_pages).length!==0?t={name:this.all_pages[0].title,public:!0}:t={name:"Build",public:!0};let e=(frappe.get_route()[1]=="private"?frappe.get_route()[2]:frappe.get_route()[1])||t.name,n=frappe.get_route()[1]?frappe.get_route()[1]!="private":t.public;return{name:e,public:n}}async show_page(t){if(this.body.find("#editorjs")[0]||(this.$page=$(`
				<div id="editorjs" class="desk-page page-main-content"></div>
			`).appendTo(this.body)),this.all_pages){this.create_page_skeleton();let n=(t.public?this.public_pages:this.private_pages).filter(i=>i.title==t.name)[0];this.content=n&&JSON.parse(n.content),this.add_custom_cards_in_content(),$(".item-anchor").addClass("disable-click"),this.pages&&this.pages[n.name]?this.page_data=this.pages[n.name]:await frappe.after_ajax(()=>this.get_data(n)),this.setup_actions(t),this.prepare_editorjs(),$(".item-anchor").removeClass("disable-click"),this.remove_page_skeleton()}}add_custom_cards_in_content(){let t=-1;this.content.find((e,n)=>{e.type=="card"&&(t=n)}),t!==-1&&(this.content.splice(t+1,0,{type:"card",data:{card_name:"Custom Documents",col:4}}),this.content.splice(t+2,0,{type:"card",data:{card_name:"Custom Reports",col:4}}))}prepare_editorjs(){this.editor?this.editor.isReady.then(()=>{this.editor.configuration.tools.chart.config.page_data=this.page_data,this.editor.configuration.tools.shortcut.config.page_data=this.page_data,this.editor.configuration.tools.card.config.page_data=this.page_data,this.editor.configuration.tools.onboarding.config.page_data=this.page_data,this.editor.render({blocks:this.content||[]})}):this.initialize_editorjs(this.content)}setup_actions(t){let n=(t.public?this.public_pages:this.private_pages).filter(i=>i.title==t.name)[0];if(!this.is_read_only){this.setup_customization_buttons(n);return}this.clear_page_actions(),n.is_editable&&this.page.set_secondary_action(__("Edit"),async()=>{!this.editor||!this.editor.readOnly||(this.is_read_only=!1,await this.editor.readOnly.toggle(),this.editor.isReady.then(()=>{this.initialize_editorjs_undo(),this.setup_customization_buttons(n),this.show_sidebar_actions(),this.make_blocks_sortable()}))})}initialize_editorjs_undo(){this.undo=new Lp.default({editor:this.editor}),this.undo.initialize({blocks:this.content||[]}),this.undo.readOnly=!1}clear_page_actions(){this.page.clear_primary_action(),this.page.clear_secondary_action(),this.page.clear_inner_toolbar()}setup_customization_buttons(t){this.clear_page_actions(),t.is_editable&&this.page.set_primary_action(__("Save"),()=>{this.clear_page_actions(),this.save_page(t).then(e=>{!e||(this.undo.readOnly=!0,this.editor.readOnly.toggle(),this.is_read_only=!0)})},null,__("Saving")),this.page.set_secondary_action(__("Discard"),async()=>{this.discard=!0,this.clear_page_actions(),await this.editor.readOnly.toggle(),this.is_read_only=!0,this.sidebar_pages=this.cached_pages,this.reload(),frappe.show_alert({message:__("Customizations Discarded"),indicator:"info"})}),t.name&&this.page.add_inner_button(__("Settings"),()=>{frappe.set_route(`workspace/${t.name}`)})}show_sidebar_actions(){this.sidebar.find(".standard-sidebar-section").addClass("show-control"),this.make_sidebar_sortable()}add_sidebar_actions(t,e,n){t.is_editable?(frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",`${__("Drag")}`,null,e),!n&&this.add_settings_button(t,e)):(e.parent().click(()=>{!this.is_read_only&&frappe.show_alert({message:__("Only Workspace Manager can sort or edit this page"),indicator:"info"},5)}),frappe.utils.add_custom_button(frappe.utils.icon("duplicate","sm"),()=>this.duplicate_page(t),"duplicate-page",`${__("Duplicate Workspace")}`,null,e))}get_parent_pages(t){if(this.public_parent_pages=["",...this.public_pages.filter(e=>!e.parent_page).map(e=>e.title)],this.private_parent_pages=["",...this.private_pages.filter(e=>!e.parent_page).map(e=>e.title)],t)return t.public?this.public_parent_pages:this.private_parent_pages}edit_page(t){var e=this;let n=t,i=this.get_parent_pages(t),a=i.findIndex(s=>s==t.title);a!==-1&&i.splice(a,1);let o=new frappe.ui.Dialog({title:__("Update Details"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1,default:t.title},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:i,default:t.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:t.public,onchange:function(){o.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:t.icon}],primary_action_label:__("Update"),primary_action:s=>{let u=s.title!=n.title,h=s.is_public!=n.public;if(!((u||h)&&!this.validate_page(s,n))){if(o.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.update_page",args:{name:n.name,title:s.title,icon:s.icon||"",parent:s.parent||"",public:s.is_public||0},callback:function(d){if(d.message){let _=`Workspace <b>${n.title}</b> Edited Successfully`;frappe.show_alert({message:__(_),indicator:"green"})}}}),this.update_sidebar(n,s),this.make_page_selected){let _=(s.is_public?"":"private/")+frappe.router.slug(s.title);frappe.set_route(_),this.make_page_selected=!1}this.make_sidebar(),this.show_sidebar_actions()}}});o.show()}update_sidebar(t,e){let n=t.public!=(e.is_public||0),i=t.title!=e.title,a=Vt({},t),s=(t.public?this.public_pages:this.private_pages).filter(u=>u.parent_page==t.title);if(this.make_page_selected=t.selected,a.title=e.title,a.icon=e.icon,a.parent_page=e.parent||"",a.public=e.is_public,i||n)if(e.is_public)a.name=e.title,a.label=e.title,a.for_user="";else{let u=frappe.session.user;a.name=`${e.title}-${u}`,a.label=`${e.title}-${u}`,a.for_user=u}this.update_cached_values(t,a),s.length&&s.forEach(u=>{u.parent_page=e.title,n&&this.update_child_sidebar(u,e)})}update_child_sidebar(t,e){let n=Vt({},t);if(this.make_page_selected=t.selected,t.public=e.is_public,e.is_public)t.name=t.title,t.label=t.title,t.for_user="";else{let i=frappe.session.user;t.name=`${t.title}-${i}`,t.label=`${t.title}-${i}`,t.for_user=i}this.update_cached_values(n,t)}update_cached_values(t,e,n,i){let[a,o]=t.public?[this.public_pages,this.private_pages]:[this.private_pages,this.public_pages],s=a.findIndex(u=>u.title==t.title);n&&s++,(frappe.workspaces[frappe.router.slug(t.name)]||i)&&(!n&&delete frappe.workspaces[frappe.router.slug(t.name)],e&&(frappe.workspaces[frappe.router.slug(e.name)]={title:e.title})),(this.pages&&this.pages[t.name]||i)&&(e&&(this.pages[e.name]=this.pages[t.name]||{}),!n&&delete this.pages[t.name]),e?t.public!=(e.is_public||e.public||0)?(!n&&a.splice(s,1),o.push(e)):i?a.push(e):a.splice(s,n?0:1,e):a.splice(s,1),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}add_settings_button(t,e){this.dropdown_list=[{label:"Edit",title:"Edit Workspace",icon:frappe.utils.icon("edit","sm"),action:()=>this.edit_page(t)},{label:"Duplicate",title:"Duplicate Workspace",icon:frappe.utils.icon("duplicate","sm"),action:()=>this.duplicate_page(t)},{label:"Delete",title:"Delete Workspace",icon:frappe.utils.icon("delete-active","sm"),action:()=>this.delete_page(t)}];let n=$(`
			<div class="btn btn-secondary btn-xs setting-btn dropdown-btn" title="${__("Setting")}">
				${frappe.utils.icon("dot-horizontal","xs")}
			</div>
			<div class="dropdown-list hidden"></div>
		`),i=function(a,o,s,u){let h=$(`
				<div class="dropdown-item" title="${o}">
					<span class="dropdown-item-icon">${s}</span>
					<span class="dropdown-item-label">${a}</span>
				</div>
			`);return h.click(d=>{d.stopPropagation(),u&&u()}),h};n.filter(".dropdown-btn").click(a=>{a.stopPropagation(),n.filter(".dropdown-list.hidden").length&&$(".dropdown-list:not(.hidden)").addClass("hidden"),n.filter(".dropdown-list").toggleClass("hidden")}),$(document).click(a=>{a.stopPropagation(),$(".dropdown-list:not(.hidden)").addClass("hidden")}),e.append(n),this.dropdown_list.forEach(a=>{n.filter(".dropdown-list").append(i(a.label,a.title,a.icon,a.action))})}delete_page(t){frappe.confirm(__("Are you sure you want to delete page {0}?",[t.title]),()=>{frappe.call({method:"frappe.desk.doctype.workspace.workspace.delete_page",args:{page:t},callback:function(e){if(e.message){let i=`Workspace <b>${e.message.title}</b> Deleted Successfully`;frappe.show_alert({message:__(i),indicator:"green"})}}}),this.page.clear_primary_action(),this.update_cached_values(t),this.current_page.name==t.title&&this.current_page.public==t.public&&frappe.set_route("/"),this.make_sidebar(),this.show_sidebar_actions()})}duplicate_page(t){var e=this;let n=this.get_parent_pages(t),i=new frappe.ui.Dialog({title:__("Create Duplicate"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:n,default:t.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:t.public,onchange:function(){i.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:t.icon}],primary_action_label:__("Duplicate"),primary_action:a=>{if(!this.validate_page(a))return;i.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.duplicate_page",args:{page_name:t.name,new_page:a},callback:function(h){if(h.message){let d=h.message,_=`Duplicate of <b>${t.title}</b> named as <b>${d.title}</b> is created successfully`;frappe.show_alert({message:__(_),indicator:"green"})}}});let o=Vt({},t);o.title=a.title,o.public=a.is_public||0,o.name=a.title+(o.public?"":"-"+frappe.session.user),o.label=o.name,o.icon=a.icon,o.parent_page=a.parent||"",o.for_user=o.public?"":frappe.session.user,o.is_editable=!o.public,o.selected=!0,this.update_cached_values(t,o,!0);let u=(a.is_public?"":"private/")+frappe.router.slug(a.title);frappe.set_route(u),e.make_sidebar(),e.show_sidebar_actions()}});i.show()}make_sidebar_sortable(){let t=this;$(".nested-container").each(function(){new Sortable(this,{handle:".drag-handle",draggable:".sidebar-item-container.is-draggable",group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(e){let n=$(e.item).attr("item-public")=="1";t.prepare_sorted_sidebar(n),t.update_sorted_sidebar()}})})}prepare_sorted_sidebar(t){let e=t?this.public_pages:this.private_pages;t?this.sorted_public_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").last(),e):this.sorted_private_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").first(),e),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}sort_sidebar(t,e){let n=[];return Array.from(t.find(".sidebar-item-container")).forEach((i,a)=>{let o="";i.closest(".nested-container").classList.contains("sidebar-child-item")&&(o=i.parentElement.parentElement.attributes["item-name"].value),n.push({title:i.attributes["item-name"].value,parent_page:o,public:i.attributes["item-public"].value});let s=$(i).find(".sidebar-item-control .drop-icon").first();$(i).find(".sidebar-child-item > *").length!=0?s.removeClass("hidden"):s.addClass("hidden");let u=e.findIndex(d=>d.title==i.attributes["item-name"].value),h=e[u];h.parent_page=o,u!=a&&(e.splice(u,1),e.splice(a,0,h))}),n}update_sorted_sidebar(){(this.sorted_public_items||this.sorted_private_items)&&frappe.call({method:"frappe.desk.doctype.workspace.workspace.sort_pages",args:{sb_public_items:this.sorted_public_items,sb_private_items:this.sorted_private_items},callback:function(t){if(t.message){let e="Sidebar Updated Successfully";frappe.show_alert({message:__(e),indicator:"green"})}}})}make_blocks_sortable(){let t=this;this.page_sortable=Sortable.create(this.page.main.find(".codex-editor__redactor").get(0),{handle:".drag-handle",draggable:".ce-block",animation:150,onEnd:function(e){t.editor.blocks.move(e.newIndex,e.oldIndex)},setData:function(){}})}initialize_new_page(){var t=this;this.get_parent_pages();let e=new frappe.ui.Dialog({title:__("New Workspace"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:this.private_parent_pages},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,onchange:function(){e.set_df_property("parent","options",this.get_value()?t.public_parent_pages:t.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon"}],primary_action_label:__("Create"),primary_action:n=>{if(!this.validate_page(n))return;e.hide(),this.initialize_editorjs_undo(),this.setup_customization_buttons({is_editable:!0});let i=n.title+(n.is_public?"":"-"+frappe.session.user),a=[{type:"header",data:{text:n.title}}],o={content:JSON.stringify(a),name:i,label:i,title:n.title,public:n.is_public||0,for_user:n.is_public?"":frappe.session.user,icon:n.icon,parent_page:n.parent||"",is_editable:!0,selected:!0};this.editor.render({blocks:a}).then(async()=>{this.editor.configuration.readOnly&&(this.is_read_only=!1,await this.editor.readOnly.toggle()),frappe.call({method:"frappe.desk.doctype.workspace.workspace.new_page",args:{new_page:o},callback:function(h){if(h.message){let d=`Workspace <b>${o.title}</b> Created Successfully`;frappe.show_alert({message:__(d),indicator:"green"})}}}),this.update_cached_values(o,o,!0,!0);let u=(o.public?"":"private/")+frappe.router.slug(o.title);frappe.set_route(u),this.make_sidebar(),this.show_sidebar_actions()})}});e.show()}validate_page(t,e){let n="",[i,a]=t.is_public?[this.private_pages,this.public_pages]:[this.public_pages,this.private_pages],o=this.sidebar_categories[t.is_public];a&&a.filter(u=>u.title==t.title)[0]&&(n=`Page with title ${t.title} already exist.`),frappe.router.doctype_route_exist(frappe.router.slug(t.title))&&(n="Doctype with same route already exist. Please choose different title.");let s=e&&i.filter(u=>u.parent_page==e.title);return s&&s.every(u=>a&&a.find(h=>h.title==u.title)?(n=`One of the child page with name <b>${u.title}</b> already exist in <b>${o}</b> Section. Please update the name of the child page first before moving`,cur_dialog.hide(),!1):!0),n?(frappe.throw(__(n)),!1):!0}add_page_to_sidebar(t){let e=$(".standard-sidebar-section"),n=Vt({},t);n.selected=!0,n.is_editable=!0;let i=this.sidebar_item_container(n);this.add_sidebar_actions(n,i.find(".sidebar-item-control"),!0),i.find(".sidebar-item-control .drag-handle").css("margin-right","8px");let a=n.is_public?e[1]:e[0];if(!n.parent)!n.is_public&&e.first().removeClass("hidden"),i.appendTo(a);else{let s=$(a).find(`[item-name="${n.parent}"]`),u=s.find(".sidebar-child-item"),h=s.find(".drop-icon");u[0]||(u=$('<div class="sidebar-child-item hidden nested-container"></div>').appendTo(s),h.toggleClass("hidden")),i.appendTo(u),u.removeClass("hidden"),s.find(".drop-icon.hidden").removeClass("hidden"),s.find(".drop-icon use").attr("href","#icon-small-up")}let o=n.is_public?"public":"private";this.sidebar_items&&this.sidebar_items[o]&&!this.sidebar_items[o][n.title]&&(this.sidebar_items[o][n.title]=i)}initialize_editorjs(t){this.tools={header:{class:this.blocks.header,inlineToolbar:["HeaderSize","bold","italic","link"],config:{default_size:4}},paragraph:{class:this.blocks.paragraph,inlineToolbar:["HeaderSize","bold","italic","link"],config:{placeholder:"Choose a block or continue typing"}},chart:{class:this.blocks.chart,config:{page_data:this.page_data||[]}},card:{class:this.blocks.card,config:{page_data:this.page_data||[]}},shortcut:{class:this.blocks.shortcut,config:{page_data:this.page_data||[]}},onboarding:{class:this.blocks.onboarding,config:{page_data:this.page_data||[]}},spacer:this.blocks.spacer,HeaderSize:frappe.workspace_block.tunes.header_size},this.editor=new Rp.default({data:{blocks:t||[]},tools:this.tools,autofocus:!1,readOnly:!0,logLevel:"ERROR"})}save_page(t){let e=this;return this.current_page={name:t.title,public:t.public},this.editor.save().then(n=>{let i={};n.blocks.forEach(o=>{o.data.new&&(i[o.type]||(i[o.type]=[]),i[o.type].push(o.data.new),delete o.data.new)});let a=n.blocks.filter(o=>o.type!="card"||o.data.card_name!=="Custom Documents"&&o.data.card_name!=="Custom Reports");return t.content==JSON.stringify(a)&&Object.keys(i).length===0?(this.setup_customization_buttons(t),frappe.show_alert({message:__("No changes made on the page"),indicator:"warning"}),!1):(this.create_page_skeleton(),t.content=JSON.stringify(a),frappe.call({method:"frappe.desk.doctype.workspace.workspace.save_page",args:{title:t.title,public:t.public||0,new_widgets:i,blocks:JSON.stringify(a)},callback:function(o){o.message&&(e.discard=!0,e.update_cached_values(t,t),e.reload(),frappe.show_alert({message:__("Page Saved Successfully"),indicator:"green"}))}}),!0)}).catch(n=>{})}reload(){this.sorted_public_items=[],this.sorted_private_items=[],this.setup_pages(!0),this.discard=!1,this.undo.readOnly=!0}create_page_skeleton(){$(".layout-main-section").find(".workspace-skeleton").length||($(".layout-main-section").prepend(frappe.render_template("workspace_loading_skeleton")),$(".layout-main-section").find(".codex-editor").addClass("hidden"))}remove_page_skeleton(){$(".layout-main-section").find(".codex-editor").removeClass("hidden"),$(".layout-main-section").find(".workspace-skeleton").remove()}create_sidebar_skeleton(){$(".list-sidebar").find(".workspace-sidebar-skeleton").length||($(".list-sidebar").prepend(frappe.render_template("workspace_sidebar_loading_skeleton")),$(".desk-sidebar").addClass("hidden"))}remove_sidebar_skeleton(){$(".desk-sidebar").removeClass("hidden"),$(".list-sidebar").find(".workspace-sidebar-skeleton").remove()}};var Gn=class{constructor(t){Object.assign(this,t),this.editing=Boolean(this.values&&Object.keys(this.values).length)}make(){this.make_dialog(),this.setup_dialog_events(),this.dialog.show(),window.cur_dialog=this.dialog,this.editing&&this.set_default_values()}make_dialog(){this.dialog=new frappe.ui.Dialog({title:this.get_title(),fields:this.get_fields(),primary_action:t=>{t=this.process_data(t),!this.editing&&!t.name&&(t.name=`${this.type}-${this.label}-${frappe.utils.get_random(20)}`),this.dialog.hide(),this.primary_action(t)},primary_action_label:this.primary_action_label||__("Add")})}get_title(){let t=this.editing?"Edit":"Add",e=t=t+" "+frappe.model.unscrub(this.type);return __(e)}get_fields(){}set_default_values(){return this.dialog.set_values(this.values)}process_data(t){return t}setup_dialog_events(){}hide_field(t){this.dialog.set_df_property(t,"hidden",!0)}show_field(t){this.dialog.set_df_property(t,"hidden",!1)}setup_filter(t){this.filter_group&&(this.filter_group.wrapper.empty(),delete this.filter_group);let e=this.dialog.get_field("filter_area_loading").$wrapper;if($(`<span class="text-muted">${__("Loading Filters...")}</span>`).appendTo(e),this.filters=[],this.values&&this.values.stats_filter){let n=new Function(`return ${this.values.stats_filter}`)();this.filters=Object.keys(n).map(i=>{let a=n[i];return[this.values.link_to,i,a[0],a[1],!1]})}this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:t,on_change:()=>{}}),frappe.model.with_doctype(t,()=>{this.filter_group.add_filters_to_filter_group(this.filters),this.hide_field("filter_area_loading"),this.show_field("filter_area")})}},Mp=class extends Gn{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"chart_name",label:"Chart Name",options:"Dashboard Chart",reqd:1},{fieldtype:"Data",fieldname:"label",label:"Label"}]}process_data(t){return t.label=t.label?t.label:t.chart_name,t}},Np=class extends Gn{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"onboarding_name",label:"Onboarding Name",options:"Module Onboarding",reqd:1}]}},Dp=class extends Gn{constructor(t){super(t)}get_fields(){let t=this;return[{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldname:"links",fieldtype:"Table",label:__("Card Links"),editable_grid:1,data:t.values?JSON.parse(t.values.links):[],get_data:()=>t.values?JSON.parse(t.values.links):[],fields:[{fieldname:"label",fieldtype:"Data",in_list_view:1,label:"Label"},{fieldname:"icon",fieldtype:"Icon",label:"Icon"},{fieldname:"link_type",fieldtype:"Select",in_list_view:1,label:"Link Type",reqd:1,options:["DocType","Page","Report"]},{fieldname:"link_to",fieldtype:"Dynamic Link",in_list_view:1,label:"Link To",reqd:1,get_options:e=>e.doc.link_type},{fieldname:"column_break_7",fieldtype:"Column Break"},{fieldname:"dependencies",fieldtype:"Data",label:"Dependencies"},{fieldname:"only_for",fieldtype:"Link",label:"Only for ",options:"Country"},{default:"0",fieldname:"onboard",fieldtype:"Check",label:"Onboard"},{default:"0",fieldname:"is_query_report",fieldtype:"Check",label:"Is Query Report"}]}]}process_data(t){return t.links.map((e,n)=>{let i="",a=n+1;e.link_type||(i="Following fields have missing values: <br><br><ul>",i+=`<li>Link Type in Row ${a}</li>`),e.link_to||(i+=`<li>Link To in Row ${a}</li>`),i&&(i+="</ul>",frappe.throw({message:__(i),title:__("Missing Values Required"),indicator:"orange"})),e.label=e.label?e.label:e.link_to}),t.label=t.label?t.label:t.chart_name,t}},Bp=class extends Gn{constructor(t){super(t)}hide_filters(){this.hide_field("count_section_break"),this.hide_field("filters_section_break")}show_filters(){this.show_field("count_section_break"),this.show_field("filters_section_break")}get_fields(){return[{fieldtype:"Select",fieldname:"type",label:"Type",reqd:1,options:`DocType
Report
Page
Dashboard`,onchange:()=>{this.dialog.get_value("type")=="DocType"?this.dialog.fields_dict.link_to.get_query=()=>({query:"frappe.core.report.permitted_documents_for_user.permitted_documents_for_user.query_doctypes",filters:{user:frappe.session.user}}):this.dialog.fields_dict.link_to.get_query=null}},{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldtype:"Column Break",fieldname:"column_break_4"},{fieldtype:"Dynamic Link",fieldname:"link_to",label:"Link To",reqd:1,options:"type",onchange:()=>{if(this.dialog.get_value("type")=="DocType"){let t=this.dialog.get_value("link_to");t&&frappe.boot.single_types.includes(t)?this.hide_filters():t&&(this.setup_filter(t),this.show_filters());let e=["List","Report Builder","Dashboard","New"];frappe.boot.treeviews.includes(t)&&e.push("Tree"),frappe.boot.calendars.includes(t)&&e.push("Calendar"),this.dialog.set_df_property("doc_view","options",e.join(`
`))}else this.hide_filters()}},{fieldtype:"Select",fieldname:"doc_view",label:"DocType View",options:`List
Report Builder
Dashboard
Tree
New
Calendar`,description:__("Which view of the associated DocType should this shortcut take you to?"),default:"List",depends_on:t=>{if(this.dialog){let e=this.dialog.get_value("link_to"),n=frappe.boot.single_types.includes(e);return t.type=="DocType"&&!n}return!1}},{fieldtype:"Section Break",fieldname:"filters_section_break",label:__("Count Filter"),hidden:1},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"count_section_break",label:__("Count Customizations"),hidden:1},{fieldtype:"Select",fieldname:"color",label:__("Color"),options:["Grey","Green","Red","Orange","Pink","Yellow","Blue","Cyan"],default:"Grey",input_class:"color-select",onchange:()=>{let t=this.dialog.fields_dict.color.value.toLowerCase(),e=this.dialog.fields_dict.color.$input;e.parent().find(".color-box").get(0)||$('<div class="color-box"></div>').insertBefore(e.get(0)),e.parent().find(".color-box").get(0).style.backgroundColor=`var(--text-on-${t})`}},{fieldtype:"Column Break",fieldname:"column_break_3"},{fieldtype:"Data",fieldname:"format",label:__("Format"),description:__("For Example: {} Open")}]}set_default_values(){super.set_default_values().then(()=>{this.dialog.fields_dict.link_to.df.onchange()})}process_data(t){if(this.dialog.get_value("type")=="DocType"&&this.filter_group){let e=this.filter_group.get_filters(),n=null;e.length&&(n={},e.forEach(i=>{n[i[1]]=[i[2],i[3]]}),n=JSON.stringify(n)),t.stats_filter=n}return t.label=t.label?t.label:frappe.model.unscrub(t.link_to),t}},jp=class extends Gn{constructor(t){super(t)}get_fields(){let t;return t=[{fieldtype:"Select",label:__("Choose Existing Card or create New Card"),fieldname:"new_or_existing",options:["New Card","Existing Card"]},{fieldtype:"Link",fieldname:"card",label:__("Number Cards"),options:"Number Card",get_query:()=>({query:"frappe.desk.doctype.number_card.number_card.get_cards_for_user",filters:{document_type:this.document_type}}),depends_on:'eval: doc.new_or_existing == "Existing Card"'},{fieldtype:"Section Break",fieldname:"sb_1",depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Label"),fieldname:"label",fieldtype:"Data",mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Doctype"),fieldname:"document_type",fieldtype:"Link",options:"DocType",onchange:()=>{this.document_type=this.dialog.get_value("document_type"),this.set_aggregate_function_fields(this.dialog.get_values()),this.setup_filter(this.document_type)},hidden:1},{label:__("Color"),fieldname:"color",fieldtype:"Color"},{fieldtype:"Column Break",fieldname:"cb_1"},{label:__("Function"),fieldname:"function",fieldtype:"Select",options:["Count","Sum","Average","Minimum","Maximum"],mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Function Based On"),fieldname:"aggregate_function_based_on",fieldtype:"Select",depends_on:"eval: doc.function !== 'Count'",mandatory_depends_on:'eval: doc.function !== "Count" && doc.new_or_existing == "New Card"'},{fieldtype:"Section Break",fieldname:"sb_1",label:__("Add Filters"),depends_on:'eval: doc.new_or_existing == "New Card"'},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"sb_1"}],t}setup_dialog_events(){this.document_type||(this.default_values&&this.default_values.doctype?(this.document_type=this.default_values.doctype,this.setup_filter(this.default_values.doctype),this.set_aggregate_function_fields()):this.show_field("document_type"))}set_aggregate_function_fields(){let t=[];this.document_type&&frappe.get_meta(this.document_type)&&frappe.get_meta(this.document_type).fields.map(e=>{if(frappe.model.numeric_fieldtypes.includes(e.fieldtype)){if(e.fieldtype=="Currency"&&(!e.options||e.options!=="Company:company:default_currency"))return;t.push({label:e.label,value:e.fieldname})}}),this.dialog.set_df_property("aggregate_function_based_on","options",t)}process_data(t){return t.new_or_existing=="Existing Card"&&(t.name=t.card),t.stats_filter=this.filter_group&&JSON.stringify(this.filter_group.get_filters()),t.document_type=this.document_type,t}};function yn(r){return{chart:Mp,shortcut:Bp,number_card:jp,links:Dp,onboarding:Np}[r]||Gn}var Or=class{constructor(t){Object.assign(this,t)}make(t,e,n=t){let i=this.config.page_data[t+"s"].items.find(a=>frappe.utils.unescape_html(a.label)==frappe.utils.unescape_html(e));return i?(this.wrapper.innerHTML="",i.in_customize_mode=!this.readOnly,this.block_widget=new frappe.widget.SingleWidgetGroup({container:this.wrapper,type:n,class_name:t=="chart"?"widget-charts":"",options:this.options,widgets:i,api:this.api,block:this.block}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(),!0):!1}rendered(t){t&&(this.wrapper=t),!this.readOnly&&this.resizer();let e=this.wrapper.closest(".ce-block");this.set_col_class(e,this.get_col())}resizer(){this.wrapper.className=this.wrapper.className+" resizable";var t=document.createElement("div");t.className="resizer",this.wrapper.parentElement.appendChild(t),t.addEventListener("mousedown",a,!1);let e=this;var n,i;function a(h){n=h.clientX,i=this.parentElement.offsetWidth,document.documentElement.addEventListener("mousemove",o,!1),document.documentElement.addEventListener("mouseup",u,!1)}function o(h){$(this).css("cursor","col-resize"),$(".widget").css("pointer-events","none"),$(e.wrapper.parentElement).find(".resizer").css("border-right","3px solid var(--gray-400)"),s(),i+h.clientX-n-i>60?(n=h.clientX,e.increase_width()):i+h.clientX-n-i<-60&&(n=h.clientX,e.decrease_width())}function s(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}function u(){$(this).css("cursor","default"),$(".widget").css("pointer-events","auto"),$(e.wrapper.parentElement).find(".resizer").css("border-right","0px solid transparent"),document.documentElement.removeEventListener("mousemove",o,!1),document.documentElement.removeEventListener("mouseup",u,!1)}}new(t,e=t){let n=this,i=yn(e),a=t+"_name";this.dialog=new i({label:this.label,type:e,primary_action:o=>{o.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(Mr(Vt({},o),{widget_type:e,container:this.wrapper,options:Mr(Vt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)})})),this.block_widget.customize(this.options),this.wrapper.setAttribute(a,this.block_widget.label),$(this.wrapper).find(".widget").addClass(`${e} edit-mode`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[a]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{n.wrapper.closest(".ce-block").remove()}))}on_edit(t){let e=t.edit_dialog.type+"_name";t.edit_dialog.type=="links"&&(e="card_name");let n=t.get_config();this.block_widget.widgets=n,this.wrapper.setAttribute(e,n.label),this.new_block_widget=t.get_config()}add_new_block_button(){let t=$(`
			<div class="new-block-button">${frappe.utils.icon("add-round","lg")}</div>
		`);t.appendTo(this.wrapper),t.click(e=>{e.stopPropagation();let n=this.api.blocks.getCurrentBlockIndex()+1;this.api.blocks.insert("paragraph",{},{},n),this.api.caret.setToBlock(n)})}add_settings_button(){let t=this;this.dropdown_list=[{label:"Delete",title:"Delete Block",icon:frappe.utils.icon("delete-active","sm"),action:()=>this.api.blocks.delete()},{label:"Expand",title:"Expand Block",icon:frappe.utils.icon("expand-alt","sm"),action:()=>this.increase_width()},{label:"Shrink",title:"Shrink Block",icon:frappe.utils.icon("shrink","sm"),action:()=>this.decrease_width()},{label:"Move Up",title:"Move Up",icon:frappe.utils.icon("up-arrow","sm"),action:()=>this.move_block("up")},{label:"Move Down",title:"Move Down",icon:frappe.utils.icon("down-arrow","sm"),action:()=>this.move_block("down")}];let e=$(this.wrapper).find(".widget-control"),n=$(`
			<div class="dropdown-btn">
				<button class="btn btn-secondary btn-xs setting-btn" title="${__("Setting")}">
					${frappe.utils.icon("dot-horizontal","xs")}
				</button>
				<div class="dropdown-list hidden"></div>
			</div>
		`),i=function(a,o,s,u){let h=$(`
				<div class="dropdown-item" title="${o}">
					<span class="dropdown-item-icon">${s}</span>
					<span class="dropdown-item-label">${a}</span>
				</div>
			`);return h.click(d=>{d.stopPropagation(),u&&u()}),h};n.click(a=>{a.stopPropagation(),n.find(".dropdown-list").toggleClass("hidden")}),$(document).click(()=>{n.find(".dropdown-list").addClass("hidden")}),e.prepend(n),this.dropdown_list.forEach(a=>{(a.label=="Expand"||a.label=="Shrink")&&t.options&&!t.options.allow_resize||n.find(".dropdown-list").append(i(a.label,a.title,a.icon,a.action))})}get_col(){let t=this.col||12,e="col-xs-12",n=this.wrapper.closest(".ce-block"),i=new RegExp(/\bcol-.+?\b/,"g");if(n&&n.className.match(i)){n.classList.forEach(function(o){o.match(i)&&(e=o)});let a=e.split("-");t=parseInt(a[2])}return t}decrease_width(){this.update_width("decrease")}increase_width(){this.update_width("increase")}update_width(t){let e=this.options&&this.options.min_width||3,n=this.api.blocks.getCurrentBlockIndex();if(n<0)return;let i=this.api.blocks.getBlockByIndex(n);if(!i)return;let a=i.holder,o="col-xs-12",s=new RegExp(/\bcol-.+?\b/,"g");if(a.className.match(s)){a.classList.forEach(_=>{_.match(s)&&(o=_)});let u=o.split("-"),h=parseInt(u[2]),d=!0;t=="increase"?(d=h<=11,h=h+1):t=="decrease"&&(d=h>e,h=h-1),d&&this.set_col_class(a,h)}}set_col_class(t,e){let n=$.grep(t.classList,function(a){return a.indexOf("col-")!==0});t.classList="",n.forEach(a=>{t.classList.add(a)});let i="col-xs-12";e<=12&&e>=7?i="col-xs-"+e:e==6||e==5?(t.classList.add("col-xs-12"),i="col-sm-"+e):e==4?(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),i="col-md-"+e):e==3&&(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),t.classList.add("col-md-4"),i="col-lg-"+e),t.classList.add(i)}move_block(t){let e=this.api.blocks.getCurrentBlockIndex(),n=e+(t=="down"?1:-1);this.api.blocks.move(n,e)}};var go=class extends Or{constructor({data:t,config:e,api:n,readOnly:i}){super({config:e,api:n,readOnly:i});this._settings=this.config,this._data=this.normalizeData(t),this._element=this.getTag(),this.data=t,this.col=this.data.col?this.data.col:"12"}normalizeData(t){let e={};return typeof t!="object"&&(t={}),e.text=t.text||"",e.col=parseInt(t.col)||12,e}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-head"></div>'),e=$('<div class="widget-control"></div>');return t[0].appendChild(this._element),e.appendTo(t),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","header","edit-mode"),this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",`${__("Drag")}`,null,e),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return t.text.trim()!==""}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML.replace(/&nbsp;/gi,""),col:this.get_col()}}rendered(){super.rendered(this._element)}static get sanitize(){return{level:!1,text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data}set data(t){if(this._data=this.normalizeData(t),t.text!==void 0){let e=this._data.text||"",n=/<[a-z][\s\S]*>/i.test(e);this._element.innerHTML=n?e:`<span class="h${this._settings.default_size}">${e}</span>`}!this.readOnly&&this.wrapper&&this.wrapper.classList.add("widget","header")}getTag(){let t=document.createElement("DIV"),e=this._data.text||"&nbsp";return t.innerHTML=`<span class="h${this._settings.default_size}"><b>${e}</b></span>`,t.classList.add("ce-header"),this.readOnly||(t.contentEditable=!0),t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}static get toolbox(){return{title:"Heading",icon:frappe.utils.icon("header","sm")}}};var yi=class extends Or{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:e,api:n,readOnly:i}){super({config:e,api:n,readOnly:i});this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=this.config.placeholder?this.config.placeholder:yi.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=this.config.preserveBlank!==void 0?this.config.preserveBlank:!1,this.data=t,this.col=this.data.col?this.data.col:"12"}onKeyUp(t){if(!this.wrapper||(this.show_hide_block_list(!0),t.code!=="Backspace"&&t.code!=="Delete"))return;let{textContent:e}=this._element;e===""&&(this.show_hide_block_list(),this._element.innerHTML="")}show_hide_block_list(t){let n=($(this.wrapper).hasClass("ce-paragraph")?$(this.wrapper.parentElement):$(this.wrapper)).find(".block-list-container.dropdown-list");n.removeClass("hidden"),t&&n.addClass("hidden")}drawView(){let t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block,"widget"),t.contentEditable=!1,this.readOnly||(t.contentEditable=!0,t.addEventListener("focus",()=>{let{textContent:e}=this._element;e===""&&this.show_hide_block_list()}),t.addEventListener("blur",()=>{!this.over_block_list_item&&this.show_hide_block_list(!0)}),t.dataset.placeholder=this.api.i18n.t(this._placeholder),t.addEventListener("keyup",this.onKeyUp)),t}open_block_list(){let t="Templates",e=$(`
			<div class="block-list-container dropdown-list">
				<div class="dropdown-title">${t.toUpperCase()}</div>
			</div>
		`),n=frappe.workspace_block.blocks;Object.keys(n).forEach(i=>{let a=$(`
				<div class="block-list-item dropdown-item">
					<span class="dropdown-item-icon">${n[i].toolbox.icon}</span>
					<span class="dropdown-item-label">${__(n[i].toolbox.title)}</span>
				</div>
			`);a.click(o=>{o.stopPropagation();let s=this.api.blocks.getCurrentBlockIndex();this.api.blocks.delete(),this.api.blocks.insert(i,{},{},s),this.api.caret.setToBlock(s)}),a.mouseenter(()=>{this.over_block_list_item=!0}).mouseleave(()=>{this.over_block_list_item=!1}),e.append(a)}),e.addClass("hidden"),e.appendTo(this.wrapper)}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-control paragraph-control"></div>');return this.wrapper.appendChild(this._element),this._element.classList.remove("widget"),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","paragraph","edit-mode"),this.open_block_list(),this.add_new_block_button(),this.add_settings_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",`${__("Drag")}`,null,t),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return!(t.text.trim()===""&&!this._preserveBlank)}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML,col:this.get_col()}}rendered(){super.rendered(this._element)}onPaste(t){let e={text:t.detail.data.innerHTML};this.data=e}static get sanitize(){return{text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){let t=this._element.innerHTML;return this._data.text=t,this._data}set data(t){this._data=t||{},this._element.innerHTML=__(this._data.text)||""}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{title:"Text",icon:frappe.utils.icon("text","sm")}}};var _o=class extends Or{static get toolbox(){return{title:"Card",icon:frappe.utils.icon("card","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:n,readOnly:i,block:a}){super({data:t,api:e,config:n,readOnly:i,block:a});this.sections={},this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}render(){if(this.wrapper=document.createElement("div"),this.new("card","links"),!(this.data&&this.data.card_name&&!this.make("card",__(this.data.card_name),"links")))return this.readOnly||($(this.wrapper).find(".widget").addClass("links edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.card_name}save(){return{card_name:this.wrapper.getAttribute("card_name"),col:this.get_col(),new:this.new_block_widget}}};var vo=class extends Or{static get toolbox(){return{title:"Chart",icon:frappe.utils.icon("chart","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:n,readOnly:i,block:a}){super({data:t,api:e,config:n,readOnly:i,block:a});this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:6,max_widget_count:2}}render(){if(this.wrapper=document.createElement("div"),this.new("chart"),!(this.data&&this.data.chart_name&&!this.make("chart",__(this.data.chart_name))))return this.readOnly||($(this.wrapper).find(".widget").addClass("chart edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.chart_name}save(){return{chart_name:this.wrapper.getAttribute("chart_name"),col:this.get_col(),new:this.new_block_widget}}};var bo=class extends Or{static get toolbox(){return{title:"Shortcut",icon:frappe.utils.icon("shortcut","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:n,readOnly:i,block:a}){super({data:t,api:e,config:n,readOnly:i,block:a});this.col=this.data.col?this.data.col:"3",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}rendered(){super.rendered(),this.remove_last_divider(),$(window).resize(()=>{this.remove_last_divider()})}remove_last_divider(){let t=this.wrapper.closest(".ce-block"),e=$(".layout-main-section")[0].offsetWidth,n=t.offsetLeft+t.offsetWidth;e-n<=110?$(t).find(".divider").addClass("hidden"):$(t).find(".divider").removeClass("hidden")}render(){if(this.wrapper=document.createElement("div"),this.new("shortcut"),!(this.data&&this.data.shortcut_name&&!this.make("shortcut",__(this.data.shortcut_name)))){if(!this.readOnly)$(this.wrapper).find(".widget").addClass("shortcut edit-mode"),this.add_settings_button(),this.add_new_block_button();else{let t=frappe.utils.icon("arrow-up-right","xs","","stroke: grey","ml-2");$(this.wrapper).find(".widget .widget-title").append(t),$(this.wrapper).append($('<div class="divider"></div>'))}return this.wrapper}}validate(t){return!!t.shortcut_name}save(){return{shortcut_name:this.wrapper.getAttribute("shortcut_name"),col:this.get_col(),new:this.new_block_widget}}};var yo=class extends Or{static get toolbox(){return{title:"Spacer",icon:frappe.utils.icon("spacer","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:n,readOnly:i}){super({data:t,api:e,config:n,readOnly:i});this.col=this.data.col?this.data.col:"12"}render(){if(this.wrapper=document.createElement("div"),this.wrapper.classList.add("widget","spacer"),!this.readOnly){let t=$(`
				<div class="widget-head">
					<div class="spacer-left"></div>
					<div>Spacer</div>
					<div class="widget-control"></div>
				</div>
			`);t.appendTo(this.wrapper),this.wrapper.classList.add("edit-mode"),this.wrapper.style.minHeight=40+"px";let e=t.find(".widget-control");this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",`${__("Drag")}`,null,e)}return this.wrapper}save(){return{col:this.get_col()}}};var wo=class extends Or{static get toolbox(){return{title:"Onboarding",icon:frappe.utils.icon("onboarding","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:n,readOnly:i,block:a}){super({data:t,api:e,config:n,readOnly:i,block:a});this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!1}}rendered(){let t=this.wrapper.closest(".ce-block");this.readOnly&&!$(this.wrapper).find(".onboarding-widget-box").is(":visible")&&$(t).hide(),this.set_col_class(t,this.get_col())}new(t,e=t){let n=this,i=yn(e),a=t+"_name";this.dialog=new i({label:this.label,type:e,primary_action:o=>{o.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(Mr(Vt({},o),{widget_type:e,container:this.wrapper,options:Mr(Vt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),new:!0})),this.block_widget.customize(this.options),this.wrapper.setAttribute(a,this.block_widget.label||this.block_widget.onboarding_name),$(this.wrapper).find(".widget").addClass(`${e} edit-mode`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[a]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{n.wrapper.closest(".ce-block").remove()}))}make(t,e){let n=this.config.page_data.onboardings.items.find(i=>i.label==e);return n?(this.wrapper.innerHTML="",n.in_customize_mode=!this.readOnly,this.block_widget=frappe.widget.make_widget({container:this.wrapper,widget_type:"onboarding",in_customize_mode:n.in_customize_mode,options:Mr(Vt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),label:n.label,title:n.title||__("Let's Get Started"),subtitle:n.subtitle,steps:n.items,success:n.success,docs_url:n.docs_url,user_can_dismiss:n.user_can_dismiss}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(this.options),!0):!1}render(){if(this.wrapper=document.createElement("div"),this.new("onboarding"),!(this.data&&this.data.onboarding_name&&!this.make("onboarding",this.data.onboarding_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("onboarding edit-mode"),this.add_settings_button(),this.add_new_block_button()),$(this.wrapper).css("padding-bottom","20px"),this.wrapper}validate(t){return!!t.onboarding_name}save(){return{onboarding_name:this.wrapper.getAttribute("onboarding_name"),col:this.get_col(),new:this.new_block_widget}}};var ko=class{static get isInline(){return!0}get state(){return this._state}set state(t){this._state=t}get title(){return"Header Size"}constructor({api:t}){this.api=t,this.button=null,this._state=!0,this.selectedText=null,this.range=null,this.headerLevels=[]}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`${frappe.utils.icon("header","sm")}${frappe.utils.icon("small-down","xs")}`,this.button.classList="header-inline-tool",this.button}checkState(t){let e=this.api.selection.findParentTag("SPAN");for(let i of["h1","h2","h3","h4","h5","h6"])if(e&&e.classList.contains(i)){let a=i.match(/\d+/)[0];$(".header-inline-tool svg:first-child").replaceWith(frappe.utils.icon(`header-${a}`,"md"))}t.anchorNode}change_size(t,e){if(!t)return;let n=document.createElement("SPAN");n.classList.add(`h${e}`),n.innerText=t.toString(),this.remove_parent_tag(t,t.commonAncestorContainer,n),t.extractContents(),t.insertNode(n),this.api.inlineToolbar.close()}remove_parent_tag(t,e,n){let i=t.startContainer.data,a=n.innerText,o=e.parentElement;i!==a&&(o=e),o.innerText==a&&!o.classList.contains("ce-header")&&!o.classList.contains("ce-paragraph")&&(this.remove_parent_tag(t,e.parentElement,n),o.remove())}surround(t){this.selectedText=t.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:t,this.state=!this.actions.hidden}renderActions(){this.actions=document.createElement("div"),this.actions.classList="header-level-select",this.headerLevels=new Array(6).fill().map((t,e)=>{let n=document.createElement("div");return n.classList.add(`h${e+1}`,"header-level"),n.innerText=`Header ${e+1}`,n});for(let[t,e]of this.headerLevels.entries())this.actions.appendChild(e),this.api.listeners.on(e,"click",()=>{this.change_size(this.range,t+1)});return this.actions.hidden=!0,this.actions}destroy(){for(let t of this.headerLevels)this.api.listeners.off(t,"click")}};frappe.provide("frappe.workspace_block");frappe.workspace_block.blocks={header:go,paragraph:yi,card:_o,chart:vo,shortcut:bo,spacer:yo,onboarding:wo};frappe.workspace_block.tunes={header_size:ko};var Fr=class{constructor(t){Object.assign(this,t),this.make()}refresh(){this.set_title(),this.set_actions(),this.set_body(),this.setup_events()}get_config(){return{name:this.name,label:this.label}}customize(t){if(this.in_customize_mode=!0,this.action_area.empty(),t.allow_sorting&&frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",`${__("Drag")}`,null,this.action_area),t.allow_hiding){this.hidden&&(this.widget.removeClass("hidden"),this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5));let e=this.hidden?"fa fa-eye":"fa fa-eye-slash",n=this.hidden?`${__("Show")}`:`${__("Hide")}`;frappe.utils.add_custom_button(`<i class="${e}" aria-hidden="true"></i>`,()=>this.hide_or_show(),"show-or-hide-button",n,null,this.action_area),this.show_or_hide_button=this.action_area.find(".show-or-hide-button")}t.allow_edit&&frappe.utils.add_custom_button(frappe.utils.icon("edit","xs"),()=>this.edit(),"edit-button",`${__("Edit")}`,null,this.action_area)}make(){this.make_widget(),this.widget.appendTo(this.container)}make_widget(){this.widget=$(`<div class="widget" data-widget-name="${this.name?this.name:""}">
			<div class="widget-head">
				<div class="widget-label">
					<div class="widget-title"></div>
					<div class="widget-subtitle"></div>
				</div>
				<div class="widget-control"></div>
			</div>
			<div class="widget-body"></div>
			<div class="widget-footer"></div>
		</div>`),this.title_field=this.widget.find(".widget-title"),this.subtitle_field=this.widget.find(".widget-subtitle"),this.body=this.widget.find(".widget-body"),this.action_area=this.widget.find(".widget-control"),this.head=this.widget.find(".widget-head"),this.footer=this.widget.find(".widget-footer"),this.refresh()}set_title(t){let e=this.title||this.label||this.name,n=t?frappe.ellipsis(e,t):e;if(this.icon){let i=frappe.utils.icon(this.icon,"lg");this.title_field[0].innerHTML=`${i} <span class="ellipsis" title="${n}">${n}</span>`}else this.title_field[0].innerHTML=`<span class="ellipsis" title="${n}">${n}</span>`,t&&this.title_field[0].setAttribute("title",this.title||this.label);this.subtitle&&this.subtitle_field.html(this.subtitle)}delete(t=!0,e=!1){let n=i=>{this.widget.remove(),!e&&this.options.on_delete&&this.options.on_delete(this.name,i)};t?(this.widget.addClass("zoom-out"),setTimeout(()=>{n(!0)},300)):n(!1)}edit(){let t=yn(this.widget_type);this.edit_dialog=new t({label:this.label,type:this.widget_type,values:this.get_config(),primary_action:e=>{Object.assign(this,e),e.name=this.name,this.new=!0,this.refresh(),this.options.on_edit&&this.options.on_edit(e)},primary_action_label:__("Save")}),this.edit_dialog.make()}toggle_width(){this.width=="Full"?(this.widget.removeClass("full-width"),this.width=null,this.refresh()):(this.widget.addClass("full-width"),this.width="Full",this.refresh());let t=this.width=="Full"?`${__("Collapse")}`:`${__("Expand")}`;this.resize_button.attr("title",t)}hide_or_show(){this.hidden?(this.body.css("opacity",1),this.title_field.css("opacity",1),this.footer.css("opacity",1),this.hidden=!1):(this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5),this.hidden=!0),this.show_or_hide_button.empty();let t=this.hidden?"fa fa-eye":"fa fa-eye-slash",e=this.hidden?`${__("Show")}`:`${__("Hide")}`;$(`<i class="${t}" aria-hidden="true" title="${e}"></i>`).appendTo(this.show_or_hide_button)}setup_events(){}set_actions(){}set_body(){}};frappe.provide("frappe.widget.utils");frappe.provide("frappe.dashboards");frappe.provide("frappe.dashboards.chart_sources");var xo=class extends Fr{constructor(t){t.shadow=!0;super(t);this.height=this.height||240}get_config(){return{name:this.name,chart_name:this.chart_name,label:this.label,hidden:this.hidden,width:this.width}}refresh(){delete this.dashboard_chart,this.set_body(),this.make_chart()}set_chart_title(){let t=this.widget.width()<600?40:60;this.set_title(t)}set_body(){this.widget.addClass("dashboard-widget-box"),this.width=="Full"&&this.widget.addClass("full-width")}setup_container(){this.body.empty(),this.chart_doc.type=="Heatmap"&&this.setup_heatmap_container(),this.loading=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("Loading...")}</div>`),this.loading.appendTo(this.body),this.empty=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("No Data...")}</div>`),this.empty.hide().appendTo(this.body),this.chart_wrapper=$("<div></div>"),this.chart_wrapper.appendTo(this.body),this.$heatmap_legend=null,this.set_chart_title()}setup_heatmap_container(){this.widget.addClass("heatmap-chart"),this.widget.removeClass("full-width").addClass("full-width"),this.width="Full"}set_summary(){this.$summary?this.$summary.empty():(this.$summary=$('<div class="report-summary"></div>').hide(),this.head.after(this.$summary)),this.summary.forEach(t=>{frappe.utils.build_summary_item(t).appendTo(this.$summary)}),this.summary.length&&this.$summary.show()}make_chart(){this.get_settings().then(()=>{if(!this.settings){this.deleted=!0,this.widget.remove();return}this.chart_settings||(this.chart_settings={}),this.setup_container(),this.in_customize_mode||(this.action_area.empty(),this.prepare_chart_actions(),this.chart_doc.timeseries&&this.chart_doc.chart_type!=="Custom"&&this.render_time_series_filters()),frappe.run_serially([()=>this.prepare_chart_object(),()=>this.setup_filter_button(),()=>this.fetch_and_update_chart()])})}render_time_series_filters(){let t=this.get_time_series_filters();frappe.dashboard_utils.render_chart_filters(t,"chart-actions",this.action_area,0)}get_time_series_filters(){let t;return this.chart_doc.type=="Heatmap"?t=[{label:this.chart_settings.heatmap_year||this.chart_doc.heatmap_year,options:frappe.dashboard_utils.get_years_since_creation(frappe.boot.user.creation),action:e=>{this.selected_heatmap_year=e,this.save_chart_config_for_user({heatmap_year:this.selected_heatmap_year}),this.fetch_and_update_chart()}}]:t=[{label:this.chart_settings.time_interval||this.chart_doc.time_interval,options:["Yearly","Quarterly","Monthly","Weekly","Daily"],icon:"calendar",class:"time-interval-filter",action:e=>{this.selected_time_interval=e,this.save_chart_config_for_user({time_interval:this.selected_time_interval}),this.fetch_and_update_chart()}},{label:this.chart_settings.timespan||this.chart_doc.timespan,options:["Select Date Range","Last Year","Last Quarter","Last Month","Last Week"],class:"timespan-filter",action:e=>{this.selected_timespan=e,this.selected_timespan==="Select Date Range"?this.render_date_range_field():(this.selected_from_date=null,this.selected_to_date=null,this.date_field_wrapper&&(this.date_field_wrapper.hide(),this.title_field.show(),this.subtitle_field.show(),this.head.css("flex-direction","row")),this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:null,to_date:null}),this.fetch_and_update_chart())}}],t}fetch_and_update_chart(){this.args={timespan:this.selected_timespan||this.chart_settings.timespan,time_interval:this.selected_time_interval||this.chart_settings.time_interval,from_date:this.selected_from_date||this.chart_settings.from_date,to_date:this.selected_to_date||this.chart_settings.to_date,heatmap_year:this.selected_heatmap_year||this.chart_settings.heatmap_year},this.fetch(this.filters,!0,this.args).then(t=>{this.chart_doc.chart_type=="Report"&&(this.report_result=t,this.summary=t.report_summary,t=this.get_report_chart_data(t)),this.update_chart_object(),this.data=t,this.render()})}render_date_range_field(){(!this.date_field_wrapper||!this.date_field_wrapper.is(":visible"))&&(this.date_field_wrapper=$('<div class="dashboard-date-field pull-right"></div>').insertAfter(this.action_area.find(".timespan-filter")),this.width!=="Full"&&this.widget.width()<700&&(this.title_field.hide(),this.subtitle_field.hide(),this.head.css("flex-direction","row-reverse")),this.date_range_field=frappe.ui.form.make_control({df:{fieldtype:"DateRange",fieldname:"from_date",placeholder:"Date Range",input_class:"input-xs",default:[this.chart_settings.from_date,this.chart_settings.to_date],value:[this.chart_settings.from_date,this.chart_settings.to_date],reqd:1,change:()=>{let t=this.date_range_field.get_value();this.selected_from_date=t[0],this.selected_to_date=t[1],t&&t.length==2&&(this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:this.selected_from_date,to_date:this.selected_to_date}),this.fetch_and_update_chart())}},parent:this.date_field_wrapper,render_input:1}),this.date_range_field.$input.focus())}get_report_chart_data(t){if(t.chart&&this.chart_doc.use_report_chart)return t.chart.data;{let e=[];this.chart_doc.y_axis.map(o=>{e.push(o.y_field)});let n={y_fields:e,x_field:this.chart_doc.x_field,chart_type:this.chart_doc.type,color:this.chart_doc.color},i=t.columns.map(o=>frappe.report_utils.prepare_field_from_column(o));return frappe.report_utils.make_chart_options(i,t,n).data}}prepare_chart_actions(){let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{delete this.dashboard_chart,this.make_chart()}},{label:__("Edit"),action:"action-edit",handler:()=>{frappe.set_route("Form","Dashboard Chart",this.chart_doc.name)}},{label:__("Reset Chart"),action:"action-reset",handler:()=>{this.reset_chart(),delete this.dashboard_chart,this.make_chart()}}];this.chart_doc.document_type?t.push({label:__("{0} List",[this.chart_doc.document_type]),action:"action-list",handler:()=>{frappe.set_route("List",this.chart_doc.document_type)}}):this.chart_doc.chart_type==="Report"&&t.push({label:__("{0} Report",[this.chart_doc.report_name]),action:"action-list",handler:()=>{frappe.set_route("query-report",this.chart_doc.report_name)}}),this.set_chart_actions(t)}setup_filter_button(){this.in_customize_mode||(this.is_document_type=this.chart_doc.chart_type!=="Report"&&this.chart_doc.chart_type!=="Custom",this.filter_button=$(`<div class="filter-chart btn btn-xs pull-right">
				${frappe.utils.icon("filter","sm")}
			</div>`),this.filter_button.appendTo(this.action_area),this.is_document_type?(this.filter_group&&(this.filters=this.filter_group.get_filters()),this.create_filter_group_and_add_filters()):this.filter_button.on("click",()=>{let t;frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(e=>{this.is_document_type?t=[{fieldtype:"HTML",fieldname:"filter_area"}]:e?t=e.filter(n=>n.fieldname).map(n=>(Object.assign(n,n.dashboard_config||{}),n)):t=[{fieldtype:"HTML",options:__("No Filters Set")}],this.setup_filter_dialog(t)})}))}setup_filter_dialog(t){let e=this,n=new frappe.ui.Dialog({title:__("Set Filters for {0}",[this.chart_doc.chart_name]),fields:t,primary_action:function(){let i=this.get_values();i&&(this.hide(),e.filters=i,e.save_chart_config_for_user({filters:e.filters}),e.fetch_and_update_chart())},primary_action_label:"Set"});n.show(),this.chart_doc.chart_type=="Report"&&(frappe.query_report=new frappe.views.QueryReport({filters:n.fields_list}),frappe.query_reports[this.chart_doc.report_name].onload&&frappe.query_reports[this.chart_doc.report_name].onload(frappe.query_report)),n.set_values(this.filters)}reset_chart(){this.save_chart_config_for_user(null,1),this.chart_settings={},this.filters=null,this.selected_time_interval=null,this.selected_timespan=null,this.selected_heatmap_year=null}save_chart_config_for_user(t,e=0){Object.assign(this.chart_settings,t),frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.save_chart_config",{reset:e,config:this.chart_settings,chart_name:this.chart_doc.chart_name})}create_filter_group_and_add_filters(){this.filter_group=new frappe.ui.FilterGroup({doctype:this.chart_doc.document_type,parent_doctype:this.chart_doc.parent_document_type,filter_button:this.filter_button,on_change:()=>{this.filters=this.filter_group.get_filters(),this.save_chart_config_for_user({filters:this.filters}),this.fetch_and_update_chart()}}),this.filters&&frappe.model.with_doctype(this.chart_doc.document_type,()=>{this.filter_group.add_filters_to_filter_group(this.filters)})}set_chart_actions(t){this.chart_actions=$(`<div class="chart-actions dropdown pull-right">
			<button data-toggle="dropdown"
				aria-haspopup="true"aria-expanded="false"
				class="btn btn-xs btn-secondary chart-menu"
			>
				<svg class="icon icon-sm">
					<use xlink:href="#icon-dot-horizontal">
					</use>
				</svg>
			</button>
			<ul class="dropdown-menu dropdown-menu-right">
				${t.map(e=>`<li><a class="dropdown-item" data-action="${e.action}">${e.label}</a></li>`).join("")}
			</ul>
		</div>
		`),this.chart_actions.find("a[data-action]").each((e,n)=>{let i=n.dataset.action;$(n).click(t.find(a=>a.action===i))}),this.chart_actions.appendTo(this.action_area)}fetch(t,e=!1,n){let i=this.settings.method;return this.chart_doc.chart_type=="Report"?n={report_name:this.chart_doc.report_name,filters:t,ignore_prepared_report:1}:n={chart_name:this.chart_doc.name,filters:t,refresh:e?1:0,time_interval:n&&n.time_interval?n.time_interval:null,timespan:n&&n.timespan?n.timespan:null,from_date:n&&n.from_date?n.from_date:null,to_date:n&&n.to_date?n.to_date:null,heatmap_year:n&&n.heatmap_year?n.heatmap_year:null},frappe.xcall(i,n)}render(){if(!this.data||!this.data.labels||!Object.keys(this.data).length)this.chart_wrapper.hide(),this.loading.hide(),this.$summary&&this.$summary.hide(),this.empty.show();else{this.loading.hide(),this.empty.hide(),this.chart_wrapper.show();let t=this.get_chart_args();this.dashboard_chart?this.dashboard_chart.update(this.data):this.dashboard_chart=frappe.utils.make_chart(this.chart_wrapper[0],t),this.width=="Full"&&this.summary&&this.set_summary(),this.chart_doc.type=="Heatmap"&&this.render_heatmap_legend()}}get_chart_args(){let t=this.get_chart_colors(),e={Line:"line",Bar:"bar",Percentage:"percentage",Pie:"pie",Donut:"donut",Heatmap:"heatmap"},n={data:this.data,type:e[this.chart_doc.type],colors:t,height:this.height,maxSlices:["Pie","Donut"].includes(this.chart_doc.type)?6:9,axisOptions:{xIsSeries:this.chart_doc.timeseries,shortenYAxisNumbers:1}};if(this.report_result&&this.report_result.chart&&(n.tooltipOptions={formatTooltipY:a=>frappe.format(a,{fieldtype:this.report_result.chart.fieldtype,options:this.report_result.chart.options},{always_show_decimals:!0,inline:!0})}),this.chart_doc.type=="Heatmap"){let a=parseInt(this.selected_heatmap_year||this.chart_settings.heatmap_year||this.chart_doc.heatmap_year);n.data.start=new Date(`${a}-01-01`),n.data.end=new Date(`${a+1}-01-01`)}let i=a=>{let o=JSON.parse(a);for(let s in o)typeof n[s]=="object"&&typeof o[s]=="object"?n[s]=Object.assign(n[s],o[s]):n[s]=o[s]};return this.custom_options&&i(this.custom_options),this.chart_doc.custom_options&&i(this.chart_doc.custom_options),n}get_chart_colors(){let t=[];return this.chart_doc.y_axis.length?this.chart_doc.y_axis.map(e=>{t.push(e.color)}):["Line","Bar"].includes(this.chart_doc.type)?t=[this.chart_doc.color||[]]:this.chart_doc.type=="Heatmap"&&(t=[]),t}render_heatmap_legend(){let t,e=n=>{t=JSON.parse(n).colors};this.custom_options&&e(this.custom_options),this.chart_doc.custom_options&&e(this.chart_doc.custom_options),!this.$heatmap_legend&&this.widget.width()>991&&(this.$heatmap_legend=$(`
				<div class="heatmap-legend">
					<ul class="legend-colors">
						<li style="background-color: ${t[0]||"#ebedf0"}"></li>
						<li style="background-color: ${t[1]||"#c6e48b"}"></li>
						<li style="background-color: ${t[2]||"#7bc96f"}"></li>
						<li style="background-color: ${t[3]||"#239a3b"}"></li>
						<li style="background-color: ${t[4]||"#196127"}"></li>
					</ul>
					<div class="legend-label">
						<div style="margin-bottom: 45px">${__("Less")}</div>
						<div>${__("More")}</div>
					</div>
				</div>
				`),this.body.append(this.$heatmap_legend))}update_last_synced(){if(!this.chart_doc.last_synced_on)return;let t=__("Last synced {0}",[comment_when(this.chart_doc.last_synced_on)]);this.subtitle_field.html(t)}update_chart_object(){frappe.db.get_doc("Dashboard Chart",this.chart_doc.name).then(t=>{this.chart_doc=t,this.update_last_synced()})}prepare_chart_object(){return this.chart_doc.type=="Heatmap"&&!this.chart_doc.heatmap_year&&(this.chart_doc.heatmap_year=frappe.dashboard_utils.get_year(frappe.datetime.now_date())),this.set_chart_filters()}set_chart_filters(){let t=this.chart_settings.filters||null,e=frappe.dashboard_utils.get_all_filters(this.chart_doc);return this.chart_doc.chart_type=="Report"?frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(n=>{e=this.update_default_date_filters(n,e),this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e)}):(this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e),Promise.resolve())}update_default_date_filters(t,e){return t&&t.map(n=>{["Date","DateRange"].includes(n.fieldtype)&&n.default&&(n.reqd||e[n.fieldname])&&(e[n.fieldname]=n.default)}),e}get_settings(){return frappe.model.with_doc("Dashboard Chart",this.chart_name).then(t=>{if(t)if(this.chart_doc=t,this.chart_doc.chart_type=="Custom"){if(frappe.dashboards.chart_sources[this.chart_doc.source])return this.settings=frappe.dashboards.chart_sources[this.chart_doc.source],Promise.resolve();{let e="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(e,{name:this.chart_doc.source}).then(n=>{frappe.dom.eval(n),this.settings=frappe.dashboards.chart_sources[this.chart_doc.source]})}}else return this.chart_doc.chart_type=="Report"?(this.settings={method:"frappe.desk.query_report.run"},Promise.resolve()):(this.settings={method:"frappe.desk.doctype.dashboard_chart.dashboard_chart.get"},Promise.resolve())})}};frappe.provide("frappe.utils");var Co=class extends Fr{constructor(t){t.shadow=!0;super(t)}get_config(){return{name:this.name,icon:this.icon,label:this.label,format:this.format,link_to:this.link_to,doc_view:this.doc_view,color:this.color,restrict_to_domain:this.restrict_to_domain,stats_filter:this.stats_filter,type:this.type}}setup_events(){this.widget.click(()=>{if(this.in_customize_mode)return;let t=frappe.utils.generate_route({route:this.route,name:this.link_to,type:this.type,is_query_report:this.is_query_report,doctype:this.ref_doctype,doc_view:this.doc_view}),e=this.get_doctype_filter();this.type=="DocType"&&e&&(frappe.route_options=e),frappe.set_route(t)})}set_actions(){if(this.in_customize_mode)return;this.widget.addClass("shortcut-widget-box");let t=this.get_doctype_filter();this.type=="DocType"&&t&&frappe.db.count(this.link_to,{filters:t}).then(e=>this.set_count(e))}get_doctype_filter(){let t=new Function(`return ${this.stats_filter}`)();return t||null}set_count(t){let e=()=>this.format?__(this.format).replace(/{}/g,t):t;this.action_area.empty();let n=e(),i=this.color&&t?this.color.toLowerCase():"gray";$(`<div class="indicator-pill ellipsis ${i}">${n}</div>`).appendTo(this.action_area)}};frappe.provide("frappe.utils");var So=class extends Fr{constructor(t){t.icon=t.icon||"file";super(t)}get_config(){return{name:this.name,links:JSON.stringify(this.links),link_count:this.links.length,label:this.label,hidden:this.hidden}}set_body(){this.options||(this.options={},this.options.links=this.links),this.widget.addClass("links-widget-box");let t=a=>a.dependencies&&a.incomplete_dependencies,e=a=>t(a)?"disabled-link":"",n=a=>a.open_count?"red":a.onboard?a.count?"blue":"yellow":"gray",i=a=>t(a)?`<span class="link-content ellipsis disabled-link">${a.label?a.label:a.name}</span>
					<div class="module-link-popover popover fade top in" role="tooltip" style="display: none;">
						<div class="arrow"></div>
						<h3 class="popover-title" style="display: none;"></h3>
						<div class="popover-content" style="padding: 12px;">
							<div class="small text-muted">${__("You need to create these first: ")}</div>
							<div class="small">${a.incomplete_dependencies.join(", ")}</div>
						</div>
					</div>`:a.youtube_id?`<span class="link-content help-video-link ellipsis" data-youtubeid="${a.youtube_id}">
						${a.label?a.label:a.name}</span>`:`<span class="link-content ellipsis">${a.label?a.label:a.name}</span>`;this.link_list=this.links.map(a=>{let o={name:a.link_to,type:a.link_type,doctype:a.doctype,is_query_report:a.is_query_report};a.link_type.toLowerCase()=="report"&&!a.is_query_report&&(o.doctype=a.dependencies);let s=frappe.utils.generate_route(o);return $(`<a href="${s}" class="link-item ellipsis ${a.onboard?"onboard-spotlight":""} ${e(a)}" type="${a.type}" title="${a.label?a.label:a.name}">
					<span class="indicator-pill no-margin ${n(a)}"></span>
					${i(a)}
			</a>`)}),this.in_customize_mode&&this.body.empty(),this.link_list.forEach(a=>a.appendTo(this.body))}setup_events(){this.link_list.forEach(t=>{let e=t.find(".link-content");if(t.hasClass("disabled-link")){let n=t.find(".module-link-popover");e.mouseover(()=>{this.in_customize_mode||n.show()}),e.mouseout(()=>n.hide())}else e.click(n=>{if(!this.in_customize_mode&&e.hasClass("help-video-link")){let i=n.currentTarget.dataset.youtubeid;frappe.help.show_video(i)}})})}};frappe.provide("frappe.utils");var To=class extends Fr{async refresh(){this.new&&await this.get_onboarding_data(),this.set_title(),this.set_actions(),this.set_body(),this.setup_events()}get_config(){return{label:this.onboarding_name}}make_body(){this.body.empty(),this.steps_wrapper=$('<div class="onboarding-steps-wrapper"></div>').appendTo(this.body),this.step_preview=$(`<div class="onboarding-step-preview">
			<div class="onboarding-step-body"></div>
			<div class="onboarding-step-footer"></div>
		</div>`).appendTo(this.body),this.step_body=this.step_preview.find(".onboarding-step-body"),this.step_footer=this.step_preview.find(".onboarding-step-footer"),this.steps.forEach((t,e)=>{this.add_step(t,e)}),this.show_step(this.steps[0])}add_step(t,e){let n="pending";t.is_skipped&&(n="skipped"),t.is_complete&&(n="complete");let i=$(`<a class="onboarding-step ${n}">
				<div class="step-title">
					<div class="step-index step-pending">${__(e+1)}</div>
					<div class="step-index step-skipped">${frappe.utils.icon("tick","xs")}</div>
					<div class="step-index step-complete">${frappe.utils.icon("tick","xs")}</div>
					<div>${__(t.title)}</div>
				</div>
			</a>`);if(t.$step=i,!t.is_complete&&!t.is_skipped){let a=$(`<div class="step-skip">${__("Skip")}</div>`);a.appendTo(i),a.on("click",()=>{this.skip_step(t),event.stopPropagation()})}return i.on("click",()=>this.show_step(t)),i.appendTo(this.steps_wrapper),i}show_step(t){this.active_step&&this.active_step.$step.removeClass("active"),t.$step.addClass("active"),this.active_step=t;let e={"Watch Video":a=>this.show_video(a),"Create Entry":a=>{a.is_complete?frappe.set_route(`/app/List/${a.reference_document}`):a.show_full_form?this.create_entry(a):this.show_quick_entry(a)},"Show Form Tour":a=>this.show_form_tour(a),"Update Settings":a=>this.update_settings(a),"View Report":a=>this.open_report(a),"Go to Page":a=>this.go_to_page(a)},n=()=>{this.step_body.empty(),this.step_footer.empty(),this.step_body.html(t.description?frappe.markdown(t.description):`<h1>${t.title}</h1>`),t.intro_video_url?$(`<button class="btn btn-primary btn-sm">${__("Watch Tutorial")}</button>`).appendTo(this.step_footer).on("click",i):$(`<button class="btn btn-primary btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>e[t.action](t))},i=()=>{this.step_body.empty(),this.step_footer.empty();let a=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${t.intro_video_url}"></div>`);a.appendTo(this.step_body);let o=new frappe.Plyr(a[0],{hideControls:!0,resetOnEnd:!0});$(`<button class="btn btn-primary btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>{o.pause(),e[t.action](t)}),$(window).one("hashchange",()=>{o.pause()}),$(`<button class="btn btn-secondary ml-2 btn-sm">${__("Back")}</button>`).appendTo(this.step_footer).on("click",n)};n()}go_to_page(t){this.mark_complete(t),frappe.set_route(t.path).then(()=>{let e=t.callback_message||__("You can continue with the onboarding after exploring this page"),n=t.callback_title||__("Awesome Work"),i=frappe.msgprint({message:e,title:n,primary_action:{action:()=>{i.hide()},label:()=>__("Continue")},wide:!0})})}open_report(t){let e=frappe.utils.generate_route({name:t.reference_report,type:"report",is_query_report:t.report_type!=="Report Builder",doctype:t.report_reference_doctype}),n=frappe.get_route();frappe.set_route(e).then(()=>{let i=frappe.msgprint({message:__(t.report_description),title:__(t.reference_report),primary_action:{action:()=>{frappe.set_route(n).then(()=>{this.mark_complete(t)}),i.hide()},label:()=>__("Continue")},secondary_action:{action:()=>{i.hide(),frappe.set_route(n).then(()=>{this.mark_complete(t)})},label:__("Go Back")}});frappe.msg_dialog.custom_onhide=()=>this.mark_complete(t)})}show_form_tour(t){let e;t.is_single?e=frappe.router.slug(t.reference_document):e=`${frappe.router.slug(t.reference_document)}/new`;let n=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=i=>{let a=()=>{let s=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Great Job"),primary_action:{action:()=>{frappe.set_route(n).then(()=>{this.mark_complete(t)}),s.hide()},label:()=>__("Continue")}})},o=t.form_tour;i.tour.init({tour_name:o,on_finish:a}).then(()=>i.tour.start())},frappe.set_route(e)}update_settings(t){let e=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=n=>{n.scroll_to_field(t.field),n.doc.__unsaved=!0},frappe.route_hooks.after_save=n=>{let i=!1,a={},o=n.doc[t.field],s=null;o&&t.value_to_validate=="%"&&(i=!0),o==t.value_to_validate&&(i=!0),cstr(o)==cstr(t.value_to_validate)&&(i=!0),i?(a.message=__("Let's take you back to onboarding"),a.title=__("Looks Great"),a.primary_action={action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")},s=()=>a.primary_action.action()):(a.message=__("Looks like you didn't change the value"),a.title=__("Oops"),a.secondary_action={action:()=>frappe.set_route(e),label:__("Go Back")},a.primary_action={action:()=>{frappe.set_route(e).then(()=>{setTimeout(()=>{this.skip_step(t)},300)})},label:__("Skip Step")},s=()=>a.secondary_action.action()),frappe.msgprint(a),frappe.msg_dialog.custom_onhide=()=>s()},frappe.set_route("Form",t.reference_document)}async create_entry(t){let e=frappe.get_route(),n=await this.get_first_document(t.reference_document);frappe.route_hooks={},frappe.route_hooks.after_load=a=>{let o=()=>{frappe.msgprint({message:__("Awesome, now try making an entry yourself"),title:__("Great"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}},s=t.form_tour;a.tour.init({tour_name:s,on_finish:o}).then(()=>a.tour.start())};let i=()=>{frappe.msgprint({message:__("You're doing great, let's take you back to the onboarding page."),title:__("Good Work \u{1F389}"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}};t.is_submittable?(frappe.route_hooks.after_save=()=>{frappe.msgprint({message:__("Submit this document to complete this step."),title:__("Great")})},frappe.route_hooks.after_submit=i):frappe.route_hooks.after_save=i,frappe.set_route("Form",t.reference_document,n)}show_quick_entry(t){let e=frappe.get_route_str();frappe.ui.form.make_quick_entry(t.reference_document,()=>{if(frappe.get_route_str()!=e){let n=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Looks Great"),primary_action:{action:()=>{n.hide(),frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}});frappe.msg_dialog.custom_onhide=()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})}}else frappe.msgprint({message:__("Let us continue with the onboarding"),title:__("Looks Great")}),this.mark_complete(t)},null,null,!0)}show_video(t){frappe.help.show_video(t.video_url,t.title),this.mark_complete(t)}mark_complete(t){let e=t.$step,n=()=>{t.is_complete=!0,e.removeClass("skipped"),e.addClass("complete")};this.update_step_status(t,"is_complete",1,n)}skip_step(t){let e=t.$step,n=()=>{t.is_skipped=!0,e.removeClass("complete"),e.removeClass("pending"),e.addClass("skipped")};this.update_step_status(t,"is_skipped",1,n)}update_step_status(t,e,n,i){let a={is_complete:"complete",is_skipped:"skipped"};frappe.route_hooks={},frappe.call("frappe.desk.desktop.update_onboarding_step",{name:t.name,field:e,value:n}).then(()=>{i(),t.$step.removeClass("pending").removeClass("complete").removeClass("skipped").addClass(a[e]),this.steps.filter(s=>!(s.is_complete||s.is_skipped)).length==0&&this.show_success()})}show_success(){let t=this.success||__("You seem good to go!"),e=this.success_state_image||"/assets/frappe/images/ui-states/success-color.png",n="";this.docs_url&&(n=__('Congratulations on completing the module setup. If you want to learn more you can refer to the documentation <a target="_blank" href="{0}">here</a>.',[this.docs_url]));let i=$(`<div class="text-center onboarding-success">
					<img src="${e}" alt="Success State" class="zoom-in success-state">
					<h3>${t}</h3>
					<div class="text-muted">${n}</div>
					<button class="btn btn-primary btn-sm">${__("Continue")}</button>
			</div>
		`);i.find(".btn").on("click",()=>this.delete()),this.step_preview.empty(),i.appendTo(this.step_preview)}set_body(){this.widget.addClass("onboarding-widget-box"),this.is_dismissed()?this.widget.hide():this.make_body()}is_dismissed(){if(this.in_customize_mode)return!1;let t=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");if(Object.keys(t).includes(this.title)){let e=new Date(t[this.title]),n=new Date;return frappe.datetime.get_hour_diff(n,e)<24}return!1}set_actions(){if(this.in_customize_mode)return;this.action_area.empty();let t=$(`<div class="small" style="cursor:pointer;">${__("Dismiss",null,"Stop showing the onboarding widget.")}</div>`);t.on("click",()=>{let e=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");e[this.title]=frappe.datetime.now_datetime(),localStorage.setItem("dismissed-onboarding",JSON.stringify(e)),this.delete(!0,!0),this.widget.closest(".ce-block").hide()}),t.appendTo(this.action_area)}get_onboarding_data(){return frappe.model.with_doc("Module Onboarding",this.onboarding_name).then(t=>{if(t){this.onboarding_doc=t,this.label=t.label,this.title=t.title||__("Let's Get Started"),this.subtitle=t.subtitle,this.success=t.success,this.docs_url=t.docs_url,this.user_can_dismiss=t.user_can_dismiss;let e="frappe.desk.doctype.onboarding_step.onboarding_step.get_onboarding_steps";return frappe.xcall(e,{ob_steps:t.steps}).then(n=>{this.steps=n})}})}async get_first_document(t){let{message:e}=await frappe.db.get_value("Form Tour",{reference_doctype:t},["first_document"]),n;return e.first_document&&await frappe.db.get_list(t,{order_by:"creation"}).then(i=>{Array.isArray(i)&&i.length&&(n=i[0].name)}),n||"new"}};var Eo=class{constructor(t){Object.assign(this,t),this.make()}customize(){}make(){this.make_widget(),this.widget.appendTo(this.container),this.setup_events()}get_title(){let t=`New ${frappe.model.unscrub(this.type)}`;return __(t)}make_widget(){let t=`new-${frappe.scrub(frappe.model.unscrub(this.type),"-")}-widget`;this.widget=$(`<div class="widget new-widget ${t}">
				+ ${this.get_title()}
			</div>`),this.body=this.widget}setup_events(){this.widget.on("click",()=>{this.custom_dialog?this.custom_dialog():this.open_dialog()})}open_dialog(){let t=yn(this.type);this.dialog=new t({label:this.label,type:this.type,values:!1,default_values:this.default_values,primary_action:this.on_create}),this.dialog.make()}delete(){this.widget.remove()}};frappe.provide("frappe.utils");var Ao=class extends Fr{constructor(t){t.shadow=!0;super(t)}get_config(){return{name:this.name,label:this.label,color:this.color,hidden:this.hidden}}refresh(){this.set_body()}set_body(){this.widget.addClass("number-widget-box"),this.make_card()}set_title(){$(this.title_field).html(`<div class="number-label">${this.card_doc.label}</div>`)}make_card(){frappe.model.with_doc("Number Card",this.name).then(t=>{if(t)this.card_doc=t,this.render_card();else if(this.document_type)frappe.run_serially([()=>this.create_number_card(),()=>this.render_card()]);else{this.delete(!1);return}this.set_events()})}create_number_card(){return this.set_doc_args(),frappe.xcall("frappe.desk.doctype.number_card.number_card.create_number_card",{args:this.card_doc}).then(t=>{this.name=t.name,this.card_doc=t,this.widget.attr("data-widget-name",this.name)})}set_events(){$(this.body).click(()=>{this.in_customize_mode||this.card_doc.type=="Custom"||this.set_route()})}set_route(){let t=this.card_doc.type!=="Report",e=t?this.card_doc.document_type:this.card_doc.report_name,n=frappe.utils.generate_route({name:e,type:t?"doctype":"report",is_query_report:!t});if(t){let i=JSON.parse(this.card_doc.filters_json);frappe.route_options=i.reduce((a,o)=>Object.assign(a,{[`${o[0]}.${o[1]}`]:[o[2],o[3]]}),{})}frappe.set_route(n)}set_doc_args(){this.card_doc=Object.assign({},{document_type:this.document_type,label:this.label,function:this.function,aggregate_function_based_on:this.aggregate_function_based_on,color:this.color,filters_json:this.stats_filter})}get_settings(t){return this.filters=this.get_filters(),{Custom:{method:this.card_doc.method,args:{filters:this.filters},get_number:n=>this.get_number_for_custom_card(n)},Report:{method:"frappe.desk.query_report.run",args:{report_name:this.card_doc.report_name,filters:this.filters,ignore_prepared_report:1},get_number:n=>this.get_number_for_report_card(n)},"Document Type":{method:"frappe.desk.doctype.number_card.number_card.get_result",args:{doc:this.card_doc,filters:this.filters},get_number:n=>this.get_number_for_doctype_card(n)}}[t]}get_filters(){return frappe.dashboard_utils.get_all_filters(this.card_doc)}render_card(){this.prepare_actions(),this.set_title(),this.set_loading_state(),this.card_doc.type||(this.card_doc.type="Document Type"),this.settings=this.get_settings(this.card_doc.type),frappe.run_serially([()=>this.render_number(),()=>this.render_stats()])}set_loading_state(){$(this.body).html(`<div class="number-card-loading text-muted">
			${__("Loading...")}
		</div>`)}get_number(){return frappe.xcall(this.settings.method,this.settings.args).then(t=>this.settings.get_number(t))}get_number_for_custom_card(t){typeof t=="object"?(this.number=t.value,this.set_formatted_number(t)):this.formatted_number=t}get_number_for_doctype_card(t){if(this.number=t,this.card_doc.function!=="Count")return frappe.model.with_doctype(this.card_doc.document_type,()=>{let e=frappe.meta.get_docfield(this.card_doc.document_type,this.card_doc.aggregate_function_based_on);this.set_formatted_number(e)});this.formatted_number=t}get_number_for_report_card(t){let e=this.card_doc.report_field,n=t.result.reduce((a,o)=>(o[e]&&a.push(o[e]),a),[]),i=t.columns.find(a=>a.fieldname==e);this.number=frappe.report_utils.get_result_of_fn(this.card_doc.report_function,n),this.set_formatted_number(i)}set_formatted_number(t){let e=frappe.sys_defaults.country,i=frappe.utils.shorten_number(this.number,e,5).split(" "),a=i[1]||"",o=$(frappe.format(i[0],t)).text();this.formatted_number=o+" "+__(a)}render_number(){return this.get_number().then(()=>{$(this.body).html(`<div class="widget-content">
				<div class="number" style="color:${this.card_doc.color}">${this.formatted_number}</div>
				</div>`)})}render_stats(){if(this.card_doc.type!=="Document Type")return;let t="",e="";return this.get_percentage_stats().then(()=>{this.percentage_stat==0||this.percentage_stat==null?e="grey-stat":this.percentage_stat>0?(t=`<span class="indicator-pill-round green">
						${frappe.utils.icon("arrow-up-right","xs")}
					</span>`,e="green-stat"):(t=`<span class="indicator-pill-round red">
						${frappe.utils.icon("arrow-down-left","xs")}
					</span>`,e="red-stat");let i={Daily:__("since yesterday"),Weekly:__("since last week"),Monthly:__("since last month"),Yearly:__("since last year")}[this.card_doc.stats_time_interval],a=()=>{if(this.percentage_stat==null)return NaN;let o=this.percentage_stat.split(" "),s=o[1]||"";return Math.abs(o[0])+" "+s};$(this.body).find(".widget-content").append(`<div class="card-stats ${e}">
				<span class="percentage-stat-area">
					${t}
					<span class="percentage-stat">
						${a()} %
					</span>
				</span>
				<span class="stat-period text-muted">
					${i}
				</span>
			</div>`)})}get_percentage_stats(){return frappe.xcall("frappe.desk.doctype.number_card.number_card.get_percentage_difference",{doc:this.card_doc,filters:this.filters,result:this.number}).then(t=>{t!==void 0&&(this.percentage_stat=frappe.utils.shorten_number(t))})}prepare_actions(){let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{this.render_card()}},{label:__("Edit"),action:"action-edit",handler:()=>{frappe.set_route("Form","Number Card",this.name)}}];this.set_card_actions(t)}set_card_actions(t){this.card_actions=$(`<div class="card-actions dropdown pull-right">
				<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				...
				</a>
				<ul class="dropdown-menu" style="max-height: 300px; overflow-y: auto;">
					${t.map(e=>`<li class="dropdown-item">
									<a data-action="${e.action}">${e.label}</a>
								</li>`).join("")}
				</ul>
			</div>`),this.card_actions.find("a[data-action]").each((e,n)=>{let i=n.dataset.action;$(n).click(t.find(a=>a.action===i))}),this.action_area.html(this.card_actions)}};frappe.provide("frappe.widget");frappe.widget.widget_factory={chart:xo,base:Fr,shortcut:Co,links:So,onboarding:To,number_card:Ao};frappe.widget.make_widget=r=>{let t=frappe.widget.widget_factory[r.widget_type];if(t)return new t(r);console.warn("Invalid Widget Name: "+r.widget_type)};var nc=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.widget_order=[],this.make()}make(){this.make_container(),this.title?this.set_title():this.title_area.remove(),this.widgets&&this.make_widgets()}make_container(){let t=$(`<div class="widget-group ${this.class_name||""}">
				<div class="widget-group-head">
					<div class="widget-group-title"></div>
					<div class="widget-group-control"></div>
				</div>
				<div class="widget-group-body grid-col-${this.columns}">
				</div>
			</div>`);this.widget_area=t,this.hidden&&this.widget_area.hide(),this.title_area=t.find(".widget-group-title"),this.control_area=t.find(".widget-group-control"),this.body=t.find(".widget-group-body"),!this.widgets.length&&this.widget_area.hide(),t.appendTo(this.container)}set_title(){this.title_area[0].innerText=this.title}make_widgets(){this.body.empty(),this.widgets.forEach(t=>{this.add_widget(t)})}add_widget(t){let e=frappe.widget.make_widget(Mr(Vt({},t),{widget_type:this.type,container:this.body,height:this.height||null,options:Mr(Vt({},this.options),{on_delete:n=>this.on_delete(n)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}remove_widget(t){t.widget.remove(),this.widgets_list.filter(e=>{if(e.name==t.name)return!1}),delete this.widgets_dict[t.name]}customize(){this.hidden||this.widget_area.show(),this.widgets_list.forEach(t=>{t.customize(this.options)}),this.options.allow_create&&this.setup_new_widget(),this.options.allow_sorting&&this.setup_sortable()}setup_new_widget(){let t=this.options&&this.options.max_widget_count||Number.POSITIVE_INFINITY;this.widgets_list.length<t&&(this.new_widget=new Eo({container:this.body,type:this.type,custom_dialog:this.custom_dialog,default_values:this.default_values,on_create:e=>{this.new_widget.delete(),delete this.new_widget,e.in_customize_mode=1,this.add_widget(e).customize(this.options),this.widgets_list.length<t&&this.setup_new_widget()}}))}on_delete(t,e){this.widgets_list=this.widgets_list.filter(n=>t!=n.name),delete this.widgets_dict[t],this.update_widget_order(),!this.new_widget&&e&&this.setup_new_widget()}update_widget_order(){this.widget_order=[],this.body.children().each((t,e)=>{let n=e.dataset.widgetName;n&&this.widget_order.push(n)})}setup_sortable(){let t=this.body[0];this.sortable=new Sortable(t,{animation:150,handle:".drag-handle",onEnd:()=>this.update_widget_order()})}get_widget_config(){this.update_widget_order();let t={};return this.widgets_list.forEach(e=>{let n=e.get_config(),i=n.docname?n.docname:n.name;t[i]=n}),{order:this.widget_order,widgets:t}}},Fp=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.make()}make(){this.add_widget(this.widgets)}add_widget(t){let e=frappe.widget.make_widget(Mr(Vt({},t),{widget_type:this.type,container:this.container,height:this.height||null,options:Mr(Vt({},this.options),{on_delete:()=>this.on_delete(),on_edit:()=>this.on_edit(e)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}on_delete(){this.api.blocks.delete()}on_edit(t){this.block.call("on_edit",t)}customize(){this.widgets_list.forEach(t=>{t.customize(this.options)})}};frappe.widget.WidgetGroup=nc;frappe.widget.SingleWidgetGroup=Fp;frappe.templates.sort_selector=`<div class="sort-selector">
	<div class="btn-group">
		<button class="btn btn-default btn-sm btn-order"
			data-value="{{ sort_order }}"
			title="{{ sort_order==="desc" ? "descending" : "ascending" }}">
			<span class="sort-order">
				<svg class="icon icon-sm">
					<use xlink:href="#icon-{{ sort_order==="desc" ? "sort-descending" : "sort-ascending" }}"></use>
				</svg>
			</span>
		</button>
		<button type="button" class="btn btn-default btn-sm sort-selector-button" data-toggle="dropdown">
			<span class="dropdown-text">{{ __(sort_by_label) }}</span>
			<ul class="dropdown-menu dropdown-menu-right">
				{% for value in options %}
				<li>
					<a class="dropdown-item option" data-value="{{ value.fieldname }}">
						{{ __(value.label) }}
					</a>
				</li>
				{% endfor %}
			</ul>
		</button>
	</div>
</div>
`;frappe.ui.SortSelector=class{constructor(t){$.extend(this,t),this.labels={},this.make()}make(){this.prepare_args(),this.parent.find(".sort-selector").remove(),this.wrapper=$(frappe.render_template("sort_selector",this.args)).appendTo(this.parent),this.bind_events()}bind_events(){var t=this;this.wrapper.find(".btn-order").on("click",function(){let e=$(this),n=$(this).attr("data-value")==="desc"?"asc":"desc",i=$(this).attr("data-value")==="desc"?"ascending":"descending";e.attr("data-value",n),e.attr("title",i),t.sort_order=n;let a=n==="asc"?"sort-ascending":"sort-descending";e.find(".sort-order").html(frappe.utils.icon(a,"sm")),(t.onchange||t.change)(t.sort_by,t.sort_order)}),this.wrapper.find(".dropdown-menu a.option").on("click",function(){t.sort_by=$(this).attr("data-value"),t.wrapper.find(".dropdown-text").html($(this).html()),(t.onchange||t.change)(t.sort_by,t.sort_order)})}prepare_args(){var t=this;if(this.args||(this.args={}),this.args&&typeof this.args=="string"){var e=this.args;this.args={},e.includes("`.`")&&(e=e.split(".")[1]);var n=e.split(" ");if(n.length===2){var i=strip(n[0],"`");this.args.sort_by=i,this.args.sort_order=n[1]}}this.args.options&&this.args.options.forEach(function(a){t.labels[a.fieldname]=a.label}),this.setup_from_doctype(),this.args.sort_by&&!this.args.sort_by_label&&this.args.options.every(function(a){return a.fieldname===t.args.sort_by?(t.args.sort_by_label=a.label,!1):!0})}setup_from_doctype(){var t=this,e=frappe.get_meta(this.doctype);if(!!e){var{meta_sort_field:n,meta_sort_order:i}=this.get_meta_sort_field();if(this.args.sort_by||(n?(this.args.sort_by=n,this.args.sort_order=i):(this.args.sort_by="modified",this.args.sort_order="desc")),this.args.sort_by_label||(this.args.sort_by_label=this.get_label(this.args.sort_by)),!this.args.options){var a=[{fieldname:"modified"},{fieldname:"name"},{fieldname:"creation"},{fieldname:"idx"}];e.title_field&&a.splice(1,0,{fieldname:e.title_field}),n&&a.splice(1,0,{fieldname:n}),e.fields.forEach(function(o){(o.mandatory||o.bold||o.in_list_view)&&frappe.model.is_value_type(o.fieldtype)&&frappe.perm.has_perm(t.doctype,o.permlevel,"read")&&a.push({fieldname:o.fieldname,label:o.label})}),a.forEach(o=>{o.label||(o.label=t.get_label(o.fieldname))}),this.args.options=a.uniqBy(o=>o.fieldname)}this.sort_by=this.args.sort_by,this.sort_order=this.args.sort_order}}get_meta_sort_field(){var t=frappe.get_meta(this.doctype);if(!t)return{meta_sort_field:null,meta_sort_order:null};if(t.sort_field&&t.sort_field.includes(",")){var e=t.sort_field.split(",")[0].split(" ");return{meta_sort_field:e[0],meta_sort_order:e[1]}}else return{meta_sort_field:t.sort_field||"modified",meta_sort_order:t.sort_order?t.sort_order.toLowerCase():""}}get_label(t){return t==="idx"?__("Most Used"):this.labels[t]||frappe.meta.get_label(this.doctype,t)}get_sql_string(){return"`tab"+this.doctype+"`.`"+this.sort_by+"` "+this.sort_order}};frappe.templates.change_log=`{% for (var i=0, l=change_log.length; i < l; i++) {
    var app_info = change_log[i]; %}
	{% if (i > 0) { %} <hr> {% } %}
	<div class="text-left app-change-log">
		<h2 style="margin-top: 10px;">
            {{ app_info.title }}
			<small>{{ __("updated to {0}", [app_info.version]) }}</small>
		</h2>
		<div class="app-change-log-body">
		{% for (var x=0, y=app_info.change_log.length; x < y; x++) {
            var version_info = app_info.change_log[x];
            if(version_info) { %}
    			<p>{{ frappe.markdown(version_info[1]) }}</p>
		    {% }
        } %}
    	</div>
	</div>
{% } %}
`;frappe.templates.workspace_loading_skeleton=`<div class="workspace-skeleton">
	<div class="widget-group">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
		</div>
	</div>
	<div class="widget-group skeleton-body">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
		</div>
	</div>
</div>
`;frappe.templates.workspace_sidebar_loading_skeleton=`<div class="workspace-sidebar-skeleton">
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
</div>`;frappe.start_app=function(){!frappe.Application||(frappe.assets.check(),frappe.provide("frappe.app"),frappe.provide("frappe.desk"),frappe.app=new frappe.Application)};$(document).ready(function(){frappe.utils.supportsES6||frappe.msgprint({indicator:"red",title:__("Browser not supported"),message:__("Some of the features might not work in your browser. Please update your browser to the latest version.")}),frappe.start_app()});frappe.Application=class{constructor(){this.startup()}startup(){if(frappe.socketio.init(),frappe.model.init(),frappe.boot.status==="failed")throw frappe.msgprint({message:frappe.boot.error,title:__("Session Start Failed"),indicator:"red"}),"boot failed";this.setup_frappe_vue(),this.load_bootinfo(),this.load_user_permissions(),this.make_nav_bar(),this.set_favicon(),this.setup_analytics(),this.set_fullwidth_if_enabled(),this.add_browser_class(),this.setup_energy_point_listeners(),this.setup_copy_doc_listener(),frappe.ui.keys.setup(),frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+g",description:__("Switch Theme"),action:()=>{frappe.theme_switcher=new frappe.ui.ThemeSwitcher,frappe.theme_switcher.show()}}),frappe.ui.add_system_theme_switch_listener();let t=document.documentElement;if(new MutationObserver(()=>{frappe.ui.set_theme()}).observe(t,{attributes:!0,attributeFilter:["data-theme-mode"]}),frappe.ui.set_theme(),this.make_page_container(),this.set_route(),$(document).trigger("startup"),$(document).trigger("app_ready"),frappe.boot.messages&&frappe.msgprint(frappe.boot.messages),frappe.user_roles.includes("System Manager")&&setTimeout(()=>{this.show_change_log(),this.show_update_available()},1e3),!frappe.boot.developer_mode){let a=__("Using this console may allow attackers to impersonate you and steal your information. Do not enter or paste code that you do not understand.");console.log(`%c${a}`,"font-size: large")}if(this.show_notes(),frappe.ui.startup_setup_dialog&&!frappe.boot.setup_complete&&(frappe.ui.startup_setup_dialog.pre_show(),frappe.ui.startup_setup_dialog.show()),frappe.realtime.on("version-update",function(){var a=frappe.msgprint({message:__("The application has been updated to a new version, please refresh this page"),indicator:"green",title:__("Version Updated")});a.set_primary_action(__("Refresh"),function(){location.reload(!0)}),a.get_close_btn().toggle(!1)}),this.setup_build_events(),frappe.sys_defaults.email_user_password){var n=frappe.sys_defaults.email_user_password.split(",");for(var i in n)n[i]===frappe.user.name&&this.set_password(n[i])}this.link_preview=new frappe.ui.LinkPreview,frappe.boot.developer_mode||(setInterval(function(){frappe.call({method:"frappe.core.page.background_jobs.background_jobs.get_scheduler_status",callback:function(a){a.message[0]==__("Inactive")&&frappe.call("frappe.utils.scheduler.activate_scheduler")}})},3e5),frappe.user.has_role("System Manager")&&setInterval(function(){frappe.call({method:"frappe.core.doctype.log_settings.log_settings.has_unseen_error_log",args:{user:frappe.session.user},callback:function(a){a.message.show_alert&&frappe.show_alert({indicator:"red",message:a.message.message})}})},6e5))}set_route(){frappe.flags.setting_original_route=!0,frappe.boot&&localStorage.getItem("session_last_route")?(frappe.set_route(localStorage.getItem("session_last_route")),localStorage.removeItem("session_last_route")):frappe.router.route(),frappe.after_ajax(()=>frappe.flags.setting_original_route=!1),frappe.router.on("change",()=>{$(".tooltip").hide()})}setup_frappe_vue(){Vue.prototype.__=window.__,Vue.prototype.frappe=window.frappe}set_password(t){var e=this;frappe.call({method:"frappe.core.doctype.user.user.get_email_awaiting",args:{user:t},callback:function(n){if(n=n.message,n){var i=0;i<n.length&&e.email_password_prompt(n,t,i)}}})}email_password_prompt(t,e,n){var i=this;let a=t[n].email_id,o=new frappe.ui.Dialog({title:__("Password missing in Email Account"),fields:[{fieldname:"password",fieldtype:"Password",label:__("Please enter the password for: <b>{0}</b>",[a],"Email Account"),reqd:1},{fieldname:"submit",fieldtype:"Button",label:__("Submit",null,"Submit password for Email Account")}]});o.get_input("submit").on("click",function(){o.hide();var s=new frappe.ui.Dialog({title:__("Checking one moment"),fields:[{fieldtype:"HTML",fieldname:"checking"}]});s.fields_dict.checking.$wrapper.html('<i class="fa fa-spinner fa-spin fa-4x"></i>'),s.show(),frappe.call({method:"frappe.email.doctype.email_account.email_account.set_email_password",args:{email_account:t[n].email_account,user:e,password:o.get_value("password")},callback:function(u){s.hide(),o.hide(),u.message?n+1<t.length&&(n=n+1,i.email_password_prompt(t,e,n)):(frappe.show_alert({message:__("Login Failed please try again"),indicator:"error"},5),i.email_password_prompt(t,e,n))}})}),o.show()}load_bootinfo(){frappe.boot?(this.setup_workspaces(),frappe.model.sync(frappe.boot.docs),this.check_metadata_cache_status(),this.set_globals(),this.sync_pages(),frappe.router.setup(),this.setup_moment(),frappe.boot.print_css&&frappe.dom.set_style(frappe.boot.print_css,"print-style"),frappe.user.name=frappe.boot.user.name,frappe.router.setup()):this.set_as_guest()}setup_workspaces(){frappe.modules={},frappe.workspaces={};for(let t of frappe.boot.allowed_workspaces||[])frappe.modules[t.module]=t,frappe.workspaces[frappe.router.slug(t.name)]=t}load_user_permissions(){frappe.defaults.update_user_permissions(),frappe.realtime.on("update_user_permissions",frappe.utils.debounce(()=>{frappe.defaults.update_user_permissions()},500))}check_metadata_cache_status(){frappe.boot.metadata_version!=localStorage.metadata_version&&(frappe.assets.clear_local_storage(),frappe.assets.init_local_storage())}set_globals(){frappe.session.user=frappe.boot.user.name,frappe.session.logged_in_user=frappe.boot.user.name,frappe.session.user_email=frappe.boot.user.email,frappe.session.user_fullname=frappe.user_info().fullname,frappe.user_defaults=frappe.boot.user.defaults,frappe.user_roles=frappe.boot.user.roles,frappe.sys_defaults=frappe.boot.sysdefaults,frappe.ui.py_date_format=frappe.boot.sysdefaults.date_format.replace("dd","%d").replace("mm","%m").replace("yyyy","%Y"),frappe.boot.user.last_selected_values={},Object.defineProperties(window,{user:{get:function(){return console.warn("Please use `frappe.session.user` instead of `user`. It will be deprecated soon."),frappe.session.user}},user_fullname:{get:function(){return console.warn("Please use `frappe.session.user_fullname` instead of `user_fullname`. It will be deprecated soon."),frappe.session.user}},user_email:{get:function(){return console.warn("Please use `frappe.session.user_email` instead of `user_email`. It will be deprecated soon."),frappe.session.user_email}},user_defaults:{get:function(){return console.warn("Please use `frappe.user_defaults` instead of `user_defaults`. It will be deprecated soon."),frappe.user_defaults}},roles:{get:function(){return console.warn("Please use `frappe.user_roles` instead of `roles`. It will be deprecated soon."),frappe.user_roles}},sys_defaults:{get:function(){return console.warn("Please use `frappe.sys_defaults` instead of `sys_defaults`. It will be deprecated soon."),frappe.user_roles}}})}sync_pages(){if(localStorage.page_info){frappe.boot.allowed_pages=[];var t=JSON.parse(localStorage.page_info);$.each(frappe.boot.page_info,function(e,n){(!t[e]||t[e].modified!=n.modified)&&delete localStorage["_page:"+e],frappe.boot.allowed_pages.push(e)})}else frappe.boot.allowed_pages=Object.keys(frappe.boot.page_info);localStorage.page_info=JSON.stringify(frappe.boot.page_info)}set_as_guest(){frappe.session.user="Guest",frappe.session.user_email="",frappe.session.user_fullname="Guest",frappe.user_defaults={},frappe.user_roles=["Guest"],frappe.sys_defaults={}}make_page_container(){$("#body").length&&($(".splash").remove(),frappe.temp_container=$("<div id='temp-container' style='display: none;'>").appendTo("body"),frappe.container=new frappe.views.Container)}make_nav_bar(){frappe.boot&&frappe.boot.home_page!=="setup-wizard"&&(frappe.frappe_toolbar=new frappe.ui.toolbar.Toolbar)}logout(){var t=this;return t.logged_out=!0,frappe.call({method:"logout",callback:function(e){e.exc||t.redirect_to_login()}})}handle_session_expired(){if(!frappe.app.session_expired_dialog){var t=new frappe.ui.Dialog({title:__("Session Expired"),keep_open:!0,fields:[{fieldtype:"Password",fieldname:"password",label:__("Please Enter Your Password to Continue")}],onhide:()=>{t.logged_in||frappe.app.redirect_to_login()}});t.set_primary_action(__("Login"),()=>{t.set_message(__("Authenticating...")),frappe.call({method:"login",args:{usr:frappe.session.user,pwd:t.get_values().password},callback:e=>{e.message==="Logged In"&&(t.logged_in=!0,$(".modal-backdrop").css({opacity:"","background-color":"#334143"})),t.hide()},statusCode:()=>{t.hide()}})}),frappe.app.session_expired_dialog=t}frappe.app.session_expired_dialog.display||(frappe.app.session_expired_dialog.show(),$(".modal-backdrop").css({opacity:1,"background-color":"#4B4C9D"}))}redirect_to_login(){window.location.href="/"}set_favicon(){var t=$('link[type="image/x-icon"]').remove().attr("href");$('<link rel="shortcut icon" href="'+t+'" type="image/x-icon">').appendTo("head"),$('<link rel="icon" href="'+t+'" type="image/x-icon">').appendTo("head")}trigger_primary_action(){$(document.activeElement).blur(),setTimeout(()=>{window.cur_dialog&&cur_dialog.display?cur_dialog.get_primary_btn().trigger("click"):cur_frm&&cur_frm.page.btn_primary.is(":visible")?cur_frm.page.btn_primary.trigger("click"):frappe.container.page.save_action&&frappe.container.page.save_action()},100)}show_change_log(){var t=this;let e=frappe.boot.change_log;if(!(!Array.isArray(e)||!e.length||window.Cypress)){var n=frappe.msgprint({message:frappe.render_template("change_log",{change_log:e}),title:__("Updated To A New Version \u{1F389}"),wide:!0});n.keep_open=!0,n.custom_onhide=function(){frappe.call({method:"frappe.utils.change_log.update_last_known_versions"}),t.show_notes()}}}show_update_available(){frappe.boot.sysdefaults.disable_system_update_notification||frappe.call({method:"frappe.utils.change_log.show_update_popup"})}setup_analytics(){window.mixpanel&&(window.mixpanel.identify(frappe.session.user),window.mixpanel.people.set({$first_name:frappe.boot.user.first_name,$last_name:frappe.boot.user.last_name,$created:frappe.boot.user.creation,$email:frappe.session.user}))}add_browser_class(){$("html").addClass(frappe.utils.get_browser().name.toLowerCase())}set_fullwidth_if_enabled(){frappe.ui.toolbar.set_fullwidth_if_enabled()}show_notes(){var t=this;frappe.boot.notes.length&&frappe.boot.notes.forEach(function(e){if(!e.seen||e.notify_on_every_login){var n=frappe.msgprint({message:e.content,title:e.title});n.keep_open=!0,n.custom_onhide=function(){e.seen=!0,e.notify_on_every_login||frappe.call({method:"frappe.desk.doctype.note.note.mark_as_seen",args:{note:e.name}}),t.show_notes()}}})}setup_build_events(){frappe.boot.developer_mode&&frappe.require("build_events.bundle.js")}setup_energy_point_listeners(){frappe.realtime.on("energy_point_alert",t=>{frappe.show_alert(t)})}setup_copy_doc_listener(){$("body").on("paste",t=>{try{let e=frappe.utils.get_clipboard_data(t),n=JSON.parse(e);if(n.doctype){t.preventDefault();let i=frappe.utils.sleep;frappe.dom.freeze(__("Creating {0}",[n.doctype])+"..."),i(500).then(()=>{let a=frappe.model.with_doctype(n.doctype,()=>{let o=frappe.model.copy_doc(n);o.__newname=n.name,delete n.name,o.idx=null,o.__run_link_triggers=!1,frappe.set_route("Form",o.doctype,o.name),frappe.dom.unfreeze()});a&&a.fail(frappe.dom.unfreeze)})}}catch(e){}})}setup_moment(){moment.updateLocale("en",{week:{dow:frappe.datetime.get_first_day_of_the_week_index()}}),moment.locale("en"),moment.user_utc_offset=moment().utcOffset(),frappe.boot.timezone_info&&moment.tz.add(frappe.boot.timezone_info)}};frappe.get_module=function(r,t){var e=frappe.modules[r]||t;if(!!e)return e._setup||(e.label||(e.label=r),e._label||(e._label=__(e.label)),e._setup=!0),e};frappe.provide("frappe.utils");function Qy(r){return zp()[r]||""}function e0(r){return r.includes("?")?r.slice(r.indexOf("?")+1):""}function zp(r){var t={};r||(r=location.search.substring(1));for(var e=r.split("&"),n=0,i=e.length;n<i;n++){var a=e[n].split(/=(.+)/),o=a[0];if(!!o){var s=a[1];if(typeof s=="string"){s=s.replace(/\+/g,"%20");try{s=decodeURIComponent(s)}catch(u){}}o in t?(typeof t[o]=="undefined"?t[o]=[]:typeof t[o]=="string"&&(t[o]=[t[o]]),t[o].push(s)):t[o]=s}}return t}function t0(r,t=!0){let e=[];for(let n in r){let i=r[n];i===void 0||i===""||i===null||(typeof i=="object"&&(i=JSON.stringify(i)),t&&(n=encodeURIComponent(n),i=encodeURIComponent(i)),e.push(`${n}=${i}`))}return"?"+e.join("&")}Object.assign(frappe.utils,{get_url_arg:Qy,get_query_string:e0,get_query_params:zp,make_query_string:t0});frappe.provide("frappe.energy_points");Object.assign(frappe.energy_points,{get_points(r){return`<span class="bold" style="color: ${r>=0?"#45A163":"#e42121"}">
			${r>0?"+":""}${r}
		</span>`},format_form_log(r){let t="<span>&nbsp;-&nbsp;</span>";return`<span>
			<!--${this.get_points(r.points)}&nbsp;-->
			<a href="/app/energy-point-log/${r.name}">${this.get_form_log_message(r)}</a>
			${r.reason?t+r.reason:""}
		</span>`},format_history_log(r){let t="<span>&nbsp;-&nbsp;</span>",e=frappe.utils.get_form_link(r.reference_doctype,r.reference_name);return`<div class="flex">
			<span class="${r.points>=0?"green":"red"} mr-2">
				${this.get_points(r.points)}
			</span>
			<a href="${e}" class="text-muted">${this.get_history_log_message(r)}</a>
			${r.reason?t+r.reason:""}
			${t+frappe.datetime.comment_when(r.creation)}
		</div>`},get_history_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=r.reference_name;return r.type==="Appreciation"?__("{0} appreciated on {1}",[t,e]):r.type==="Criticism"?__("{0} criticized on {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("via automatic rule {0} on {1}",[r.rule.bold(),e])},get_form_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=frappe.user.full_name(r.user).bold();return r.type==="Appreciation"?__("{0} appreciated {1}",[t,e]):r.type==="Criticism"?__("{0} criticized {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("gained by {0} via automatic rule {1}",[e,r.rule.bold()])}});var Q2=jr(Hp());function Ro(r){return(Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function dn(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Up(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function wn(r,t,e){return t&&Up(r.prototype,t),e&&Up(r,e),r}function xi(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ah(r,t)}function zr(r){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function ah(r,t){return(ah=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(r,t)}function r0(r,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):t}function Ci(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,n=zr(r);if(t){var i=zr(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return r0(this,e)}}function en(r,t,e){return(en=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(n,i,a){var o=function(u,h){for(;!Object.prototype.hasOwnProperty.call(u,h)&&(u=zr(u))!==null;);return u}(n,i);if(o){var s=Object.getOwnPropertyDescriptor(o,i);return s.get?s.get.call(a):s.value}})(r,t,e||r)}function Sr(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,n){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var i=[],a=!0,o=!1,s=void 0;try{for(var u,h=e[Symbol.iterator]();!(a=(u=h.next()).done)&&(i.push(u.value),!n||i.length!==n);a=!0);}catch(d){o=!0,s=d}finally{try{a||h.return==null||h.return()}finally{if(o)throw s}}return i}}(r,t)||oh(r,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tn(r){return function(t){if(Array.isArray(t))return lc(t)}(r)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(r)||oh(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oh(r,t){if(r){if(typeof r=="string")return lc(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?lc(r,t):void 0}}function lc(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function En(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function Io(r){var t=r.getBoundingClientRect();return{top:t.top+(document.documentElement.scrollTop||document.body.scrollTop),left:t.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function n0(r){return r.offsetParent===null}function i0(r){var t=r.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(function(r,t){t===void 0&&(t={});var e=t.insertAt;if(r&&typeof document!="undefined"){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r))}})(`:root {
  --charts-label-color: #313b44;
  --charts-axis-line-color: #f4f5f6;
  --charts-tooltip-title: var(--charts-label-color);
  --charts-tooltip-label: var(--charts-label-color);
  --charts-tooltip-value: #192734;
  --charts-tooltip-bg: #ffffff;
  --charts-stroke-width: 2px;
  --charts-dataset-circle-stroke: #ffffff;
  --charts-dataset-circle-stroke-width: var(--charts-stroke-width);
  --charts-legend-label: var(--charts-label-color);
  --charts-legend-value: var(--charts-label-color); }

.chart-container {
  position: relative;
  /* for absolutely positioned tooltip */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; }
  .chart-container .axis,
  .chart-container .chart-label {
    fill: var(--charts-label-color); }
    .chart-container .axis line,
    .chart-container .chart-label line {
      stroke: var(--charts-axis-line-color); }
  .chart-container .dataset-units circle {
    stroke: var(--charts-dataset-circle-stroke);
    stroke-width: var(--charts-dataset-circle-stroke-width); }
  .chart-container .dataset-units path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container .dataset-path {
    stroke-width: var(--charts-stroke-width); }
  .chart-container .path-group path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container line.dashed {
    stroke-dasharray: 5, 3; }
  .chart-container .axis-line .specific-value {
    text-anchor: start; }
  .chart-container .axis-line .y-line {
    text-anchor: end; }
  .chart-container .axis-line .x-line {
    text-anchor: middle; }
  .chart-container .legend-dataset-label {
    fill: var(--charts-legend-label);
    font-weight: 600; }
  .chart-container .legend-dataset-value {
    fill: var(--charts-legend-value); }

.graph-svg-tip {
  position: absolute;
  z-index: 99999;
  padding: 10px;
  font-size: 12px;
  text-align: center;
  background: var(--charts-tooltip-bg);
  box-shadow: 0px 1px 4px rgba(17, 43, 66, 0.1), 0px 2px 6px rgba(17, 43, 66, 0.08), 0px 40px 30px -30px rgba(17, 43, 66, 0.1);
  border-radius: 6px; }
  .graph-svg-tip ul {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ol {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ul.data-point-list li {
    min-width: 90px;
    font-weight: 600; }
  .graph-svg-tip .svg-pointer {
    position: absolute;
    height: 12px;
    width: 12px;
    border-radius: 2px;
    background: var(--charts-tooltip-bg);
    transform: rotate(45deg);
    margin-top: -7px;
    margin-left: -6px; }
  .graph-svg-tip.comparison {
    text-align: left;
    padding: 0px;
    pointer-events: none; }
    .graph-svg-tip.comparison .title {
      display: block;
      padding: 16px;
      margin: 0;
      color: var(--charts-tooltip-title);
      font-weight: 600;
      line-height: 1;
      pointer-events: none;
      text-transform: uppercase; }
      .graph-svg-tip.comparison .title strong {
        color: var(--charts-tooltip-value); }
    .graph-svg-tip.comparison ul {
      margin: 0;
      white-space: nowrap;
      list-style: none; }
      .graph-svg-tip.comparison ul.tooltip-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 5px; }
    .graph-svg-tip.comparison li {
      display: inline-block;
      display: flex;
      flex-direction: row;
      font-weight: 600;
      line-height: 1;
      padding: 5px 15px 15px 15px; }
      .graph-svg-tip.comparison li .tooltip-legend {
        height: 12px;
        width: 12px;
        margin-right: 8px;
        border-radius: 2px; }
      .graph-svg-tip.comparison li .tooltip-label {
        margin-top: 4px;
        font-size: 11px;
        line-height: 1.25;
        max-width: 150px;
        white-space: normal;
        color: var(--charts-tooltip-label); }
      .graph-svg-tip.comparison li .tooltip-value {
        color: var(--charts-tooltip-value); }
`),En.create=function(r,t){var e=document.createElement(r);for(var n in t){var i=t[n];if(n==="inside")En(i).appendChild(e);else if(n==="around"){var a=En(i);a.parentNode.insertBefore(e,a),e.appendChild(a)}else n==="styles"?Ro(i)==="object"&&Object.keys(i).map(function(o){e.style[o]=i[o]}):n in e?e[n]=i:e.setAttribute(n,i)}return e};var a0={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function Po(r){return r.titleHeight+r.margins.top+r.paddings.top}function Oo(r){return r.margins.left+r.paddings.left}function hc(r){return r.margins.top+r.margins.bottom+r.paddings.top+r.paddings.bottom+r.titleHeight+r.legendHeight}function cc(r){return r.margins.left+r.margins.right+r.paddings.left+r.paddings.right}var aa=["pink","blue","green","grey","red","yellow","purple","teal","cyan","orange"],o0={bar:aa,line:aa,pie:aa,percentage:aa,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:aa},Wp=Math.PI/180,s0=function(){function r(t){var e=t.parent,n=e===void 0?null:e,i=t.colors,a=i===void 0?[]:i;dn(this,r),this.parent=n,this.colors=a,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return wn(r,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var t=this;this.container=En.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:`<span class="title"></span>
				<ul class="data-point-list"></ul>
				<div class="svg-pointer"></div>`}),this.hideTip(),this.title=this.container.querySelector(".title"),this.list=this.container.querySelector(".data-point-list"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){t.hideTip()})}},{key:"fill",value:function(){var t,e=this;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?"<strong>".concat(this.titleValue,"</strong>").concat(this.titleName):"".concat(this.titleName,"<strong>").concat(this.titleValue,"</strong>"),this.listValues.length>4?this.list.classList.add("tooltip-grid"):this.list.classList.remove("tooltip-grid"),this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(function(n,i){var a=e.colors[i]||"black",o=n.formatted===0||n.formatted?n.formatted:n.value,s=En.create("li",{innerHTML:'<div class="tooltip-legend" style="background: '.concat(a,`;"></div>
					<div>
						<div class="tooltip-value">`).concat(o===0||o?o:"",`</div>
						<div class="tooltip-label">`).concat(n.title?n.title:"",`</div>
					</div>`)});e.dataPointList.appendChild(s)})}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-7.48,this.left=this.x-t/2;var e=this.parent.offsetWidth-t,n=this.container.querySelector(".svg-pointer");if(this.left<0)n.style.left="calc(50% - ".concat(-1*this.left,"px)"),this.left=0;else if(this.left>e){var i=this.left-e,a="calc(50% + ".concat(i,"px)");n.style.left=a,this.left=e}else n.style.left="50%"}},{key:"setValues",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;this.titleName=n.name,this.titleValue=n.value,this.listValues=i,this.x=t,this.y=e,this.titleValueFirst=n.valueFirst||0,this.index=a,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),r}();function sh(r){return parseFloat(r.toFixed(2))}function uc(r,t,e){var n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];e||(e=n?r[0]:r[r.length-1]);var i=new Array(Math.abs(t)).fill(e);return r=n?i.concat(r):r.concat(i)}function qp(r,t){return(r+"").length*t}function ic(r,t){return{x:Math.sin(r*Wp)*t,y:Math.cos(r*Wp)*t}}function Yn(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!Number.isNaN(r)&&r!==void 0&&!!Number.isFinite(r)&&!(t&&r<0)}function lh(r){return Number(Math.round(r+"e4")+"e-4")}function dc(r){var t,e,n;if(r instanceof Date)return new Date(r.getTime());if(Ro(r)!=="object"||r===null)return r;for(n in t=Array.isArray(r)?[]:{},r)e=r[n],t[n]=dc(e);return t}function Vp(r,t){var e,n;return r<=t?(e=t-r,n=r):(e=r-t,n=t),[e,n]}function Vr(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length-r.length;return e>0?r=uc(r,e):t=uc(t,e),[r,t]}function l0(r,t){if(r)return r.length>t?r.slice(0,t-3)+"...":r}function c0(r){var t;if(typeof r=="number")t=r;else if(typeof r=="string"&&(t=Number(r),Number.isNaN(t)))return r;var e=Math.floor(Math.log10(Math.abs(t)));if(e<=2)return t;var n=Math.floor(e/3),i=Math.pow(10,e-3*n)*+(t/Math.pow(10,e)).toFixed(1);return Math.round(100*i)/100+" "+["","K","M","B","T"][n]}function Gp(r,t){for(var e=[],n=0;n<r.length;n++)e.push([r[n],t[n]]);var i=function(a,o,s,u){var h,d,_,g,w=(h=o||a,_=(d=s||a)[0]-h[0],g=d[1]-h[1],{length:Math.sqrt(Math.pow(_,2)+Math.pow(g,2)),angle:Math.atan2(g,_)}),C=w.angle+(u?Math.PI:0),k=.2*w.length;return[a[0]+Math.cos(C)*k,a[1]+Math.sin(C)*k]};return function(a,o){return a.reduce(function(s,u,h,d){return h===0?"".concat(u[0],",").concat(u[1]):"".concat(s," ").concat(o(u,h,d))},"")}(e,function(a,o,s){var u=i(s[o-1],s[o-2],a),h=i(a,s[o-1],s[o+1],!0);return"C ".concat(u[0],",").concat(u[1]," ").concat(h[0],",").concat(h[1]," ").concat(a[0],",").concat(a[1])})}function Yp(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function Xt(r,t){var e=document.createElementNS("http://www.w3.org/2000/svg",r);for(var n in t){var i=t[n];if(n==="inside")Yp(i).appendChild(e);else if(n==="around"){var a=Yp(i);a.parentNode.insertBefore(e,a),e.appendChild(a)}else n==="styles"?Ro(i)==="object"&&Object.keys(i).map(function(o){e.style[o]=i[o]}):(n==="className"&&(n="class"),n==="innerHTML"?e.textContent=i:e.setAttribute(n,i))}return e}function u0(r,t){return Xt("linearGradient",{inside:r,id:t,x1:0,x2:0,y1:0,y2:1})}function ac(r,t,e,n){return Xt("stop",{inside:r,style:"stop-color: ".concat(e),offset:t,"stop-opacity":n})}function fc(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n={className:r,transform:t};return e&&(n.inside=e),Xt("g",n)}function wi(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none",n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2;return Xt("path",{className:t,d:r,styles:{stroke:e,fill:n,"stroke-width":i}})}function d0(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=e.x+r.x,s=e.y+r.y,u=e.x+t.x,h=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(o," ").concat(s,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(h," z")}function f0(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=e.x+r.x,s=e.y+r.y,u=e.x+t.x,h=2*e.y,d=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(o," ").concat(s,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(h,` z
		L`).concat(o," ").concat(h,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(d," z")}function p0(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=e.x+r.x,s=e.y+r.y,u=e.x+t.x,h=e.y+t.y;return"M".concat(o," ").concat(s,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(h)}function h0(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=e.x+r.x,s=e.y+r.y,u=e.x+t.x,h=2*n+s,d=e.y+r.y;return"M".concat(o," ").concat(s,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(h,`
		M`).concat(o," ").concat(h,`
		A `).concat(n," ").concat(n," 0 ").concat(a," ").concat(i?1:0,`
		`).concat(u," ").concat(d)}function Xp(r,t){var e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n="path-fill-gradient-"+t+"-"+(e?"lighter":"default"),i=u0(r,n),a=[1,.6,.2];return e&&(a=[.4,.05,0]),ac(i,"0%",t,a[0]),ac(i,"50%",t,a[1]),ac(i,"100%",t,a[2]),n}function m0(r,t,e){var n=e/2,i=t-n;return"M".concat(r,",0 h").concat(i," q").concat(n,",0 ").concat(n,",").concat(n," q0,").concat(n," -").concat(n,",").concat(n," h-").concat(i," v").concat(e,"z")}function g0(r,t,e){var n=e/2,i=t-n;return"M".concat(r+n,",0 h").concat(i," v").concat(e," h-").concat(i," q-").concat(n,", 0 -").concat(n,",-").concat(n," q0,-").concat(n," ").concat(n,",-").concat(n,"z")}function ch(r,t,e,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},s={className:r,x:t,y:e,width:n,height:n,rx:i,fill:a};return Object.keys(o).map(function(u){s[u]=o[u]}),Xt("rect",s)}function uh(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"none",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,u=arguments.length>8&&arguments[8]!==void 0&&arguments[8];s||(s=10);var h={className:"legend-dot",x:0,y:4-e,height:e,width:e,rx:n,fill:i},d=Xt("text",{className:"legend-dataset-label",x:e,y:0,dx:s+"px",dy:s/3+"px","font-size":1.6*s+"px","text-anchor":"start",innerHTML:a=u?l0(a,18):a}),_=null;o&&(_=Xt("text",{className:"legend-dataset-value",x:e,y:20,dx:"10px",dy:10/3+"px","font-size":"12px","text-anchor":"start",innerHTML:o}));var g=Xt("g",{transform:"translate(".concat(r,", ").concat(t,")")});return g.appendChild(Xt("rect",h)),g.appendChild(d),o&&_&&g.appendChild(_),g}function ca(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=i.fontSize||10,o=i.dy!==void 0?i.dy:a/2,s=i.fill||"var(--charts-label-color)",u=i.textAnchor||"start";return Xt("text",{className:r,x:t,y:e,dy:o+"px","font-size":a+"px",fill:s,"text-anchor":u,innerHTML:n})}function _0(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},a=Xt("line",{className:"line-vertical "+i.className,x1:0,x2:0,y1:e,y2:n,styles:{stroke:i.stroke}}),o=Xt("text",{x:0,y:e>n?e+4:e-4-10,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:t+""}),s=Xt("g",{transform:"translate(".concat(r,", 0)")});return s.appendChild(a),s.appendChild(o),s}function Kp(r,t,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};i.lineType||(i.lineType=""),i.shortenNumbers&&(t=c0(t));var a="line-horizontal "+i.className+(i.lineType==="dashed"?"dashed":""),o=Xt("line",{className:a,x1:e,x2:n,y1:0,y2:0,styles:{stroke:i.stroke}}),s=Xt("text",{x:e<n?e-4:e+4,y:0,dy:"3px","font-size":"10px","text-anchor":e<n?"end":"start",innerHTML:t+""}),u=Xt("g",{transform:"translate(0, ".concat(r,")"),"stroke-opacity":1});return s!==0&&s!=="0"||(u.style.stroke="rgba(27, 31, 35, 0.6)"),u.appendChild(o),u.appendChild(s),u}var v0={bar:function(r){var t;r.nodeName!=="rect"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode();return e.style.fill="#000000",e.style.opacity="0.4",t&&e.setAttribute("transform",t),e},dot:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),n=r.getAttribute("r"),i=r.getAttribute("fill");return e.setAttribute("r",parseInt(n)+4),e.setAttribute("fill",i),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e},heat_square:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),n=r.getAttribute("r"),i=r.getAttribute("fill");return e.setAttribute("r",parseInt(n)+4),e.setAttribute("fill",i),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e}},b0={bar:function(r,t){var e;r.nodeName!=="rect"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var n=["x","y","width","height"];Object.values(r.attributes).filter(function(i){return n.includes(i.name)&&i.specified}).map(function(i){t.setAttribute(i.name,i.nodeValue)}),e&&t.setAttribute("transform",e)},dot:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var n=["cx","cy"];Object.values(r.attributes).filter(function(i){return n.includes(i.name)&&i.specified}).map(function(i){t.setAttribute(i.name,i.nodeValue)}),e&&t.setAttribute("transform",e)},heat_square:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var n=["cx","cy"];Object.values(r.attributes).filter(function(i){return n.includes(i.name)&&i.specified}).map(function(i){t.setAttribute(i.name,i.nodeValue)}),e&&t.setAttribute("transform",e)}},y0={pink:"#F683AE",blue:"#318AD8",green:"#48BB74",grey:"#A6B1B9",red:"#F56B6B",yellow:"#FACF7A",purple:"#44427B",teal:"#5FD8C4",cyan:"#15CCEF",orange:"#F8814F","light-pink":"#FED7E5","light-blue":"#BFDDF7","light-green":"#48BB74","light-grey":"#F4F5F6","light-red":"#F6DFDF","light-yellow":"#FEE9BF","light-purple":"#E8E8F7","light-teal":"#D3FDF6","light-cyan":"#DDF8FD","light-orange":"#FECDB8"};function sa(r,t,e,n){var i=typeof t=="string"?t:t.join(", ");return[r,{transform:e.join(", ")},n,"easein","translate",{transform:i}]}function Jp(r,t,e){return sa(r,[0,e],[0,t],350)}function Zp(r,t){return[r,{d:t},350,"easein"]}var w0={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function k0(r,t,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"linear",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=r.cloneNode(!0),s=r.cloneNode(!0);for(var u in t){var h=void 0;h=u==="transform"?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var d=a[u]||r.getAttribute(u),_=t[u],g={attributeName:u,from:d,to:_,begin:"0s",dur:e/1e3+"s",values:d+";"+_,keySplines:w0[n],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var w in i&&(g.type=i),g)h.setAttribute(w,g[w]);o.appendChild(h),i?s.setAttribute(u,"translate(".concat(_,")")):s.setAttribute(u,_)}return[o,s]}function Qp(r,t){r.style.transform=t,r.style.webkitTransform=t,r.style.msTransform=t,r.style.mozTransform=t,r.style.oTransform=t}function x0(r,t){var e=[],n=[];t.map(function(a){var o,s,u=a[0],h=u.parentNode;a[0]=u;var d=Sr(k0.apply(void 0,tn(a)),2);o=d[0],s=d[1],e.push(s),n.push([o,h]),h.replaceChild(o,u)});var i=r.cloneNode(!0);return n.map(function(a,o){a[1].replaceChild(e[o],a[0]),t[o][0]=e[o]}),i}function C0(r,t,e){if(e.length!==0){var n=x0(t,e);t.parentNode==r&&(r.removeChild(t),r.appendChild(n)),setTimeout(function(){n.parentNode==r&&(r.removeChild(n),r.appendChild(t))},250)}}var mc=function(){function r(t,e){if(dn(this,r),e=dc(e),this.parent=typeof t=="string"?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=e,this.title=e.title||"",this.type=e.type||"",this.realData=this.prepareData(e.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(e.colors,this.type),this.config={showTooltip:1,showLegend:e.showLegend!==void 0?e.showLegend:1,isNavigable:e.isNavigable||0,animate:e.animate!==void 0?e.animate:1,truncateLegends:e.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(a0));var n=this.measures;this.setMeasures(e),this.title.length||(n.titleHeight=0),this.config.showLegend||(n.legendHeight=0),this.argHeight=e.height||n.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(e)}return wn(r,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,e){var n=[];return(t=(t||[]).concat(o0[e])).forEach(function(i){var a=function(o){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(o)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(o).map(function(s,u){return u!==0?Number(s).toString(16):"#"}).reduce(function(s,u){return"".concat(s).concat(u)}):y0[o]||o}(i);(function(o){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(o)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(o)})(a)?n.push(a):console.warn('"'+i+'" is not a valid color.')}),n}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,e=this.argHeight;this.baseHeight=e,this.height=e-hc(this.measures),this.boundDrawFn=function(){return t.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=En.create("div",t)}},{key:"makeTooltip",value:function(){this.tip=new s0({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];e&&n0(this.parent)||(this.updateWidth(),this.calc(e),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(i){return i.setup(t.drawArea)}),this.render(this.components,!1),n&&(this.data=this.realData,setTimeout(function(){t.update(t.data,!0)},this.initTimeout)),this.config.showLegend&&this.renderLegend(),this.setupNavigation(n))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){var t,e,n;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),n=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-n),this.width=this.baseWidth-cc(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t,e,n,i,a=this.measures;this.svg=(t=this.container,e="frappe-chart chart",n=this.baseWidth,i=this.baseHeight,Xt("svg",{className:e,inside:t,width:n,height:i})),this.svgDefs=Xt("defs",{inside:this.svg}),this.title.length&&(this.titleEL=ca("title",a.margins.left,a.margins.top,this.title,{fontSize:a.titleFontSize,fill:"#666666",dy:a.titleFontSize}));var o=Po(a);this.drawArea=fc(this.type+"-chart chart-draw-area","translate(".concat(Oo(a),", ").concat(o,")")),this.config.showLegend&&(o+=this.height+a.paddings.bottom,this.legendArea=fc("chart-legend","translate(".concat(Oo(a),", ").concat(o,")"))),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(Oo(a),Po(a))}},{key:"updateTipOffset",value:function(t,e){this.tip.offset={x:t,y:e}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t||console.error("No data to update."),e||(t=dc(t)),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate)}},{key:"render",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.components,n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.config.isNavigable&&this.overlays.map(function(a){return a.parentNode.removeChild(a)});var i=[];e.forEach(function(a){i=i.concat(a.update(n))}),i.length>0?(C0(this.container,this.svg,i),setTimeout(function(){e.forEach(function(a){return a.make()}),t.updateNav()},400)):(e.forEach(function(a){return a.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(t){var e=this;this.legendArea.textContent="";var n=0,i=0;t.map(function(a,o){var s=Math.floor(e.width/150);n>s&&(n=0,i+=e.config.legendRowHeight);var u=150*n,h=e.makeLegend(a,o,u,i);e.legendArea.appendChild(h),n++})}},{key:"makeLegend",value:function(){}},{key:"setupNavigation",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.config.isNavigable&&e&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(n){i0(t.container)&&(n=n||window.event,t.keyActions[n.keyCode]&&t.keyActions[n.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=function(e){var n=e.cloneNode(!0);n.classList.add("chart-container"),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var i=En.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});n.insertBefore(i,n.firstChild);var a=En.create("div");return a.appendChild(n),a.innerHTML}(this.svg);(function(e,n){var i=document.createElement("a");i.style="display: none";var a=new Blob(n,{type:"image/svg+xml; charset=utf-8"}),o=window.URL.createObjectURL(a);i.href=o,i.download=e,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},300)})(this.title||"Chart",[t])}}]),r}(),dh=function(r){xi(e,mc);var t=Ci(e);function e(n,i){return dn(this,e),t.call(this,n,i)}return wn(e,[{key:"configure",value:function(n){en(zr(e.prototype),"configure",this).call(this,n),this.config.formatTooltipY=(n.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=n.maxSlices||20,this.config.maxLegendPoints=n.maxLegendPoints||20,this.config.legendRowHeight=60}},{key:"calc",value:function(){var n=this,i=this.state,a=this.config.maxSlices;i.sliceTotals=[];var o=this.data.labels.map(function(d,_){var g=0;return n.data.datasets.map(function(w){g+=w.values[_]}),[g,d]}).filter(function(d){return d[0]>=0}),s=o;if(o.length>a){o.sort(function(d,_){return _[0]-d[0]}),s=o.slice(0,a-1);var u=o.slice(a-1),h=0;u.map(function(d){h+=d[0]}),s.push([h,"Rest"]),this.colors[a-1]="grey"}i.labels=[],s.map(function(d){i.sliceTotals.push(lh(d[0])),i.labels.push(d[1])}),i.grandTotal=i.sliceTotals.reduce(function(d,_){return d+_},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var n=this.state;this.legendArea.textContent="",this.legendTotals=n.sliceTotals.slice(0,this.config.maxLegendPoints),en(zr(e.prototype),"renderLegend",this).call(this,this.legendTotals)}},{key:"makeLegend",value:function(n,i,a,o){var s=this.config.formatTooltipY?this.config.formatTooltipY(n):n;return uh(a,o,12,3,this.colors[i],this.state.labels[i],s,null,this.config.truncateLegends)}}]),e}(),S0=["January","February","March","April","May","June","July","August","September","October","November","December"],T0=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function eh(r){var t=new Date(r);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function oc(r){var t=r.getDate(),e=r.getMonth()+1;return[r.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("-")}function Xn(r){return new Date(r.getTime())}function sc(r,t){var e=ph(r);return Math.ceil(function(n,i){return(eh(i)-eh(n))/864e5}(e,t)/7)}function E0(r,t){return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function fh(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=S0[r];return t?e.slice(0,3):e}function th(r,t){return new Date(t,r+1,0)}function ph(r){var t=Xn(r),e=t.getDay();return e!==0&&ki(t,-1*e),t}function ki(r,t){r.setDate(r.getDate()+t)}var A0=function(){function r(t){var e=t.layerClass,n=e===void 0?"":e,i=t.layerTransform,a=i===void 0?"":i,o=t.constants,s=t.getData,u=t.makeElements,h=t.animateElements;dn(this,r),this.layerTransform=a,this.constants=o,this.makeElements=u,this.getData=s,this.animateElements=h,this.store=[],this.labels=[],this.layerClass=n,this.layerClass=typeof this.layerClass=="function"?this.layerClass():this.layerClass,this.refresh()}return wn(r,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=fc(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var e=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach(function(n){e.layer.appendChild(n)}),this.labels.forEach(function(n){e.layer.appendChild(n)})}},{key:"update",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.refresh();var e=[];return t&&(e=this.animateElements(this.data)||[]),e}}]),r}(),rh={donutSlices:{layerClass:"donut-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var n=wi(t,"donut-path",r.colors[e],"none",r.strokeWidth);return n.style.transition="transform .3s;",n})},animateElements:function(r){return this.store.map(function(t,e){return Zp(t,r.sliceStrings[e])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var n=wi(t,"pie-path","none",r.colors[e]);return n.style.transition="transform .3s;",n})},animateElements:function(r){return this.store.map(function(t,e){return Zp(t,r.sliceStrings[e])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(r){var t=this,e=r.xPositions.length;return r.xPositions.map(function(n,i){var a=i==e-1,o=i==0;return function(s,u,h,d,_,g){var w=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"none";if(g){var C=m0(s,h,d);return wi(C,"percentage-bar",null,w)}if(_){var k=g0(s,h,d);return wi(k,"percentage-bar",null,w)}var E={className:"percentage-bar",x:s,y:u,width:h,height:d,fill:w};return Xt("rect",E)}(n,0,r.widths[i],t.constants.barHeight,o,a,r.colors[i])})},animateElements:function(r){if(r)return[]}},yAxis:{layerClass:"y axis",makeElements:function(r){var t=this;return r.positions.map(function(e,n){return function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Yn(i)||(i=0),s.pos||(s.pos="left"),s.offset||(s.offset=0),s.mode||(s.mode="span"),s.stroke||(s.stroke="#E2E6E9"),s.className||(s.className="");var u=-6,h=s.mode==="span"?o+6:0;return s.mode==="tick"&&s.pos==="right"&&(u=o+6,h=o),u+=s.offset,h+=s.offset,typeof a=="number"&&(a=lh(a)),Kp(i,a,u,h,{className:s.className,lineType:s.lineType,shortenNumbers:s.shortenNumbers})}(e,r.labels[n],t.constants.width,{mode:t.constants.mode,pos:t.constants.pos,shortenNumbers:t.constants.shortenNumbers})})},animateElements:function(r){var t=r.positions,e=r.labels,n=this.oldData.positions,i=this.oldData.labels,a=Sr(Vr(n,t),2);n=a[0],t=a[1];var o=Sr(Vr(i,e),2);return i=o[0],e=o[1],this.render({positions:n,labels:e}),this.store.map(function(s,u){return Jp(s,t[u],n[u])})}},xAxis:{layerClass:"x axis",makeElements:function(r){var t=this;return r.positions.map(function(e,n){return function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Yn(i)||(i=0),s.pos||(s.pos="bottom"),s.offset||(s.offset=0),s.mode||(s.mode="span"),s.className||(s.className="");var u=o+6,h=s.mode==="span"?-6:o;return s.mode==="tick"&&s.pos==="top"&&(u=-6,h=0),_0(i,a,u,h,{className:s.className,lineType:s.lineType})}(e,r.calcLabels[n],t.constants.height,{mode:t.constants.mode,pos:t.constants.pos})})},animateElements:function(r){var t=r.positions,e=r.calcLabels,n=this.oldData.positions,i=this.oldData.calcLabels,a=Sr(Vr(n,t),2);n=a[0],t=a[1];var o=Sr(Vr(i,e),2);return i=o[0],e=o[1],this.render({positions:n,calcLabels:e}),this.store.map(function(s,u){return function(h,d,_){return sa(h,[_,0],[d,0],350)}(s,t[u],n[u])})}},yMarkers:{layerClass:"y-markers",makeElements:function(r){var t=this;return r.map(function(e){return function(n,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Yn(n)||(n=0),o.labelPos||(o.labelPos="right"),o.lineType||(o.lineType="dashed");var s=o.labelPos==="left"?4:a-qp(i,5)-4,u=Xt("text",{className:"chart-label",x:s,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:i+""}),h=Kp(n,"",0,a,{stroke:o.stroke||"#E2E6E9",className:o.className||"",lineType:o.lineType});return h.appendChild(u),h}(e.position,e.label,t.constants.width,{labelPos:e.options.labelPos,stroke:e.options.stroke,mode:"span",lineType:e.options.lineType})})},animateElements:function(r){var t=Sr(Vr(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(o){return o.position}),n=r.map(function(o){return o.label}),i=r.map(function(o){return o.options}),a=this.oldData.map(function(o){return o.position});return this.render(a.map(function(o,s){return{position:a[s],label:n[s],options:i[s]}})),this.store.map(function(o,s){return Jp(o,e[s],a[s])})}},yRegions:{layerClass:"y-regions",makeElements:function(r){var t=this;return r.map(function(e){return function(n,i,a,o){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},u=n-i,h=Xt("rect",{className:"bar mini",styles:{fill:s.fill||"rgba(228, 234, 239, 0.49)",stroke:s.stroke||"#E2E6E9","stroke-dasharray":"".concat(a,", ").concat(u)},x:0,y:0,width:a,height:u});s.labelPos||(s.labelPos="right");var d=s.labelPos==="left"?4:a-qp(o+"",4.5)-4,_=Xt("text",{className:"chart-label",x:d,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:o+""}),g=Xt("g",{transform:"translate(0, ".concat(i,")")});return g.appendChild(h),g.appendChild(_),g}(e.startPos,e.endPos,t.constants.width,e.label,{labelPos:e.options.labelPos,stroke:e.options.stroke,fill:e.options.fill})})},animateElements:function(r){var t=Sr(Vr(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(h){return h.endPos}),n=r.map(function(h){return h.label}),i=r.map(function(h){return h.startPos}),a=r.map(function(h){return h.options}),o=this.oldData.map(function(h){return h.endPos}),s=this.oldData.map(function(h){return h.startPos});this.render(o.map(function(h,d){return{startPos:s[d],endPos:o[d],label:n[d],options:a[d]}}));var u=[];return this.store.map(function(h,d){u=u.concat(function(_,g,w,C){var k=g-w,E=_.childNodes[0],O=E.getAttribute("width");return[[E,{height:k,"stroke-dasharray":"".concat(O,", ").concat(k)},350,"easein"],sa(_,[0,C],[0,w],350)]}(h,i[d],e[d],o[d]))}),u}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(r){var t=this,e=this.constants,n=e.index,i=e.colWidth,a=e.rowHeight,o=e.squareSize,s=e.radius,u=e.xTranslate,h=u,d=0;return this.serializedSubDomains=[],r.cols.map(function(_,g){g===1&&t.labels.push(ca("domain-name",h,-12,fh(n,!0).toUpperCase(),{fontSize:9})),_.map(function(w,C){if(w.fill){var k={"data-date":w.yyyyMmDd,"data-value":w.dataValue,"data-day":C},E=ch("day",h,d,o,s,w.fill,k);t.serializedSubDomains.push(E)}d+=a}),d=0,h+=i}),this.serializedSubDomains},animateElements:function(r){if(r)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;return this.unitType="bar",this.units=r.yPositions.map(function(e,n){return function(i,a,o,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,_=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},g=Vp(a,_.zeroLine),w=Sr(g,2),C=w[0],k=w[1];k-=d,C===0&&(C=_.minHeight,k-=_.minHeight),Yn(i)||(i=0),Yn(k)||(k=0),Yn(C,!0)||(C=0),Yn(o,!0)||(o=0);var E=Xt("rect",{className:"bar mini",style:"fill: ".concat(s),"data-point-index":h,x:i,y:k,width:o,height:C});if((u+="")||u.length){E.setAttribute("y",0),E.setAttribute("x",0);var O=Xt("text",{className:"data-point-value",x:o/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:u}),N=Xt("g",{"data-point-index":h,transform:"translate(".concat(i,", ").concat(k,")")});return N.appendChild(E),N.appendChild(O),N}return E}(r.xPositions[n],e,r.barWidth,t.color,r.labels[n],n,r.offsets[n],{zeroLine:r.zeroLine,barsWidth:r.barsWidth,minHeight:t.minHeight})}),this.units},animateElements:function(r){var t=r.xPositions,e=r.yPositions,n=r.offsets,i=r.labels,a=this.oldData.xPositions,o=this.oldData.yPositions,s=this.oldData.offsets,u=this.oldData.labels,h=Sr(Vr(a,t),2);a=h[0],t=h[1];var d=Sr(Vr(o,e),2);o=d[0],e=d[1];var _=Sr(Vr(s,n),2);s=_[0],n=_[1];var g=Sr(Vr(u,i),2);u=g[0],i=g[1],this.render({xPositions:a,yPositions:o,offsets:s,labels:i,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var w=[];return this.store.map(function(C,k){w=w.concat(function(E,O,N,m){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},S=Vp(N,b.zeroLine),A=Sr(S,2),I=A[0],T=A[1];if(T-=y,E.nodeName!=="rect"){var R=E.childNodes[0],B=[R,{width:m,height:I},350,"easein"],F=E.getAttribute("transform").split("(")[1].slice(0,-1),L=sa(E,F,[O,T],350);return[B,L]}return[[E,{width:m,height:I,x:O,y:T},350,"easein"]]}(C,t[k],e[k],r.barWidth,n[k],{zeroLine:r.zeroLine}))}),w}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;return this.unitType="dot",this.paths={},t.hideLine||(this.paths=function(e,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},s=n.map(function(C,k){return e[k]+","+C}),u=s.join("L");a.spline&&(u=Gp(e,n));var h=wi("M"+u,"line-graph-path",i);if(a.heatline){var d=Xp(o.svgDefs,i);h.style.stroke="url(#".concat(d,")")}var _={path:h};if(a.regionFill){var g=Xp(o.svgDefs,i,!0),w="M"+"".concat(e[0],",").concat(o.zeroLine,"L")+u+"L".concat(e.slice(-1)[0],",").concat(o.zeroLine);_.region=wi(w,"region-fill","none","url(#".concat(g,")"))}return _}(r.xPositions,r.yPositions,t.color,{heatline:t.heatline,regionFill:t.regionFill,spline:t.spline},{svgDefs:t.svgDefs,zeroLine:r.zeroLine})),this.units=[],t.showDots&&(this.units=r.yPositions.map(function(e,n){return function(i,a,o,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,d=Xt("circle",{style:"fill: ".concat(s),"data-point-index":h,cx:i,cy:a,r:o});if((u+="")||u.length){d.setAttribute("cy",0),d.setAttribute("cx",0);var _=Xt("text",{className:"data-point-value",x:0,y:0,dy:-5-o+"px","font-size":"10px","text-anchor":"middle",innerHTML:u}),g=Xt("g",{"data-point-index":h,transform:"translate(".concat(i,", ").concat(a,")")});return g.appendChild(d),g.appendChild(_),g}return d}(r.xPositions[n],e,r.radius,t.color,t.valuesOverPoints?r.values[n]:"",n)})),Object.values(this.paths).concat(this.units)},animateElements:function(r){var t=r.xPositions,e=r.yPositions,n=r.values,i=this.oldData.xPositions,a=this.oldData.yPositions,o=this.oldData.values,s=Sr(Vr(i,t),2);i=s[0],t=s[1];var u=Sr(Vr(a,e),2);a=u[0],e=u[1];var h=Sr(Vr(o,n),2);o=h[0],n=h[1],this.render({xPositions:i,yPositions:a,values:n,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var d=[];return Object.keys(this.paths).length&&(d=d.concat(function(_,g,w,C,k){var E=[],O=w.map(function(S,A){return g[A]+","+S}).join("L");k&&(O=Gp(g,w));var N=[_.path,{d:"M"+O},350,"easein"];if(E.push(N),_.region){var m="".concat(g[0],",").concat(C,"L"),y="L".concat(g.slice(-1)[0],", ").concat(C),b=[_.region,{d:"M"+m+O+y},350,"easein"];E.push(b)}return E}(this.paths,t,e,r.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(_,g){d=d.concat(function(w,C,k){if(w.nodeName!=="circle"){var E=w.getAttribute("transform").split("(")[1].slice(0,-1);return[sa(w,E,[C,k],350)]}return[[w,{cx:C,cy:k},350,"easein"]]}(_,t[g],e[g]))}),d}}};function ua(r,t,e){var n=Object.keys(rh).filter(function(a){return r.includes(a)}),i=rh[n[0]];return Object.assign(i,{constants:t,getData:e}),new A0(i)}var $0=function(r){xi(e,dh);var t=Ci(e);function e(n,i){var a;return dn(this,e),(a=t.call(this,n,i)).type="percentage",a.setup(),a}return wn(e,[{key:"setMeasures",value:function(n){var i=this.measures;this.barOptions=n.barOptions||{};var a=this.barOptions;a.height=a.height||16,i.paddings.right=30,i.paddings.top=60,i.paddings.bottom=0,i.legendHeight=80,i.baseHeight=8*a.height+hc(i)}},{key:"setupComponents",value:function(){var n=this.state,i=[["percentageBars",{barHeight:this.barOptions.height},function(){return{xPositions:n.xPositions,widths:n.widths,colors:this.colors}}.bind(this)]];this.components=new Map(i.map(function(a){var o=ua.apply(void 0,tn(a));return[a[0],o]}))}},{key:"calc",value:function(){var n=this;en(zr(e.prototype),"calc",this).call(this);var i=this.state;i.xPositions=[],i.widths=[];var a=0;i.sliceTotals.map(function(o){var s=n.width*o/i.grandTotal;i.widths.push(s),i.xPositions.push(a),a+=s})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var n=this,i=this.state;this.container.addEventListener("mousemove",function(a){var o=n.components.get("percentageBars").store,s=a.target;if(o.includes(s)){var u=o.indexOf(s),h=Io(n.container),d=Io(s),_=s.getAttribute("width")||s.getBoundingClientRect().width,g=d.left-h.left+parseInt(_)/2,w=d.top-h.top,C=(n.formattedLabels&&n.formattedLabels.length>0?n.formattedLabels[u]:n.state.labels[u])+": ",k=i.sliceTotals[u]/i.grandTotal;n.tip.setValues(g,w,{name:C,value:(100*k).toFixed(1)+"%"}),n.tip.showTip()}})}}]),e}(),nh=function(r){xi(e,dh);var t=Ci(e);function e(n,i){var a;return dn(this,e),(a=t.call(this,n,i)).initTimeout=0,a.init=1,a.setup(),a}return wn(e,[{key:"configure",value:function(n){en(zr(e.prototype),"configure",this).call(this,n),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=n.hoverRadio||.1,this.config.startAngle=n.startAngle||0,this.type="pie",this.sliceName="pieSlices",this.arcFunc=d0,this.shapeFunc=f0,this.clockWise=n.clockWise||!1}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x:this.center.y}},{key:"calc",value:function(){var n=this;en(zr(e.prototype),"calc",this).call(this);var i=this.state;this.radius=this.getRadius();var a=this.radius,o=this.clockWise,s=i.slicesProperties||[];i.sliceStrings=[],i.slicesProperties=[];var u=180-this.config.startAngle;i.sliceTotals.map(function(h,d){var _,g,w=u,C=h/i.grandTotal*360,k=C>180?1:0,E=o?-C:C,O=u+=E,N=ic(w,a),m=ic(O,a),y=n.init&&s[d];n.init?(_=y?y.startPosition:N,g=y?y.endPosition:N):(_=N,g=m);var b=C===360?n.shapeFunc(_,g,n.center,n.radius,o,k):n.arcFunc(_,g,n.center,n.radius,o,k);i.sliceStrings.push(b),i.slicesProperties.push({startPosition:N,endPosition:m,value:h,total:i.grandTotal,startAngle:w,endAngle:O,angle:E})}),this.init=0}},{key:"setupComponents",value:function(){var n=this.state,i=[["pieSlices",{},function(){return{sliceStrings:n.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(i.map(function(a){var o=ua.apply(void 0,tn(a));return[a[0],o]}))}},{key:"calTranslateByAngle",value:function(n){var i=this.radius,a=this.hoverRadio,o=ic(n.startAngle+n.angle/2,i);return"translate3d(".concat(o.x*a,"px,").concat(o.y*a,"px,0)")}},{key:"hoverSlice",value:function(n,i,a,o){if(n){var s=this.colors[i];if(a){Qp(n,this.calTranslateByAngle(this.state.slicesProperties[i]));var u=Io(this.svg),h=o.pageX-u.left+10,d=o.pageY-u.top-10,_=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[i]:this.state.labels[i])+": ",g=(100*this.state.sliceTotals[i]/this.state.grandTotal).toFixed(1);this.tip.setValues(h,d,{name:_,value:g+"%"}),this.tip.showTip()}else this.resetHover(n,s)}}},{key:"resetHover",value:function(n,i){Qp(n,"translate3d(0,0,0)"),this.tip.hideTip(),n.style.fill=i}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(n){var i=n.target,a=this.components.get(this.sliceName).store,o=this.curActiveSliceIndex,s=this.curActiveSlice;if(a.includes(i)){var u=a.indexOf(i);this.hoverSlice(s,o,!1),this.curActiveSlice=i,this.curActiveSliceIndex=u,this.hoverSlice(i,u,!0,n)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),e}();function la(r){if(r===0)return[0,0];if(isNaN(r))return{mantissa:-6755399441055744,exponent:972};var t=r>0?1:-1;if(!isFinite(r))return{mantissa:4503599627370496*t,exponent:972};r=Math.abs(r);var e=Math.floor(Math.log10(r));return[t*(r/Math.pow(10,e)),e]}function O0(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=Math.ceil(r),n=Math.floor(t),i=e-n,a=i,o=1;i>5&&(i%2!=0&&(i=++e-n),a=i/2,o=2),i<=2&&(o=i/(a=4)),i===0&&(a=5,o=1);for(var s=[],u=0;u<=a;u++)s.push(n+o*u);return s}function oa(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=la(r),n=Sr(e,2),i=n[0],a=n[1],o=t?t/Math.pow(10,a):0,s=O0(i=i.toFixed(6),o);return s=s.map(function(u){return u*Math.pow(10,a)})}function I0(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=Math.max.apply(Math,tn(r)),n=Math.min.apply(Math,tn(r)),i=[];function a(d,_){for(var g=oa(d),w=g[1]-g[0],C=0,k=1;C<_;k++)C+=w,g.unshift(-1*C);return g}if(e>=0&&n>=0)la(e)[1],i=t?oa(e,n):oa(e);else if(e>0&&n<0){var o=Math.abs(n);if(e>=o)la(e)[1],i=a(e,o);else{la(o)[1];var s=a(o,e);i=s.reverse().map(function(d){return-1*d})}}else if(e<=0&&n<=0){var u=Math.abs(n),h=Math.abs(e);la(u)[1],i=(i=t?oa(u,h):oa(u)).reverse().map(function(d){return-1*d})}return i}function P0(r){var t,e=hh(r);return r.indexOf(0)>=0?t=r.indexOf(0):r[0]>0?t=-1*r[0]/e:t=-1*r[r.length-1]/e+(r.length-1),t}function hh(r){return r[1]-r[0]}function R0(r){return r[r.length-1]-r[0]}function $o(r,t){return sh(t.zeroLine-r*t.scaleMultiplier)}var L0=function(r){xi(e,mc);var t=Ci(e);function e(n,i){var a;dn(this,e),(a=t.call(this,n,i)).type="heatmap",a.countLabel=i.countLabel||"";var o=["Sunday","Monday"],s=o.includes(i.startSubDomain)?i.startSubDomain:"Sunday";return a.startSubDomainIndex=o.indexOf(s),a.setup(),a}return wn(e,[{key:"setMeasures",value:function(n){var i=this.measures;this.discreteDomains=n.discreteDomains===0?0:1,i.paddings.top=36,i.paddings.bottom=0,i.legendHeight=24,i.baseHeight=84+hc(i);var a=this.data,o=this.discreteDomains?12:0;this.independentWidth=12*(sc(a.start,a.end)+o)+cc(i)}},{key:"updateWidth",value:function(){var n=this.discreteDomains?12:0,i=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=12*(i+n)+cc(this.measures)}},{key:"prepareData",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;if(n.start&&n.end&&n.start>n.end)throw new Error("Start date cannot be greater than end date.");if(n.start||(n.start=new Date,n.start.setFullYear(n.start.getFullYear()-1)),n.end||(n.end=new Date),n.dataPoints=n.dataPoints||{},parseInt(Object.keys(n.dataPoints)[0])>1e5){var i={};Object.keys(n.dataPoints).forEach(function(a){var o=new Date(1e3*a);i[oc(o)]=n.dataPoints[a]}),n.dataPoints=i}return n}},{key:"calc",value:function(){var n=this.state;n.start=Xn(this.data.start),n.end=Xn(this.data.end),n.firstWeekStart=Xn(n.start),n.noOfWeeks=sc(n.start,n.end),n.distribution=function(i,a){for(var o=Math.max.apply(Math,tn(i)),s=1/(a-1),u=[],h=0;h<a;h++){var d=o*(s*h);u.push(d)}return u}(Object.values(this.data.dataPoints),5),n.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var n=this,i=this.state,a=this.discreteDomains?0:1,o=i.domainConfigs.map(function(u,h){return["heatDomain",{index:u.index,colWidth:12,rowHeight:12,squareSize:10,radius:n.rawChartArgs.radius||0,xTranslate:12*i.domainConfigs.filter(function(d,_){return _<h}).map(function(d){return d.cols.length-a}).reduce(function(d,_){return d+_},0)},function(){return i.domainConfigs[h]}.bind(n)]});this.components=new Map(o.map(function(u,h){var d=ua.apply(void 0,tn(u));return[u[0]+"-"+h,d]}));var s=0;T0.forEach(function(u,h){if([1,3,5].includes(h)){var d=ca("subdomain-name",-6,s,u,{fontSize:10,dy:8,textAnchor:"end"});n.drawArea.appendChild(d)}s+=12})}},{key:"update",value:function(n){n||console.error("No data to update."),this.data=this.prepareData(n),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var n=this;this.container.addEventListener("mousemove",function(i){n.components.forEach(function(a){var o=a.store,s=i.target;if(o.includes(s)){var u=s.getAttribute("data-value"),h=s.getAttribute("data-date").split("-"),d=fh(parseInt(h[1])-1,!0),_=n.container.getBoundingClientRect(),g=s.getBoundingClientRect(),w=parseInt(i.target.getAttribute("width")),C=g.left-_.left+w/2,k=g.top-_.top,E=u+" "+n.countLabel,O=" on "+d+" "+h[0]+", "+h[2];n.tip.setValues(C,k,{name:O,value:E,valueFirst:1},[]),n.tip.showTip()}})})}},{key:"renderLegend",value:function(){var n=this;this.legendArea.textContent="";var i=0,a=this.rawChartArgs.radius||0,o=ca("subdomain-name",i,12,"Less",{fontSize:11,dy:9});i=30,this.legendArea.appendChild(o),this.colors.slice(0,5).map(function(u,h){var d=ch("heatmap-legend-unit",i+15*h,12,10,a,u);n.legendArea.appendChild(d)});var s=ca("subdomain-name",i+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(s)}},{key:"getDomains",value:function(){for(var n=this.state,i=[n.start.getMonth(),n.start.getFullYear()],a=i[0],o=i[1],s=[n.end.getMonth(),n.end.getFullYear()],u=s[0]-a+1+12*(s[1]-o),h=[],d=Xn(n.start),_=0;_<u;_++){var g=n.end;if(!E0(d,n.end)){var w=[d.getMonth(),d.getFullYear()];g=th(w[0],w[1])}h.push(this.getDomainConfig(d,g)),ki(g,1),d=g}return h}},{key:"getDomainConfig",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=[n.getMonth(),n.getFullYear()],o=a[0],s=a[1],u=ph(n),h={index:o,cols:[]};ki(i=Xn(i)||th(o,s),1);for(var d,_=sc(u,i),g=[],w=0;w<_;w++)d=this.getCol(u,o),g.push(d),ki(u=new Date(d[6].yyyyMmDd),1);return d[6].dataValue!==void 0&&(ki(u,1),g.push(this.getCol(u,o,!0))),h.cols=g,h}},{key:"getCol",value:function(n,i){for(var a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=this.state,s=Xn(n),u=[],h=0;h<7;h++,ki(s,1)){var d={},_=s>=o.start&&s<=o.end;a||s.getMonth()!==i||!_?d.yyyyMmDd=oc(s):d=this.getSubDomainConfig(s),u.push(d)}return u}},{key:"getSubDomainConfig",value:function(n){var i,a,o=oc(n),s=this.data.dataPoints[o];return{yyyyMmDd:o,dataValue:s||0,fill:this.colors[i=s,a=this.state.distribution,a.filter(function(u){return u<i}).length]}}}]),e}();function M0(r,t){r.labels=r.labels||[];var e=r.labels.length,n=r.datasets,i=new Array(e).fill(0);return n||(n=[{values:i}]),n.map(function(a){if(a.values){var o=a.values;o=(o=o.map(function(s){return isNaN(s)?0:s})).length>e?o.slice(0,e):uc(o,e-o.length,0)}else a.values=i;a.chartType||(a.chartType=t)}),r.yRegions&&r.yRegions.map(function(a){if(a.end<a.start){var o=[a.end,a.start];a.start=o[0],a.end=o[1]}}),r}function N0(r){var t=r.labels.length,e=new Array(t).fill(0),n={labels:r.labels.slice(0,-1),datasets:r.datasets.map(function(i){return{name:"",values:e.slice(0,-1),chartType:i.chartType}})};return r.yMarkers&&(n.yMarkers=[{value:0,label:""}]),r.yRegions&&(n.yRegions=[{start:0,end:0,label:""}]),n}var pc=function(r){xi(e,mc);var t=Ci(e);function e(n,i){var a;return dn(this,e),(a=t.call(this,n,i)).barOptions=i.barOptions||{},a.lineOptions=i.lineOptions||{},a.type=i.type||"line",a.init=1,a.setup(),a}return wn(e,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(n){en(zr(e.prototype),"configure",this).call(this,n),n.axisOptions=n.axisOptions||{},n.tooltipOptions=n.tooltipOptions||{},this.config.xAxisMode=n.axisOptions.xAxisMode||"span",this.config.yAxisMode=n.axisOptions.yAxisMode||"span",this.config.xIsSeries=n.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=n.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=n.tooltipOptions.formatTooltipX,this.config.formatTooltipY=n.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=n.valuesOverPoints,this.config.legendRowHeight=30}},{key:"prepareData",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return M0(n,this.type)}},{key:"prepareFirstData",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return N0(n)}},{key:"calc",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.calcXPositions(),n||this.calcYAxisParameters(this.getAllYValues(),this.type==="line"),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var n=this.state,i=this.data.labels;n.datasetLength=i.length,n.unitWidth=this.width/n.datasetLength,n.xOffset=n.unitWidth/2,n.xAxis={labels:i,positions:i.map(function(a,o){return sh(n.xOffset+o*n.unitWidth)})}}},{key:"calcYAxisParameters",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"false",a=I0(n,i),o=this.height/R0(a),s=hh(a)*o,u=this.height-P0(a)*s;this.state.yAxis={labels:a,positions:a.map(function(h){return u-h*o}),scaleMultiplier:o,zeroLine:u},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var n=this.state,i=function(a){return a.map(function(o){return $o(o,n.yAxis)})};n.datasets=this.data.datasets.map(function(a,o){var s=a.values,u=a.cumulativeYs||[];return{name:a.name&&a.name.replace(/<|>|&/g,function(h){return h=="&"?"&amp;":h=="<"?"&lt;":"&gt;"}),index:o,chartType:a.chartType,values:s,yPositions:i(s),cumulativeYs:u,cumulativeYPos:i(u)}})}},{key:"calcYExtremes",value:function(){var n=this.state;this.barOptions.stacked?n.yExtremes=n.datasets[n.datasets.length-1].cumulativeYPos:(n.yExtremes=new Array(n.datasetLength).fill(9999),n.datasets.map(function(i){i.yPositions.map(function(a,o){a<n.yExtremes[o]&&(n.yExtremes[o]=a)})}))}},{key:"calcYRegions",value:function(){var n=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(i){return i.position=$o(i.value,n.yAxis),i.options||(i.options={}),i})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(i){return i.startPos=$o(i.start,n.yAxis),i.endPos=$o(i.end,n.yAxis),i.options||(i.options={}),i}))}},{key:"getAllYValues",value:function(){var n,i=this,a="values";if(this.barOptions.stacked){a="cumulativeYs";var o=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(function(u,h){var d=i.data.datasets[h].values;u[a]=o=o.map(function(_,g){return _+d[g]})})}var s=this.data.datasets.map(function(u){return u[a]});return this.data.yMarkers&&s.push(this.data.yMarkers.map(function(u){return u.value})),this.data.yRegions&&this.data.yRegions.map(function(u){s.push([u.end,u.start])}),(n=[]).concat.apply(n,tn(s))}},{key:"setupComponents",value:function(){var n=this,i=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var _=this.state;return _.xAxis.calcLabels=function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],C=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],k=g/w.length*.6;k<=0&&(k=1);var E,O=k/7;if(C){var N=Math.max.apply(Math,tn(w.map(function(y){return y.length})));E=Math.ceil(N/O)}var m=w.map(function(y,b){return(y+="").length>O&&(C?b%E!=0&&b!==w.length-1&&(y=""):y=O-3>0?y.slice(0,O-3)+" ...":y.slice(0,O)+".."),y});return m}(this.width,_.xAxis.labels,this.config.xIsSeries),_.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],a=this.state.datasets.filter(function(_){return _.chartType==="bar"}),o=this.state.datasets.filter(function(_){return _.chartType==="line"}),s=a.map(function(_){var g=_.index;return["barGraph-"+_.index,{index:g,color:n.colors[g],stacked:n.barOptions.stacked,valuesOverPoints:n.config.valuesOverPoints,minHeight:0*n.height},function(){var w=this.state,C=w.datasets[g],k=this.barOptions.stacked,E=this.barOptions.spaceRatio||.5,O=w.unitWidth*(1-E),N=O/(k?1:a.length),m=w.xAxis.positions.map(function(S){return S-O/2});k||(m=m.map(function(S){return S+N*g}));var y=new Array(w.datasetLength).fill("");this.config.valuesOverPoints&&(y=k&&C.index===w.datasets.length-1?C.cumulativeYs:C.values);var b=new Array(w.datasetLength).fill(0);return k&&(b=C.yPositions.map(function(S,A){return S-C.cumulativeYPos[A]})),{xPositions:m,yPositions:C.yPositions,offsets:b,labels:y,zeroLine:w.yAxis.zeroLine,barsWidth:O,barWidth:N}}.bind(n)]}),u=o.map(function(_){var g=_.index;return["lineGraph-"+_.index,{index:g,color:n.colors[g],svgDefs:n.svgDefs,heatline:n.lineOptions.heatline,regionFill:n.lineOptions.regionFill,spline:n.lineOptions.spline,showDots:n.lineOptions.showDots,hideLine:n.lineOptions.hideLine,valuesOverPoints:n.config.valuesOverPoints},function(){var w=this.state,C=w.datasets[g],k=w.yAxis.positions[0]<w.yAxis.zeroLine?w.yAxis.positions[0]:w.yAxis.zeroLine;return{xPositions:w.xAxis.positions,yPositions:C.yPositions,values:C.values,zeroLine:k,radius:this.lineOptions.dotSize||4}}.bind(n)]}),h=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];i=i.concat(s,u,h);var d=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(i.filter(function(_){return!d.includes(_[0])||n.state[_[0]]}).map(function(_){var g=ua.apply(void 0,tn(_));return(_[0].includes("lineGraph")||_[0].includes("barGraph"))&&n.dataUnitComponents.push(g),[_[0],g]}))}},{key:"makeDataByIndex",value:function(){var n=this;this.dataByIndex={};var i=this.state,a=this.config.formatTooltipX,o=this.config.formatTooltipY;i.xAxis.labels.map(function(s,u){var h=n.state.datasets.map(function(d,_){var g=d.values[u];return{title:d.name,value:g,yPos:d.yPositions[u],color:n.colors[_],formatted:o?o(g):g}});n.dataByIndex[u]={label:s,formattedLabel:a?a(s):s,xPos:i.xAxis.positions[u],values:h,yExtreme:i.yExtremes[u]}})}},{key:"bindTooltip",value:function(){var n=this;this.container.addEventListener("mousemove",function(i){var a=n.measures,o=Io(n.container),s=i.pageX-o.left-Oo(a),u=i.pageY-o.top;u<n.height+Po(a)&&u>Po(a)?n.mapTooltipXPosition(s):n.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(n){var i=this.state;if(i.yExtremes){var a=function(s,u){var h=arguments.length>2&&arguments[2]!==void 0&&arguments[2],d=u.reduce(function(_,g){return Math.abs(g-s)<Math.abs(_-s)?g:_},[]);return h?u.indexOf(d):d}(n,i.xAxis.positions,!0);if(a>=0){var o=this.dataByIndex[a];this.tip.setValues(o.xPos+this.tip.offset.x,o.yExtreme+this.tip.offset.y,{name:o.formattedLabel,value:""},o.values,a),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var n=this.data;n.datasets.length>1&&en(zr(e.prototype),"renderLegend",this).call(this,n.datasets)}},{key:"makeLegend",value:function(n,i,a,o){return uh(a,o+5,12,3,this.colors[i],n.name,null,8.75,this.config.truncateLegends)}},{key:"makeOverlay",value:function(){var n=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach(function(i){var a=i.overlay;a.parentNode.removeChild(a)}),this.overlayGuides=this.dataUnitComponents.map(function(i){return{type:i.unitType,overlay:void 0,units:i.units}}),this.state.currentIndex===void 0&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(i){var a=i.units[n.state.currentIndex];i.overlay=v0[i.type](a),n.drawArea.appendChild(i.overlay)}))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(n){var i=n.overlay;i.parentNode.removeChild(i)})}},{key:"bindOverlay",value:function(){var n=this;this.parent.addEventListener("data-select",function(){n.updateOverlay()})}},{key:"bindUnits",value:function(){var n=this;this.dataUnitComponents.map(function(i){i.units.map(function(a){a.addEventListener("click",function(){var o=a.getAttribute("data-point-index");n.setCurrentDataPoint(o)})})}),this.tip.container.addEventListener("click",function(){var i=n.tip.container.getAttribute("data-point-index");n.setCurrentDataPoint(i)})}},{key:"updateOverlay",value:function(){var n=this;this.overlayGuides.map(function(i){var a=i.units[n.state.currentIndex];b0[i.type](a,i.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.currentIndex,i=this.state,a={index:n,label:i.xAxis.labels[n],values:i.datasets.map(function(o){return o.values[n]})};return a}},{key:"setCurrentDataPoint",value:function(n){var i=this.state;(n=parseInt(n))<0&&(n=0),n>=i.xAxis.labels.length&&(n=i.xAxis.labels.length-1),n!==i.currentIndex&&(i.currentIndex=n,function(a,o,s){var u=document.createEvent("HTMLEvents");for(var h in u.initEvent(o,!0,!0),s)u[h]=s[h];a.dispatchEvent(u)}(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.state.datasetLength;en(zr(e.prototype),"addDataPoint",this).call(this,n,i,a),this.data.labels.splice(a,0,n),this.data.datasets.map(function(o,s){o.values.splice(a,0,i[s])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(en(zr(e.prototype),"removeDataPoint",this).call(this,n),this.data.labels.splice(n,1),this.data.datasets.map(function(i){i.values.splice(n,1)}),this.update(this.data))}},{key:"updateDataset",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.data.datasets[i].values=n,this.update(this.data)}},{key:"updateDatasets",value:function(n){this.data.datasets.map(function(i,a){n[a]&&(i.values=n[a])}),this.update(this.data)}}]),e}(),ih={bar:pc,line:pc,percentage:$0,heatmap:L0,pie:nh,donut:function(r){xi(e,nh);var t=Ci(e);function e(n,i){return dn(this,e),t.call(this,n,i)}return wn(e,[{key:"configure",value:function(n){en(zr(e.prototype),"configure",this).call(this,n),this.type="donut",this.sliceName="donutSlices",this.arcFunc=p0,this.shapeFunc=h0,this.strokeWidth=n.strokeWidth||30}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2}},{key:"resetHover",value:function(n,i){transform(n,"translate3d(0,0,0)"),this.tip.hideTip(),n.style.stroke=i}},{key:"setupComponents",value:function(){var n=this.state,i=[[this.sliceName,{},function(){return{sliceStrings:n.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(i.map(function(a){var o=ua.apply(void 0,tn(a));return[a[0],o]}))}}]),e}()},mh=function r(t,e){return dn(this,r),function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"line",i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return n==="axis-mixed"?(a.type="line",new pc(i,a)):ih[n]?new ih[n](i,a):void console.error("Undefined chart type: "+n)}(e.type,t,e)};frappe.provide("frappe.ui");frappe.Chart=mh;frappe.ui.RealtimeChart=class extends frappe.Chart{constructor(t,e,n=8,i){super(t,i);i.data.datasets[0].values.length>n&&frappe.throw(__("Length of passed data array is greater than value of maximum allowed label points!")),this.currentSize=i.data.datasets[0].values.length,this.socketEvent=e,this.maxLabelPoints=n,this.start_updating=function(){frappe.realtime.on(this.socketEvent,a=>{this.update_chart(a.label,a.points)})},this.stop_updating=function(){frappe.realtime.off(this.socketEvent)},this.update_chart=function(a,o){this.currentSize>=this.maxLabelPoints?this.removeDataPoint(0):this.currentSize++,this.addDataPoint(a,o)}}};var Fh=jr(jh());frappe.DataTable=Fh.default;var Hh=jr(zh());frappe.Driver=Hh.default;var Wh=jr(Uh());frappe.Plyr=Wh.default;frappe.provide("frappe.barcode");frappe.barcode.scan_barcode=function(){return new Promise((r,t)=>{window.cordova&&window.cordova.plugins&&window.cordova.plugins.barcodeScanner?window.cordova.plugins.barcodeScanner.scan(e=>{e.cancelled||r(e.text)},t):frappe.require("barcode_scanner.bundle.js",()=>{frappe.barcode.get_barcode().then(e=>{r(e)})})})};frappe.provide("frappe.ui");frappe.ui.Scanner=class{constructor(t){this.dialog=null,this.handler=null,this.options=t,this.is_alive=!1,"multiple"in this.options||(this.options.multiple=!1),t.container&&(this.$scan_area=$(t.container),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area)),t.dialog&&(this.dialog=this.make_dialog(),this.dialog.show())}scan(){this.load_lib().then(()=>this.start_scan())}start_scan(){this.handler||(this.handler=new Html5Qrcode(this.scan_area_id)),this.handler.start({facingMode:"environment"},{fps:10,qrbox:250},(t,e)=>{if(this.options.on_scan)try{this.options.on_scan(e)}catch(n){console.error(n)}this.options.multiple||(this.stop_scan(),this.hide_dialog())},t=>{}).catch(t=>{this.is_alive=!1,this.hide_dialog(),console.error(t)}),this.is_alive=!0}stop_scan(){this.handler&&this.is_alive&&this.handler.stop().then(()=>{this.is_alive=!1,this.$scan_area.empty(),this.hide_dialog()})}make_dialog(){let t=new frappe.ui.Dialog({title:__("Scan QRCode"),fields:[{fieldtype:"HTML",fieldname:"scan_area"}],on_page_show:()=>{this.$scan_area=t.get_field("scan_area").$wrapper,this.$scan_area.addClass("barcode-scanner"),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area),this.scan()},on_hide:()=>{this.stop_scan()}});return t}hide_dialog(){this.dialog&&this.dialog.hide()}load_lib(){return frappe.require("/assets/frappe/node_modules/html5-qrcode/dist/html5-qrcode.min.js")}};})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! For license information please see editor.js.LICENSE.txt */
/*! showdown v 1.9.1 - 02-11-2019 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
//# sourceMappingURL=desk.bundle.ZWA4HG2O.js.map
